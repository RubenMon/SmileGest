import{l as D,m as _,p as G,v as k,w as R,y as V,z as q}from"./chunk-AYN2OAEG.js";import{E as x,G as a,I as N,J as F,K as I,M as u,O,P as S,Q as E,T as P}from"./chunk-KU5NV46G.js";import{Aa as b,Bc as y,Ja as p,P as f,Pb as C,Sa as i,Ta as e,Ua as l,Yb as h,Za as g,d as m,ib as n,kb as M,qa as s,tc as v,xc as U,yc as d,zc as w}from"./chunk-CZGCKYO5.js";var z=class c{firestore=f(v);route=f(h);form=new I({dni:new u("",a.required),email:new u("",[a.required,a.email]),nombreCompleto:new u("",a.required)});editMode=!1;ngOnInit(){let t=this.route.snapshot.paramMap.get("dni");t&&t!=="nuevo"&&this.loadUser(t)}loadUser(t){return m(this,null,function*(){let o=d(this.firestore,"users",t),r=yield w(o);r.exists()?(this.form.setValue(r.data()),this.editMode=!0):alert("Usuario no encontrado.")})}saveUser(){return m(this,null,function*(){if(this.form.invalid)return;let t=this.form.value,o=d(this.firestore,"users",t.dni);yield y(o,t),this.editMode=!0,alert(this.editMode?"Usuario actualizado.":"Usuario creado.")})}deleteUser(){return m(this,null,function*(){let t=this.form.get("dni")?.value;t&&(yield U(d(this.firestore,"users",t)),this.form.reset(),this.editMode=!1,alert("Usuario eliminado."))})}newUser(){this.form.reset(),this.editMode=!1}static \u0275fac=function(o){return new(o||c)};static \u0275cmp=b({type:c,selectors:[["app-usuario-datos"]],decls:18,vars:3,consts:[[1,"user-container"],[3,"ngSubmit","formGroup"],["appearance","fill"],["matInput","","formControlName","dni",3,"readonly"],["matInput","","formControlName","email"],["matInput","","formControlName","nombreCompleto"],["mat-flat-button","","type","submit"]],template:function(o,r){o&1&&(i(0,"div",0)(1,"h2"),n(2,'"Editar Usuario"'),e(),i(3,"form",1),g("ngSubmit",function(){return r.saveUser()}),i(4,"mat-form-field",2)(5,"mat-label"),n(6,"DNI"),e(),l(7,"input",3),e(),i(8,"mat-form-field",2)(9,"mat-label"),n(10,"Email"),e(),l(11,"input",4),e(),i(12,"mat-form-field",2)(13,"mat-label"),n(14,"Nombre Completo"),e(),l(15,"input",5),e(),i(16,"button",6),n(17),e()()()),o&2&&(s(3),p("formGroup",r.form),s(4),p("readonly",r.editMode),s(10),M(" ",r.editMode?"Guardar Cambios":"Crear Usuario"," "))},dependencies:[P,O,x,N,F,S,E,C,R,k,G,q,V,_,D],styles:[".user-container[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:12px;box-shadow:0 4px 10px #0000001a;text-align:center;width:350px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.user-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#0086b3;margin-bottom:1.5rem}mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}button[mat-flat-button][_ngcontent-%COMP%]{width:100%;padding:.8rem;font-size:1rem;border-radius:8px;background-color:#0086b3;color:#fff;margin-top:.5rem}button[mat-flat-button][_ngcontent-%COMP%]:hover{background-color:#006f91}button[color=warn][_ngcontent-%COMP%]{background-color:#e53935}button[color=warn][_ngcontent-%COMP%]:hover{background-color:#c62828}"]})};export{z as UsuarioDatosComponent};
