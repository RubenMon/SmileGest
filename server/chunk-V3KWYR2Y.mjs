import './polyfills.server.mjs';
import{a as V,b as De,c as Me,d as Q0,e as A,f as Y0,h as T}from"./chunk-S6KH3LOX.mjs";var Ae=A(On=>{"use strict";Object.defineProperty(On,"__esModule",{value:!0});On.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=On.DEFAULT_MAX_SEND_MESSAGE_LENGTH=On.Propagate=On.LogVerbosity=On.Status=void 0;var P1=function(n){return n[n.OK=0]="OK",n[n.CANCELLED=1]="CANCELLED",n[n.UNKNOWN=2]="UNKNOWN",n[n.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",n[n.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",n[n.NOT_FOUND=5]="NOT_FOUND",n[n.ALREADY_EXISTS=6]="ALREADY_EXISTS",n[n.PERMISSION_DENIED=7]="PERMISSION_DENIED",n[n.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",n[n.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",n[n.ABORTED=10]="ABORTED",n[n.OUT_OF_RANGE=11]="OUT_OF_RANGE",n[n.UNIMPLEMENTED=12]="UNIMPLEMENTED",n[n.INTERNAL=13]="INTERNAL",n[n.UNAVAILABLE=14]="UNAVAILABLE",n[n.DATA_LOSS=15]="DATA_LOSS",n[n.UNAUTHENTICATED=16]="UNAUTHENTICATED",n}(P1||(On.Status=P1={})),L1=function(n){return n[n.DEBUG=0]="DEBUG",n[n.INFO=1]="INFO",n[n.ERROR=2]="ERROR",n[n.NONE=3]="NONE",n}(L1||(On.LogVerbosity=L1={})),F1=function(n){return n[n.DEADLINE=1]="DEADLINE",n[n.CENSUS_STATS_CONTEXT=2]="CENSUS_STATS_CONTEXT",n[n.CENSUS_TRACING_CONTEXT=4]="CENSUS_TRACING_CONTEXT",n[n.CANCELLATION=8]="CANCELLATION",n[n.DEFAULTS=65535]="DEFAULTS",n}(F1||(On.Propagate=F1={}));On.DEFAULT_MAX_SEND_MESSAGE_LENGTH=-1;On.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=4*1024*1024});var m_=A((Ube,QQ)=>{QQ.exports={name:"@grpc/grpc-js",version:"1.9.15",description:"gRPC Library for Node - pure JS implementation",homepage:"https://grpc.io/",repository:"https://github.com/grpc/grpc-node/tree/master/packages/grpc-js",main:"build/src/index.js",engines:{node:"^8.13.0 || >=10.10.0"},keywords:[],author:{name:"Google Inc."},types:"build/src/index.d.ts",license:"Apache-2.0",devDependencies:{"@types/gulp":"^4.0.6","@types/gulp-mocha":"0.0.32","@types/lodash":"^4.14.186","@types/mocha":"^5.2.6","@types/ncp":"^2.0.1","@types/pify":"^3.0.2","@types/semver":"^7.3.9","@typescript-eslint/eslint-plugin":"^5.59.11","@typescript-eslint/parser":"^5.59.11","@typescript-eslint/typescript-estree":"^5.59.11","clang-format":"^1.0.55",eslint:"^8.42.0","eslint-config-prettier":"^8.8.0","eslint-plugin-node":"^11.1.0","eslint-plugin-prettier":"^4.2.1",execa:"^2.0.3",gulp:"^4.0.2","gulp-mocha":"^6.0.0",lodash:"^4.17.4",madge:"^5.0.1","mocha-jenkins-reporter":"^0.4.1",ncp:"^2.0.0",pify:"^4.0.1",prettier:"^2.8.8",rimraf:"^3.0.2",semver:"^7.3.5","ts-node":"^10.9.1",typescript:"^5.1.3"},contributors:[{name:"Google Inc."}],scripts:{build:"npm run compile",clean:"rimraf ./build",compile:"tsc -p .",format:'clang-format -i -style="{Language: JavaScript, BasedOnStyle: Google, ColumnLimit: 80}" src/*.ts test/*.ts',lint:"eslint src/*.ts test/*.ts",prepare:"npm run generate-types && npm run compile",test:"gulp test",check:"npm run lint",fix:"eslint --fix src/*.ts test/*.ts",pretest:"npm run generate-types && npm run generate-test-types && npm run compile",posttest:"npm run check && madge -c ./build/src","generate-types":"proto-loader-gen-types --keepCase --longs String --enums String --defaults --oneofs --includeComments --includeDirs proto/ --include-dirs test/fixtures/ -O src/generated/ --grpcLib ../index channelz.proto","generate-test-types":"proto-loader-gen-types --keepCase --longs String --enums String --defaults --oneofs --includeComments --include-dirs test/fixtures/ -O test/generated/ --grpcLib ../../src/index test_service.proto"},dependencies:{"@grpc/proto-loader":"^0.7.8","@types/node":">=12.12.47"},files:["src/**/*.ts","build/src/**/*.{js,d.ts,js.map}","proto/*.proto","LICENSE","deps/envoy-api/envoy/api/v2/**/*.proto","deps/envoy-api/envoy/config/**/*.proto","deps/envoy-api/envoy/service/**/*.proto","deps/envoy-api/envoy/type/**/*.proto","deps/udpa/udpa/**/*.proto","deps/googleapis/google/api/*.proto","deps/googleapis/google/rpc/*.proto","deps/protoc-gen-validate/validate/**/*.proto"]}});var et=A(Xt=>{"use strict";var y_,v_,E_,w_;Object.defineProperty(Xt,"__esModule",{value:!0});Xt.isTracerEnabled=Xt.trace=Xt.log=Xt.setLoggerVerbosity=Xt.setLogger=Xt.getLogger=void 0;var ss=Ae(),YQ=Me("process"),ZQ=m_().version,JQ={error:(n,...e)=>{console.error("E "+n,...e)},info:(n,...e)=>{console.error("I "+n,...e)},debug:(n,...e)=>{console.error("D "+n,...e)}},Eo=JQ,ec=ss.LogVerbosity.ERROR,XQ=(v_=(y_=process.env.GRPC_NODE_VERBOSITY)!==null&&y_!==void 0?y_:process.env.GRPC_VERBOSITY)!==null&&v_!==void 0?v_:"";switch(XQ.toUpperCase()){case"DEBUG":ec=ss.LogVerbosity.DEBUG;break;case"INFO":ec=ss.LogVerbosity.INFO;break;case"ERROR":ec=ss.LogVerbosity.ERROR;break;case"NONE":ec=ss.LogVerbosity.NONE;break;default:}var eY=()=>Eo;Xt.getLogger=eY;var tY=n=>{Eo=n};Xt.setLogger=tY;var nY=n=>{ec=n};Xt.setLoggerVerbosity=nY;var rY=(n,...e)=>{let t;if(n>=ec){switch(n){case ss.LogVerbosity.DEBUG:t=Eo.debug;break;case ss.LogVerbosity.INFO:t=Eo.info;break;case ss.LogVerbosity.ERROR:t=Eo.error;break}t||(t=Eo.error),t&&t.bind(Eo)(...e)}};Xt.log=rY;var iY=(w_=(E_=process.env.GRPC_NODE_TRACE)!==null&&E_!==void 0?E_:process.env.GRPC_TRACE)!==null&&w_!==void 0?w_:"",T_=new Set,B1=new Set;for(let n of iY.split(","))n.startsWith("-")?B1.add(n.substring(1)):T_.add(n);var sY=T_.has("all");function oY(n,e,t){U1(e)&&(0,Xt.log)(n,new Date().toISOString()+" | v"+ZQ+" "+YQ.pid+" | "+e+" | "+t)}Xt.trace=oY;function U1(n){return!B1.has(n)&&(sY||T_.has(n))}Xt.isTracerEnabled=U1});var Gp=A(tc=>{"use strict";Object.defineProperty(tc,"__esModule",{value:!0});tc.getErrorCode=tc.getErrorMessage=void 0;function aY(n){return n instanceof Error?n.message:String(n)}tc.getErrorMessage=aY;function cY(n){return typeof n=="object"&&n!==null&&"code"in n&&typeof n.code=="number"?n.code:null}tc.getErrorCode=cY});var dn=A(Kp=>{"use strict";Object.defineProperty(Kp,"__esModule",{value:!0});Kp.Metadata=void 0;var lY=et(),uY=Ae(),dY=Gp(),fY=/^[0-9a-z_.-]+$/,hY=/^[ -~]*$/;function pY(n){return fY.test(n)}function gY(n){return hY.test(n)}function j1(n){return n.endsWith("-bin")}function mY(n){return!n.startsWith("grpc-")}function Wp(n){return n.toLowerCase()}function V1(n,e){if(!pY(n))throw new Error('Metadata key "'+n+'" contains illegal characters');if(e!=null)if(j1(n)){if(!Buffer.isBuffer(e))throw new Error("keys that end with '-bin' must have Buffer values")}else{if(Buffer.isBuffer(e))throw new Error("keys that don't end with '-bin' must have String values");if(!gY(e))throw new Error('Metadata string value "'+e+'" contains illegal characters')}}var b_=class n{constructor(e={}){this.internalRepr=new Map,this.options=e}set(e,t){e=Wp(e),V1(e,t),this.internalRepr.set(e,[t])}add(e,t){e=Wp(e),V1(e,t);let r=this.internalRepr.get(e);r===void 0?this.internalRepr.set(e,[t]):r.push(t)}remove(e){e=Wp(e),this.internalRepr.delete(e)}get(e){return e=Wp(e),this.internalRepr.get(e)||[]}getMap(){let e={};for(let[t,r]of this.internalRepr)if(r.length>0){let i=r[0];e[t]=Buffer.isBuffer(i)?Buffer.from(i):i}return e}clone(){let e=new n(this.options),t=e.internalRepr;for(let[r,i]of this.internalRepr){let s=i.map(o=>Buffer.isBuffer(o)?Buffer.from(o):o);t.set(r,s)}return e}merge(e){for(let[t,r]of e.internalRepr){let i=(this.internalRepr.get(t)||[]).concat(r);this.internalRepr.set(t,i)}}setOptions(e){this.options=e}getOptions(){return this.options}toHttp2Headers(){let e={};for(let[t,r]of this.internalRepr)e[t]=r.map(yY);return e}toJSON(){let e={};for(let[t,r]of this.internalRepr)e[t]=r;return e}static fromHttp2Headers(e){let t=new n;for(let r of Object.keys(e)){if(r.charAt(0)===":")continue;let i=e[r];try{j1(r)?Array.isArray(i)?i.forEach(s=>{t.add(r,Buffer.from(s,"base64"))}):i!==void 0&&(mY(r)?i.split(",").forEach(s=>{t.add(r,Buffer.from(s.trim(),"base64"))}):t.add(r,Buffer.from(i,"base64"))):Array.isArray(i)?i.forEach(s=>{t.add(r,s)}):i!==void 0&&t.add(r,i)}catch(s){let o=`Failed to add metadata entry ${r}: ${i}. ${(0,dY.getErrorMessage)(s)}. For more information see https://github.com/grpc/grpc-node/issues/1173`;(0,lY.log)(uY.LogVerbosity.ERROR,o)}}return t}};Kp.Metadata=b_;var yY=n=>Buffer.isBuffer(n)?n.toString("base64"):n});var D_=A(Qp=>{"use strict";Object.defineProperty(Qp,"__esModule",{value:!0});Qp.CallCredentials=void 0;var I_=dn();function vY(n){return"getRequestHeaders"in n&&typeof n.getRequestHeaders=="function"}var nc=class n{static createFromMetadataGenerator(e){return new S_(e)}static createFromGoogleCredential(e){return n.createFromMetadataGenerator((t,r)=>{let i;vY(e)?i=e.getRequestHeaders(t.service_url):i=new Promise((s,o)=>{e.getRequestMetadata(t.service_url,(a,c)=>{if(a){o(a);return}if(!c){o(new Error("Headers not set by metadata plugin"));return}s(c)})}),i.then(s=>{let o=new I_.Metadata;for(let a of Object.keys(s))o.add(a,s[a]);r(null,o)},s=>{r(s)})})}static createEmpty(){return new C_}};Qp.CallCredentials=nc;var __=class n extends nc{constructor(e){super(),this.creds=e}generateMetadata(e){return T(this,null,function*(){let t=new I_.Metadata,r=yield Promise.all(this.creds.map(i=>i.generateMetadata(e)));for(let i of r)t.merge(i);return t})}compose(e){return new n(this.creds.concat([e]))}_equals(e){return this===e?!0:e instanceof n?this.creds.every((t,r)=>t._equals(e.creds[r])):!1}},S_=class n extends nc{constructor(e){super(),this.metadataGenerator=e}generateMetadata(e){return new Promise((t,r)=>{this.metadataGenerator(e,(i,s)=>{s!==void 0?t(s):r(i)})})}compose(e){return new __([this,e])}_equals(e){return this===e?!0:e instanceof n?this.metadataGenerator===e.metadataGenerator:!1}},C_=class n extends nc{generateMetadata(e){return Promise.resolve(new I_.Metadata)}compose(e){return e}_equals(e){return e instanceof n}}});var R_=A(rc=>{"use strict";Object.defineProperty(rc,"__esModule",{value:!0});rc.getDefaultRootsData=rc.CIPHER_SUITES=void 0;var EY=Me("fs");rc.CIPHER_SUITES=process.env.GRPC_SSL_CIPHER_SUITES;var q1=process.env.GRPC_DEFAULT_SSL_ROOTS_FILE_PATH,A_=null;function wY(){return q1?(A_===null&&(A_=EY.readFileSync(q1)),A_):null}rc.getDefaultRootsData=wY});var Jp=A(Zp=>{"use strict";Object.defineProperty(Zp,"__esModule",{value:!0});Zp.ChannelCredentials=void 0;var TY=Me("tls"),bY=D_(),$1=R_();function N_(n,e){if(n&&!(n instanceof Buffer))throw new TypeError(`${e}, if provided, must be a Buffer.`)}var ic=class{constructor(e){this.callCredentials=e||bY.CallCredentials.createEmpty()}_getCallCredentials(){return this.callCredentials}static createSsl(e,t,r,i){var s;if(N_(e,"Root certificate"),N_(t,"Private key"),N_(r,"Certificate chain"),t&&!r)throw new Error("Private key must be given with accompanying certificate chain");if(!t&&r)throw new Error("Certificate chain must be given with accompanying private key");let o=(0,TY.createSecureContext)({ca:(s=e??(0,$1.getDefaultRootsData)())!==null&&s!==void 0?s:void 0,key:t??void 0,cert:r??void 0,ciphers:$1.CIPHER_SUITES});return new Yp(o,i??{})}static createFromSecureContext(e,t){return new Yp(e,t??{})}static createInsecure(){return new M_}};Zp.ChannelCredentials=ic;var M_=class n extends ic{constructor(e){super(e)}compose(e){throw new Error("Cannot compose insecure credentials")}_getConnectionOptions(){return null}_isSecure(){return!1}_equals(e){return e instanceof n}},Yp=class n extends ic{constructor(e,t){super(),this.secureContext=e,this.verifyOptions=t,this.connectionOptions={secureContext:e},t?.checkServerIdentity&&(this.connectionOptions.checkServerIdentity=t.checkServerIdentity)}compose(e){let t=this.callCredentials.compose(e);return new O_(this,t)}_getConnectionOptions(){return Object.assign({},this.connectionOptions)}_isSecure(){return!0}_equals(e){return this===e?!0:e instanceof n?this.secureContext===e.secureContext&&this.verifyOptions.checkServerIdentity===e.verifyOptions.checkServerIdentity:!1}},O_=class n extends ic{constructor(e,t){super(t),this.channelCredentials=e}compose(e){let t=this.callCredentials.compose(e);return new n(this.channelCredentials,t)}_getConnectionOptions(){return this.channelCredentials._getConnectionOptions()}_isSecure(){return!0}_equals(e){return this===e?!0:e instanceof n?this.channelCredentials._equals(e.channelCredentials)&&this.callCredentials._equals(e.callCredentials):!1}}});var as=A(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.validateLoadBalancingConfig=qt.getFirstUsableConfig=qt.isLoadBalancerNameRegistered=qt.createLoadBalancer=qt.registerDefaultLoadBalancerType=qt.registerLoadBalancerType=qt.createChildChannelControlHelper=void 0;function _Y(n,e){var t,r,i,s,o,a,c,l,u,d;return{createSubchannel:(r=(t=e.createSubchannel)===null||t===void 0?void 0:t.bind(e))!==null&&r!==void 0?r:n.createSubchannel.bind(n),updateState:(s=(i=e.updateState)===null||i===void 0?void 0:i.bind(e))!==null&&s!==void 0?s:n.updateState.bind(n),requestReresolution:(a=(o=e.requestReresolution)===null||o===void 0?void 0:o.bind(e))!==null&&a!==void 0?a:n.requestReresolution.bind(n),addChannelzChild:(l=(c=e.addChannelzChild)===null||c===void 0?void 0:c.bind(e))!==null&&l!==void 0?l:n.addChannelzChild.bind(n),removeChannelzChild:(d=(u=e.removeChannelzChild)===null||u===void 0?void 0:u.bind(e))!==null&&d!==void 0?d:n.removeChannelzChild.bind(n)}}qt.createChildChannelControlHelper=_Y;var os={},k_=null;function SY(n,e,t){os[n]={LoadBalancer:e,LoadBalancingConfig:t}}qt.registerLoadBalancerType=SY;function CY(n){k_=n}qt.registerDefaultLoadBalancerType=CY;function IY(n,e){let t=n.getLoadBalancerName();return t in os?new os[t].LoadBalancer(e):null}qt.createLoadBalancer=IY;function DY(n){return n in os}qt.isLoadBalancerNameRegistered=DY;function AY(n,e=!1){for(let t of n)if(t.getLoadBalancerName()in os)return t;return e&&k_?new os[k_].LoadBalancingConfig:null}qt.getFirstUsableConfig=AY;function RY(n){if(!(n!==null&&typeof n=="object"))throw new Error("Load balancing config must be an object");let e=Object.keys(n);if(e.length!==1)throw new Error("Provided load balancing config has multiple conflicting entries");let t=e[0];if(t in os)return os[t].LoadBalancingConfig.createFromJson(n[t]);throw new Error(`Unrecognized load balancing config name ${t}`)}qt.validateLoadBalancingConfig=RY});var x_=A(cs=>{"use strict";Object.defineProperty(cs,"__esModule",{value:!0});cs.extractAndSelectServiceConfig=cs.validateServiceConfig=cs.validateRetryThrottling=void 0;var NY=Me("os"),Xp=Ae(),MY=as(),eg=/^\d+(\.\d{1,9})?s$/,OY="node";function kY(n){if("service"in n&&n.service!==""){if(typeof n.service!="string")throw new Error(`Invalid method config name: invalid service: expected type string, got ${typeof n.service}`);if("method"in n&&n.method!==""){if(typeof n.method!="string")throw new Error(`Invalid method config name: invalid method: expected type string, got ${typeof n.service}`);return{service:n.service,method:n.method}}else return{service:n.service}}else{if("method"in n&&n.method!==void 0)throw new Error("Invalid method config name: method set with empty or unset service");return{}}}function xY(n){if(!("maxAttempts"in n)||!Number.isInteger(n.maxAttempts)||n.maxAttempts<2)throw new Error("Invalid method config retry policy: maxAttempts must be an integer at least 2");if(!("initialBackoff"in n)||typeof n.initialBackoff!="string"||!eg.test(n.initialBackoff))throw new Error("Invalid method config retry policy: initialBackoff must be a string consisting of a positive integer followed by s");if(!("maxBackoff"in n)||typeof n.maxBackoff!="string"||!eg.test(n.maxBackoff))throw new Error("Invalid method config retry policy: maxBackoff must be a string consisting of a positive integer followed by s");if(!("backoffMultiplier"in n)||typeof n.backoffMultiplier!="number"||n.backoffMultiplier<=0)throw new Error("Invalid method config retry policy: backoffMultiplier must be a number greater than 0");if(!("retryableStatusCodes"in n&&Array.isArray(n.retryableStatusCodes)))throw new Error("Invalid method config retry policy: retryableStatusCodes is required");if(n.retryableStatusCodes.length===0)throw new Error("Invalid method config retry policy: retryableStatusCodes must be non-empty");for(let e of n.retryableStatusCodes)if(typeof e=="number"){if(!Object.values(Xp.Status).includes(e))throw new Error("Invalid method config retry policy: retryableStatusCodes value not in status code range")}else if(typeof e=="string"){if(!Object.values(Xp.Status).includes(e.toUpperCase()))throw new Error("Invalid method config retry policy: retryableStatusCodes value not a status code name")}else throw new Error("Invalid method config retry policy: retryableStatusCodes value must be a string or number");return{maxAttempts:n.maxAttempts,initialBackoff:n.initialBackoff,maxBackoff:n.maxBackoff,backoffMultiplier:n.backoffMultiplier,retryableStatusCodes:n.retryableStatusCodes}}function PY(n){if(!("maxAttempts"in n)||!Number.isInteger(n.maxAttempts)||n.maxAttempts<2)throw new Error("Invalid method config hedging policy: maxAttempts must be an integer at least 2");if("hedgingDelay"in n&&(typeof n.hedgingDelay!="string"||!eg.test(n.hedgingDelay)))throw new Error("Invalid method config hedging policy: hedgingDelay must be a string consisting of a positive integer followed by s");if("nonFatalStatusCodes"in n&&Array.isArray(n.nonFatalStatusCodes))for(let t of n.nonFatalStatusCodes)if(typeof t=="number"){if(!Object.values(Xp.Status).includes(t))throw new Error("Invlid method config hedging policy: nonFatalStatusCodes value not in status code range")}else if(typeof t=="string"){if(!Object.values(Xp.Status).includes(t.toUpperCase()))throw new Error("Invlid method config hedging policy: nonFatalStatusCodes value not a status code name")}else throw new Error("Invlid method config hedging policy: nonFatalStatusCodes value must be a string or number");let e={maxAttempts:n.maxAttempts};return n.hedgingDelay&&(e.hedgingDelay=n.hedgingDelay),n.nonFatalStatusCodes&&(e.nonFatalStatusCodes=n.nonFatalStatusCodes),e}function LY(n){var e;let t={name:[]};if(!("name"in n)||!Array.isArray(n.name))throw new Error("Invalid method config: invalid name array");for(let r of n.name)t.name.push(kY(r));if("waitForReady"in n){if(typeof n.waitForReady!="boolean")throw new Error("Invalid method config: invalid waitForReady");t.waitForReady=n.waitForReady}if("timeout"in n)if(typeof n.timeout=="object"){if(!("seconds"in n.timeout)||typeof n.timeout.seconds!="number")throw new Error("Invalid method config: invalid timeout.seconds");if(!("nanos"in n.timeout)||typeof n.timeout.nanos!="number")throw new Error("Invalid method config: invalid timeout.nanos");t.timeout=n.timeout}else if(typeof n.timeout=="string"&&eg.test(n.timeout)){let r=n.timeout.substring(0,n.timeout.length-1).split(".");t.timeout={seconds:r[0]|0,nanos:((e=r[1])!==null&&e!==void 0?e:0)|0}}else throw new Error("Invalid method config: invalid timeout");if("maxRequestBytes"in n){if(typeof n.maxRequestBytes!="number")throw new Error("Invalid method config: invalid maxRequestBytes");t.maxRequestBytes=n.maxRequestBytes}if("maxResponseBytes"in n){if(typeof n.maxResponseBytes!="number")throw new Error("Invalid method config: invalid maxRequestBytes");t.maxResponseBytes=n.maxResponseBytes}if("retryPolicy"in n){if("hedgingPolicy"in n)throw new Error("Invalid method config: retryPolicy and hedgingPolicy cannot both be specified");t.retryPolicy=xY(n.retryPolicy)}else"hedgingPolicy"in n&&(t.hedgingPolicy=PY(n.hedgingPolicy));return t}function z1(n){if(!("maxTokens"in n)||typeof n.maxTokens!="number"||n.maxTokens<=0||n.maxTokens>1e3)throw new Error("Invalid retryThrottling: maxTokens must be a number in (0, 1000]");if(!("tokenRatio"in n)||typeof n.tokenRatio!="number"||n.tokenRatio<=0)throw new Error("Invalid retryThrottling: tokenRatio must be a number greater than 0");return{maxTokens:+n.maxTokens.toFixed(3),tokenRatio:+n.tokenRatio.toFixed(3)}}cs.validateRetryThrottling=z1;function H1(n){let e={loadBalancingConfig:[],methodConfig:[]};if("loadBalancingPolicy"in n)if(typeof n.loadBalancingPolicy=="string")e.loadBalancingPolicy=n.loadBalancingPolicy;else throw new Error("Invalid service config: invalid loadBalancingPolicy");if("loadBalancingConfig"in n)if(Array.isArray(n.loadBalancingConfig))for(let r of n.loadBalancingConfig)e.loadBalancingConfig.push((0,MY.validateLoadBalancingConfig)(r));else throw new Error("Invalid service config: invalid loadBalancingConfig");if("methodConfig"in n&&Array.isArray(n.methodConfig))for(let r of n.methodConfig)e.methodConfig.push(LY(r));"retryThrottling"in n&&(e.retryThrottling=z1(n.retryThrottling));let t=[];for(let r of e.methodConfig)for(let i of r.name){for(let s of t)if(i.service===s.service&&i.method===s.method)throw new Error(`Invalid service config: duplicate name ${i.service}/${i.method}`);t.push(i)}return e}cs.validateServiceConfig=H1;function FY(n){if(!("serviceConfig"in n))throw new Error("Invalid service config choice: missing service config");let e={serviceConfig:H1(n.serviceConfig)};if("clientLanguage"in n)if(Array.isArray(n.clientLanguage)){e.clientLanguage=[];for(let r of n.clientLanguage)if(typeof r=="string")e.clientLanguage.push(r);else throw new Error("Invalid service config choice: invalid clientLanguage")}else throw new Error("Invalid service config choice: invalid clientLanguage");if("clientHostname"in n)if(Array.isArray(n.clientHostname)){e.clientHostname=[];for(let r of n.clientHostname)if(typeof r=="string")e.clientHostname.push(r);else throw new Error("Invalid service config choice: invalid clientHostname")}else throw new Error("Invalid service config choice: invalid clientHostname");if("percentage"in n)if(typeof n.percentage=="number"&&0<=n.percentage&&n.percentage<=100)e.percentage=n.percentage;else throw new Error("Invalid service config choice: invalid percentage");let t=["clientLanguage","percentage","clientHostname","serviceConfig"];for(let r in n)if(!t.includes(r))throw new Error(`Invalid service config choice: unexpected field ${r}`);return e}function BY(n,e){if(!Array.isArray(n))throw new Error("Invalid service config list");for(let t of n){let r=FY(t);if(!(typeof r.percentage=="number"&&e>r.percentage)){if(Array.isArray(r.clientHostname)){let i=!1;for(let s of r.clientHostname)s===NY.hostname()&&(i=!0);if(!i)continue}if(Array.isArray(r.clientLanguage)){let i=!1;for(let s of r.clientLanguage)s===OY&&(i=!0);if(!i)continue}return r.serviceConfig}}throw new Error("No matching service config found")}function UY(n,e){for(let t of n)if(t.length>0&&t[0].startsWith("grpc_config=")){let r=t.join("").substring(12),i=JSON.parse(r);return BY(i,e)}return null}cs.extractAndSelectServiceConfig=UY});var kn=A(tg=>{"use strict";Object.defineProperty(tg,"__esModule",{value:!0});tg.ConnectivityState=void 0;var G1=function(n){return n[n.IDLE=0]="IDLE",n[n.CONNECTING=1]="CONNECTING",n[n.READY=2]="READY",n[n.TRANSIENT_FAILURE=3]="TRANSIENT_FAILURE",n[n.SHUTDOWN=4]="SHUTDOWN",n}(G1||(tg.ConnectivityState=G1={}))});var Sn=A(ls=>{"use strict";Object.defineProperty(ls,"__esModule",{value:!0});ls.uriToString=ls.splitHostPort=ls.parseUri=void 0;var VY=/^(?:([A-Za-z0-9+.-]+):)?(?:\/\/([^/]*)\/)?(.+)$/;function jY(n){let e=VY.exec(n);return e===null?null:{scheme:e[1],authority:e[2],path:e[3]}}ls.parseUri=jY;var W1=/^\d+$/;function qY(n){if(n.startsWith("[")){let e=n.indexOf("]");if(e===-1)return null;let t=n.substring(1,e);if(t.indexOf(":")===-1)return null;if(n.length>e+1)if(n[e+1]===":"){let r=n.substring(e+2);return W1.test(r)?{host:t,port:+r}:null}else return null;else return{host:t}}else{let e=n.split(":");return e.length===2?W1.test(e[1])?{host:e[0],port:+e[1]}:null:{host:n}}}ls.splitHostPort=qY;function $Y(n){let e="";return n.scheme!==void 0&&(e+=n.scheme+":"),n.authority!==void 0&&(e+="//"+n.authority+"/"),e+=n.path,e}ls.uriToString=$Y});var Mr=A(xn=>{"use strict";Object.defineProperty(xn,"__esModule",{value:!0});xn.mapUriDefaultScheme=xn.getDefaultAuthority=xn.createResolver=xn.registerDefaultScheme=xn.registerResolver=void 0;var L_=Sn(),sc={},P_=null;function zY(n,e){sc[n]=e}xn.registerResolver=zY;function HY(n){P_=n}xn.registerDefaultScheme=HY;function GY(n,e,t){if(n.scheme!==void 0&&n.scheme in sc)return new sc[n.scheme](n,e,t);throw new Error(`No resolver could be created for target ${(0,L_.uriToString)(n)}`)}xn.createResolver=GY;function WY(n){if(n.scheme!==void 0&&n.scheme in sc)return sc[n.scheme].getDefaultAuthority(n);throw new Error(`Invalid target ${(0,L_.uriToString)(n)}`)}xn.getDefaultAuthority=WY;function KY(n){return n.scheme===void 0||!(n.scheme in sc)?P_!==null?{scheme:P_,authority:void 0,path:(0,L_.uriToString)(n)}:null:n}xn.mapUriDefaultScheme=KY});var ds=A(us=>{"use strict";Object.defineProperty(us,"__esModule",{value:!0});us.QueuePicker=us.UnavailablePicker=us.PickResultType=void 0;var QY=dn(),YY=Ae(),ng=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.QUEUE=1]="QUEUE",n[n.TRANSIENT_FAILURE=2]="TRANSIENT_FAILURE",n[n.DROP=3]="DROP",n}(ng||(us.PickResultType=ng={})),F_=class{constructor(e){this.status=Object.assign({code:YY.Status.UNAVAILABLE,details:"No connection established",metadata:new QY.Metadata},e)}pick(e){return{pickResultType:ng.TRANSIENT_FAILURE,subchannel:null,status:this.status,onCallStarted:null,onCallEnded:null}}};us.UnavailablePicker=F_;var B_=class{constructor(e){this.loadBalancer=e,this.calledExitIdle=!1}pick(e){return this.calledExitIdle||(process.nextTick(()=>{this.loadBalancer.exitIdle()}),this.calledExitIdle=!0),{pickResultType:ng.QUEUE,subchannel:null,status:null,onCallStarted:null,onCallEnded:null}}};us.QueuePicker=B_});var $u=A(rg=>{"use strict";Object.defineProperty(rg,"__esModule",{value:!0});rg.BackoffTimeout=void 0;var ZY=1e3,JY=1.6,XY=12e4,eZ=.2;function tZ(n,e){return Math.random()*(e-n)+n}var U_=class{constructor(e,t){this.callback=e,this.initialDelay=ZY,this.multiplier=JY,this.maxDelay=XY,this.jitter=eZ,this.running=!1,this.hasRef=!0,this.startTime=new Date,this.endTime=new Date,t&&(t.initialDelay&&(this.initialDelay=t.initialDelay),t.multiplier&&(this.multiplier=t.multiplier),t.jitter&&(this.jitter=t.jitter),t.maxDelay&&(this.maxDelay=t.maxDelay)),this.nextDelay=this.initialDelay,this.timerId=setTimeout(()=>{},0),clearTimeout(this.timerId)}runTimer(e){var t,r;this.endTime=this.startTime,this.endTime.setMilliseconds(this.endTime.getMilliseconds()+this.nextDelay),clearTimeout(this.timerId),this.timerId=setTimeout(()=>{this.callback(),this.running=!1},e),this.hasRef||(r=(t=this.timerId).unref)===null||r===void 0||r.call(t)}runOnce(){this.running=!0,this.startTime=new Date,this.runTimer(this.nextDelay);let e=Math.min(this.nextDelay*this.multiplier,this.maxDelay),t=e*this.jitter;this.nextDelay=e+tZ(-t,t)}stop(){clearTimeout(this.timerId),this.running=!1}reset(){if(this.nextDelay=this.initialDelay,this.running){let e=new Date,t=this.startTime;t.setMilliseconds(t.getMilliseconds()+this.nextDelay),clearTimeout(this.timerId),e<t?this.runTimer(t.getTime()-e.getTime()):this.running=!1}}isRunning(){return this.running}ref(){var e,t;this.hasRef=!0,(t=(e=this.timerId).ref)===null||t===void 0||t.call(e)}unref(){var e,t;this.hasRef=!1,(t=(e=this.timerId).unref)===null||t===void 0||t.call(e)}getEndTime(){return this.endTime}};rg.BackoffTimeout=U_});var sg=A(ig=>{"use strict";Object.defineProperty(ig,"__esModule",{value:!0});ig.ChildLoadBalancerHandler=void 0;var nZ=as(),rZ=kn(),iZ="child_load_balancer_helper",V_=class{constructor(e){this.channelControlHelper=e,this.currentChild=null,this.pendingChild=null,this.latestConfig=null,this.ChildPolicyHelper=class{constructor(t){this.parent=t,this.child=null}createSubchannel(t,r){return this.parent.channelControlHelper.createSubchannel(t,r)}updateState(t,r){var i;if(this.calledByPendingChild()){if(t===rZ.ConnectivityState.CONNECTING)return;(i=this.parent.currentChild)===null||i===void 0||i.destroy(),this.parent.currentChild=this.parent.pendingChild,this.parent.pendingChild=null}else if(!this.calledByCurrentChild())return;this.parent.channelControlHelper.updateState(t,r)}requestReresolution(){var t;let r=(t=this.parent.pendingChild)!==null&&t!==void 0?t:this.parent.currentChild;this.child===r&&this.parent.channelControlHelper.requestReresolution()}setChild(t){this.child=t}addChannelzChild(t){this.parent.channelControlHelper.addChannelzChild(t)}removeChannelzChild(t){this.parent.channelControlHelper.removeChannelzChild(t)}calledByPendingChild(){return this.child===this.parent.pendingChild}calledByCurrentChild(){return this.child===this.parent.currentChild}}}configUpdateRequiresNewPolicyInstance(e,t){return e.getLoadBalancerName()!==t.getLoadBalancerName()}updateAddressList(e,t,r){let i;if(this.currentChild===null||this.latestConfig===null||this.configUpdateRequiresNewPolicyInstance(this.latestConfig,t)){let s=new this.ChildPolicyHelper(this),o=(0,nZ.createLoadBalancer)(t,s);s.setChild(o),this.currentChild===null?(this.currentChild=o,i=this.currentChild):(this.pendingChild&&this.pendingChild.destroy(),this.pendingChild=o,i=this.pendingChild)}else this.pendingChild===null?i=this.currentChild:i=this.pendingChild;this.latestConfig=t,i.updateAddressList(e,t,r)}exitIdle(){this.currentChild&&(this.currentChild.exitIdle(),this.pendingChild&&this.pendingChild.exitIdle())}resetBackoff(){this.currentChild&&(this.currentChild.resetBackoff(),this.pendingChild&&this.pendingChild.resetBackoff())}destroy(){this.currentChild&&(this.currentChild.destroy(),this.currentChild=null),this.pendingChild&&(this.pendingChild.destroy(),this.pendingChild=null)}getTypeName(){return iZ}};ig.ChildLoadBalancerHandler=V_});var Q1=A(og=>{"use strict";Object.defineProperty(og,"__esModule",{value:!0});og.ResolvingLoadBalancer=void 0;var sZ=as(),oZ=x_(),fn=kn(),aZ=Mr(),oc=ds(),cZ=$u(),j_=Ae(),lZ=dn(),uZ=et(),dZ=Ae(),fZ=Sn(),hZ=sg(),pZ="resolving_load_balancer";function K1(n){uZ.trace(dZ.LogVerbosity.DEBUG,pZ,n)}var gZ=["SERVICE_AND_METHOD","SERVICE","EMPTY"];function mZ(n,e,t,r){for(let i of t.name)switch(r){case"EMPTY":if(!i.service&&!i.method)return!0;break;case"SERVICE":if(i.service===n&&!i.method)return!0;break;case"SERVICE_AND_METHOD":if(i.service===n&&i.method===e)return!0}return!1}function yZ(n,e,t,r){for(let i of t)if(mZ(n,e,i,r))return i;return null}function vZ(n){return function(t,r){var i,s;let o=t.split("/").filter(l=>l.length>0),a=(i=o[0])!==null&&i!==void 0?i:"",c=(s=o[1])!==null&&s!==void 0?s:"";if(n&&n.methodConfig)for(let l of gZ){let u=yZ(a,c,n.methodConfig,l);if(u)return{methodConfig:u,pickInformation:{},status:j_.Status.OK,dynamicFilterFactories:[]}}return{methodConfig:{name:[]},pickInformation:{},status:j_.Status.OK,dynamicFilterFactories:[]}}}var q_=class{constructor(e,t,r,i,s){this.target=e,this.channelControlHelper=t,this.onSuccessfulResolution=i,this.onFailedResolution=s,this.latestChildState=fn.ConnectivityState.IDLE,this.latestChildPicker=new oc.QueuePicker(this),this.currentState=fn.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1,r["grpc.service_config"]?this.defaultServiceConfig=(0,oZ.validateServiceConfig)(JSON.parse(r["grpc.service_config"])):this.defaultServiceConfig={loadBalancingConfig:[],methodConfig:[]},this.updateState(fn.ConnectivityState.IDLE,new oc.QueuePicker(this)),this.childLoadBalancer=new hZ.ChildLoadBalancerHandler({createSubchannel:t.createSubchannel.bind(t),requestReresolution:()=>{this.backoffTimeout.isRunning()?(K1("requestReresolution delayed by backoff timer until "+this.backoffTimeout.getEndTime().toISOString()),this.continueResolving=!0):this.updateResolution()},updateState:(a,c)=>{this.latestChildState=a,this.latestChildPicker=c,this.updateState(a,c)},addChannelzChild:t.addChannelzChild.bind(t),removeChannelzChild:t.removeChannelzChild.bind(t)}),this.innerResolver=(0,aZ.createResolver)(e,{onSuccessfulResolution:(a,c,l,u,d)=>{var h;this.backoffTimeout.stop(),this.backoffTimeout.reset();let f=null;c===null?l===null?(this.previousServiceConfig=null,f=this.defaultServiceConfig):this.previousServiceConfig===null?this.handleResolutionFailure(l):f=this.previousServiceConfig:(f=c,this.previousServiceConfig=c);let v=(h=f?.loadBalancingConfig)!==null&&h!==void 0?h:[],w=(0,sZ.getFirstUsableConfig)(v,!0);if(w===null){this.handleResolutionFailure({code:j_.Status.UNAVAILABLE,details:"All load balancer options in service config are not compatible",metadata:new lZ.Metadata});return}this.childLoadBalancer.updateAddressList(a,w,d);let S=f??this.defaultServiceConfig;this.onSuccessfulResolution(S,u??vZ(S))},onError:a=>{this.handleResolutionFailure(a)}},r);let o={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new cZ.BackoffTimeout(()=>{this.continueResolving?(this.updateResolution(),this.continueResolving=!1):this.updateState(this.latestChildState,this.latestChildPicker)},o),this.backoffTimeout.unref()}updateResolution(){this.innerResolver.updateResolution(),this.currentState===fn.ConnectivityState.IDLE&&this.updateState(fn.ConnectivityState.CONNECTING,new oc.QueuePicker(this)),this.backoffTimeout.runOnce()}updateState(e,t){K1((0,fZ.uriToString)(this.target)+" "+fn.ConnectivityState[this.currentState]+" -> "+fn.ConnectivityState[e]),e===fn.ConnectivityState.IDLE&&(t=new oc.QueuePicker(this)),this.currentState=e,this.channelControlHelper.updateState(e,t)}handleResolutionFailure(e){this.latestChildState===fn.ConnectivityState.IDLE&&(this.updateState(fn.ConnectivityState.TRANSIENT_FAILURE,new oc.UnavailablePicker(e)),this.onFailedResolution(e))}exitIdle(){(this.currentState===fn.ConnectivityState.IDLE||this.currentState===fn.ConnectivityState.TRANSIENT_FAILURE)&&(this.backoffTimeout.isRunning()?this.continueResolving=!0:this.updateResolution()),this.childLoadBalancer.exitIdle()}updateAddressList(e,t){throw new Error("updateAddressList not supported on ResolvingLoadBalancer")}resetBackoff(){this.backoffTimeout.reset(),this.childLoadBalancer.resetBackoff()}destroy(){this.childLoadBalancer.destroy(),this.innerResolver.destroy(),this.backoffTimeout.reset(),this.backoffTimeout.stop(),this.latestChildState=fn.ConnectivityState.IDLE,this.latestChildPicker=new oc.QueuePicker(this),this.currentState=fn.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1}getTypeName(){return"resolving_load_balancer"}};og.ResolvingLoadBalancer=q_});var Y1=A(ac=>{"use strict";Object.defineProperty(ac,"__esModule",{value:!0});ac.channelOptionsEqual=ac.recognizedOptions=void 0;ac.recognizedOptions={"grpc.ssl_target_name_override":!0,"grpc.primary_user_agent":!0,"grpc.secondary_user_agent":!0,"grpc.default_authority":!0,"grpc.keepalive_time_ms":!0,"grpc.keepalive_timeout_ms":!0,"grpc.keepalive_permit_without_calls":!0,"grpc.service_config":!0,"grpc.max_concurrent_streams":!0,"grpc.initial_reconnect_backoff_ms":!0,"grpc.max_reconnect_backoff_ms":!0,"grpc.use_local_subchannel_pool":!0,"grpc.max_send_message_length":!0,"grpc.max_receive_message_length":!0,"grpc.enable_http_proxy":!0,"grpc.enable_channelz":!0,"grpc.dns_min_time_between_resolutions_ms":!0,"grpc.enable_retries":!0,"grpc.per_rpc_retry_buffer_size":!0,"grpc.retry_buffer_size":!0,"grpc.max_connection_age_ms":!0,"grpc.max_connection_age_grace_ms":!0,"grpc-node.max_session_memory":!0,"grpc.service_config_disable_resolution":!0,"grpc.client_idle_timeout_ms":!0,"grpc-node.tls_enable_trace":!0};function EZ(n,e){let t=Object.keys(n).sort(),r=Object.keys(e).sort();if(t.length!==r.length)return!1;for(let i=0;i<t.length;i+=1)if(t[i]!==r[i]||n[t[i]]!==e[r[i]])return!1;return!0}ac.channelOptionsEqual=EZ});var kr=A(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});Or.stringToSubchannelAddress=Or.subchannelAddressToString=Or.subchannelAddressEqual=Or.isTcpSubchannelAddress=void 0;var wZ=Me("net");function zu(n){return"port"in n}Or.isTcpSubchannelAddress=zu;function TZ(n,e){return!n&&!e?!0:!n||!e?!1:zu(n)?zu(e)&&n.host===e.host&&n.port===e.port:!zu(e)&&n.path===e.path}Or.subchannelAddressEqual=TZ;function bZ(n){return zu(n)?n.host+":"+n.port:n.path}Or.subchannelAddressToString=bZ;var _Z=443;function SZ(n,e){return(0,wZ.isIP)(n)?{host:n,port:e??_Z}:{path:n}}Or.stringToSubchannelAddress=SZ});var ag=A(cc=>{"use strict";Object.defineProperty(cc,"__esModule",{value:!0});cc.addAdminServicesToServer=cc.registerAdminService=void 0;var Z1=[];function CZ(n,e){Z1.push({getServiceDefinition:n,getHandlers:e})}cc.registerAdminService=CZ;function IZ(n){for(let{getServiceDefinition:e,getHandlers:t}of Z1)n.addService(e(),t())}cc.addAdminServicesToServer=IZ});var J1=A(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});Pn.ClientDuplexStreamImpl=Pn.ClientWritableStreamImpl=Pn.ClientReadableStreamImpl=Pn.ClientUnaryCallImpl=Pn.callErrorFromStatus=void 0;var DZ=Me("events"),W_=Me("stream"),Hu=Ae();function AZ(n,e){let t=`${n.code} ${Hu.Status[n.code]}: ${n.details}`,i=`${new Error(t).stack}
for call at
${e}`;return Object.assign(new Error(t),n,{stack:i})}Pn.callErrorFromStatus=AZ;var $_=class extends DZ.EventEmitter{constructor(){super()}cancel(){var e;(e=this.call)===null||e===void 0||e.cancelWithStatus(Hu.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return(t=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&t!==void 0?t:"unknown"}};Pn.ClientUnaryCallImpl=$_;var z_=class extends W_.Readable{constructor(e){super({objectMode:!0}),this.deserialize=e}cancel(){var e;(e=this.call)===null||e===void 0||e.cancelWithStatus(Hu.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return(t=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&t!==void 0?t:"unknown"}_read(e){var t;(t=this.call)===null||t===void 0||t.startRead()}};Pn.ClientReadableStreamImpl=z_;var H_=class extends W_.Writable{constructor(e){super({objectMode:!0}),this.serialize=e}cancel(){var e;(e=this.call)===null||e===void 0||e.cancelWithStatus(Hu.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return(t=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&t!==void 0?t:"unknown"}_write(e,t,r){var i;let s={callback:r},o=Number(t);Number.isNaN(o)||(s.flags=o),(i=this.call)===null||i===void 0||i.sendMessageWithContext(s,e)}_final(e){var t;(t=this.call)===null||t===void 0||t.halfClose(),e()}};Pn.ClientWritableStreamImpl=H_;var G_=class extends W_.Duplex{constructor(e,t){super({objectMode:!0}),this.serialize=e,this.deserialize=t}cancel(){var e;(e=this.call)===null||e===void 0||e.cancelWithStatus(Hu.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return(t=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&t!==void 0?t:"unknown"}_read(e){var t;(t=this.call)===null||t===void 0||t.startRead()}_write(e,t,r){var i;let s={callback:r},o=Number(t);Number.isNaN(o)||(s.flags=o),(i=this.call)===null||i===void 0||i.sendMessageWithContext(s,e)}_final(e){var t;(t=this.call)===null||t===void 0||t.halfClose(),e()}};Pn.ClientDuplexStreamImpl=G_});var X1=A(lc=>{"use strict";Object.defineProperty(lc,"__esModule",{value:!0});lc.InterceptingListenerImpl=lc.isInterceptingListener=void 0;function RZ(n){return n.onReceiveMetadata!==void 0&&n.onReceiveMetadata.length===1}lc.isInterceptingListener=RZ;var K_=class{constructor(e,t){this.listener=e,this.nextListener=t,this.processingMetadata=!1,this.hasPendingMessage=!1,this.processingMessage=!1,this.pendingStatus=null}processPendingMessage(){this.hasPendingMessage&&(this.nextListener.onReceiveMessage(this.pendingMessage),this.pendingMessage=null,this.hasPendingMessage=!1)}processPendingStatus(){this.pendingStatus&&this.nextListener.onReceiveStatus(this.pendingStatus)}onReceiveMetadata(e){this.processingMetadata=!0,this.listener.onReceiveMetadata(e,t=>{this.processingMetadata=!1,this.nextListener.onReceiveMetadata(t),this.processPendingMessage(),this.processPendingStatus()})}onReceiveMessage(e){this.processingMessage=!0,this.listener.onReceiveMessage(e,t=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessage=t,this.hasPendingMessage=!0):(this.nextListener.onReceiveMessage(t),this.processPendingStatus())})}onReceiveStatus(e){this.listener.onReceiveStatus(e,t=>{this.processingMetadata||this.processingMessage?this.pendingStatus=t:this.nextListener.onReceiveStatus(t)})}};lc.InterceptingListenerImpl=K_});var tS=A(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0});Ln.getInterceptingCall=Ln.InterceptingCall=Ln.RequesterBuilder=Ln.ListenerBuilder=Ln.InterceptorConfigurationError=void 0;var NZ=dn(),eL=X1(),tL=Ae(),nL=Gp(),Wu=class n extends Error{constructor(e){super(e),this.name="InterceptorConfigurationError",Error.captureStackTrace(this,n)}};Ln.InterceptorConfigurationError=Wu;var Y_=class{constructor(){this.metadata=void 0,this.message=void 0,this.status=void 0}withOnReceiveMetadata(e){return this.metadata=e,this}withOnReceiveMessage(e){return this.message=e,this}withOnReceiveStatus(e){return this.status=e,this}build(){return{onReceiveMetadata:this.metadata,onReceiveMessage:this.message,onReceiveStatus:this.status}}};Ln.ListenerBuilder=Y_;var Z_=class{constructor(){this.start=void 0,this.message=void 0,this.halfClose=void 0,this.cancel=void 0}withStart(e){return this.start=e,this}withSendMessage(e){return this.message=e,this}withHalfClose(e){return this.halfClose=e,this}withCancel(e){return this.cancel=e,this}build(){return{start:this.start,sendMessage:this.message,halfClose:this.halfClose,cancel:this.cancel}}};Ln.RequesterBuilder=Z_;var Q_={onReceiveMetadata:(n,e)=>{e(n)},onReceiveMessage:(n,e)=>{e(n)},onReceiveStatus:(n,e)=>{e(n)}},Gu={start:(n,e,t)=>{t(n,e)},sendMessage:(n,e)=>{e(n)},halfClose:n=>{n()},cancel:n=>{n()}},J_=class{constructor(e,t){var r,i,s,o;this.nextCall=e,this.processingMetadata=!1,this.pendingMessageContext=null,this.processingMessage=!1,this.pendingHalfClose=!1,t?this.requester={start:(r=t.start)!==null&&r!==void 0?r:Gu.start,sendMessage:(i=t.sendMessage)!==null&&i!==void 0?i:Gu.sendMessage,halfClose:(s=t.halfClose)!==null&&s!==void 0?s:Gu.halfClose,cancel:(o=t.cancel)!==null&&o!==void 0?o:Gu.cancel}:this.requester=Gu}cancelWithStatus(e,t){this.requester.cancel(()=>{this.nextCall.cancelWithStatus(e,t)})}getPeer(){return this.nextCall.getPeer()}processPendingMessage(){this.pendingMessageContext&&(this.nextCall.sendMessageWithContext(this.pendingMessageContext,this.pendingMessage),this.pendingMessageContext=null,this.pendingMessage=null)}processPendingHalfClose(){this.pendingHalfClose&&this.nextCall.halfClose()}start(e,t){var r,i,s,o,a,c;let l={onReceiveMetadata:(i=(r=t?.onReceiveMetadata)===null||r===void 0?void 0:r.bind(t))!==null&&i!==void 0?i:u=>{},onReceiveMessage:(o=(s=t?.onReceiveMessage)===null||s===void 0?void 0:s.bind(t))!==null&&o!==void 0?o:u=>{},onReceiveStatus:(c=(a=t?.onReceiveStatus)===null||a===void 0?void 0:a.bind(t))!==null&&c!==void 0?c:u=>{}};this.processingMetadata=!0,this.requester.start(e,l,(u,d)=>{var h,f,v;this.processingMetadata=!1;let w;if((0,eL.isInterceptingListener)(d))w=d;else{let S={onReceiveMetadata:(h=d.onReceiveMetadata)!==null&&h!==void 0?h:Q_.onReceiveMetadata,onReceiveMessage:(f=d.onReceiveMessage)!==null&&f!==void 0?f:Q_.onReceiveMessage,onReceiveStatus:(v=d.onReceiveStatus)!==null&&v!==void 0?v:Q_.onReceiveStatus};w=new eL.InterceptingListenerImpl(S,l)}this.nextCall.start(u,w),this.processPendingMessage(),this.processPendingHalfClose()})}sendMessageWithContext(e,t){this.processingMessage=!0,this.requester.sendMessage(t,r=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessageContext=e,this.pendingMessage=t):(this.nextCall.sendMessageWithContext(e,r),this.processPendingHalfClose())})}sendMessage(e){this.sendMessageWithContext({},e)}startRead(){this.nextCall.startRead()}halfClose(){this.requester.halfClose(()=>{this.processingMetadata||this.processingMessage?this.pendingHalfClose=!0:this.nextCall.halfClose()})}};Ln.InterceptingCall=J_;function MZ(n,e,t){var r,i;let s=(r=t.deadline)!==null&&r!==void 0?r:1/0,o=t.host,a=(i=t.parent)!==null&&i!==void 0?i:null,c=t.propagate_flags,l=t.credentials,u=n.createCall(e,s,o,a,c);return l&&u.setCredentials(l),u}var cg=class{constructor(e,t){this.call=e,this.methodDefinition=t}cancelWithStatus(e,t){this.call.cancelWithStatus(e,t)}getPeer(){return this.call.getPeer()}sendMessageWithContext(e,t){let r;try{r=this.methodDefinition.requestSerialize(t)}catch(i){this.call.cancelWithStatus(tL.Status.INTERNAL,`Request message serialization failure: ${(0,nL.getErrorMessage)(i)}`);return}this.call.sendMessageWithContext(e,r)}sendMessage(e){this.sendMessageWithContext({},e)}start(e,t){let r=null;this.call.start(e,{onReceiveMetadata:i=>{var s;(s=t?.onReceiveMetadata)===null||s===void 0||s.call(t,i)},onReceiveMessage:i=>{var s;let o;try{o=this.methodDefinition.responseDeserialize(i)}catch(a){r={code:tL.Status.INTERNAL,details:`Response message parsing error: ${(0,nL.getErrorMessage)(a)}`,metadata:new NZ.Metadata},this.call.cancelWithStatus(r.code,r.details);return}(s=t?.onReceiveMessage)===null||s===void 0||s.call(t,o)},onReceiveStatus:i=>{var s,o;r?(s=t?.onReceiveStatus)===null||s===void 0||s.call(t,r):(o=t?.onReceiveStatus)===null||o===void 0||o.call(t,i)}})}startRead(){this.call.startRead()}halfClose(){this.call.halfClose()}},X_=class extends cg{constructor(e,t){super(e,t)}start(e,t){var r,i;let s=!1,o={onReceiveMetadata:(i=(r=t?.onReceiveMetadata)===null||r===void 0?void 0:r.bind(t))!==null&&i!==void 0?i:a=>{},onReceiveMessage:a=>{var c;s=!0,(c=t?.onReceiveMessage)===null||c===void 0||c.call(t,a)},onReceiveStatus:a=>{var c,l;s||(c=t?.onReceiveMessage)===null||c===void 0||c.call(t,null),(l=t?.onReceiveStatus)===null||l===void 0||l.call(t,a)}};super.start(e,o),this.call.startRead()}},eS=class extends cg{};function OZ(n,e,t){let r=MZ(n,t.path,e);return t.responseStream?new eS(r,t):new X_(r,t)}function kZ(n,e,t,r){if(n.clientInterceptors.length>0&&n.clientInterceptorProviders.length>0)throw new Wu("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(n.callInterceptors.length>0&&n.callInterceptorProviders.length>0)throw new Wu("Both interceptors and interceptor_providers were passed as call options. Only one of these is allowed.");let i=[];n.callInterceptors.length>0||n.callInterceptorProviders.length>0?i=[].concat(n.callInterceptors,n.callInterceptorProviders.map(a=>a(e))).filter(a=>a):i=[].concat(n.clientInterceptors,n.clientInterceptorProviders.map(a=>a(e))).filter(a=>a);let s=Object.assign({},t,{method_definition:e});return i.reduceRight((a,c)=>l=>c(l,a),a=>OZ(r,a,e))(s)}Ln.getInterceptingCall=kZ});var iS=A(ug=>{"use strict";Object.defineProperty(ug,"__esModule",{value:!0});ug.Client=void 0;var xr=J1(),xZ=sS(),PZ=kn(),fs=Ae(),uc=dn(),lg=tS(),ir=Symbol(),dc=Symbol(),fc=Symbol(),mi=Symbol();function nS(n){return typeof n=="function"}function hc(n){return n.stack.split(`
`).slice(1).join(`
`)}var rS=class{constructor(e,t,r={}){var i,s;if(r=Object.assign({},r),this[dc]=(i=r.interceptors)!==null&&i!==void 0?i:[],delete r.interceptors,this[fc]=(s=r.interceptor_providers)!==null&&s!==void 0?s:[],delete r.interceptor_providers,this[dc].length>0&&this[fc].length>0)throw new Error("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(this[mi]=r.callInvocationTransformer,delete r.callInvocationTransformer,r.channelOverride)this[ir]=r.channelOverride;else if(r.channelFactoryOverride){let o=r.channelFactoryOverride;delete r.channelFactoryOverride,this[ir]=o(e,t,r)}else this[ir]=new xZ.ChannelImplementation(e,t,r)}close(){this[ir].close()}getChannel(){return this[ir]}waitForReady(e,t){let r=i=>{if(i){t(new Error("Failed to connect before the deadline"));return}let s;try{s=this[ir].getConnectivityState(!0)}catch{t(new Error("The channel has been closed"));return}if(s===PZ.ConnectivityState.READY)t();else try{this[ir].watchConnectivityState(s,e,r)}catch{t(new Error("The channel has been closed"))}};setImmediate(r)}checkOptionalUnaryResponseArguments(e,t,r){if(nS(e))return{metadata:new uc.Metadata,options:{},callback:e};if(nS(t))return e instanceof uc.Metadata?{metadata:e,options:{},callback:t}:{metadata:new uc.Metadata,options:e,callback:t};if(!(e instanceof uc.Metadata&&t instanceof Object&&nS(r)))throw new Error("Incorrect arguments passed");return{metadata:e,options:t,callback:r}}makeUnaryRequest(e,t,r,i,s,o,a){var c,l;let u=this.checkOptionalUnaryResponseArguments(s,o,a),d={path:e,requestStream:!1,responseStream:!1,requestSerialize:t,responseDeserialize:r},h={argument:i,metadata:u.metadata,call:new xr.ClientUnaryCallImpl,channel:this[ir],methodDefinition:d,callOptions:u.options,callback:u.callback};this[mi]&&(h=this[mi](h));let f=h.call,v={clientInterceptors:this[dc],clientInterceptorProviders:this[fc],callInterceptors:(c=h.callOptions.interceptors)!==null&&c!==void 0?c:[],callInterceptorProviders:(l=h.callOptions.interceptor_providers)!==null&&l!==void 0?l:[]},w=(0,lg.getInterceptingCall)(v,h.methodDefinition,h.callOptions,h.channel);f.call=w;let S=null,I=!1,D=new Error;return w.start(h.metadata,{onReceiveMetadata:M=>{f.emit("metadata",M)},onReceiveMessage(M){S!==null&&w.cancelWithStatus(fs.Status.INTERNAL,"Too many responses received"),S=M},onReceiveStatus(M){if(!I){if(I=!0,M.code===fs.Status.OK)if(S===null){let P=hc(D);h.callback((0,xr.callErrorFromStatus)({code:fs.Status.INTERNAL,details:"No message received",metadata:M.metadata},P))}else h.callback(null,S);else{let P=hc(D);h.callback((0,xr.callErrorFromStatus)(M,P))}D=null,f.emit("status",M)}}}),w.sendMessage(i),w.halfClose(),f}makeClientStreamRequest(e,t,r,i,s,o){var a,c;let l=this.checkOptionalUnaryResponseArguments(i,s,o),u={path:e,requestStream:!0,responseStream:!1,requestSerialize:t,responseDeserialize:r},d={metadata:l.metadata,call:new xr.ClientWritableStreamImpl(t),channel:this[ir],methodDefinition:u,callOptions:l.options,callback:l.callback};this[mi]&&(d=this[mi](d));let h=d.call,f={clientInterceptors:this[dc],clientInterceptorProviders:this[fc],callInterceptors:(a=d.callOptions.interceptors)!==null&&a!==void 0?a:[],callInterceptorProviders:(c=d.callOptions.interceptor_providers)!==null&&c!==void 0?c:[]},v=(0,lg.getInterceptingCall)(f,d.methodDefinition,d.callOptions,d.channel);h.call=v;let w=null,S=!1,I=new Error;return v.start(d.metadata,{onReceiveMetadata:D=>{h.emit("metadata",D)},onReceiveMessage(D){w!==null&&v.cancelWithStatus(fs.Status.INTERNAL,"Too many responses received"),w=D},onReceiveStatus(D){if(!S){if(S=!0,D.code===fs.Status.OK)if(w===null){let M=hc(I);d.callback((0,xr.callErrorFromStatus)({code:fs.Status.INTERNAL,details:"No message received",metadata:D.metadata},M))}else d.callback(null,w);else{let M=hc(I);d.callback((0,xr.callErrorFromStatus)(D,M))}I=null,h.emit("status",D)}}}),h}checkMetadataAndOptions(e,t){let r,i;return e instanceof uc.Metadata?(r=e,t?i=t:i={}):(e?i=e:i={},r=new uc.Metadata),{metadata:r,options:i}}makeServerStreamRequest(e,t,r,i,s,o){var a,c;let l=this.checkMetadataAndOptions(s,o),u={path:e,requestStream:!1,responseStream:!0,requestSerialize:t,responseDeserialize:r},d={argument:i,metadata:l.metadata,call:new xr.ClientReadableStreamImpl(r),channel:this[ir],methodDefinition:u,callOptions:l.options};this[mi]&&(d=this[mi](d));let h=d.call,f={clientInterceptors:this[dc],clientInterceptorProviders:this[fc],callInterceptors:(a=d.callOptions.interceptors)!==null&&a!==void 0?a:[],callInterceptorProviders:(c=d.callOptions.interceptor_providers)!==null&&c!==void 0?c:[]},v=(0,lg.getInterceptingCall)(f,d.methodDefinition,d.callOptions,d.channel);h.call=v;let w=!1,S=new Error;return v.start(d.metadata,{onReceiveMetadata(I){h.emit("metadata",I)},onReceiveMessage(I){h.push(I)},onReceiveStatus(I){if(!w){if(w=!0,h.push(null),I.code!==fs.Status.OK){let D=hc(S);h.emit("error",(0,xr.callErrorFromStatus)(I,D))}S=null,h.emit("status",I)}}}),v.sendMessage(i),v.halfClose(),h}makeBidiStreamRequest(e,t,r,i,s){var o,a;let c=this.checkMetadataAndOptions(i,s),l={path:e,requestStream:!0,responseStream:!0,requestSerialize:t,responseDeserialize:r},u={metadata:c.metadata,call:new xr.ClientDuplexStreamImpl(t,r),channel:this[ir],methodDefinition:l,callOptions:c.options};this[mi]&&(u=this[mi](u));let d=u.call,h={clientInterceptors:this[dc],clientInterceptorProviders:this[fc],callInterceptors:(o=u.callOptions.interceptors)!==null&&o!==void 0?o:[],callInterceptorProviders:(a=u.callOptions.interceptor_providers)!==null&&a!==void 0?a:[]},f=(0,lg.getInterceptingCall)(h,u.methodDefinition,u.callOptions,u.channel);d.call=f;let v=!1,w=new Error;return f.start(u.metadata,{onReceiveMetadata(S){d.emit("metadata",S)},onReceiveMessage(S){d.push(S)},onReceiveStatus(S){if(!v){if(v=!0,d.push(null),S.code!==fs.Status.OK){let I=hc(w);d.emit("error",(0,xr.callErrorFromStatus)(S,I))}w=null,d.emit("status",S)}}}),d}};ug.Client=rS});var aS=A(pc=>{"use strict";Object.defineProperty(pc,"__esModule",{value:!0});pc.loadPackageDefinition=pc.makeClientConstructor=void 0;var Ku=iS(),LZ={unary:Ku.Client.prototype.makeUnaryRequest,server_stream:Ku.Client.prototype.makeServerStreamRequest,client_stream:Ku.Client.prototype.makeClientStreamRequest,bidi:Ku.Client.prototype.makeBidiStreamRequest};function oS(n){return["__proto__","prototype","constructor"].includes(n)}function rL(n,e,t){t||(t={});class r extends Ku.Client{}return Object.keys(n).forEach(i=>{if(oS(i))return;let s=n[i],o;if(typeof i=="string"&&i.charAt(0)==="$")throw new Error("Method names cannot start with $");s.requestStream?s.responseStream?o="bidi":o="client_stream":s.responseStream?o="server_stream":o="unary";let a=s.requestSerialize,c=s.responseDeserialize,l=FZ(LZ[o],s.path,a,c);r.prototype[i]=l,Object.assign(r.prototype[i],s),s.originalName&&!oS(s.originalName)&&(r.prototype[s.originalName]=r.prototype[i])}),r.service=n,r.serviceName=e,r}pc.makeClientConstructor=rL;function FZ(n,e,t,r){return function(...i){return n.call(this,e,t,r,...i)}}function BZ(n){return"format"in n}function UZ(n){let e={};for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t)){let r=n[t],i=t.split(".");if(i.some(a=>oS(a)))continue;let s=i[i.length-1],o=e;for(let a of i.slice(0,-1))o[a]||(o[a]={}),o=o[a];BZ(r)?o[s]=r:o[s]=rL(r,s,{})}return e}pc.loadPackageDefinition=UZ});var AL=A((d_e,DL)=>{"use strict";var VZ=1/0,jZ="[object Symbol]",qZ=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,$Z=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,fg="\\ud800-\\udfff",dL="\\u0300-\\u036f\\ufe20-\\ufe23",fL="\\u20d0-\\u20f0",hL="\\u2700-\\u27bf",pL="a-z\\xdf-\\xf6\\xf8-\\xff",zZ="\\xac\\xb1\\xd7\\xf7",HZ="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",GZ="\\u2000-\\u206f",WZ=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",gL="A-Z\\xc0-\\xd6\\xd8-\\xde",mL="\\ufe0e\\ufe0f",yL=zZ+HZ+GZ+WZ,lS="['\u2019]",KZ="["+fg+"]",iL="["+yL+"]",dg="["+dL+fL+"]",vL="\\d+",QZ="["+hL+"]",EL="["+pL+"]",wL="[^"+fg+yL+vL+hL+pL+gL+"]",cS="\\ud83c[\\udffb-\\udfff]",YZ="(?:"+dg+"|"+cS+")",TL="[^"+fg+"]",uS="(?:\\ud83c[\\udde6-\\uddff]){2}",dS="[\\ud800-\\udbff][\\udc00-\\udfff]",gc="["+gL+"]",bL="\\u200d",sL="(?:"+EL+"|"+wL+")",ZZ="(?:"+gc+"|"+wL+")",oL="(?:"+lS+"(?:d|ll|m|re|s|t|ve))?",aL="(?:"+lS+"(?:D|LL|M|RE|S|T|VE))?",_L=YZ+"?",SL="["+mL+"]?",JZ="(?:"+bL+"(?:"+[TL,uS,dS].join("|")+")"+SL+_L+")*",CL=SL+_L+JZ,XZ="(?:"+[QZ,uS,dS].join("|")+")"+CL,eJ="(?:"+[TL+dg+"?",dg,uS,dS,KZ].join("|")+")",tJ=RegExp(lS,"g"),nJ=RegExp(dg,"g"),rJ=RegExp(cS+"(?="+cS+")|"+eJ+CL,"g"),iJ=RegExp([gc+"?"+EL+"+"+oL+"(?="+[iL,gc,"$"].join("|")+")",ZZ+"+"+aL+"(?="+[iL,gc+sL,"$"].join("|")+")",gc+"?"+sL+"+"+oL,gc+"+"+aL,vL,XZ].join("|"),"g"),sJ=RegExp("["+bL+fg+dL+fL+mL+"]"),oJ=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,aJ={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"ss"},cJ=typeof global=="object"&&global&&global.Object===Object&&global,lJ=typeof self=="object"&&self&&self.Object===Object&&self,uJ=cJ||lJ||Function("return this")();function dJ(n,e,t,r){var i=-1,s=n?n.length:0;for(r&&s&&(t=n[++i]);++i<s;)t=e(t,n[i],i,n);return t}function fJ(n){return n.split("")}function hJ(n){return n.match(qZ)||[]}function pJ(n){return function(e){return n?.[e]}}var gJ=pJ(aJ);function IL(n){return sJ.test(n)}function mJ(n){return oJ.test(n)}function yJ(n){return IL(n)?vJ(n):fJ(n)}function vJ(n){return n.match(rJ)||[]}function EJ(n){return n.match(iJ)||[]}var wJ=Object.prototype,TJ=wJ.toString,cL=uJ.Symbol,lL=cL?cL.prototype:void 0,uL=lL?lL.toString:void 0;function bJ(n,e,t){var r=-1,i=n.length;e<0&&(e=-e>i?0:i+e),t=t>i?i:t,t<0&&(t+=i),i=e>t?0:t-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=n[r+e];return s}function _J(n){if(typeof n=="string")return n;if(AJ(n))return uL?uL.call(n):"";var e=n+"";return e=="0"&&1/n==-VZ?"-0":e}function SJ(n,e,t){var r=n.length;return t=t===void 0?r:t,!e&&t>=r?n:bJ(n,e,t)}function CJ(n){return function(e){e=hg(e);var t=IL(e)?yJ(e):void 0,r=t?t[0]:e.charAt(0),i=t?SJ(t,1).join(""):e.slice(1);return r[n]()+i}}function IJ(n){return function(e){return dJ(kJ(MJ(e).replace(tJ,"")),n,"")}}function DJ(n){return!!n&&typeof n=="object"}function AJ(n){return typeof n=="symbol"||DJ(n)&&TJ.call(n)==jZ}function hg(n){return n==null?"":_J(n)}var RJ=IJ(function(n,e,t){return e=e.toLowerCase(),n+(t?NJ(e):e)});function NJ(n){return OJ(hg(n).toLowerCase())}function MJ(n){return n=hg(n),n&&n.replace($Z,gJ).replace(nJ,"")}var OJ=CJ("toUpperCase");function kJ(n,e,t){return n=hg(n),e=t?void 0:e,e===void 0?mJ(n)?EJ(n):hJ(n):n.match(e)||[]}DL.exports=RJ});var fS=A((f_e,RL)=>{"use strict";RL.exports=xJ;function xJ(n,e){for(var t=new Array(arguments.length-1),r=0,i=2,s=!0;i<arguments.length;)t[r++]=arguments[i++];return new Promise(function(a,c){t[r]=function(u){if(s)if(s=!1,u)c(u);else{for(var d=new Array(arguments.length-1),h=0;h<d.length;)d[h++]=arguments[h];a.apply(null,d)}};try{n.apply(e||null,t)}catch(l){s&&(s=!1,c(l))}})}});var kL=A(OL=>{"use strict";var pg=OL;pg.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&e.charAt(t)==="=";)++r;return Math.ceil(e.length*3)/4-r};var mc=new Array(64),ML=new Array(123);for(sr=0;sr<64;)ML[mc[sr]=sr<26?sr+65:sr<52?sr+71:sr<62?sr-4:sr-59|43]=sr++;var sr;pg.encode=function(e,t,r){for(var i=null,s=[],o=0,a=0,c;t<r;){var l=e[t++];switch(a){case 0:s[o++]=mc[l>>2],c=(l&3)<<4,a=1;break;case 1:s[o++]=mc[c|l>>4],c=(l&15)<<2,a=2;break;case 2:s[o++]=mc[c|l>>6],s[o++]=mc[l&63],a=0;break}o>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),o=0)}return a&&(s[o++]=mc[c],s[o++]=61,a===1&&(s[o++]=61)),i?(o&&i.push(String.fromCharCode.apply(String,s.slice(0,o))),i.join("")):String.fromCharCode.apply(String,s.slice(0,o))};var NL="invalid encoding";pg.decode=function(e,t,r){for(var i=r,s=0,o,a=0;a<e.length;){var c=e.charCodeAt(a++);if(c===61&&s>1)break;if((c=ML[c])===void 0)throw Error(NL);switch(s){case 0:o=c,s=1;break;case 1:t[r++]=o<<2|(c&48)>>4,o=c,s=2;break;case 2:t[r++]=(o&15)<<4|(c&60)>>2,o=c,s=3;break;case 3:t[r++]=(o&3)<<6|c,s=0;break}}if(s===1)throw Error(NL);return r-i};pg.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var PL=A((p_e,xL)=>{"use strict";xL.exports=gg;function gg(){this._listeners={}}gg.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this};gg.prototype.off=function(e,t){if(e===void 0)this._listeners={};else if(t===void 0)this._listeners[e]=[];else for(var r=this._listeners[e],i=0;i<r.length;)r[i].fn===t?r.splice(i,1):++i;return this};gg.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],i=1;i<arguments.length;)r.push(arguments[i++]);for(i=0;i<t.length;)t[i].fn.apply(t[i++].ctx,r)}return this}});var qL=A((g_e,jL)=>{"use strict";jL.exports=LL(LL);function LL(n){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),t=new Uint8Array(e.buffer),r=t[3]===128;function i(c,l,u){e[0]=c,l[u]=t[0],l[u+1]=t[1],l[u+2]=t[2],l[u+3]=t[3]}function s(c,l,u){e[0]=c,l[u]=t[3],l[u+1]=t[2],l[u+2]=t[1],l[u+3]=t[0]}n.writeFloatLE=r?i:s,n.writeFloatBE=r?s:i;function o(c,l){return t[0]=c[l],t[1]=c[l+1],t[2]=c[l+2],t[3]=c[l+3],e[0]}function a(c,l){return t[3]=c[l],t[2]=c[l+1],t[1]=c[l+2],t[0]=c[l+3],e[0]}n.readFloatLE=r?o:a,n.readFloatBE=r?a:o}():function(){function e(r,i,s,o){var a=i<0?1:0;if(a&&(i=-i),i===0)r(1/i>0?0:2147483648,s,o);else if(isNaN(i))r(2143289344,s,o);else if(i>34028234663852886e22)r((a<<31|2139095040)>>>0,s,o);else if(i<11754943508222875e-54)r((a<<31|Math.round(i/1401298464324817e-60))>>>0,s,o);else{var c=Math.floor(Math.log(i)/Math.LN2),l=Math.round(i*Math.pow(2,-c)*8388608)&8388607;r((a<<31|c+127<<23|l)>>>0,s,o)}}n.writeFloatLE=e.bind(null,FL),n.writeFloatBE=e.bind(null,BL);function t(r,i,s){var o=r(i,s),a=(o>>31)*2+1,c=o>>>23&255,l=o&8388607;return c===255?l?NaN:a*(1/0):c===0?a*1401298464324817e-60*l:a*Math.pow(2,c-150)*(l+8388608)}n.readFloatLE=t.bind(null,UL),n.readFloatBE=t.bind(null,VL)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),t=new Uint8Array(e.buffer),r=t[7]===128;function i(c,l,u){e[0]=c,l[u]=t[0],l[u+1]=t[1],l[u+2]=t[2],l[u+3]=t[3],l[u+4]=t[4],l[u+5]=t[5],l[u+6]=t[6],l[u+7]=t[7]}function s(c,l,u){e[0]=c,l[u]=t[7],l[u+1]=t[6],l[u+2]=t[5],l[u+3]=t[4],l[u+4]=t[3],l[u+5]=t[2],l[u+6]=t[1],l[u+7]=t[0]}n.writeDoubleLE=r?i:s,n.writeDoubleBE=r?s:i;function o(c,l){return t[0]=c[l],t[1]=c[l+1],t[2]=c[l+2],t[3]=c[l+3],t[4]=c[l+4],t[5]=c[l+5],t[6]=c[l+6],t[7]=c[l+7],e[0]}function a(c,l){return t[7]=c[l],t[6]=c[l+1],t[5]=c[l+2],t[4]=c[l+3],t[3]=c[l+4],t[2]=c[l+5],t[1]=c[l+6],t[0]=c[l+7],e[0]}n.readDoubleLE=r?o:a,n.readDoubleBE=r?a:o}():function(){function e(r,i,s,o,a,c){var l=o<0?1:0;if(l&&(o=-o),o===0)r(0,a,c+i),r(1/o>0?0:2147483648,a,c+s);else if(isNaN(o))r(0,a,c+i),r(2146959360,a,c+s);else if(o>17976931348623157e292)r(0,a,c+i),r((l<<31|2146435072)>>>0,a,c+s);else{var u;if(o<22250738585072014e-324)u=o/5e-324,r(u>>>0,a,c+i),r((l<<31|u/4294967296)>>>0,a,c+s);else{var d=Math.floor(Math.log(o)/Math.LN2);d===1024&&(d=1023),u=o*Math.pow(2,-d),r(u*4503599627370496>>>0,a,c+i),r((l<<31|d+1023<<20|u*1048576&1048575)>>>0,a,c+s)}}}n.writeDoubleLE=e.bind(null,FL,0,4),n.writeDoubleBE=e.bind(null,BL,4,0);function t(r,i,s,o,a){var c=r(o,a+i),l=r(o,a+s),u=(l>>31)*2+1,d=l>>>20&2047,h=4294967296*(l&1048575)+c;return d===2047?h?NaN:u*(1/0):d===0?u*5e-324*h:u*Math.pow(2,d-1075)*(h+4503599627370496)}n.readDoubleLE=t.bind(null,UL,0,4),n.readDoubleBE=t.bind(null,VL,4,0)}(),n}function FL(n,e,t){e[t]=n&255,e[t+1]=n>>>8&255,e[t+2]=n>>>16&255,e[t+3]=n>>>24}function BL(n,e,t){e[t]=n>>>24,e[t+1]=n>>>16&255,e[t+2]=n>>>8&255,e[t+3]=n&255}function UL(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16|n[e+3]<<24)>>>0}function VL(n,e){return(n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3])>>>0}});var hS=A((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(n){}return null}});var zL=A($L=>{"use strict";var pS=$L;pS.length=function(e){for(var t=0,r=0,i=0;i<e.length;++i)r=e.charCodeAt(i),r<128?t+=1:r<2048?t+=2:(r&64512)===55296&&(e.charCodeAt(i+1)&64512)===56320?(++i,t+=4):t+=3;return t};pS.read=function(e,t,r){var i=r-t;if(i<1)return"";for(var s=null,o=[],a=0,c;t<r;)c=e[t++],c<128?o[a++]=c:c>191&&c<224?o[a++]=(c&31)<<6|e[t++]&63:c>239&&c<365?(c=((c&7)<<18|(e[t++]&63)<<12|(e[t++]&63)<<6|e[t++]&63)-65536,o[a++]=55296+(c>>10),o[a++]=56320+(c&1023)):o[a++]=(c&15)<<12|(e[t++]&63)<<6|e[t++]&63,a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,o)),a=0);return s?(a&&s.push(String.fromCharCode.apply(String,o.slice(0,a))),s.join("")):String.fromCharCode.apply(String,o.slice(0,a))};pS.write=function(e,t,r){for(var i=r,s,o,a=0;a<e.length;++a)s=e.charCodeAt(a),s<128?t[r++]=s:s<2048?(t[r++]=s>>6|192,t[r++]=s&63|128):(s&64512)===55296&&((o=e.charCodeAt(a+1))&64512)===56320?(s=65536+((s&1023)<<10)+(o&1023),++a,t[r++]=s>>18|240,t[r++]=s>>12&63|128,t[r++]=s>>6&63|128,t[r++]=s&63|128):(t[r++]=s>>12|224,t[r++]=s>>6&63|128,t[r++]=s&63|128);return r-i}});var GL=A((y_e,HL)=>{"use strict";HL.exports=PJ;function PJ(n,e,t){var r=t||8192,i=r>>>1,s=null,o=r;return function(c){if(c<1||c>i)return n(c);o+c>r&&(s=n(r),o=0);var l=e.call(s,o,o+=c);return o&7&&(o=(o|7)+1),l}}});var KL=A((v_e,WL)=>{"use strict";WL.exports=Tt;var Qu=Pr();function Tt(n,e){this.lo=n>>>0,this.hi=e>>>0}var wo=Tt.zero=new Tt(0,0);wo.toNumber=function(){return 0};wo.zzEncode=wo.zzDecode=function(){return this};wo.length=function(){return 1};var LJ=Tt.zeroHash="\0\0\0\0\0\0\0\0";Tt.fromNumber=function(e){if(e===0)return wo;var t=e<0;t&&(e=-e);var r=e>>>0,i=(e-r)/4294967296>>>0;return t&&(i=~i>>>0,r=~r>>>0,++r>4294967295&&(r=0,++i>4294967295&&(i=0))),new Tt(r,i)};Tt.from=function(e){if(typeof e=="number")return Tt.fromNumber(e);if(Qu.isString(e))if(Qu.Long)e=Qu.Long.fromString(e);else return Tt.fromNumber(parseInt(e,10));return e.low||e.high?new Tt(e.low>>>0,e.high>>>0):wo};Tt.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=~this.lo+1>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+r*4294967296)}return this.lo+this.hi*4294967296};Tt.prototype.toLong=function(e){return Qu.Long?new Qu.Long(this.lo|0,this.hi|0,!!e):{low:this.lo|0,high:this.hi|0,unsigned:!!e}};var hs=String.prototype.charCodeAt;Tt.fromHash=function(e){return e===LJ?wo:new Tt((hs.call(e,0)|hs.call(e,1)<<8|hs.call(e,2)<<16|hs.call(e,3)<<24)>>>0,(hs.call(e,4)|hs.call(e,5)<<8|hs.call(e,6)<<16|hs.call(e,7)<<24)>>>0)};Tt.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};Tt.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};Tt.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};Tt.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return r===0?t===0?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}});var Pr=A(gS=>{"use strict";var K=gS;K.asPromise=fS();K.base64=kL();K.EventEmitter=PL();K.float=qL();K.inquire=hS();K.utf8=zL();K.pool=GL();K.LongBits=KL();K.isNode=!!(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node);K.global=K.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||gS;K.emptyArray=Object.freeze?Object.freeze([]):[];K.emptyObject=Object.freeze?Object.freeze({}):{};K.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};K.isString=function(e){return typeof e=="string"||e instanceof String};K.isObject=function(e){return e&&typeof e=="object"};K.isset=K.isSet=function(e,t){var r=e[t];return r!=null&&e.hasOwnProperty(t)?typeof r!="object"||(Array.isArray(r)?r.length:Object.keys(r).length)>0:!1};K.Buffer=function(){try{var n=K.inquire("buffer").Buffer;return n.prototype.utf8Write?n:null}catch{return null}}();K._Buffer_from=null;K._Buffer_allocUnsafe=null;K.newBuffer=function(e){return typeof e=="number"?K.Buffer?K._Buffer_allocUnsafe(e):new K.Array(e):K.Buffer?K._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)};K.Array=typeof Uint8Array<"u"?Uint8Array:Array;K.Long=K.global.dcodeIO&&K.global.dcodeIO.Long||K.global.Long||K.inquire("long");K.key2Re=/^true|false|0|1$/;K.key32Re=/^-?(?:0|[1-9][0-9]*)$/;K.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;K.longToHash=function(e){return e?K.LongBits.from(e).toHash():K.LongBits.zeroHash};K.longFromHash=function(e,t){var r=K.LongBits.fromHash(e);return K.Long?K.Long.fromBits(r.lo,r.hi,t):r.toNumber(!!t)};function QL(n,e,t){for(var r=Object.keys(e),i=0;i<r.length;++i)(n[r[i]]===void 0||!t)&&(n[r[i]]=e[r[i]]);return n}K.merge=QL;K.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function YL(n){function e(t,r){if(!(this instanceof e))return new e(t,r);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),r&&QL(this,r)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return n},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}K.newError=YL;K.ProtocolError=YL("ProtocolError");K.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var i=Object.keys(this),s=i.length-1;s>-1;--s)if(t[i[s]]===1&&this[i[s]]!==void 0&&this[i[s]]!==null)return i[s]}};K.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}};K.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};K._configure=function(){var n=K.Buffer;if(!n){K._Buffer_from=K._Buffer_allocUnsafe=null;return}K._Buffer_from=n.from!==Uint8Array.from&&n.from||function(t,r){return new n(t,r)},K._Buffer_allocUnsafe=n.allocUnsafe||function(t){return new n(t)}}});var yg=A((w_e,eF)=>{"use strict";eF.exports=Se;var Fn=Pr(),mS,mg=Fn.LongBits,ZL=Fn.base64,JL=Fn.utf8;function Yu(n,e,t){this.fn=n,this.len=e,this.next=void 0,this.val=t}function vS(){}function FJ(n){this.head=n.head,this.tail=n.tail,this.len=n.len,this.next=n.states}function Se(){this.len=0,this.head=new Yu(vS,0,0),this.tail=this.head,this.states=null}var XL=function(){return Fn.Buffer?function(){return(Se.create=function(){return new mS})()}:function(){return new Se}};Se.create=XL();Se.alloc=function(e){return new Fn.Array(e)};Fn.Array!==Array&&(Se.alloc=Fn.pool(Se.alloc,Fn.Array.prototype.subarray));Se.prototype._push=function(e,t,r){return this.tail=this.tail.next=new Yu(e,t,r),this.len+=t,this};function ES(n,e,t){e[t]=n&255}function BJ(n,e,t){for(;n>127;)e[t++]=n&127|128,n>>>=7;e[t]=n}function wS(n,e){this.len=n,this.next=void 0,this.val=e}wS.prototype=Object.create(Yu.prototype);wS.prototype.fn=BJ;Se.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new wS((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};Se.prototype.int32=function(e){return e<0?this._push(TS,10,mg.fromNumber(e)):this.uint32(e)};Se.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function TS(n,e,t){for(;n.hi;)e[t++]=n.lo&127|128,n.lo=(n.lo>>>7|n.hi<<25)>>>0,n.hi>>>=7;for(;n.lo>127;)e[t++]=n.lo&127|128,n.lo=n.lo>>>7;e[t++]=n.lo}Se.prototype.uint64=function(e){var t=mg.from(e);return this._push(TS,t.length(),t)};Se.prototype.int64=Se.prototype.uint64;Se.prototype.sint64=function(e){var t=mg.from(e).zzEncode();return this._push(TS,t.length(),t)};Se.prototype.bool=function(e){return this._push(ES,1,e?1:0)};function yS(n,e,t){e[t]=n&255,e[t+1]=n>>>8&255,e[t+2]=n>>>16&255,e[t+3]=n>>>24}Se.prototype.fixed32=function(e){return this._push(yS,4,e>>>0)};Se.prototype.sfixed32=Se.prototype.fixed32;Se.prototype.fixed64=function(e){var t=mg.from(e);return this._push(yS,4,t.lo)._push(yS,4,t.hi)};Se.prototype.sfixed64=Se.prototype.fixed64;Se.prototype.float=function(e){return this._push(Fn.float.writeFloatLE,4,e)};Se.prototype.double=function(e){return this._push(Fn.float.writeDoubleLE,8,e)};var UJ=Fn.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var i=0;i<e.length;++i)t[r+i]=e[i]};Se.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(ES,1,0);if(Fn.isString(e)){var r=Se.alloc(t=ZL.length(e));ZL.decode(e,r,0),e=r}return this.uint32(t)._push(UJ,t,e)};Se.prototype.string=function(e){var t=JL.length(e);return t?this.uint32(t)._push(JL.write,t,e):this._push(ES,1,0)};Se.prototype.fork=function(){return this.states=new FJ(this),this.head=this.tail=new Yu(vS,0,0),this.len=0,this};Se.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Yu(vS,0,0),this.len=0),this};Se.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this};Se.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t};Se._configure=function(n){mS=n,Se.create=XL(),mS._configure()}});var rF=A((T_e,nF)=>{"use strict";nF.exports=Lr;var tF=yg();(Lr.prototype=Object.create(tF.prototype)).constructor=Lr;var ps=Pr();function Lr(){tF.call(this)}Lr._configure=function(){Lr.alloc=ps._Buffer_allocUnsafe,Lr.writeBytesBuffer=ps.Buffer&&ps.Buffer.prototype instanceof Uint8Array&&ps.Buffer.prototype.set.name==="set"?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var i=0;i<e.length;)t[r++]=e[i++]}};Lr.prototype.bytes=function(e){ps.isString(e)&&(e=ps._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(Lr.writeBytesBuffer,t,e),this};function VJ(n,e,t){n.length<40?ps.utf8.write(n,e,t):e.utf8Write?e.utf8Write(n,t):e.write(n,t)}Lr.prototype.string=function(e){var t=ps.Buffer.byteLength(e);return this.uint32(t),t&&this._push(VJ,t,e),this};Lr._configure()});var Eg=A((b_e,cF)=>{"use strict";cF.exports=st;var or=Pr(),_S,oF=or.LongBits,jJ=or.utf8;function ar(n,e){return RangeError("index out of range: "+n.pos+" + "+(e||1)+" > "+n.len)}function st(n){this.buf=n,this.pos=0,this.len=n.length}var iF=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new st(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new st(e);throw Error("illegal buffer")},aF=function(){return or.Buffer?function(t){return(st.create=function(i){return or.Buffer.isBuffer(i)?new _S(i):iF(i)})(t)}:iF};st.create=aF();st.prototype._slice=or.Array.prototype.subarray||or.Array.prototype.slice;st.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,ar(this,10);return e}}();st.prototype.int32=function(){return this.uint32()|0};st.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function bS(){var n=new oF(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(n.lo=(n.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return n;if(n.lo=(n.lo|(this.buf[this.pos]&127)<<28)>>>0,n.hi=(n.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return n;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw ar(this);if(n.lo=(n.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return n}return n.lo=(n.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,n}if(this.len-this.pos>4){for(;e<5;++e)if(n.hi=(n.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return n}else for(;e<5;++e){if(this.pos>=this.len)throw ar(this);if(n.hi=(n.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return n}throw Error("invalid varint encoding")}st.prototype.bool=function(){return this.uint32()!==0};function vg(n,e){return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0}st.prototype.fixed32=function(){if(this.pos+4>this.len)throw ar(this,4);return vg(this.buf,this.pos+=4)};st.prototype.sfixed32=function(){if(this.pos+4>this.len)throw ar(this,4);return vg(this.buf,this.pos+=4)|0};function sF(){if(this.pos+8>this.len)throw ar(this,8);return new oF(vg(this.buf,this.pos+=4),vg(this.buf,this.pos+=4))}st.prototype.float=function(){if(this.pos+4>this.len)throw ar(this,4);var e=or.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};st.prototype.double=function(){if(this.pos+8>this.len)throw ar(this,4);var e=or.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};st.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw ar(this,e);if(this.pos+=e,Array.isArray(this.buf))return this.buf.slice(t,r);if(t===r){var i=or.Buffer;return i?i.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,t,r)};st.prototype.string=function(){var e=this.bytes();return jJ.read(e,0,e.length)};st.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw ar(this,e);this.pos+=e}else do if(this.pos>=this.len)throw ar(this);while(this.buf[this.pos++]&128);return this};st.prototype.skipType=function(n){switch(n){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(n=this.uint32()&7)!==4;)this.skipType(n);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+n+" at offset "+this.pos)}return this};st._configure=function(n){_S=n,st.create=aF(),_S._configure();var e=or.Long?"toLong":"toNumber";or.merge(st.prototype,{int64:function(){return bS.call(this)[e](!1)},uint64:function(){return bS.call(this)[e](!0)},sint64:function(){return bS.call(this).zzDecode()[e](!1)},fixed64:function(){return sF.call(this)[e](!0)},sfixed64:function(){return sF.call(this)[e](!1)}})}});var fF=A((__e,dF)=>{"use strict";dF.exports=To;var uF=Eg();(To.prototype=Object.create(uF.prototype)).constructor=To;var lF=Pr();function To(n){uF.call(this,n)}To._configure=function(){lF.Buffer&&(To.prototype._slice=lF.Buffer.prototype.slice)};To.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};To._configure()});var pF=A((S_e,hF)=>{"use strict";hF.exports=Zu;var SS=Pr();(Zu.prototype=Object.create(SS.EventEmitter.prototype)).constructor=Zu;function Zu(n,e,t){if(typeof n!="function")throw TypeError("rpcImpl must be a function");SS.EventEmitter.call(this),this.rpcImpl=n,this.requestDelimited=!!e,this.responseDelimited=!!t}Zu.prototype.rpcCall=function n(e,t,r,i,s){if(!i)throw TypeError("request must be specified");var o=this;if(!s)return SS.asPromise(n,o,e,t,r,i);if(!o.rpcImpl){setTimeout(function(){s(Error("already ended"))},0);return}try{return o.rpcImpl(e,t[o.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(c,l){if(c)return o.emit("error",c,e),s(c);if(l===null){o.end(!0);return}if(!(l instanceof r))try{l=r[o.responseDelimited?"decodeDelimited":"decode"](l)}catch(u){return o.emit("error",u,e),s(u)}return o.emit("data",l,e),s(null,l)})}catch(a){o.emit("error",a,e),setTimeout(function(){s(a)},0);return}};Zu.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var CS=A(gF=>{"use strict";var qJ=gF;qJ.Service=pF()});var IS=A((I_e,mF)=>{"use strict";mF.exports={}});var EF=A(vF=>{"use strict";var hn=vF;hn.build="minimal";hn.Writer=yg();hn.BufferWriter=rF();hn.Reader=Eg();hn.BufferReader=fF();hn.util=Pr();hn.rpc=CS();hn.roots=IS();hn.configure=yF;function yF(){hn.util._configure(),hn.Writer._configure(hn.BufferWriter),hn.Reader._configure(hn.BufferReader)}yF()});var TF=A((A_e,wF)=>{"use strict";wF.exports=DS;function DS(n,e){typeof n=="string"&&(e=n,n=void 0);var t=[];function r(s){if(typeof s!="string"){var o=i();if(DS.verbose&&console.log("codegen: "+o),o="return "+o,s){for(var a=Object.keys(s),c=new Array(a.length+1),l=new Array(a.length),u=0;u<a.length;)c[u]=a[u],l[u]=s[a[u++]];return c[u]=o,Function.apply(null,c).apply(null,l)}return Function(o)()}for(var d=new Array(arguments.length-1),h=0;h<d.length;)d[h]=arguments[++h];if(h=0,s=s.replace(/%([%dfijs])/g,function(v,w){var S=d[h++];switch(w){case"d":case"f":return String(Number(S));case"i":return String(Math.floor(S));case"j":return JSON.stringify(S);case"s":return String(S)}return"%"}),h!==d.length)throw Error("parameter count mismatch");return t.push(s),r}function i(s){return"function "+(s||e||"")+"("+(n&&n.join(",")||"")+`){
  `+t.join(`
  `)+`
}`}return r.toString=i,r}DS.verbose=!1});var _F=A((R_e,bF)=>{"use strict";bF.exports=Ju;var $J=fS(),zJ=hS(),AS=zJ("fs");function Ju(n,e,t){return typeof e=="function"?(t=e,e={}):e||(e={}),t?!e.xhr&&AS&&AS.readFile?AS.readFile(n,function(i,s){return i&&typeof XMLHttpRequest<"u"?Ju.xhr(n,e,t):i?t(i):t(null,e.binary?s:s.toString("utf8"))}):Ju.xhr(n,e,t):$J(Ju,this,n,e)}Ju.xhr=function(e,t,r){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(i.readyState===4){if(i.status!==0&&i.status!==200)return r(Error("status "+i.status));if(t.binary){var o=i.response;if(!o){o=[];for(var a=0;a<i.responseText.length;++a)o.push(i.responseText.charCodeAt(a)&255)}return r(null,typeof Uint8Array<"u"?new Uint8Array(o):o)}return r(null,i.responseText)}},t.binary&&("overrideMimeType"in i&&i.overrideMimeType("text/plain; charset=x-user-defined"),i.responseType="arraybuffer"),i.open("GET",e),i.send()}});var IF=A(CF=>{"use strict";var NS=CF,SF=NS.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},RS=NS.normalize=function(e){e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/");var t=e.split("/"),r=SF(e),i="";r&&(i=t.shift()+"/");for(var s=0;s<t.length;)t[s]===".."?s>0&&t[s-1]!==".."?t.splice(--s,2):r?t.splice(s,1):++s:t[s]==="."?t.splice(s,1):++s;return i+t.join("/")};NS.resolve=function(e,t,r){return r||(t=RS(t)),SF(t)?t:(r||(e=RS(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?RS(e+"/"+t):t)}});var bo=A(DF=>{"use strict";var Xu=DF,HJ=bt(),GJ=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function ed(n,e){var t=0,r={};for(e|=0;t<n.length;)r[GJ[t+e]]=n[t++];return r}Xu.basic=ed([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]);Xu.defaults=ed([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",HJ.emptyArray,null]);Xu.long=ed([0,0,0,1,1],7);Xu.mapKey=ed([0,0,0,5,5,0,0,0,1,1,0,2],2);Xu.packed=ed([1,5,0,0,0,5,5,0,0,0,1,1,0])});var gs=A((O_e,NF)=>{"use strict";NF.exports=Bn;var wg=_o();((Bn.prototype=Object.create(wg.prototype)).constructor=Bn).className="Field";var AF=cr(),RF=bo(),ut=bt(),MS,WJ=/^required|optional|repeated$/;Bn.fromJSON=function(e,t){return new Bn(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)};function Bn(n,e,t,r,i,s,o){if(ut.isObject(r)?(o=i,s=r,r=i=void 0):ut.isObject(i)&&(o=s,s=i,i=void 0),wg.call(this,n,s),!ut.isInteger(e)||e<0)throw TypeError("id must be a non-negative integer");if(!ut.isString(t))throw TypeError("type must be a string");if(r!==void 0&&!WJ.test(r=r.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(i!==void 0&&!ut.isString(i))throw TypeError("extend must be a string");r==="proto3_optional"&&(r="optional"),this.rule=r&&r!=="optional"?r:void 0,this.type=t,this.id=e,this.extend=i||void 0,this.required=r==="required",this.optional=!this.required,this.repeated=r==="repeated",this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=ut.Long?RF.long[t]!==void 0:!1,this.bytes=t==="bytes",this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=o}Object.defineProperty(Bn.prototype,"packed",{get:function(){return this._packed===null&&(this._packed=this.getOption("packed")!==!1),this._packed}});Bn.prototype.setOption=function(e,t,r){return e==="packed"&&(this._packed=null),wg.prototype.setOption.call(this,e,t,r)};Bn.prototype.toJSON=function(e){var t=e?!!e.keepComments:!1;return ut.toObject(["rule",this.rule!=="optional"&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])};Bn.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=RF.defaults[this.type])===void 0?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof MS?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&this.options.default!=null&&(this.typeDefault=this.options.default,this.resolvedType instanceof AF&&typeof this.typeDefault=="string"&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&((this.options.packed===!0||this.options.packed!==void 0&&this.resolvedType&&!(this.resolvedType instanceof AF))&&delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=ut.Long.fromNumber(this.typeDefault,this.type.charAt(0)==="u"),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&typeof this.typeDefault=="string"){var e;ut.base64.test(this.typeDefault)?ut.base64.decode(this.typeDefault,e=ut.newBuffer(ut.base64.length(this.typeDefault)),0):ut.utf8.write(this.typeDefault,e=ut.newBuffer(ut.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=ut.emptyObject:this.repeated?this.defaultValue=ut.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof MS&&(this.parent.ctor.prototype[this.name]=this.defaultValue),wg.prototype.resolve.call(this)};Bn.d=function(e,t,r,i){return typeof t=="function"?t=ut.decorateType(t).name:t&&typeof t=="object"&&(t=ut.decorateEnum(t).name),function(o,a){ut.decorateType(o.constructor).add(new Bn(a,e,t,r,{default:i}))}};Bn._configure=function(e){MS=e}});var yc=A((k_e,kF)=>{"use strict";kF.exports=Un;var bg=_o();((Un.prototype=Object.create(bg.prototype)).constructor=Un).className="OneOf";var MF=gs(),Tg=bt();function Un(n,e,t,r){if(Array.isArray(e)||(t=e,e=void 0),bg.call(this,n,t),!(e===void 0||Array.isArray(e)))throw TypeError("fieldNames must be an Array");this.oneof=e||[],this.fieldsArray=[],this.comment=r}Un.fromJSON=function(e,t){return new Un(e,t.oneof,t.options,t.comment)};Un.prototype.toJSON=function(e){var t=e?!!e.keepComments:!1;return Tg.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])};function OF(n){if(n.parent)for(var e=0;e<n.fieldsArray.length;++e)n.fieldsArray[e].parent||n.parent.add(n.fieldsArray[e])}Un.prototype.add=function(e){if(!(e instanceof MF))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,OF(this),this};Un.prototype.remove=function(e){if(!(e instanceof MF))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),t=this.oneof.indexOf(e.name),t>-1&&this.oneof.splice(t,1),e.partOf=null,this};Un.prototype.onAdd=function(e){bg.prototype.onAdd.call(this,e);for(var t=this,r=0;r<this.oneof.length;++r){var i=e.get(this.oneof[r]);i&&!i.partOf&&(i.partOf=t,t.fieldsArray.push(i))}OF(this)};Un.prototype.onRemove=function(e){for(var t=0,r;t<this.fieldsArray.length;++t)(r=this.fieldsArray[t]).parent&&r.parent.remove(r);bg.prototype.onRemove.call(this,e)};Un.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(i,s){Tg.decorateType(i.constructor).add(new Un(s,e)),Object.defineProperty(i,s,{get:Tg.oneOfGetter(e),set:Tg.oneOfSetter(e)})}}});var wc=A((x_e,FF)=>{"use strict";FF.exports=Ie;var OS=_o();((Ie.prototype=Object.create(OS.prototype)).constructor=Ie).className="Namespace";var xF=gs(),_g=bt(),KJ=yc(),vc,td,Ec;Ie.fromJSON=function(e,t){return new Ie(e,t.options).addJSON(t.nested)};function PF(n,e){if(n&&n.length){for(var t={},r=0;r<n.length;++r)t[n[r].name]=n[r].toJSON(e);return t}}Ie.arrayToJSON=PF;Ie.isReservedId=function(e,t){if(e){for(var r=0;r<e.length;++r)if(typeof e[r]!="string"&&e[r][0]<=t&&e[r][1]>t)return!0}return!1};Ie.isReservedName=function(e,t){if(e){for(var r=0;r<e.length;++r)if(e[r]===t)return!0}return!1};function Ie(n,e){OS.call(this,n,e),this.nested=void 0,this._nestedArray=null}function LF(n){return n._nestedArray=null,n}Object.defineProperty(Ie.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=_g.toArray(this.nested))}});Ie.prototype.toJSON=function(e){return _g.toObject(["options",this.options,"nested",PF(this.nestedArray,e)])};Ie.prototype.addJSON=function(e){var t=this;if(e)for(var r=Object.keys(e),i=0,s;i<r.length;++i)s=e[r[i]],t.add((s.fields!==void 0?vc.fromJSON:s.values!==void 0?Ec.fromJSON:s.methods!==void 0?td.fromJSON:s.id!==void 0?xF.fromJSON:Ie.fromJSON)(r[i],s));return this};Ie.prototype.get=function(e){return this.nested&&this.nested[e]||null};Ie.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof Ec)return this.nested[e].values;throw Error("no such enum: "+e)};Ie.prototype.add=function(e){if(!(e instanceof xF&&e.extend!==void 0||e instanceof vc||e instanceof KJ||e instanceof Ec||e instanceof td||e instanceof Ie))throw TypeError("object must be a valid nested object");if(!this.nested)this.nested={};else{var t=this.get(e.name);if(t)if(t instanceof Ie&&e instanceof Ie&&!(t instanceof vc||t instanceof td)){for(var r=t.nestedArray,i=0;i<r.length;++i)e.add(r[i]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}else throw Error("duplicate name '"+e.name+"' in "+this)}return this.nested[e.name]=e,e.onAdd(this),LF(this)};Ie.prototype.remove=function(e){if(!(e instanceof OS))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),LF(this)};Ie.prototype.define=function(e,t){if(_g.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&e[0]==="")throw Error("path must be relative");for(var r=this;e.length>0;){var i=e.shift();if(r.nested&&r.nested[i]){if(r=r.nested[i],!(r instanceof Ie))throw Error("path conflicts with non-namespace objects")}else r.add(r=new Ie(i))}return t&&r.addJSON(t),r};Ie.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof Ie?e[t++].resolveAll():e[t++].resolve();return this.resolve()};Ie.prototype.lookup=function(e,t,r){if(typeof t=="boolean"?(r=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),_g.isString(e)&&e.length){if(e===".")return this.root;e=e.split(".")}else if(!e.length)return this;if(e[0]==="")return this.root.lookup(e.slice(1),t);var i=this.get(e[0]);if(i){if(e.length===1){if(!t||t.indexOf(i.constructor)>-1)return i}else if(i instanceof Ie&&(i=i.lookup(e.slice(1),t,!0)))return i}else for(var s=0;s<this.nestedArray.length;++s)if(this._nestedArray[s]instanceof Ie&&(i=this._nestedArray[s].lookup(e,t,!0)))return i;return this.parent===null||r?null:this.parent.lookup(e,t)};Ie.prototype.lookupType=function(e){var t=this.lookup(e,[vc]);if(!t)throw Error("no such type: "+e);return t};Ie.prototype.lookupEnum=function(e){var t=this.lookup(e,[Ec]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t};Ie.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[vc,Ec]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t};Ie.prototype.lookupService=function(e){var t=this.lookup(e,[td]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t};Ie._configure=function(n,e,t){vc=n,td=e,Ec=t}});var Sg=A((P_e,BF)=>{"use strict";BF.exports=yi;var kS=gs();((yi.prototype=Object.create(kS.prototype)).constructor=yi).className="MapField";var QJ=bo(),nd=bt();function yi(n,e,t,r,i,s){if(kS.call(this,n,e,r,void 0,void 0,i,s),!nd.isString(t))throw TypeError("keyType must be a string");this.keyType=t,this.resolvedKeyType=null,this.map=!0}yi.fromJSON=function(e,t){return new yi(e,t.id,t.keyType,t.type,t.options,t.comment)};yi.prototype.toJSON=function(e){var t=e?!!e.keepComments:!1;return nd.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])};yi.prototype.resolve=function(){if(this.resolved)return this;if(QJ.mapKey[this.keyType]===void 0)throw Error("invalid key type: "+this.keyType);return kS.prototype.resolve.call(this)};yi.d=function(e,t,r){return typeof r=="function"?r=nd.decorateType(r).name:r&&typeof r=="object"&&(r=nd.decorateEnum(r).name),function(s,o){nd.decorateType(s.constructor).add(new yi(o,e,t,r))}}});var Cg=A((L_e,UF)=>{"use strict";UF.exports=So;var xS=_o();((So.prototype=Object.create(xS.prototype)).constructor=So).className="Method";var Tc=bt();function So(n,e,t,r,i,s,o,a,c){if(Tc.isObject(i)?(o=i,i=s=void 0):Tc.isObject(s)&&(o=s,s=void 0),!(e===void 0||Tc.isString(e)))throw TypeError("type must be a string");if(!Tc.isString(t))throw TypeError("requestType must be a string");if(!Tc.isString(r))throw TypeError("responseType must be a string");xS.call(this,n,o),this.type=e||"rpc",this.requestType=t,this.requestStream=i?!0:void 0,this.responseType=r,this.responseStream=s?!0:void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=a,this.parsedOptions=c}So.fromJSON=function(e,t){return new So(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)};So.prototype.toJSON=function(e){var t=e?!!e.keepComments:!1;return Tc.toObject(["type",this.type!=="rpc"&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0,"parsedOptions",this.parsedOptions])};So.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),xS.prototype.resolve.call(this))}});var Ig=A((F_e,jF)=>{"use strict";jF.exports=Vn;var ms=wc();((Vn.prototype=Object.create(ms.prototype)).constructor=Vn).className="Service";var PS=Cg(),rd=bt(),YJ=CS();function Vn(n,e){ms.call(this,n,e),this.methods={},this._methodsArray=null}Vn.fromJSON=function(e,t){var r=new Vn(e,t.options);if(t.methods)for(var i=Object.keys(t.methods),s=0;s<i.length;++s)r.add(PS.fromJSON(i[s],t.methods[i[s]]));return t.nested&&r.addJSON(t.nested),r.comment=t.comment,r};Vn.prototype.toJSON=function(e){var t=ms.prototype.toJSON.call(this,e),r=e?!!e.keepComments:!1;return rd.toObject(["options",t&&t.options||void 0,"methods",ms.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])};Object.defineProperty(Vn.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=rd.toArray(this.methods))}});function VF(n){return n._methodsArray=null,n}Vn.prototype.get=function(e){return this.methods[e]||ms.prototype.get.call(this,e)};Vn.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return ms.prototype.resolve.call(this)};Vn.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof PS?(this.methods[e.name]=e,e.parent=this,VF(this)):ms.prototype.add.call(this,e)};Vn.prototype.remove=function(e){if(e instanceof PS){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,VF(this)}return ms.prototype.remove.call(this,e)};Vn.prototype.create=function(e,t,r){for(var i=new YJ.Service(e,t,r),s=0,o;s<this.methodsArray.length;++s){var a=rd.lcFirst((o=this._methodsArray[s]).resolve().name).replace(/[^$\w_]/g,"");i[a]=rd.codegen(["r","c"],rd.isReserved(a)?a+"_":a)("return this.rpcCall(m,q,s,r,c)")({m:o,q:o.resolvedRequestType.ctor,s:o.resolvedResponseType.ctor})}return i}});var Dg=A((B_e,qF)=>{"use strict";qF.exports=Fr;var ZJ=Pr();function Fr(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)this[e[t]]=n[e[t]]}Fr.create=function(e){return this.$type.create(e)};Fr.encode=function(e,t){return this.$type.encode(e,t)};Fr.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)};Fr.decode=function(e){return this.$type.decode(e)};Fr.decodeDelimited=function(e){return this.$type.decodeDelimited(e)};Fr.verify=function(e){return this.$type.verify(e)};Fr.fromObject=function(e){return this.$type.fromObject(e)};Fr.toObject=function(e,t){return this.$type.toObject(e,t)};Fr.prototype.toJSON=function(){return this.$type.toObject(this,ZJ.toJSONOptions)}});var LS=A((U_e,zF)=>{"use strict";zF.exports=eX;var JJ=cr(),vi=bo(),$F=bt();function XJ(n){return"missing required '"+n.name+"'"}function eX(n){var e=$F.codegen(["r","l"],n.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(n.fieldsArray.filter(function(a){return a.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");n.group&&e("if((t&7)===4)")("break"),e("switch(t>>>3){");for(var t=0;t<n.fieldsArray.length;++t){var r=n._fieldsArray[t].resolve(),i=r.resolvedType instanceof JJ?"int32":r.type,s="m"+$F.safeProp(r.name);e("case %i: {",r.id),r.map?(e("if(%s===util.emptyObject)",s)("%s={}",s)("var c2 = r.uint32()+r.pos"),vi.defaults[r.keyType]!==void 0?e("k=%j",vi.defaults[r.keyType]):e("k=null"),vi.defaults[i]!==void 0?e("value=%j",vi.defaults[i]):e("value=null"),e("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",r.keyType)("case 2:"),vi.basic[i]===void 0?e("value=types[%i].decode(r,r.uint32())",t):e("value=r.%s()",i),e("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),vi.long[r.keyType]!==void 0?e('%s[typeof k==="object"?util.longToHash(k):k]=value',s):e("%s[k]=value",s)):r.repeated?(e("if(!(%s&&%s.length))",s,s)("%s=[]",s),vi.packed[i]!==void 0&&e("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",s,i)("}else"),vi.basic[i]===void 0?e(r.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",s,t):e("%s.push(r.%s())",s,i)):vi.basic[i]===void 0?e(r.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",s,t):e("%s=r.%s()",s,i),e("break")("}")}for(e("default:")("r.skipType(t&7)")("break")("}")("}"),t=0;t<n._fieldsArray.length;++t){var o=n._fieldsArray[t];o.required&&e("if(!m.hasOwnProperty(%j))",o.name)("throw util.ProtocolError(%j,{instance:m})",XJ(o))}return e("return m")}});var US=A((V_e,HF)=>{"use strict";HF.exports=rX;var tX=cr(),FS=bt();function jn(n,e){return n.name+": "+e+(n.repeated&&e!=="array"?"[]":n.map&&e!=="object"?"{k:"+n.keyType+"}":"")+" expected"}function BS(n,e,t,r){if(e.resolvedType)if(e.resolvedType instanceof tX){n("switch(%s){",r)("default:")("return%j",jn(e,"enum value"));for(var i=Object.keys(e.resolvedType.values),s=0;s<i.length;++s)n("case %i:",e.resolvedType.values[i[s]]);n("break")("}")}else n("{")("var e=types[%i].verify(%s);",t,r)("if(e)")("return%j+e",e.name+".")("}");else switch(e.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":n("if(!util.isInteger(%s))",r)("return%j",jn(e,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":n("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",r,r,r,r)("return%j",jn(e,"integer|Long"));break;case"float":case"double":n('if(typeof %s!=="number")',r)("return%j",jn(e,"number"));break;case"bool":n('if(typeof %s!=="boolean")',r)("return%j",jn(e,"boolean"));break;case"string":n("if(!util.isString(%s))",r)("return%j",jn(e,"string"));break;case"bytes":n('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',r,r,r)("return%j",jn(e,"buffer"));break}return n}function nX(n,e,t){switch(e.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":n("if(!util.key32Re.test(%s))",t)("return%j",jn(e,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":n("if(!util.key64Re.test(%s))",t)("return%j",jn(e,"integer|Long key"));break;case"bool":n("if(!util.key2Re.test(%s))",t)("return%j",jn(e,"boolean key"));break}return n}function rX(n){var e=FS.codegen(["m"],n.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),t=n.oneofsArray,r={};t.length&&e("var p={}");for(var i=0;i<n.fieldsArray.length;++i){var s=n._fieldsArray[i].resolve(),o="m"+FS.safeProp(s.name);if(s.optional&&e("if(%s!=null&&m.hasOwnProperty(%j)){",o,s.name),s.map)e("if(!util.isObject(%s))",o)("return%j",jn(s,"object"))("var k=Object.keys(%s)",o)("for(var i=0;i<k.length;++i){"),nX(e,s,"k[i]"),BS(e,s,i,o+"[k[i]]")("}");else if(s.repeated)e("if(!Array.isArray(%s))",o)("return%j",jn(s,"array"))("for(var i=0;i<%s.length;++i){",o),BS(e,s,i,o+"[i]")("}");else{if(s.partOf){var a=FS.safeProp(s.partOf.name);r[s.partOf.name]===1&&e("if(p%s===1)",a)("return%j",s.partOf.name+": multiple values"),r[s.partOf.name]=1,e("p%s=1",a)}BS(e,s,i,o)}s.optional&&e("}")}return e("return null")}});var qS=A(WF=>{"use strict";var GF=WF,id=cr(),Br=bt();function VS(n,e,t,r){var i=!1;if(e.resolvedType)if(e.resolvedType instanceof id){n("switch(d%s){",r);for(var s=e.resolvedType.values,o=Object.keys(s),a=0;a<o.length;++a)s[o[a]]===e.typeDefault&&!i&&(n("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',r,r,r),e.repeated||n("break"),i=!0),n("case%j:",o[a])("case %i:",s[o[a]])("m%s=%j",r,s[o[a]])("break");n("}")}else n('if(typeof d%s!=="object")',r)("throw TypeError(%j)",e.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",r,t,r);else{var c=!1;switch(e.type){case"double":case"float":n("m%s=Number(d%s)",r,r);break;case"uint32":case"fixed32":n("m%s=d%s>>>0",r,r);break;case"int32":case"sint32":case"sfixed32":n("m%s=d%s|0",r,r);break;case"uint64":c=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":n("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",r,r,c)('else if(typeof d%s==="string")',r)("m%s=parseInt(d%s,10)",r,r)('else if(typeof d%s==="number")',r)("m%s=d%s",r,r)('else if(typeof d%s==="object")',r)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",r,r,r,c?"true":"");break;case"bytes":n('if(typeof d%s==="string")',r)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",r,r,r)("else if(d%s.length >= 0)",r)("m%s=d%s",r,r);break;case"string":n("m%s=String(d%s)",r,r);break;case"bool":n("m%s=Boolean(d%s)",r,r);break}}return n}GF.fromObject=function(e){var t=e.fieldsArray,r=Br.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return r("return new this.ctor");r("var m=new this.ctor");for(var i=0;i<t.length;++i){var s=t[i].resolve(),o=Br.safeProp(s.name);s.map?(r("if(d%s){",o)('if(typeof d%s!=="object")',o)("throw TypeError(%j)",s.fullName+": object expected")("m%s={}",o)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",o),VS(r,s,i,o+"[ks[i]]")("}")("}")):s.repeated?(r("if(d%s){",o)("if(!Array.isArray(d%s))",o)("throw TypeError(%j)",s.fullName+": array expected")("m%s=[]",o)("for(var i=0;i<d%s.length;++i){",o),VS(r,s,i,o+"[i]")("}")("}")):(s.resolvedType instanceof id||r("if(d%s!=null){",o),VS(r,s,i,o),s.resolvedType instanceof id||r("}"))}return r("return m")};function jS(n,e,t,r){if(e.resolvedType)e.resolvedType instanceof id?n("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",r,t,r,r,t,r,r):n("d%s=types[%i].toObject(m%s,o)",r,t,r);else{var i=!1;switch(e.type){case"double":case"float":n("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",r,r,r,r);break;case"uint64":i=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":n('if(typeof m%s==="number")',r)("d%s=o.longs===String?String(m%s):m%s",r,r,r)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",r,r,r,r,i?"true":"",r);break;case"bytes":n("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",r,r,r,r,r);break;default:n("d%s=m%s",r,r);break}}return n}GF.toObject=function(e){var t=e.fieldsArray.slice().sort(Br.compareFieldsById);if(!t.length)return Br.codegen()("return {}");for(var r=Br.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),i=[],s=[],o=[],a=0;a<t.length;++a)t[a].partOf||(t[a].resolve().repeated?i:t[a].map?s:o).push(t[a]);if(i.length){for(r("if(o.arrays||o.defaults){"),a=0;a<i.length;++a)r("d%s=[]",Br.safeProp(i[a].name));r("}")}if(s.length){for(r("if(o.objects||o.defaults){"),a=0;a<s.length;++a)r("d%s={}",Br.safeProp(s[a].name));r("}")}if(o.length){for(r("if(o.defaults){"),a=0;a<o.length;++a){var c=o[a],l=Br.safeProp(c.name);if(c.resolvedType instanceof id)r("d%s=o.enums===String?%j:%j",l,c.resolvedType.valuesById[c.typeDefault],c.typeDefault);else if(c.long)r("if(util.Long){")("var n=new util.Long(%i,%i,%j)",c.typeDefault.low,c.typeDefault.high,c.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",l)("}else")("d%s=o.longs===String?%j:%i",l,c.typeDefault.toString(),c.typeDefault.toNumber());else if(c.bytes){var u="["+Array.prototype.slice.call(c.typeDefault).join(",")+"]";r("if(o.bytes===String)d%s=%j",l,String.fromCharCode.apply(String,c.typeDefault))("else{")("d%s=%s",l,u)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",l,l)("}")}else r("d%s=%j",l,c.typeDefault)}r("}")}var d=!1;for(a=0;a<t.length;++a){var c=t[a],h=e._fieldsArray.indexOf(c),l=Br.safeProp(c.name);c.map?(d||(d=!0,r("var ks2")),r("if(m%s&&(ks2=Object.keys(m%s)).length){",l,l)("d%s={}",l)("for(var j=0;j<ks2.length;++j){"),jS(r,c,h,l+"[ks2[j]]")("}")):c.repeated?(r("if(m%s&&m%s.length){",l,l)("d%s=[]",l)("for(var j=0;j<m%s.length;++j){",l),jS(r,c,h,l+"[j]")("}")):(r("if(m%s!=null&&m.hasOwnProperty(%j)){",l,c.name),jS(r,c,h,l),c.partOf&&r("if(o.oneofs)")("d%s=%j",Br.safeProp(c.partOf.name),c.name)),r("}")}return r("return d")}});var $S=A(KF=>{"use strict";var iX=KF,sX=Dg();iX[".google.protobuf.Any"]={fromObject:function(n){if(n&&n["@type"]){var e=n["@type"].substring(n["@type"].lastIndexOf("/")+1),t=this.lookup(e);if(t){var r=n["@type"].charAt(0)==="."?n["@type"].slice(1):n["@type"];return r.indexOf("/")===-1&&(r="/"+r),this.create({type_url:r,value:t.encode(t.fromObject(n)).finish()})}}return this.fromObject(n)},toObject:function(n,e){var t="type.googleapis.com/",r="",i="";if(e&&e.json&&n.type_url&&n.value){i=n.type_url.substring(n.type_url.lastIndexOf("/")+1),r=n.type_url.substring(0,n.type_url.lastIndexOf("/")+1);var s=this.lookup(i);s&&(n=s.decode(n.value))}if(!(n instanceof this.ctor)&&n instanceof sX){var o=n.$type.toObject(n,e),a=n.$type.fullName[0]==="."?n.$type.fullName.slice(1):n.$type.fullName;return r===""&&(r=t),i=r+a,o["@type"]=i,o}return this.toObject(n,e)}}});var Ng=A(($_e,YF)=>{"use strict";YF.exports=Ve;var lr=wc();((Ve.prototype=Object.create(lr.prototype)).constructor=Ve).className="Type";var oX=cr(),GS=yc(),Ag=gs(),aX=Sg(),cX=Ig(),zS=Dg(),HS=Eg(),lX=yg(),$t=bt(),uX=WS(),dX=LS(),fX=US(),QF=qS(),hX=$S();function Ve(n,e){lr.call(this,n,e),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}Object.defineProperties(Ve.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var n=Object.keys(this.fields),e=0;e<n.length;++e){var t=this.fields[n[e]],r=t.id;if(this._fieldsById[r])throw Error("duplicate id "+r+" in "+this);this._fieldsById[r]=t}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=$t.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=$t.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=Ve.generateConstructor(this)())},set:function(n){var e=n.prototype;e instanceof zS||((n.prototype=new zS).constructor=n,$t.merge(n.prototype,e)),n.$type=n.prototype.$type=this,$t.merge(n,zS,!0),this._ctor=n;for(var t=0;t<this.fieldsArray.length;++t)this._fieldsArray[t].resolve();var r={};for(t=0;t<this.oneofsArray.length;++t)r[this._oneofsArray[t].resolve().name]={get:$t.oneOfGetter(this._oneofsArray[t].oneof),set:$t.oneOfSetter(this._oneofsArray[t].oneof)};t&&Object.defineProperties(n.prototype,r)}}});Ve.generateConstructor=function(e){for(var t=$t.codegen(["p"],e.name),r=0,i;r<e.fieldsArray.length;++r)(i=e._fieldsArray[r]).map?t("this%s={}",$t.safeProp(i.name)):i.repeated&&t("this%s=[]",$t.safeProp(i.name));return t("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")};function Rg(n){return n._fieldsById=n._fieldsArray=n._oneofsArray=null,delete n.encode,delete n.decode,delete n.verify,n}Ve.fromJSON=function(e,t){var r=new Ve(e,t.options);r.extensions=t.extensions,r.reserved=t.reserved;for(var i=Object.keys(t.fields),s=0;s<i.length;++s)r.add((typeof t.fields[i[s]].keyType<"u"?aX.fromJSON:Ag.fromJSON)(i[s],t.fields[i[s]]));if(t.oneofs)for(i=Object.keys(t.oneofs),s=0;s<i.length;++s)r.add(GS.fromJSON(i[s],t.oneofs[i[s]]));if(t.nested)for(i=Object.keys(t.nested),s=0;s<i.length;++s){var o=t.nested[i[s]];r.add((o.id!==void 0?Ag.fromJSON:o.fields!==void 0?Ve.fromJSON:o.values!==void 0?oX.fromJSON:o.methods!==void 0?cX.fromJSON:lr.fromJSON)(i[s],o))}return t.extensions&&t.extensions.length&&(r.extensions=t.extensions),t.reserved&&t.reserved.length&&(r.reserved=t.reserved),t.group&&(r.group=!0),t.comment&&(r.comment=t.comment),r};Ve.prototype.toJSON=function(e){var t=lr.prototype.toJSON.call(this,e),r=e?!!e.keepComments:!1;return $t.toObject(["options",t&&t.options||void 0,"oneofs",lr.arrayToJSON(this.oneofsArray,e),"fields",lr.arrayToJSON(this.fieldsArray.filter(function(i){return!i.declaringField}),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])};Ve.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var r=this.oneofsArray;for(t=0;t<r.length;)r[t++].resolve();return lr.prototype.resolveAll.call(this)};Ve.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null};Ve.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof Ag&&e.extend===void 0){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),Rg(this)}return e instanceof GS?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),Rg(this)):lr.prototype.add.call(this,e)};Ve.prototype.remove=function(e){if(e instanceof Ag&&e.extend===void 0){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),Rg(this)}if(e instanceof GS){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),Rg(this)}return lr.prototype.remove.call(this,e)};Ve.prototype.isReservedId=function(e){return lr.isReservedId(this.reserved,e)};Ve.prototype.isReservedName=function(e){return lr.isReservedName(this.reserved,e)};Ve.prototype.create=function(e){return new this.ctor(e)};Ve.prototype.setup=function(){for(var e=this.fullName,t=[],r=0;r<this.fieldsArray.length;++r)t.push(this._fieldsArray[r].resolve().resolvedType);this.encode=uX(this)({Writer:lX,types:t,util:$t}),this.decode=dX(this)({Reader:HS,types:t,util:$t}),this.verify=fX(this)({types:t,util:$t}),this.fromObject=QF.fromObject(this)({types:t,util:$t}),this.toObject=QF.toObject(this)({types:t,util:$t});var i=hX[e];if(i){var s=Object.create(this);s.fromObject=this.fromObject,this.fromObject=i.fromObject.bind(s),s.toObject=this.toObject,this.toObject=i.toObject.bind(s)}return this};Ve.prototype.encode=function(e,t){return this.setup().encode(e,t)};Ve.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()};Ve.prototype.decode=function(e,t){return this.setup().decode(e,t)};Ve.prototype.decodeDelimited=function(e){return e instanceof HS||(e=HS.create(e)),this.decode(e,e.uint32())};Ve.prototype.verify=function(e){return this.setup().verify(e)};Ve.prototype.fromObject=function(e){return this.setup().fromObject(e)};Ve.prototype.toObject=function(e,t){return this.setup().toObject(e,t)};Ve.d=function(e){return function(r){$t.decorateType(r,e)}}});var kg=A((z_e,tB)=>{"use strict";tB.exports=Cn;var Og=wc();((Cn.prototype=Object.create(Og.prototype)).constructor=Cn).className="Root";var QS=gs(),JF=cr(),pX=yc(),ys=bt(),XF,KS,sd;function Cn(n){Og.call(this,"",n),this.deferred=[],this.files=[]}Cn.fromJSON=function(e,t){return t||(t=new Cn),e.options&&t.setOptions(e.options),t.addJSON(e.nested)};Cn.prototype.resolvePath=ys.path.resolve;Cn.prototype.fetch=ys.fetch;function eB(){}Cn.prototype.load=function n(e,t,r){typeof t=="function"&&(r=t,t=void 0);var i=this;if(!r)return ys.asPromise(n,i,e,t);var s=r===eB;function o(f,v){if(r){if(s)throw f;var w=r;r=null,w(f,v)}}function a(f){var v=f.lastIndexOf("google/protobuf/");if(v>-1){var w=f.substring(v);if(w in sd)return w}return null}function c(f,v){try{if(ys.isString(v)&&v.charAt(0)==="{"&&(v=JSON.parse(v)),!ys.isString(v))i.setOptions(v.options).addJSON(v.nested);else{KS.filename=f;var w=KS(v,i,t),S,I=0;if(w.imports)for(;I<w.imports.length;++I)(S=a(w.imports[I])||i.resolvePath(f,w.imports[I]))&&l(S);if(w.weakImports)for(I=0;I<w.weakImports.length;++I)(S=a(w.weakImports[I])||i.resolvePath(f,w.weakImports[I]))&&l(S,!0)}}catch(D){o(D)}!s&&!u&&o(null,i)}function l(f,v){if(f=a(f)||f,!(i.files.indexOf(f)>-1)){if(i.files.push(f),f in sd){s?c(f,sd[f]):(++u,setTimeout(function(){--u,c(f,sd[f])}));return}if(s){var w;try{w=ys.fs.readFileSync(f).toString("utf8")}catch(S){v||o(S);return}c(f,w)}else++u,i.fetch(f,function(S,I){if(--u,!!r){if(S){v?u||o(null,i):o(S);return}c(f,I)}})}}var u=0;ys.isString(e)&&(e=[e]);for(var d=0,h;d<e.length;++d)(h=i.resolvePath("",e[d]))&&l(h);if(s)return i;u||o(null,i)};Cn.prototype.loadSync=function(e,t){if(!ys.isNode)throw Error("not supported");return this.load(e,t,eB)};Cn.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(e){return"'extend "+e.extend+"' in "+e.parent.fullName}).join(", "));return Og.prototype.resolveAll.call(this)};var Mg=/^[A-Z]/;function ZF(n,e){var t=e.parent.lookup(e.extend);if(t){var r=new QS(e.fullName,e.id,e.type,e.rule,void 0,e.options);return t.get(r.name)||(r.declaringField=e,e.extensionField=r,t.add(r)),!0}return!1}Cn.prototype._handleAdd=function(e){if(e instanceof QS)e.extend!==void 0&&!e.extensionField&&(ZF(this,e)||this.deferred.push(e));else if(e instanceof JF)Mg.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof pX)){if(e instanceof XF)for(var t=0;t<this.deferred.length;)ZF(this,this.deferred[t])?this.deferred.splice(t,1):++t;for(var r=0;r<e.nestedArray.length;++r)this._handleAdd(e._nestedArray[r]);Mg.test(e.name)&&(e.parent[e.name]=e)}};Cn.prototype._handleRemove=function(e){if(e instanceof QS){if(e.extend!==void 0)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof JF)Mg.test(e.name)&&delete e.parent[e.name];else if(e instanceof Og){for(var r=0;r<e.nestedArray.length;++r)this._handleRemove(e._nestedArray[r]);Mg.test(e.name)&&delete e.parent[e.name]}};Cn._configure=function(n,e,t){XF=n,KS=e,sd=t}});var bt=A((H_e,rB)=>{"use strict";var ot=rB.exports=Pr(),nB=IS(),YS,ZS;ot.codegen=TF();ot.fetch=_F();ot.path=IF();ot.fs=ot.inquire("fs");ot.toArray=function(e){if(e){for(var t=Object.keys(e),r=new Array(t.length),i=0;i<t.length;)r[i]=e[t[i++]];return r}return[]};ot.toObject=function(e){for(var t={},r=0;r<e.length;){var i=e[r++],s=e[r++];s!==void 0&&(t[i]=s)}return t};var gX=/\\/g,mX=/"/g;ot.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)};ot.safeProp=function(e){return!/^[$\w_]+$/.test(e)||ot.isReserved(e)?'["'+e.replace(gX,"\\\\").replace(mX,'\\"')+'"]':"."+e};ot.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var yX=/_([a-z])/g;ot.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(yX,function(t,r){return r.toUpperCase()})};ot.compareFieldsById=function(e,t){return e.id-t.id};ot.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(ot.decorateRoot.remove(e.$type),e.$type.name=t,ot.decorateRoot.add(e.$type)),e.$type;YS||(YS=Ng());var r=new YS(t||e.name);return ot.decorateRoot.add(r),r.ctor=e,Object.defineProperty(e,"$type",{value:r,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:r,enumerable:!1}),r};var vX=0;ot.decorateEnum=function(e){if(e.$type)return e.$type;ZS||(ZS=cr());var t=new ZS("Enum"+vX++,e);return ot.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t};ot.setProperty=function(e,t,r){function i(s,o,a){var c=o.shift();if(c==="__proto__"||c==="prototype")return s;if(o.length>0)s[c]=i(s[c]||{},o,a);else{var l=s[c];l&&(a=[].concat(l).concat(a)),s[c]=a}return s}if(typeof e!="object")throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return t=t.split("."),i(e,t,r)};Object.defineProperty(ot,"decorateRoot",{get:function(){return nB.decorated||(nB.decorated=new(kg()))}})});var _o=A((G_e,iB)=>{"use strict";iB.exports=In;In.className="ReflectionObject";var xg=bt(),Pg;function In(n,e){if(!xg.isString(n))throw TypeError("name must be a string");if(e&&!xg.isObject(e))throw TypeError("options must be an object");this.options=e,this.parsedOptions=null,this.name=n,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(In.prototype,{root:{get:function(){for(var n=this;n.parent!==null;)n=n.parent;return n}},fullName:{get:function(){for(var n=[this.name],e=this.parent;e;)n.unshift(e.name),e=e.parent;return n.join(".")}}});In.prototype.toJSON=function(){throw Error()};In.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof Pg&&t._handleAdd(this)};In.prototype.onRemove=function(e){var t=e.root;t instanceof Pg&&t._handleRemove(this),this.parent=null,this.resolved=!1};In.prototype.resolve=function(){return this.resolved?this:(this.root instanceof Pg&&(this.resolved=!0),this)};In.prototype.getOption=function(e){if(this.options)return this.options[e]};In.prototype.setOption=function(e,t,r){return(!r||!this.options||this.options[e]===void 0)&&((this.options||(this.options={}))[e]=t),this};In.prototype.setParsedOption=function(e,t,r){this.parsedOptions||(this.parsedOptions=[]);var i=this.parsedOptions;if(r){var s=i.find(function(c){return Object.prototype.hasOwnProperty.call(c,e)});if(s){var o=s[e];xg.setProperty(o,r,t)}else s={},s[e]=xg.setProperty({},r,t),i.push(s)}else{var a={};a[e]=t,i.push(a)}return this};In.prototype.setOptions=function(e,t){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)this.setOption(r[i],e[r[i]],t);return this};In.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e};In._configure=function(n){Pg=n}});var cr=A((W_e,aB)=>{"use strict";aB.exports=Ur;var sB=_o();((Ur.prototype=Object.create(sB.prototype)).constructor=Ur).className="Enum";var oB=wc(),Lg=bt();function Ur(n,e,t,r,i,s){if(sB.call(this,n,t),e&&typeof e!="object")throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=r,this.comments=i||{},this.valuesOptions=s,this.reserved=void 0,e)for(var o=Object.keys(e),a=0;a<o.length;++a)typeof e[o[a]]=="number"&&(this.valuesById[this.values[o[a]]=e[o[a]]]=o[a])}Ur.fromJSON=function(e,t){var r=new Ur(e,t.values,t.options,t.comment,t.comments);return r.reserved=t.reserved,r};Ur.prototype.toJSON=function(e){var t=e?!!e.keepComments:!1;return Lg.toObject(["options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])};Ur.prototype.add=function(e,t,r,i){if(!Lg.isString(e))throw TypeError("name must be a string");if(!Lg.isInteger(t))throw TypeError("id must be an integer");if(this.values[e]!==void 0)throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(this.valuesById[t]!==void 0){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return i&&(this.valuesOptions===void 0&&(this.valuesOptions={}),this.valuesOptions[e]=i||null),this.comments[e]=r||null,this};Ur.prototype.remove=function(e){if(!Lg.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(t==null)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this.valuesOptions&&delete this.valuesOptions[e],this};Ur.prototype.isReservedId=function(e){return oB.isReservedId(this.reserved,e)};Ur.prototype.isReservedName=function(e){return oB.isReservedName(this.reserved,e)}});var WS=A((K_e,lB)=>{"use strict";lB.exports=wX;var EX=cr(),JS=bo(),XS=bt();function cB(n,e,t,r){return e.resolvedType.group?n("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",t,r,(e.id<<3|3)>>>0,(e.id<<3|4)>>>0):n("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",t,r,(e.id<<3|2)>>>0)}function wX(n){for(var e=XS.codegen(["m","w"],n.name+"$encode")("if(!w)")("w=Writer.create()"),t,r,i=n.fieldsArray.slice().sort(XS.compareFieldsById),t=0;t<i.length;++t){var s=i[t].resolve(),o=n._fieldsArray.indexOf(s),a=s.resolvedType instanceof EX?"int32":s.type,c=JS.basic[a];r="m"+XS.safeProp(s.name),s.map?(e("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",r,s.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",r)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(s.id<<3|2)>>>0,8|JS.mapKey[s.keyType],s.keyType),c===void 0?e("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",o,r):e(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|c,a,r),e("}")("}")):s.repeated?(e("if(%s!=null&&%s.length){",r,r),s.packed&&JS.packed[a]!==void 0?e("w.uint32(%i).fork()",(s.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",r)("w.%s(%s[i])",a,r)("w.ldelim()"):(e("for(var i=0;i<%s.length;++i)",r),c===void 0?cB(e,s,o,r+"[i]"):e("w.uint32(%i).%s(%s[i])",(s.id<<3|c)>>>0,a,r)),e("}")):(s.optional&&e("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",r,s.name),c===void 0?cB(e,s,o,r):e("w.uint32(%i).%s(%s)",(s.id<<3|c)>>>0,a,r))}return e("return w")}});var dB=A((Q_e,uB)=>{"use strict";var be=uB.exports=EF();be.build="light";function TX(n,e,t){return typeof e=="function"?(t=e,e=new be.Root):e||(e=new be.Root),e.load(n,t)}be.load=TX;function bX(n,e){return e||(e=new be.Root),e.loadSync(n)}be.loadSync=bX;be.encoder=WS();be.decoder=LS();be.verifier=US();be.converter=qS();be.ReflectionObject=_o();be.Namespace=wc();be.Root=kg();be.Enum=cr();be.Type=Ng();be.Field=gs();be.OneOf=yc();be.MapField=Sg();be.Service=Ig();be.Method=Cg();be.Message=Dg();be.wrappers=$S();be.types=bo();be.util=bt();be.ReflectionObject._configure(be.Root);be.Namespace._configure(be.Type,be.Service,be.Enum);be.Root._configure(be.Type);be.Field._configure(be.Type)});var tC=A((Y_e,pB)=>{"use strict";pB.exports=hB;var eC=/[\s{}=;:[\],'"()<>]/g,_X=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,SX=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,CX=/^ *[*/]+ */,IX=/^\s*\*?\/*/,DX=/\n/g,AX=/\s/,RX=/\\(.?)/g,NX={0:"\0",r:"\r",n:`
`,t:"	"};function fB(n){return n.replace(RX,function(e,t){switch(t){case"\\":case"":return t;default:return NX[t]||""}})}hB.unescape=fB;function hB(n,e){n=n.toString();var t=0,r=n.length,i=1,s=0,o={},a=[],c=null;function l(P){return Error("illegal "+P+" (line "+i+")")}function u(){var P=c==="'"?SX:_X;P.lastIndex=t-1;var G=P.exec(n);if(!G)throw l("string");return t=P.lastIndex,S(c),c=null,fB(G[1])}function d(P){return n.charAt(P)}function h(P,G,W){var _={type:n.charAt(P++),lineEmpty:!1,leading:W},y;e?y=2:y=3;var E=P-y,b;do if(--E<0||(b=n.charAt(E))===`
`){_.lineEmpty=!0;break}while(b===" "||b==="	");for(var m=n.substring(P,G).split(DX),C=0;C<m.length;++C)m[C]=m[C].replace(e?IX:CX,"").trim();_.text=m.join(`
`).trim(),o[i]=_,s=i}function f(P){var G=v(P),W=n.substring(P,G),_=/^\s*\/\//.test(W);return _}function v(P){for(var G=P;G<r&&d(G)!==`
`;)G++;return G}function w(){if(a.length>0)return a.shift();if(c)return u();var P,G,W,_,y,E=t===0;do{if(t===r)return null;for(P=!1;AX.test(W=d(t));)if(W===`
`&&(E=!0,++i),++t===r)return null;if(d(t)==="/"){if(++t===r)throw l("comment");if(d(t)==="/")if(e){if(_=t,y=!1,f(t-1)){y=!0;do if(t=v(t),t===r||(t++,!E))break;while(f(t))}else t=Math.min(r,v(t)+1);y&&(h(_,t,E),E=!0),i++,P=!0}else{for(y=d(_=t+1)==="/";d(++t)!==`
`;)if(t===r)return null;++t,y&&(h(_,t-1,E),E=!0),++i,P=!0}else if((W=d(t))==="*"){_=t+1,y=e||d(_)==="*";do{if(W===`
`&&++i,++t===r)throw l("comment");G=W,W=d(t)}while(G!=="*"||W!=="/");++t,y&&(h(_,t-2,E),E=!0),P=!0}else return"/"}}while(P);var b=t;eC.lastIndex=0;var m=eC.test(d(b++));if(!m)for(;b<r&&!eC.test(d(b));)++b;var C=n.substring(t,t=b);return(C==='"'||C==="'")&&(c=C),C}function S(P){a.push(P)}function I(){if(!a.length){var P=w();if(P===null)return null;S(P)}return a[0]}function D(P,G){var W=I(),_=W===P;if(_)return w(),!0;if(!G)throw l("token '"+W+"', '"+P+"' expected");return!1}function M(P){var G=null,W;return P===void 0?(W=o[i-1],delete o[i-1],W&&(e||W.type==="*"||W.lineEmpty)&&(G=W.leading?W.text:null)):(s<P&&I(),W=o[P],delete o[P],W&&!W.lineEmpty&&(e||W.type==="/")&&(G=W.leading?null:W.text)),G}return Object.defineProperty({next:w,peek:I,push:S,skip:D,cmnt:M},"line",{get:function(){return i}})}});var wB=A((Z_e,EB)=>{"use strict";EB.exports=Ei;Ei.filename=null;Ei.defaults={keepCase:!1};var MX=tC(),gB=kg(),mB=Ng(),yB=gs(),OX=Sg(),vB=yc(),kX=cr(),xX=Ig(),PX=Cg(),nC=bo(),rC=bt(),LX=/^[1-9][0-9]*$/,FX=/^-?[1-9][0-9]*$/,BX=/^0[x][0-9a-fA-F]+$/,UX=/^-?0[x][0-9a-fA-F]+$/,VX=/^0[0-7]+$/,jX=/^-?0[0-7]+$/,qX=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,Vr=/^[a-zA-Z_][a-zA-Z_0-9]*$/,jr=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,$X=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function Ei(n,e,t){e instanceof gB||(t=e,e=new gB),t||(t=Ei.defaults);var r=t.preferTrailingComment||!1,i=MX(n,t.alternateCommentMode||!1),s=i.next,o=i.push,a=i.peek,c=i.skip,l=i.cmnt,u=!0,d,h,f,v,w=!1,S=e,I=t.keepCase?function(k){return k}:rC.camelCase;function D(k,x,F){var Q=Ei.filename;return F||(Ei.filename=null),Error("illegal "+(x||"token")+" '"+k+"' ("+(Q?Q+", ":"")+"line "+i.line+")")}function M(){var k=[],x;do{if((x=s())!=='"'&&x!=="'")throw D(x);k.push(s()),c(x),x=a()}while(x==='"'||x==="'");return k.join("")}function P(k){var x=s();switch(x){case"'":case'"':return o(x),M();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return W(x,!0)}catch{if(k&&jr.test(x))return x;throw D(x,"value")}}function G(k,x){var F,Q;do x&&((F=a())==='"'||F==="'")?k.push(M()):k.push([Q=_(s()),c("to",!0)?_(s()):Q]);while(c(",",!0));var z={options:void 0};z.setOption=function(fe,Ke){this.options===void 0&&(this.options={}),this.options[fe]=Ke},C(z,function(Ke){if(Ke==="option")Ue(z,Ke),c(";");else throw D(Ke)},function(){Dt(z)})}function W(k,x){var F=1;switch(k.charAt(0)==="-"&&(F=-1,k=k.substring(1)),k){case"inf":case"INF":case"Inf":return F*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(LX.test(k))return F*parseInt(k,10);if(BX.test(k))return F*parseInt(k,16);if(VX.test(k))return F*parseInt(k,8);if(qX.test(k))return F*parseFloat(k);throw D(k,"number",x)}function _(k,x){switch(k){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!x&&k.charAt(0)==="-")throw D(k,"id");if(FX.test(k))return parseInt(k,10);if(UX.test(k))return parseInt(k,16);if(jX.test(k))return parseInt(k,8);throw D(k,"id")}function y(){if(d!==void 0)throw D("package");if(d=s(),!jr.test(d))throw D(d,"name");S=S.define(d),c(";")}function E(){var k=a(),x;switch(k){case"weak":x=f||(f=[]),s();break;case"public":s();default:x=h||(h=[]);break}k=M(),c(";"),x.push(k)}function b(){if(c("="),v=M(),w=v==="proto3",!w&&v!=="proto2")throw D(v,"syntax");e.setOption("syntax",v),c(";")}function m(k,x){switch(x){case"option":return Ue(k,x),c(";"),!0;case"message":return p(k,x),!0;case"enum":return ke(k,x),!0;case"service":return ct(k,x),!0;case"extend":return zo(k,x),!0}return!1}function C(k,x,F){var Q=i.line;if(k&&(typeof k.comment!="string"&&(k.comment=l()),k.filename=Ei.filename),c("{",!0)){for(var z;(z=s())!=="}";)x(z);c(";",!0)}else F&&F(),c(";"),k&&(typeof k.comment!="string"||r)&&(k.comment=l(Q)||k.comment)}function p(k,x){if(!Vr.test(x=s()))throw D(x,"type name");var F=new mB(x);C(F,function(z){if(!m(F,z))switch(z){case"map":Te(F,z);break;case"required":case"repeated":g(F,z);break;case"optional":w?g(F,"proto3_optional"):g(F,"optional");break;case"oneof":Be(F,z);break;case"extensions":G(F.extensions||(F.extensions=[]));break;case"reserved":G(F.reserved||(F.reserved=[]),!0);break;default:if(!w||!jr.test(z))throw D(z);o(z),g(F,"optional");break}}),k.add(F)}function g(k,x,F){var Q=s();if(Q==="group"){L(k,x);return}for(;Q.endsWith(".")||a().startsWith(".");)Q+=s();if(!jr.test(Q))throw D(Q,"type");var z=s();if(!Vr.test(z))throw D(z,"name");z=I(z),c("=");var fe=new yB(z,_(s()),Q,x,F);if(C(fe,function(gn){if(gn==="option")Ue(fe,gn),c(";");else throw D(gn)},function(){Dt(fe)}),x==="proto3_optional"){var Ke=new vB("_"+z);fe.setOption("proto3_optional",!0),Ke.add(fe),k.add(Ke)}else k.add(fe);!w&&fe.repeated&&(nC.packed[Q]!==void 0||nC.basic[Q]===void 0)&&fe.setOption("packed",!1,!0)}function L(k,x){var F=s();if(!Vr.test(F))throw D(F,"name");var Q=rC.lcFirst(F);F===Q&&(F=rC.ucFirst(F)),c("=");var z=_(s()),fe=new mB(F);fe.group=!0;var Ke=new yB(Q,z,F,x);Ke.filename=Ei.filename,C(fe,function(gn){switch(gn){case"option":Ue(fe,gn),c(";");break;case"required":case"repeated":g(fe,gn);break;case"optional":w?g(fe,"proto3_optional"):g(fe,"optional");break;case"message":p(fe,gn);break;case"enum":ke(fe,gn);break;default:throw D(gn)}}),k.add(fe).add(Ke)}function Te(k){c("<");var x=s();if(nC.mapKey[x]===void 0)throw D(x,"type");c(",");var F=s();if(!jr.test(F))throw D(F,"type");c(">");var Q=s();if(!Vr.test(Q))throw D(Q,"name");c("=");var z=new OX(I(Q),_(s()),x,F);C(z,function(Ke){if(Ke==="option")Ue(z,Ke),c(";");else throw D(Ke)},function(){Dt(z)}),k.add(z)}function Be(k,x){if(!Vr.test(x=s()))throw D(x,"name");var F=new vB(I(x));C(F,function(z){z==="option"?(Ue(F,z),c(";")):(o(z),g(F,"optional"))}),k.add(F)}function ke(k,x){if(!Vr.test(x=s()))throw D(x,"name");var F=new kX(x);C(F,function(z){switch(z){case"option":Ue(F,z),c(";");break;case"reserved":G(F.reserved||(F.reserved=[]),!0);break;default:nt(F,z)}}),k.add(F)}function nt(k,x){if(!Vr.test(x))throw D(x,"name");c("=");var F=_(s(),!0),Q={options:void 0};Q.setOption=function(z,fe){this.options===void 0&&(this.options={}),this.options[z]=fe},C(Q,function(fe){if(fe==="option")Ue(Q,fe),c(";");else throw D(fe)},function(){Dt(Q)}),k.add(x,F,Q.comment,Q.options)}function Ue(k,x){var F=c("(",!0);if(!jr.test(x=s()))throw D(x,"name");var Q=x,z=Q,fe;F&&(c(")"),Q="("+Q+")",z=Q,x=a(),$X.test(x)&&(fe=x.slice(1),Q+=x,s())),c("=");var Ke=Wt(k,Q);Ze(k,z,Ke,fe)}function Wt(k,x){if(c("{",!0)){for(var F={};!c("}",!0);){if(!Vr.test(xt=s()))throw D(xt,"name");if(xt===null)throw D(xt,"end of input");var Q,z=xt;if(c(":",!0),a()==="{")Q=Wt(k,x+"."+xt);else if(a()==="["){Q=[];var fe;if(c("[",!0)){do fe=P(!0),Q.push(fe);while(c(",",!0));c("]"),typeof fe<"u"&&at(k,x+"."+xt,fe)}}else Q=P(!0),at(k,x+"."+xt,Q);var Ke=F[z];Ke&&(Q=[].concat(Ke).concat(Q)),F[z]=Q,c(",",!0),c(";",!0)}return F}var Mi=P(!0);return at(k,x,Mi),Mi}function at(k,x,F){k.setOption&&k.setOption(x,F)}function Ze(k,x,F,Q){k.setParsedOption&&k.setParsedOption(x,F,Q)}function Dt(k){if(c("[",!0)){do Ue(k,"option");while(c(",",!0));c("]")}return k}function ct(k,x){if(!Vr.test(x=s()))throw D(x,"service name");var F=new xX(x);C(F,function(z){if(!m(F,z))if(z==="rpc")Kt(F,z);else throw D(z)}),k.add(F)}function Kt(k,x){var F=l(),Q=x;if(!Vr.test(x=s()))throw D(x,"name");var z=x,fe,Ke,Mi,gn;if(c("("),c("stream",!0)&&(Ke=!0),!jr.test(x=s())||(fe=x,c(")"),c("returns"),c("("),c("stream",!0)&&(gn=!0),!jr.test(x=s())))throw D(x);Mi=x,c(")");var Zd=new PX(z,Q,fe,Mi,Ke,gn);Zd.comment=F,C(Zd,function(By){if(By==="option")Ue(Zd,By),c(";");else throw D(By)}),k.add(Zd)}function zo(k,x){if(!jr.test(x=s()))throw D(x,"reference");var F=x;C(null,function(z){switch(z){case"required":case"repeated":g(k,z,F);break;case"optional":w?g(k,"proto3_optional",F):g(k,"optional",F);break;default:if(!w||!jr.test(z))throw D(z);o(z),g(k,"optional",F);break}})}for(var xt;(xt=s())!==null;)switch(xt){case"package":if(!u)throw D(xt);y();break;case"import":if(!u)throw D(xt);E();break;case"syntax":if(!u)throw D(xt);b();break;case"option":Ue(S,xt),c(";");break;default:if(m(S,xt)){u=!1;continue}throw D(xt)}return Ei.filename=null,{package:d,imports:h,weakImports:f,syntax:v,root:e}}});var _B=A((J_e,bB)=>{"use strict";bB.exports=ur;var zX=/\/|\./;function ur(n,e){zX.test(n)||(n="google/protobuf/"+n+".proto",e={nested:{google:{nested:{protobuf:{nested:e}}}}}),ur[n]=e}ur("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}});var TB;ur("duration",{Duration:TB={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}});ur("timestamp",{Timestamp:TB});ur("empty",{Empty:{fields:{}}});ur("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}});ur("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}});ur("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}});ur.get=function(e){return ur[e]||null}});var CB=A((X_e,SB)=>{"use strict";var vs=SB.exports=dB();vs.build="full";vs.tokenize=tC();vs.parse=wB();vs.common=_B();vs.Root._configure(vs.Type,vs.parse,vs.common)});var Fg=A((eSe,IB)=>{"use strict";IB.exports=CB()});var iC=A((tSe,HX)=>{HX.exports={nested:{google:{nested:{protobuf:{nested:{FileDescriptorSet:{fields:{file:{rule:"repeated",type:"FileDescriptorProto",id:1}}},FileDescriptorProto:{fields:{name:{type:"string",id:1},package:{type:"string",id:2},dependency:{rule:"repeated",type:"string",id:3},publicDependency:{rule:"repeated",type:"int32",id:10,options:{packed:!1}},weakDependency:{rule:"repeated",type:"int32",id:11,options:{packed:!1}},messageType:{rule:"repeated",type:"DescriptorProto",id:4},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:5},service:{rule:"repeated",type:"ServiceDescriptorProto",id:6},extension:{rule:"repeated",type:"FieldDescriptorProto",id:7},options:{type:"FileOptions",id:8},sourceCodeInfo:{type:"SourceCodeInfo",id:9},syntax:{type:"string",id:12}}},DescriptorProto:{fields:{name:{type:"string",id:1},field:{rule:"repeated",type:"FieldDescriptorProto",id:2},extension:{rule:"repeated",type:"FieldDescriptorProto",id:6},nestedType:{rule:"repeated",type:"DescriptorProto",id:3},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:4},extensionRange:{rule:"repeated",type:"ExtensionRange",id:5},oneofDecl:{rule:"repeated",type:"OneofDescriptorProto",id:8},options:{type:"MessageOptions",id:7},reservedRange:{rule:"repeated",type:"ReservedRange",id:9},reservedName:{rule:"repeated",type:"string",id:10}},nested:{ExtensionRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}},ReservedRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}}}},FieldDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:3},label:{type:"Label",id:4},type:{type:"Type",id:5},typeName:{type:"string",id:6},extendee:{type:"string",id:2},defaultValue:{type:"string",id:7},oneofIndex:{type:"int32",id:9},jsonName:{type:"string",id:10},options:{type:"FieldOptions",id:8}},nested:{Type:{values:{TYPE_DOUBLE:1,TYPE_FLOAT:2,TYPE_INT64:3,TYPE_UINT64:4,TYPE_INT32:5,TYPE_FIXED64:6,TYPE_FIXED32:7,TYPE_BOOL:8,TYPE_STRING:9,TYPE_GROUP:10,TYPE_MESSAGE:11,TYPE_BYTES:12,TYPE_UINT32:13,TYPE_ENUM:14,TYPE_SFIXED32:15,TYPE_SFIXED64:16,TYPE_SINT32:17,TYPE_SINT64:18}},Label:{values:{LABEL_OPTIONAL:1,LABEL_REQUIRED:2,LABEL_REPEATED:3}}}},OneofDescriptorProto:{fields:{name:{type:"string",id:1},options:{type:"OneofOptions",id:2}}},EnumDescriptorProto:{fields:{name:{type:"string",id:1},value:{rule:"repeated",type:"EnumValueDescriptorProto",id:2},options:{type:"EnumOptions",id:3}}},EnumValueDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:2},options:{type:"EnumValueOptions",id:3}}},ServiceDescriptorProto:{fields:{name:{type:"string",id:1},method:{rule:"repeated",type:"MethodDescriptorProto",id:2},options:{type:"ServiceOptions",id:3}}},MethodDescriptorProto:{fields:{name:{type:"string",id:1},inputType:{type:"string",id:2},outputType:{type:"string",id:3},options:{type:"MethodOptions",id:4},clientStreaming:{type:"bool",id:5},serverStreaming:{type:"bool",id:6}}},FileOptions:{fields:{javaPackage:{type:"string",id:1},javaOuterClassname:{type:"string",id:8},javaMultipleFiles:{type:"bool",id:10},javaGenerateEqualsAndHash:{type:"bool",id:20,options:{deprecated:!0}},javaStringCheckUtf8:{type:"bool",id:27},optimizeFor:{type:"OptimizeMode",id:9,options:{default:"SPEED"}},goPackage:{type:"string",id:11},ccGenericServices:{type:"bool",id:16},javaGenericServices:{type:"bool",id:17},pyGenericServices:{type:"bool",id:18},deprecated:{type:"bool",id:23},ccEnableArenas:{type:"bool",id:31},objcClassPrefix:{type:"string",id:36},csharpNamespace:{type:"string",id:37},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[38,38]],nested:{OptimizeMode:{values:{SPEED:1,CODE_SIZE:2,LITE_RUNTIME:3}}}},MessageOptions:{fields:{messageSetWireFormat:{type:"bool",id:1},noStandardDescriptorAccessor:{type:"bool",id:2},deprecated:{type:"bool",id:3},mapEntry:{type:"bool",id:7},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[8,8]]},FieldOptions:{fields:{ctype:{type:"CType",id:1,options:{default:"STRING"}},packed:{type:"bool",id:2},jstype:{type:"JSType",id:6,options:{default:"JS_NORMAL"}},lazy:{type:"bool",id:5},deprecated:{type:"bool",id:3},weak:{type:"bool",id:10},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[4,4]],nested:{CType:{values:{STRING:0,CORD:1,STRING_PIECE:2}},JSType:{values:{JS_NORMAL:0,JS_STRING:1,JS_NUMBER:2}}}},OneofOptions:{fields:{uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumOptions:{fields:{allowAlias:{type:"bool",id:2},deprecated:{type:"bool",id:3},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumValueOptions:{fields:{deprecated:{type:"bool",id:1},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},ServiceOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},MethodOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},UninterpretedOption:{fields:{name:{rule:"repeated",type:"NamePart",id:2},identifierValue:{type:"string",id:3},positiveIntValue:{type:"uint64",id:4},negativeIntValue:{type:"int64",id:5},doubleValue:{type:"double",id:6},stringValue:{type:"bytes",id:7},aggregateValue:{type:"string",id:8}},nested:{NamePart:{fields:{namePart:{rule:"required",type:"string",id:1},isExtension:{rule:"required",type:"bool",id:2}}}}},SourceCodeInfo:{fields:{location:{rule:"repeated",type:"Location",id:1}},nested:{Location:{fields:{path:{rule:"repeated",type:"int32",id:1},span:{rule:"repeated",type:"int32",id:2},leadingComments:{type:"string",id:3},trailingComments:{type:"string",id:4},leadingDetachedComments:{rule:"repeated",type:"string",id:6}}}}},GeneratedCodeInfo:{fields:{annotation:{rule:"repeated",type:"Annotation",id:1}},nested:{Annotation:{fields:{path:{rule:"repeated",type:"int32",id:1},sourceFile:{type:"string",id:2},begin:{type:"int32",id:3},end:{type:"int32",id:4}}}}}}}}}}}});var MB=A((ye,NB)=>{"use strict";var en=Fg();NB.exports=ye=en.descriptor=en.Root.fromJSON(iC()).lookup(".google.protobuf");var DB=en.Namespace,od=en.Root,wi=en.Enum,Es=en.Type,ws=en.Field,GX=en.MapField,Bg=en.OneOf,ad=en.Service,Ug=en.Method;od.fromDescriptor=function(e){typeof e.length=="number"&&(e=ye.FileDescriptorSet.decode(e));var t=new od;if(e.file)for(var r,i,s=0,o;s<e.file.length;++s){if(i=t,(r=e.file[s]).package&&r.package.length&&(i=t.define(r.package)),r.name&&r.name.length&&t.files.push(i.filename=r.name),r.messageType)for(o=0;o<r.messageType.length;++o)i.add(Es.fromDescriptor(r.messageType[o],r.syntax));if(r.enumType)for(o=0;o<r.enumType.length;++o)i.add(wi.fromDescriptor(r.enumType[o]));if(r.extension)for(o=0;o<r.extension.length;++o)i.add(ws.fromDescriptor(r.extension[o]));if(r.service)for(o=0;o<r.service.length;++o)i.add(ad.fromDescriptor(r.service[o]));var a=bc(r.options,ye.FileOptions);if(a){var c=Object.keys(a);for(o=0;o<c.length;++o)i.setOption(c[o],a[c[o]])}}return t};od.prototype.toDescriptor=function(e){var t=ye.FileDescriptorSet.create();return AB(this,t.file,e),t};function AB(n,e,t){var r=ye.FileDescriptorProto.create({name:n.filename||(n.fullName.substring(1).replace(/\./g,"_")||"root")+".proto"});t&&(r.syntax=t),n instanceof od||(r.package=n.fullName.substring(1));for(var i=0,s;i<n.nestedArray.length;++i)(s=n._nestedArray[i])instanceof Es?r.messageType.push(s.toDescriptor(t)):s instanceof wi?r.enumType.push(s.toDescriptor()):s instanceof ws?r.extension.push(s.toDescriptor(t)):s instanceof ad?r.service.push(s.toDescriptor()):s instanceof DB&&AB(s,e,t);r.options=_c(n.options,ye.FileOptions),r.messageType.length+r.enumType.length+r.extension.length+r.service.length&&e.push(r)}var WX=0;Es.fromDescriptor=function(e,t){typeof e.length=="number"&&(e=ye.DescriptorProto.decode(e));var r=new Es(e.name.length?e.name:"Type"+WX++,bc(e.options,ye.MessageOptions)),i;if(e.oneofDecl)for(i=0;i<e.oneofDecl.length;++i)r.add(Bg.fromDescriptor(e.oneofDecl[i]));if(e.field)for(i=0;i<e.field.length;++i){var s=ws.fromDescriptor(e.field[i],t);r.add(s),e.field[i].hasOwnProperty("oneofIndex")&&r.oneofsArray[e.field[i].oneofIndex].add(s)}if(e.extension)for(i=0;i<e.extension.length;++i)r.add(ws.fromDescriptor(e.extension[i],t));if(e.nestedType)for(i=0;i<e.nestedType.length;++i)r.add(Es.fromDescriptor(e.nestedType[i],t)),e.nestedType[i].options&&e.nestedType[i].options.mapEntry&&r.setOption("map_entry",!0);if(e.enumType)for(i=0;i<e.enumType.length;++i)r.add(wi.fromDescriptor(e.enumType[i]));if(e.extensionRange&&e.extensionRange.length)for(r.extensions=[],i=0;i<e.extensionRange.length;++i)r.extensions.push([e.extensionRange[i].start,e.extensionRange[i].end]);if(e.reservedRange&&e.reservedRange.length||e.reservedName&&e.reservedName.length){if(r.reserved=[],e.reservedRange)for(i=0;i<e.reservedRange.length;++i)r.reserved.push([e.reservedRange[i].start,e.reservedRange[i].end]);if(e.reservedName)for(i=0;i<e.reservedName.length;++i)r.reserved.push(e.reservedName[i])}return r};Es.prototype.toDescriptor=function(e){var t=ye.DescriptorProto.create({name:this.name}),r;for(r=0;r<this.fieldsArray.length;++r){var i;if(t.field.push(i=this._fieldsArray[r].toDescriptor(e)),this._fieldsArray[r]instanceof GX){var s=sC(this._fieldsArray[r].keyType,this._fieldsArray[r].resolvedKeyType),o=sC(this._fieldsArray[r].type,this._fieldsArray[r].resolvedType),a=o===11||o===14?this._fieldsArray[r].resolvedType&&RB(this.parent,this._fieldsArray[r].resolvedType)||this._fieldsArray[r].type:void 0;t.nestedType.push(ye.DescriptorProto.create({name:i.typeName,field:[ye.FieldDescriptorProto.create({name:"key",number:1,label:1,type:s}),ye.FieldDescriptorProto.create({name:"value",number:2,label:1,type:o,typeName:a})],options:ye.MessageOptions.create({mapEntry:!0})}))}}for(r=0;r<this.oneofsArray.length;++r)t.oneofDecl.push(this._oneofsArray[r].toDescriptor());for(r=0;r<this.nestedArray.length;++r)this._nestedArray[r]instanceof ws?t.field.push(this._nestedArray[r].toDescriptor(e)):this._nestedArray[r]instanceof Es?t.nestedType.push(this._nestedArray[r].toDescriptor(e)):this._nestedArray[r]instanceof wi&&t.enumType.push(this._nestedArray[r].toDescriptor());if(this.extensions)for(r=0;r<this.extensions.length;++r)t.extensionRange.push(ye.DescriptorProto.ExtensionRange.create({start:this.extensions[r][0],end:this.extensions[r][1]}));if(this.reserved)for(r=0;r<this.reserved.length;++r)typeof this.reserved[r]=="string"?t.reservedName.push(this.reserved[r]):t.reservedRange.push(ye.DescriptorProto.ReservedRange.create({start:this.reserved[r][0],end:this.reserved[r][1]}));return t.options=_c(this.options,ye.MessageOptions),t};var KX=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/;ws.fromDescriptor=function(e,t){if(typeof e.length=="number"&&(e=ye.DescriptorProto.decode(e)),typeof e.number!="number")throw Error("missing field id");var r;e.typeName&&e.typeName.length?r=e.typeName:r=XX(e.type);var i;switch(e.label){case 1:i=void 0;break;case 2:i="required";break;case 3:i="repeated";break;default:throw Error("illegal label: "+e.label)}var s=e.extendee;e.extendee!==void 0&&(s=s.length?s:void 0);var o=new ws(e.name.length?e.name:"field"+e.number,e.number,r,i,s);if(o.options=bc(e.options,ye.FieldOptions),e.defaultValue&&e.defaultValue.length){var a=e.defaultValue;switch(a){case"true":case"TRUE":a=!0;break;case"false":case"FALSE":a=!1;break;default:var c=KX.exec(a);c&&(a=parseInt(a));break}o.setOption("default",a)}return eee(e.type)&&(t==="proto3"?e.options&&!e.options.packed&&o.setOption("packed",!1):e.options&&e.options.packed||o.setOption("packed",!1)),o};ws.prototype.toDescriptor=function(e){var t=ye.FieldDescriptorProto.create({name:this.name,number:this.id});if(this.map)t.type=11,t.typeName=en.util.ucFirst(this.name),t.label=3;else{switch(t.type=sC(this.type,this.resolve().resolvedType)){case 10:case 11:case 14:t.typeName=this.resolvedType?RB(this.parent,this.resolvedType):this.type;break}switch(this.rule){case"repeated":t.label=3;break;case"required":t.label=2;break;default:t.label=1;break}}if(t.extendee=this.extensionField?this.extensionField.parent.fullName:this.extend,this.partOf&&(t.oneofIndex=this.parent.oneofsArray.indexOf(this.partOf))<0)throw Error("missing oneof");return this.options&&(t.options=_c(this.options,ye.FieldOptions),this.options.default!=null&&(t.defaultValue=String(this.options.default))),e==="proto3"?this.packed||((t.options||(t.options=ye.FieldOptions.create())).packed=!1):this.packed&&((t.options||(t.options=ye.FieldOptions.create())).packed=!0),t};var QX=0;wi.fromDescriptor=function(e){typeof e.length=="number"&&(e=ye.EnumDescriptorProto.decode(e));var t={};if(e.value)for(var r=0;r<e.value.length;++r){var i=e.value[r].name,s=e.value[r].number||0;t[i&&i.length?i:"NAME"+s]=s}return new wi(e.name&&e.name.length?e.name:"Enum"+QX++,t,bc(e.options,ye.EnumOptions))};wi.prototype.toDescriptor=function(){for(var e=[],t=0,r=Object.keys(this.values);t<r.length;++t)e.push(ye.EnumValueDescriptorProto.create({name:r[t],number:this.values[r[t]]}));return ye.EnumDescriptorProto.create({name:this.name,value:e,options:_c(this.options,ye.EnumOptions)})};var YX=0;Bg.fromDescriptor=function(e){return typeof e.length=="number"&&(e=ye.OneofDescriptorProto.decode(e)),new Bg(e.name&&e.name.length?e.name:"oneof"+YX++)};Bg.prototype.toDescriptor=function(){return ye.OneofDescriptorProto.create({name:this.name})};var ZX=0;ad.fromDescriptor=function(e){typeof e.length=="number"&&(e=ye.ServiceDescriptorProto.decode(e));var t=new ad(e.name&&e.name.length?e.name:"Service"+ZX++,bc(e.options,ye.ServiceOptions));if(e.method)for(var r=0;r<e.method.length;++r)t.add(Ug.fromDescriptor(e.method[r]));return t};ad.prototype.toDescriptor=function(){for(var e=[],t=0;t<this.methodsArray.length;++t)e.push(this._methodsArray[t].toDescriptor());return ye.ServiceDescriptorProto.create({name:this.name,method:e,options:_c(this.options,ye.ServiceOptions)})};var JX=0;Ug.fromDescriptor=function(e){return typeof e.length=="number"&&(e=ye.MethodDescriptorProto.decode(e)),new Ug(e.name&&e.name.length?e.name:"Method"+JX++,"rpc",e.inputType,e.outputType,!!e.clientStreaming,!!e.serverStreaming,bc(e.options,ye.MethodOptions))};Ug.prototype.toDescriptor=function(){return ye.MethodDescriptorProto.create({name:this.name,inputType:this.resolvedRequestType?this.resolvedRequestType.fullName:this.requestType,outputType:this.resolvedResponseType?this.resolvedResponseType.fullName:this.responseType,clientStreaming:this.requestStream,serverStreaming:this.responseStream,options:_c(this.options,ye.MethodOptions)})};function XX(n){switch(n){case 1:return"double";case 2:return"float";case 3:return"int64";case 4:return"uint64";case 5:return"int32";case 6:return"fixed64";case 7:return"fixed32";case 8:return"bool";case 9:return"string";case 12:return"bytes";case 13:return"uint32";case 15:return"sfixed32";case 16:return"sfixed64";case 17:return"sint32";case 18:return"sint64"}throw Error("illegal type: "+n)}function eee(n){switch(n){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 13:case 14:case 15:case 16:case 17:case 18:return!0}return!1}function sC(n,e){switch(n){case"double":return 1;case"float":return 2;case"int64":return 3;case"uint64":return 4;case"int32":return 5;case"fixed64":return 6;case"fixed32":return 7;case"bool":return 8;case"string":return 9;case"bytes":return 12;case"uint32":return 13;case"sfixed32":return 15;case"sfixed64":return 16;case"sint32":return 17;case"sint64":return 18}if(e instanceof wi)return 14;if(e instanceof Es)return e.group?10:11;throw Error("illegal type: "+n)}function bc(n,e){if(n){for(var t=[],r=0,i,s,o;r<e.fieldsArray.length;++r)(s=(i=e._fieldsArray[r]).name)!=="uninterpretedOption"&&n.hasOwnProperty(s)&&(o=n[s],i.resolvedType instanceof wi&&typeof o=="number"&&i.resolvedType.valuesById[o]!==void 0&&(o=i.resolvedType.valuesById[o]),t.push(tee(s),o));return t.length?en.util.toObject(t):void 0}}function _c(n,e){if(n){for(var t=[],r=0,i=Object.keys(n),s,o;r<i.length;++r)if(o=n[s=i[r]],s!=="default"){var a=e.fields[s];!a&&!(a=e.fields[s=en.util.camelCase(s)])||t.push(s,o)}return t.length?e.fromObject(en.util.toObject(t)):void 0}}function RB(n,e){var t=n.fullName.split("."),r=e.fullName.split("."),i=0,s=0,o=r.length-1;if(!(n instanceof od)&&e instanceof DB)for(;i<t.length&&s<o&&t[i]===r[s];){var a=e.lookup(t[i++],!0);if(a!==null&&a!==e)break;++s}else for(;i<t.length&&s<o&&t[i]===r[s];++i,++s);return r.slice(s).join(".")}function tee(n){return n.substring(0,1)+n.substring(1).replace(/([A-Z])(?=[a-z]|$)/g,function(e,t){return"_"+t.toLowerCase()})}});var OB=A((nSe,nee)=>{nee.exports={nested:{google:{nested:{protobuf:{nested:{Api:{fields:{name:{type:"string",id:1},methods:{rule:"repeated",type:"Method",id:2},options:{rule:"repeated",type:"Option",id:3},version:{type:"string",id:4},sourceContext:{type:"SourceContext",id:5},mixins:{rule:"repeated",type:"Mixin",id:6},syntax:{type:"Syntax",id:7}}},Method:{fields:{name:{type:"string",id:1},requestTypeUrl:{type:"string",id:2},requestStreaming:{type:"bool",id:3},responseTypeUrl:{type:"string",id:4},responseStreaming:{type:"bool",id:5},options:{rule:"repeated",type:"Option",id:6},syntax:{type:"Syntax",id:7}}},Mixin:{fields:{name:{type:"string",id:1},root:{type:"string",id:2}}},SourceContext:{fields:{fileName:{type:"string",id:1}}},Option:{fields:{name:{type:"string",id:1},value:{type:"Any",id:2}}},Syntax:{values:{SYNTAX_PROTO2:0,SYNTAX_PROTO3:1}}}}}}}}});var kB=A((rSe,ree)=>{ree.exports={nested:{google:{nested:{protobuf:{nested:{SourceContext:{fields:{fileName:{type:"string",id:1}}}}}}}}}});var xB=A((iSe,iee)=>{iee.exports={nested:{google:{nested:{protobuf:{nested:{Type:{fields:{name:{type:"string",id:1},fields:{rule:"repeated",type:"Field",id:2},oneofs:{rule:"repeated",type:"string",id:3},options:{rule:"repeated",type:"Option",id:4},sourceContext:{type:"SourceContext",id:5},syntax:{type:"Syntax",id:6}}},Field:{fields:{kind:{type:"Kind",id:1},cardinality:{type:"Cardinality",id:2},number:{type:"int32",id:3},name:{type:"string",id:4},typeUrl:{type:"string",id:6},oneofIndex:{type:"int32",id:7},packed:{type:"bool",id:8},options:{rule:"repeated",type:"Option",id:9},jsonName:{type:"string",id:10},defaultValue:{type:"string",id:11}},nested:{Kind:{values:{TYPE_UNKNOWN:0,TYPE_DOUBLE:1,TYPE_FLOAT:2,TYPE_INT64:3,TYPE_UINT64:4,TYPE_INT32:5,TYPE_FIXED64:6,TYPE_FIXED32:7,TYPE_BOOL:8,TYPE_STRING:9,TYPE_GROUP:10,TYPE_MESSAGE:11,TYPE_BYTES:12,TYPE_UINT32:13,TYPE_ENUM:14,TYPE_SFIXED32:15,TYPE_SFIXED64:16,TYPE_SINT32:17,TYPE_SINT64:18}},Cardinality:{values:{CARDINALITY_UNKNOWN:0,CARDINALITY_OPTIONAL:1,CARDINALITY_REQUIRED:2,CARDINALITY_REPEATED:3}}}},Enum:{fields:{name:{type:"string",id:1},enumvalue:{rule:"repeated",type:"EnumValue",id:2},options:{rule:"repeated",type:"Option",id:3},sourceContext:{type:"SourceContext",id:4},syntax:{type:"Syntax",id:5}}},EnumValue:{fields:{name:{type:"string",id:1},number:{type:"int32",id:2},options:{rule:"repeated",type:"Option",id:3}}},Option:{fields:{name:{type:"string",id:1},value:{type:"Any",id:2}}},Syntax:{values:{SYNTAX_PROTO2:0,SYNTAX_PROTO3:1}},Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}},SourceContext:{fields:{fileName:{type:"string",id:1}}}}}}}}}});var BB=A(Ts=>{"use strict";Object.defineProperty(Ts,"__esModule",{value:!0});Ts.addCommonProtos=Ts.loadProtosWithOptionsSync=Ts.loadProtosWithOptions=void 0;var PB=Me("fs"),LB=Me("path"),Sc=Fg();function FB(n,e){let t=n.resolvePath;n.resolvePath=(r,i)=>{if(LB.isAbsolute(i))return i;for(let s of e){let o=LB.join(s,i);try{return PB.accessSync(o,PB.constants.R_OK),o}catch{continue}}return process.emitWarning(`${i} not found in any of the include paths ${e}`),t(r,i)}}function see(n,e){return T(this,null,function*(){let t=new Sc.Root;if(e=e||{},e.includeDirs){if(!Array.isArray(e.includeDirs))return Promise.reject(new Error("The includeDirs option must be an array"));FB(t,e.includeDirs)}let r=yield t.load(n,e);return r.resolveAll(),r})}Ts.loadProtosWithOptions=see;function oee(n,e){let t=new Sc.Root;if(e=e||{},e.includeDirs){if(!Array.isArray(e.includeDirs))throw new Error("The includeDirs option must be an array");FB(t,e.includeDirs)}let r=t.loadSync(n,e);return r.resolveAll(),r}Ts.loadProtosWithOptionsSync=oee;function aee(){let n=OB(),e=iC(),t=kB(),r=xB();Sc.common("api",n.nested.google.nested.protobuf.nested),Sc.common("descriptor",e.nested.google.nested.protobuf.nested),Sc.common("source_context",t.nested.google.nested.protobuf.nested),Sc.common("type",r.nested.google.nested.protobuf.nested)}Ts.addCommonProtos=aee});var UB=A((cd,oC)=>{"use strict";(function(n,e){function t(r){return"default"in r?r.default:r}typeof define=="function"&&define.amd?define([],function(){var r={};return e(r),t(r)}):typeof cd=="object"?(e(cd),typeof oC=="object"&&(oC.exports=t(cd))):function(){var r={};e(r),n.Long=t(r)}()})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:cd,function(n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function t(p,g,L){this.low=p|0,this.high=g|0,this.unsigned=!!L}t.prototype.__isLong__,Object.defineProperty(t.prototype,"__isLong__",{value:!0});function r(p){return(p&&p.__isLong__)===!0}function i(p){var g=Math.clz32(p&-p);return p?31-g:g}t.isLong=r;var s={},o={};function a(p,g){var L,Te,Be;return g?(p>>>=0,(Be=0<=p&&p<256)&&(Te=o[p],Te)?Te:(L=l(p,0,!0),Be&&(o[p]=L),L)):(p|=0,(Be=-128<=p&&p<128)&&(Te=s[p],Te)?Te:(L=l(p,p<0?-1:0,!1),Be&&(s[p]=L),L))}t.fromInt=a;function c(p,g){if(isNaN(p))return g?P:M;if(g){if(p<0)return P;if(p>=S)return E}else{if(p<=-I)return b;if(p+1>=I)return y}return p<0?c(-p,g).neg():l(p%w|0,p/w|0,g)}t.fromNumber=c;function l(p,g,L){return new t(p,g,L)}t.fromBits=l;var u=Math.pow;function d(p,g,L){if(p.length===0)throw Error("empty string");if(typeof g=="number"?(L=g,g=!1):g=!!g,p==="NaN"||p==="Infinity"||p==="+Infinity"||p==="-Infinity")return g?P:M;if(L=L||10,L<2||36<L)throw RangeError("radix");var Te;if((Te=p.indexOf("-"))>0)throw Error("interior hyphen");if(Te===0)return d(p.substring(1),g,L).neg();for(var Be=c(u(L,8)),ke=M,nt=0;nt<p.length;nt+=8){var Ue=Math.min(8,p.length-nt),Wt=parseInt(p.substring(nt,nt+Ue),L);if(Ue<8){var at=c(u(L,Ue));ke=ke.mul(at).add(c(Wt))}else ke=ke.mul(Be),ke=ke.add(c(Wt))}return ke.unsigned=g,ke}t.fromString=d;function h(p,g){return typeof p=="number"?c(p,g):typeof p=="string"?d(p,g):l(p.low,p.high,typeof g=="boolean"?g:p.unsigned)}t.fromValue=h;var f=65536,v=1<<24,w=f*f,S=w*w,I=S/2,D=a(v),M=a(0);t.ZERO=M;var P=a(0,!0);t.UZERO=P;var G=a(1);t.ONE=G;var W=a(1,!0);t.UONE=W;var _=a(-1);t.NEG_ONE=_;var y=l(-1,2147483647,!1);t.MAX_VALUE=y;var E=l(-1,-1,!0);t.MAX_UNSIGNED_VALUE=E;var b=l(0,-2147483648,!1);t.MIN_VALUE=b;var m=t.prototype;m.toInt=function(){return this.unsigned?this.low>>>0:this.low},m.toNumber=function(){return this.unsigned?(this.high>>>0)*w+(this.low>>>0):this.high*w+(this.low>>>0)},m.toString=function(g){if(g=g||10,g<2||36<g)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(b)){var L=c(g),Te=this.div(L),Be=Te.mul(L).sub(this);return Te.toString(g)+Be.toInt().toString(g)}else return"-"+this.neg().toString(g);for(var ke=c(u(g,6),this.unsigned),nt=this,Ue="";;){var Wt=nt.div(ke),at=nt.sub(Wt.mul(ke)).toInt()>>>0,Ze=at.toString(g);if(nt=Wt,nt.isZero())return Ze+Ue;for(;Ze.length<6;)Ze="0"+Ze;Ue=""+Ze+Ue}},m.getHighBits=function(){return this.high},m.getHighBitsUnsigned=function(){return this.high>>>0},m.getLowBits=function(){return this.low},m.getLowBitsUnsigned=function(){return this.low>>>0},m.getNumBitsAbs=function(){if(this.isNegative())return this.eq(b)?64:this.neg().getNumBitsAbs();for(var g=this.high!=0?this.high:this.low,L=31;L>0&&(g&1<<L)==0;L--);return this.high!=0?L+33:L+1},m.isSafeInteger=function(){var g=this.high>>21;return g?this.unsigned?!1:g===-1&&!(this.low===0&&this.high===-2097152):!0},m.isZero=function(){return this.high===0&&this.low===0},m.eqz=m.isZero,m.isNegative=function(){return!this.unsigned&&this.high<0},m.isPositive=function(){return this.unsigned||this.high>=0},m.isOdd=function(){return(this.low&1)===1},m.isEven=function(){return(this.low&1)===0},m.equals=function(g){return r(g)||(g=h(g)),this.unsigned!==g.unsigned&&this.high>>>31===1&&g.high>>>31===1?!1:this.high===g.high&&this.low===g.low},m.eq=m.equals,m.notEquals=function(g){return!this.eq(g)},m.neq=m.notEquals,m.ne=m.notEquals,m.lessThan=function(g){return this.comp(g)<0},m.lt=m.lessThan,m.lessThanOrEqual=function(g){return this.comp(g)<=0},m.lte=m.lessThanOrEqual,m.le=m.lessThanOrEqual,m.greaterThan=function(g){return this.comp(g)>0},m.gt=m.greaterThan,m.greaterThanOrEqual=function(g){return this.comp(g)>=0},m.gte=m.greaterThanOrEqual,m.ge=m.greaterThanOrEqual,m.compare=function(g){if(r(g)||(g=h(g)),this.eq(g))return 0;var L=this.isNegative(),Te=g.isNegative();return L&&!Te?-1:!L&&Te?1:this.unsigned?g.high>>>0>this.high>>>0||g.high===this.high&&g.low>>>0>this.low>>>0?-1:1:this.sub(g).isNegative()?-1:1},m.comp=m.compare,m.negate=function(){return!this.unsigned&&this.eq(b)?b:this.not().add(G)},m.neg=m.negate,m.add=function(g){r(g)||(g=h(g));var L=this.high>>>16,Te=this.high&65535,Be=this.low>>>16,ke=this.low&65535,nt=g.high>>>16,Ue=g.high&65535,Wt=g.low>>>16,at=g.low&65535,Ze=0,Dt=0,ct=0,Kt=0;return Kt+=ke+at,ct+=Kt>>>16,Kt&=65535,ct+=Be+Wt,Dt+=ct>>>16,ct&=65535,Dt+=Te+Ue,Ze+=Dt>>>16,Dt&=65535,Ze+=L+nt,Ze&=65535,l(ct<<16|Kt,Ze<<16|Dt,this.unsigned)},m.subtract=function(g){return r(g)||(g=h(g)),this.add(g.neg())},m.sub=m.subtract,m.multiply=function(g){if(this.isZero())return this;if(r(g)||(g=h(g)),e){var L=e.mul(this.low,this.high,g.low,g.high);return l(L,e.get_high(),this.unsigned)}if(g.isZero())return this.unsigned?P:M;if(this.eq(b))return g.isOdd()?b:M;if(g.eq(b))return this.isOdd()?b:M;if(this.isNegative())return g.isNegative()?this.neg().mul(g.neg()):this.neg().mul(g).neg();if(g.isNegative())return this.mul(g.neg()).neg();if(this.lt(D)&&g.lt(D))return c(this.toNumber()*g.toNumber(),this.unsigned);var Te=this.high>>>16,Be=this.high&65535,ke=this.low>>>16,nt=this.low&65535,Ue=g.high>>>16,Wt=g.high&65535,at=g.low>>>16,Ze=g.low&65535,Dt=0,ct=0,Kt=0,zo=0;return zo+=nt*Ze,Kt+=zo>>>16,zo&=65535,Kt+=ke*Ze,ct+=Kt>>>16,Kt&=65535,Kt+=nt*at,ct+=Kt>>>16,Kt&=65535,ct+=Be*Ze,Dt+=ct>>>16,ct&=65535,ct+=ke*at,Dt+=ct>>>16,ct&=65535,ct+=nt*Wt,Dt+=ct>>>16,ct&=65535,Dt+=Te*Ze+Be*at+ke*Wt+nt*Ue,Dt&=65535,l(Kt<<16|zo,Dt<<16|ct,this.unsigned)},m.mul=m.multiply,m.divide=function(g){if(r(g)||(g=h(g)),g.isZero())throw Error("division by zero");if(e){if(!this.unsigned&&this.high===-2147483648&&g.low===-1&&g.high===-1)return this;var L=(this.unsigned?e.div_u:e.div_s)(this.low,this.high,g.low,g.high);return l(L,e.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?P:M;var Te,Be,ke;if(this.unsigned){if(g.unsigned||(g=g.toUnsigned()),g.gt(this))return P;if(g.gt(this.shru(1)))return W;ke=P}else{if(this.eq(b)){if(g.eq(G)||g.eq(_))return b;if(g.eq(b))return G;var nt=this.shr(1);return Te=nt.div(g).shl(1),Te.eq(M)?g.isNegative()?G:_:(Be=this.sub(g.mul(Te)),ke=Te.add(Be.div(g)),ke)}else if(g.eq(b))return this.unsigned?P:M;if(this.isNegative())return g.isNegative()?this.neg().div(g.neg()):this.neg().div(g).neg();if(g.isNegative())return this.div(g.neg()).neg();ke=M}for(Be=this;Be.gte(g);){Te=Math.max(1,Math.floor(Be.toNumber()/g.toNumber()));for(var Ue=Math.ceil(Math.log(Te)/Math.LN2),Wt=Ue<=48?1:u(2,Ue-48),at=c(Te),Ze=at.mul(g);Ze.isNegative()||Ze.gt(Be);)Te-=Wt,at=c(Te,this.unsigned),Ze=at.mul(g);at.isZero()&&(at=G),ke=ke.add(at),Be=Be.sub(Ze)}return ke},m.div=m.divide,m.modulo=function(g){if(r(g)||(g=h(g)),e){var L=(this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,g.low,g.high);return l(L,e.get_high(),this.unsigned)}return this.sub(this.div(g).mul(g))},m.mod=m.modulo,m.rem=m.modulo,m.not=function(){return l(~this.low,~this.high,this.unsigned)},m.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},m.clz=m.countLeadingZeros,m.countTrailingZeros=function(){return this.low?i(this.low):i(this.high)+32},m.ctz=m.countTrailingZeros,m.and=function(g){return r(g)||(g=h(g)),l(this.low&g.low,this.high&g.high,this.unsigned)},m.or=function(g){return r(g)||(g=h(g)),l(this.low|g.low,this.high|g.high,this.unsigned)},m.xor=function(g){return r(g)||(g=h(g)),l(this.low^g.low,this.high^g.high,this.unsigned)},m.shiftLeft=function(g){return r(g)&&(g=g.toInt()),(g&=63)===0?this:g<32?l(this.low<<g,this.high<<g|this.low>>>32-g,this.unsigned):l(0,this.low<<g-32,this.unsigned)},m.shl=m.shiftLeft,m.shiftRight=function(g){return r(g)&&(g=g.toInt()),(g&=63)===0?this:g<32?l(this.low>>>g|this.high<<32-g,this.high>>g,this.unsigned):l(this.high>>g-32,this.high>=0?0:-1,this.unsigned)},m.shr=m.shiftRight,m.shiftRightUnsigned=function(g){return r(g)&&(g=g.toInt()),(g&=63)===0?this:g<32?l(this.low>>>g|this.high<<32-g,this.high>>>g,this.unsigned):g===32?l(this.high,0,this.unsigned):l(this.high>>>g-32,0,this.unsigned)},m.shru=m.shiftRightUnsigned,m.shr_u=m.shiftRightUnsigned,m.rotateLeft=function(g){var L;return r(g)&&(g=g.toInt()),(g&=63)===0?this:g===32?l(this.high,this.low,this.unsigned):g<32?(L=32-g,l(this.low<<g|this.high>>>L,this.high<<g|this.low>>>L,this.unsigned)):(g-=32,L=32-g,l(this.high<<g|this.low>>>L,this.low<<g|this.high>>>L,this.unsigned))},m.rotl=m.rotateLeft,m.rotateRight=function(g){var L;return r(g)&&(g=g.toInt()),(g&=63)===0?this:g===32?l(this.high,this.low,this.unsigned):g<32?(L=32-g,l(this.high<<L|this.low>>>g,this.low<<L|this.high>>>g,this.unsigned)):(g-=32,L=32-g,l(this.low<<L|this.high>>>g,this.high<<L|this.low>>>g,this.unsigned))},m.rotr=m.rotateRight,m.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},m.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},m.toBytes=function(g){return g?this.toBytesLE():this.toBytesBE()},m.toBytesLE=function(){var g=this.high,L=this.low;return[L&255,L>>>8&255,L>>>16&255,L>>>24,g&255,g>>>8&255,g>>>16&255,g>>>24]},m.toBytesBE=function(){var g=this.high,L=this.low;return[g>>>24,g>>>16&255,g>>>8&255,g&255,L>>>24,L>>>16&255,L>>>8&255,L&255]},t.fromBytes=function(g,L,Te){return Te?t.fromBytesLE(g,L):t.fromBytesBE(g,L)},t.fromBytesLE=function(g,L){return new t(g[0]|g[1]<<8|g[2]<<16|g[3]<<24,g[4]|g[5]<<8|g[6]<<16|g[7]<<24,L)},t.fromBytesBE=function(g,L){return new t(g[4]<<24|g[5]<<16|g[6]<<8|g[7],g[0]<<24|g[1]<<16|g[2]<<8|g[3],L)},typeof BigInt=="function"&&(t.fromBigInt=function(g,L){var Te=Number(BigInt.asIntN(32,g)),Be=Number(BigInt.asIntN(32,g>>BigInt(32)));return l(Te,Be,L)},t.fromValue=function(g,L){return typeof g=="bigint"?fromBigInt(g,L):h(g,L)},m.toBigInt=function(){var g=BigInt(this.low>>>0),L=BigInt(this.unsigned?this.high>>>0:this.high);return L<<BigInt(32)|g});var C=n.default=t})});var uC=A(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.loadFileDescriptorSetFromObject=vt.loadFileDescriptorSetFromBuffer=vt.fromJSON=vt.loadSync=vt.load=vt.IdempotencyLevel=vt.isAnyExtension=vt.Long=void 0;var cee=AL(),qr=Fg(),cC=MB(),lC=BB(),lee=UB();vt.Long=lee;function uee(n){return"@type"in n&&typeof n["@type"]=="string"}vt.isAnyExtension=uee;var qB;(function(n){n.IDEMPOTENCY_UNKNOWN="IDEMPOTENCY_UNKNOWN",n.NO_SIDE_EFFECTS="NO_SIDE_EFFECTS",n.IDEMPOTENT="IDEMPOTENT"})(qB=vt.IdempotencyLevel||(vt.IdempotencyLevel={}));var $B={longs:String,enums:String,bytes:String,defaults:!0,oneofs:!0,json:!0};function dee(n,e){return n===""?e:n+"."+e}function fee(n){return n instanceof qr.Service||n instanceof qr.Type||n instanceof qr.Enum}function hee(n){return n instanceof qr.Namespace||n instanceof qr.Root}function zB(n,e){let t=dee(e,n.name);return fee(n)?[[t,n]]:hee(n)&&typeof n.nested<"u"?Object.keys(n.nested).map(r=>zB(n.nested[r],t)).reduce((r,i)=>r.concat(i),[]):[]}function VB(n,e){return function(r){return n.toObject(n.decode(r),e)}}function jB(n){return function(t){if(Array.isArray(t))throw new Error(`Failed to serialize message: expected object with ${n.name} structure, got array instead`);let r=n.fromObject(t);return n.encode(r).finish()}}function pee(n){return(n||[]).reduce((e,t)=>{for(let[r,i]of Object.entries(t))switch(r){case"uninterpreted_option":e.uninterpreted_option.push(t.uninterpreted_option);break;default:e[r]=i}return e},{deprecated:!1,idempotency_level:qB.IDEMPOTENCY_UNKNOWN,uninterpreted_option:[]})}function gee(n,e,t,r){let i=n.resolvedRequestType,s=n.resolvedResponseType;return{path:"/"+e+"/"+n.name,requestStream:!!n.requestStream,responseStream:!!n.responseStream,requestSerialize:jB(i),requestDeserialize:VB(i,t),responseSerialize:jB(s),responseDeserialize:VB(s,t),originalName:cee(n.name),requestType:aC(i,r),responseType:aC(s,r),options:pee(n.parsedOptions)}}function mee(n,e,t,r){let i={};for(let s of n.methodsArray)i[s.name]=gee(s,e,t,r);return i}function aC(n,e){let t=n.toDescriptor("proto3");return{format:"Protocol Buffer 3 DescriptorProto",type:t.$type.toObject(t,$B),fileDescriptorProtos:e}}function yee(n,e){let t=n.toDescriptor("proto3");return{format:"Protocol Buffer 3 EnumDescriptorProto",type:t.$type.toObject(t,$B),fileDescriptorProtos:e}}function vee(n,e,t,r){if(n instanceof qr.Service)return mee(n,e,t,r);if(n instanceof qr.Type)return aC(n,r);if(n instanceof qr.Enum)return yee(n,r);throw new Error("Type mismatch in reflection object handling")}function Vg(n,e){let t={};n.resolveAll();let i=n.toDescriptor("proto3").file.map(s=>Buffer.from(cC.FileDescriptorProto.encode(s).finish()));for(let[s,o]of zB(n,""))t[s]=vee(o,s,e,i);return t}function HB(n,e){e=e||{};let t=qr.Root.fromDescriptor(n);return t.resolveAll(),Vg(t,e)}function Eee(n,e){return(0,lC.loadProtosWithOptions)(n,e).then(t=>Vg(t,e))}vt.load=Eee;function wee(n,e){let t=(0,lC.loadProtosWithOptionsSync)(n,e);return Vg(t,e)}vt.loadSync=wee;function Tee(n,e){e=e||{};let t=qr.Root.fromJSON(n);return t.resolveAll(),Vg(t,e)}vt.fromJSON=Tee;function bee(n,e){let t=cC.FileDescriptorSet.decode(n);return HB(t,e)}vt.loadFileDescriptorSetFromBuffer=bee;function _ee(n,e){let t=cC.FileDescriptorSet.fromObject(n);return HB(t,e)}vt.loadFileDescriptorSetFromObject=_ee;(0,lC.addCommonProtos)()});var Co=A(Ge=>{"use strict";Object.defineProperty(Ge,"__esModule",{value:!0});Ge.setup=Ge.getChannelzServiceDefinition=Ge.getChannelzHandlers=Ge.unregisterChannelzRef=Ge.registerChannelzSocket=Ge.registerChannelzServer=Ge.registerChannelzSubchannel=Ge.registerChannelzChannel=Ge.ChannelzCallTracker=Ge.ChannelzChildrenTracker=Ge.ChannelzTrace=void 0;var GB=Me("net"),ld=kn(),dd=Ae(),See=kr(),Cee=ag(),Iee=aS();function dC(n){return{channel_id:n.id,name:n.name}}function gC(n){return{subchannel_id:n.id,name:n.name}}function Dee(n){return{server_id:n.id}}function qg(n){return{socket_id:n.id,name:n.name}}var WB=32,fC=class{constructor(){this.events=[],this.eventsLogged=0,this.creationTimestamp=new Date}addTrace(e,t,r){let i=new Date;this.events.push({description:t,severity:e,timestamp:i,childChannel:r?.kind==="channel"?r:void 0,childSubchannel:r?.kind==="subchannel"?r:void 0}),this.events.length>=WB*2&&(this.events=this.events.slice(WB)),this.eventsLogged+=1}getTraceMessage(){return{creation_timestamp:Ti(this.creationTimestamp),num_events_logged:this.eventsLogged,events:this.events.map(e=>({description:e.description,severity:e.severity,timestamp:Ti(e.timestamp),channel_ref:e.childChannel?dC(e.childChannel):null,subchannel_ref:e.childSubchannel?gC(e.childSubchannel):null}))}}};Ge.ChannelzTrace=fC;var hC=class{constructor(){this.channelChildren=new Map,this.subchannelChildren=new Map,this.socketChildren=new Map}refChild(e){var t,r,i;switch(e.kind){case"channel":{let s=(t=this.channelChildren.get(e.id))!==null&&t!==void 0?t:{ref:e,count:0};s.count+=1,this.channelChildren.set(e.id,s);break}case"subchannel":{let s=(r=this.subchannelChildren.get(e.id))!==null&&r!==void 0?r:{ref:e,count:0};s.count+=1,this.subchannelChildren.set(e.id,s);break}case"socket":{let s=(i=this.socketChildren.get(e.id))!==null&&i!==void 0?i:{ref:e,count:0};s.count+=1,this.socketChildren.set(e.id,s);break}}}unrefChild(e){switch(e.kind){case"channel":{let t=this.channelChildren.get(e.id);t!==void 0&&(t.count-=1,t.count===0?this.channelChildren.delete(e.id):this.channelChildren.set(e.id,t));break}case"subchannel":{let t=this.subchannelChildren.get(e.id);t!==void 0&&(t.count-=1,t.count===0?this.subchannelChildren.delete(e.id):this.subchannelChildren.set(e.id,t));break}case"socket":{let t=this.socketChildren.get(e.id);t!==void 0&&(t.count-=1,t.count===0?this.socketChildren.delete(e.id):this.socketChildren.set(e.id,t));break}}}getChildLists(){let e=[];for(let{ref:i}of this.channelChildren.values())e.push(i);let t=[];for(let{ref:i}of this.subchannelChildren.values())t.push(i);let r=[];for(let{ref:i}of this.socketChildren.values())r.push(i);return{channels:e,subchannels:t,sockets:r}}};Ge.ChannelzChildrenTracker=hC;var pC=class{constructor(){this.callsStarted=0,this.callsSucceeded=0,this.callsFailed=0,this.lastCallStartedTimestamp=null}addCallStarted(){this.callsStarted+=1,this.lastCallStartedTimestamp=new Date}addCallSucceeded(){this.callsSucceeded+=1}addCallFailed(){this.callsFailed+=1}};Ge.ChannelzCallTracker=pC;var Aee=1;function $g(){return Aee++}var ud=[],mC=[],bs=[],yC=[];function Ree(n,e,t){let r=$g(),i={id:r,name:n,kind:"channel"};return t&&(ud[r]={ref:i,getInfo:e}),i}Ge.registerChannelzChannel=Ree;function Nee(n,e,t){let r=$g(),i={id:r,name:n,kind:"subchannel"};return t&&(mC[r]={ref:i,getInfo:e}),i}Ge.registerChannelzSubchannel=Nee;function Mee(n,e){let t=$g(),r={id:t,kind:"server"};return e&&(bs[t]={ref:r,getInfo:n}),r}Ge.registerChannelzServer=Mee;function Oee(n,e,t){let r=$g(),i={id:r,name:n,kind:"socket"};return t&&(yC[r]={ref:i,getInfo:e}),i}Ge.registerChannelzSocket=Oee;function kee(n){switch(n.kind){case"channel":delete ud[n.id];return;case"subchannel":delete mC[n.id];return;case"server":delete bs[n.id];return;case"socket":delete yC[n.id];return}}Ge.unregisterChannelzRef=kee;function xee(n){let e=Number.parseInt(n,16);return[e/256|0,e%256]}function KB(n){if(n==="")return[];let e=n.split(":").map(r=>xee(r));return[].concat(...e)}function Pee(n){if((0,GB.isIPv4)(n))return Buffer.from(Uint8Array.from(n.split(".").map(e=>Number.parseInt(e))));if((0,GB.isIPv6)(n)){let e,t,r=n.indexOf("::");r===-1?(e=n,t=""):(e=n.substring(0,r),t=n.substring(r+2));let i=Buffer.from(KB(e)),s=Buffer.from(KB(t)),o=Buffer.alloc(16-i.length-s.length,0);return Buffer.concat([i,o,s])}else return null}function YB(n){switch(n){case ld.ConnectivityState.CONNECTING:return{state:"CONNECTING"};case ld.ConnectivityState.IDLE:return{state:"IDLE"};case ld.ConnectivityState.READY:return{state:"READY"};case ld.ConnectivityState.SHUTDOWN:return{state:"SHUTDOWN"};case ld.ConnectivityState.TRANSIENT_FAILURE:return{state:"TRANSIENT_FAILURE"};default:return{state:"UNKNOWN"}}}function Ti(n){if(!n)return null;let e=n.getTime();return{seconds:e/1e3|0,nanos:e%1e3*1e6}}function ZB(n){let e=n.getInfo();return{ref:dC(n.ref),data:{target:e.target,state:YB(e.state),calls_started:e.callTracker.callsStarted,calls_succeeded:e.callTracker.callsSucceeded,calls_failed:e.callTracker.callsFailed,last_call_started_timestamp:Ti(e.callTracker.lastCallStartedTimestamp),trace:e.trace.getTraceMessage()},channel_ref:e.children.channels.map(t=>dC(t)),subchannel_ref:e.children.subchannels.map(t=>gC(t))}}function Lee(n,e){let t=Number.parseInt(n.request.channel_id),r=ud[t];if(r===void 0){e({code:dd.Status.NOT_FOUND,details:"No channel data found for id "+t});return}e(null,{channel:ZB(r)})}function Fee(n,e){let t=Number.parseInt(n.request.max_results),r=[],i=Number.parseInt(n.request.start_channel_id);for(;i<ud.length;i++){let s=ud[i];if(s!==void 0&&(r.push(ZB(s)),r.length>=t))break}e(null,{channel:r,end:i>=bs.length})}function JB(n){let e=n.getInfo();return{ref:Dee(n.ref),data:{calls_started:e.callTracker.callsStarted,calls_succeeded:e.callTracker.callsSucceeded,calls_failed:e.callTracker.callsFailed,last_call_started_timestamp:Ti(e.callTracker.lastCallStartedTimestamp),trace:e.trace.getTraceMessage()},listen_socket:e.listenerChildren.sockets.map(t=>qg(t))}}function Bee(n,e){let t=Number.parseInt(n.request.server_id),r=bs[t];if(r===void 0){e({code:dd.Status.NOT_FOUND,details:"No server data found for id "+t});return}e(null,{server:JB(r)})}function Uee(n,e){let t=Number.parseInt(n.request.max_results),r=[],i=Number.parseInt(n.request.start_server_id);for(;i<bs.length;i++){let s=bs[i];if(s!==void 0&&(r.push(JB(s)),r.length>=t))break}e(null,{server:r,end:i>=bs.length})}function Vee(n,e){let t=Number.parseInt(n.request.subchannel_id),r=mC[t];if(r===void 0){e({code:dd.Status.NOT_FOUND,details:"No subchannel data found for id "+t});return}let i=r.getInfo(),s={ref:gC(r.ref),data:{target:i.target,state:YB(i.state),calls_started:i.callTracker.callsStarted,calls_succeeded:i.callTracker.callsSucceeded,calls_failed:i.callTracker.callsFailed,last_call_started_timestamp:Ti(i.callTracker.lastCallStartedTimestamp),trace:i.trace.getTraceMessage()},socket_ref:i.children.sockets.map(o=>qg(o))};e(null,{subchannel:s})}function QB(n){var e;return(0,See.isTcpSubchannelAddress)(n)?{address:"tcpip_address",tcpip_address:{ip_address:(e=Pee(n.host))!==null&&e!==void 0?e:void 0,port:n.port}}:{address:"uds_address",uds_address:{filename:n.path}}}function jee(n,e){var t,r,i,s,o;let a=Number.parseInt(n.request.socket_id),c=yC[a];if(c===void 0){e({code:dd.Status.NOT_FOUND,details:"No socket data found for id "+a});return}let l=c.getInfo(),u=l.security?{model:"tls",tls:{cipher_suite:l.security.cipherSuiteStandardName?"standard_name":"other_name",standard_name:(t=l.security.cipherSuiteStandardName)!==null&&t!==void 0?t:void 0,other_name:(r=l.security.cipherSuiteOtherName)!==null&&r!==void 0?r:void 0,local_certificate:(i=l.security.localCertificate)!==null&&i!==void 0?i:void 0,remote_certificate:(s=l.security.remoteCertificate)!==null&&s!==void 0?s:void 0}}:null,d={ref:qg(c.ref),local:l.localAddress?QB(l.localAddress):null,remote:l.remoteAddress?QB(l.remoteAddress):null,remote_name:(o=l.remoteName)!==null&&o!==void 0?o:void 0,security:u,data:{keep_alives_sent:l.keepAlivesSent,streams_started:l.streamsStarted,streams_succeeded:l.streamsSucceeded,streams_failed:l.streamsFailed,last_local_stream_created_timestamp:Ti(l.lastLocalStreamCreatedTimestamp),last_remote_stream_created_timestamp:Ti(l.lastRemoteStreamCreatedTimestamp),messages_received:l.messagesReceived,messages_sent:l.messagesSent,last_message_received_timestamp:Ti(l.lastMessageReceivedTimestamp),last_message_sent_timestamp:Ti(l.lastMessageSentTimestamp),local_flow_control_window:l.localFlowControlWindow?{value:l.localFlowControlWindow}:null,remote_flow_control_window:l.remoteFlowControlWindow?{value:l.remoteFlowControlWindow}:null}};e(null,{socket:d})}function qee(n,e){let t=Number.parseInt(n.request.server_id),r=bs[t];if(r===void 0){e({code:dd.Status.NOT_FOUND,details:"No server data found for id "+t});return}let i=Number.parseInt(n.request.start_socket_id),s=Number.parseInt(n.request.max_results),a=r.getInfo().sessionChildren.sockets.sort((u,d)=>u.id-d.id),c=[],l=0;for(;l<a.length&&!(a[l].id>=i&&(c.push(qg(a[l])),c.length>=s));l++);e(null,{socket_ref:c,end:l>=a.length})}function XB(){return{GetChannel:Lee,GetTopChannels:Fee,GetServer:Bee,GetServers:Uee,GetSubchannel:Vee,GetSocket:jee,GetServerSockets:qee}}Ge.getChannelzHandlers=XB;var jg=null;function e2(){if(jg)return jg;let n=uC().loadSync,e=n("channelz.proto",{keepCase:!0,longs:String,enums:String,defaults:!0,oneofs:!0,includeDirs:[`${__dirname}/../../proto`]});return jg=(0,Iee.loadPackageDefinition)(e).grpc.channelz.v1.Channelz.service,jg}Ge.getChannelzServiceDefinition=e2;function $ee(){(0,Cee.registerAdminService)(e2,XB)}Ge.setup=$ee});var t2=A(Hg=>{"use strict";Object.defineProperty(Hg,"__esModule",{value:!0});Hg.Subchannel=void 0;var je=kn(),zee=$u(),vC=et(),zg=Ae(),Hee=Sn(),Gee=kr(),Cc=Co(),Wee="subchannel",Kee=~(1<<31),EC=class{constructor(e,t,r,i,s){var o;this.channelTarget=e,this.subchannelAddress=t,this.options=r,this.credentials=i,this.connector=s,this.connectivityState=je.ConnectivityState.IDLE,this.transport=null,this.continueConnecting=!1,this.stateListeners=new Set,this.refcount=0,this.channelzEnabled=!0,this.callTracker=new Cc.ChannelzCallTracker,this.childrenTracker=new Cc.ChannelzChildrenTracker,this.streamTracker=new Cc.ChannelzCallTracker;let a={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new zee.BackoffTimeout(()=>{this.handleBackoffTimer()},a),this.backoffTimeout.unref(),this.subchannelAddressString=(0,Gee.subchannelAddressToString)(t),this.keepaliveTime=(o=r["grpc.keepalive_time_ms"])!==null&&o!==void 0?o:-1,r["grpc.enable_channelz"]===0&&(this.channelzEnabled=!1),this.channelzTrace=new Cc.ChannelzTrace,this.channelzRef=(0,Cc.registerChannelzSubchannel)(this.subchannelAddressString,()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Subchannel created"),this.trace("Subchannel constructed with options "+JSON.stringify(r,void 0,2))}getChannelzInfo(){return{state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists(),target:this.subchannelAddressString}}trace(e){vC.trace(zg.LogVerbosity.DEBUG,Wee,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}refTrace(e){vC.trace(zg.LogVerbosity.DEBUG,"subchannel_refcount","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}handleBackoffTimer(){this.continueConnecting?this.transitionToState([je.ConnectivityState.TRANSIENT_FAILURE],je.ConnectivityState.CONNECTING):this.transitionToState([je.ConnectivityState.TRANSIENT_FAILURE],je.ConnectivityState.IDLE)}startBackoff(){this.backoffTimeout.runOnce()}stopBackoff(){this.backoffTimeout.stop(),this.backoffTimeout.reset()}startConnectingInternal(){let e=this.options;if(e["grpc.keepalive_time_ms"]){let t=Math.min(this.keepaliveTime,Kee);e=Object.assign(Object.assign({},e),{"grpc.keepalive_time_ms":t})}this.connector.connect(this.subchannelAddress,this.credentials,e).then(t=>{this.transitionToState([je.ConnectivityState.CONNECTING],je.ConnectivityState.READY)?(this.transport=t,this.channelzEnabled&&this.childrenTracker.refChild(t.getChannelzRef()),t.addDisconnectListener(r=>{this.transitionToState([je.ConnectivityState.READY],je.ConnectivityState.IDLE),r&&this.keepaliveTime>0&&(this.keepaliveTime*=2,vC.log(zg.LogVerbosity.ERROR,`Connection to ${(0,Hee.uriToString)(this.channelTarget)} at ${this.subchannelAddressString} rejected by server because of excess pings. Increasing ping interval to ${this.keepaliveTime} ms`))})):t.shutdown()},t=>{this.transitionToState([je.ConnectivityState.CONNECTING],je.ConnectivityState.TRANSIENT_FAILURE,`${t}`)})}transitionToState(e,t,r){var i,s;if(e.indexOf(this.connectivityState)===-1)return!1;this.trace(je.ConnectivityState[this.connectivityState]+" -> "+je.ConnectivityState[t]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connectivity state change to "+je.ConnectivityState[t]);let o=this.connectivityState;switch(this.connectivityState=t,t){case je.ConnectivityState.READY:this.stopBackoff();break;case je.ConnectivityState.CONNECTING:this.startBackoff(),this.startConnectingInternal(),this.continueConnecting=!1;break;case je.ConnectivityState.TRANSIENT_FAILURE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),(i=this.transport)===null||i===void 0||i.shutdown(),this.transport=null,this.backoffTimeout.isRunning()||process.nextTick(()=>{this.handleBackoffTimer()});break;case je.ConnectivityState.IDLE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),(s=this.transport)===null||s===void 0||s.shutdown(),this.transport=null;break;default:throw new Error(`Invalid state: unknown ConnectivityState ${t}`)}for(let a of this.stateListeners)a(this,o,t,this.keepaliveTime,r);return!0}ref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount+1)),this.refcount+=1}unref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount-1)),this.refcount-=1,this.refcount===0&&(this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Shutting down"),this.channelzEnabled&&(0,Cc.unregisterChannelzRef)(this.channelzRef),process.nextTick(()=>{this.transitionToState([je.ConnectivityState.CONNECTING,je.ConnectivityState.READY],je.ConnectivityState.IDLE)}))}unrefIfOneRef(){return this.refcount===1?(this.unref(),!0):!1}createCall(e,t,r,i){if(!this.transport)throw new Error("Cannot create call, subchannel not READY");let s;return this.channelzEnabled?(this.callTracker.addCallStarted(),this.streamTracker.addCallStarted(),s={onCallEnd:o=>{o.code===zg.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}}):s={},this.transport.createCall(e,t,r,i,s)}startConnecting(){process.nextTick(()=>{this.transitionToState([je.ConnectivityState.IDLE],je.ConnectivityState.CONNECTING)||this.connectivityState===je.ConnectivityState.TRANSIENT_FAILURE&&(this.continueConnecting=!0)})}getConnectivityState(){return this.connectivityState}addConnectivityStateListener(e){this.stateListeners.add(e)}removeConnectivityStateListener(e){this.stateListeners.delete(e)}resetBackoff(){process.nextTick(()=>{this.backoffTimeout.reset(),this.transitionToState([je.ConnectivityState.TRANSIENT_FAILURE],je.ConnectivityState.CONNECTING)})}getAddress(){return this.subchannelAddressString}getChannelzRef(){return this.channelzRef}getRealSubchannel(){return this}realSubchannelEquals(e){return e.getRealSubchannel()===this}throttleKeepalive(e){e>this.keepaliveTime&&(this.keepaliveTime=e)}};Hg.Subchannel=EC});var _C=A(Cs=>{"use strict";Object.defineProperty(Cs,"__esModule",{value:!0});Cs.setup=Cs.DEFAULT_PORT=void 0;var n2=Mr(),i2=Me("dns"),s2=Me("util"),Qee=x_(),wC=Ae(),TC=dn(),Yee=et(),Zee=Ae(),_s=Sn(),r2=Me("net"),Jee=$u(),Xee="dns_resolver";function Ss(n){Yee.trace(Zee.LogVerbosity.DEBUG,Xee,n)}Cs.DEFAULT_PORT=443;var ete=3e4,tte=s2.promisify(i2.resolveTxt),nte=s2.promisify(i2.lookup);function rte(...n){let e=[];for(let t=0;t<Math.max.apply(null,n.map(r=>r.length));t++)for(let r of n)t<r.length&&e.push(r[t]);return e}var bC=class{constructor(e,t,r){var i,s,o;this.target=e,this.listener=t,this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfig=null,this.latestServiceConfigError=null,this.continueResolving=!1,this.isNextResolutionTimerRunning=!1,this.isServiceConfigEnabled=!0,this.returnedIpResult=!1,Ss("Resolver constructed for target "+(0,_s.uriToString)(e));let a=(0,_s.splitHostPort)(e.path);a===null?(this.ipResult=null,this.dnsHostname=null,this.port=null):(0,r2.isIPv4)(a.host)||(0,r2.isIPv6)(a.host)?(this.ipResult=[{host:a.host,port:(i=a.port)!==null&&i!==void 0?i:Cs.DEFAULT_PORT}],this.dnsHostname=null,this.port=null):(this.ipResult=null,this.dnsHostname=a.host,this.port=(s=a.port)!==null&&s!==void 0?s:Cs.DEFAULT_PORT),this.percentage=Math.random()*100,r["grpc.service_config_disable_resolution"]===1&&(this.isServiceConfigEnabled=!1),this.defaultResolutionError={code:wC.Status.UNAVAILABLE,details:`Name resolution failed for target ${(0,_s.uriToString)(this.target)}`,metadata:new TC.Metadata};let c={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoff=new Jee.BackoffTimeout(()=>{this.continueResolving&&this.startResolutionWithBackoff()},c),this.backoff.unref(),this.minTimeBetweenResolutionsMs=(o=r["grpc.dns_min_time_between_resolutions_ms"])!==null&&o!==void 0?o:ete,this.nextResolutionTimer=setTimeout(()=>{},0),clearTimeout(this.nextResolutionTimer)}startResolution(){if(this.ipResult!==null){this.returnedIpResult||(Ss("Returning IP address for target "+(0,_s.uriToString)(this.target)),setImmediate(()=>{this.listener.onSuccessfulResolution(this.ipResult,null,null,null,{})}),this.returnedIpResult=!0),this.backoff.stop(),this.backoff.reset(),this.stopNextResolutionTimer();return}if(this.dnsHostname===null)Ss("Failed to parse DNS address "+(0,_s.uriToString)(this.target)),setImmediate(()=>{this.listener.onError({code:wC.Status.UNAVAILABLE,details:`Failed to parse DNS address ${(0,_s.uriToString)(this.target)}`,metadata:new TC.Metadata})}),this.stopNextResolutionTimer();else{if(this.pendingLookupPromise!==null)return;Ss("Looking up DNS hostname "+this.dnsHostname),this.latestLookupResult=null;let e=this.dnsHostname;this.pendingLookupPromise=nte(e,{all:!0}),this.pendingLookupPromise.then(t=>{if(this.pendingLookupPromise===null)return;this.pendingLookupPromise=null,this.backoff.reset(),this.backoff.stop();let r=t.filter(o=>o.family===4),i=t.filter(o=>o.family===6);this.latestLookupResult=rte(i,r).map(o=>({host:o.address,port:+this.port}));let s="["+this.latestLookupResult.map(o=>o.host+":"+o.port).join(",")+"]";if(Ss("Resolved addresses for target "+(0,_s.uriToString)(this.target)+": "+s),this.latestLookupResult.length===0){this.listener.onError(this.defaultResolutionError);return}this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})},t=>{this.pendingLookupPromise!==null&&(Ss("Resolution error for target "+(0,_s.uriToString)(this.target)+": "+t.message),this.pendingLookupPromise=null,this.stopNextResolutionTimer(),this.listener.onError(this.defaultResolutionError))}),this.isServiceConfigEnabled&&this.pendingTxtPromise===null&&(this.pendingTxtPromise=tte(e),this.pendingTxtPromise.then(t=>{if(this.pendingTxtPromise!==null){this.pendingTxtPromise=null;try{this.latestServiceConfig=(0,Qee.extractAndSelectServiceConfig)(t,this.percentage)}catch(r){this.latestServiceConfigError={code:wC.Status.UNAVAILABLE,details:`Parsing service config failed with error ${r.message}`,metadata:new TC.Metadata}}this.latestLookupResult!==null&&this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})}},t=>{}))}}startNextResolutionTimer(){var e,t;clearTimeout(this.nextResolutionTimer),this.nextResolutionTimer=(t=(e=setTimeout(()=>{this.stopNextResolutionTimer(),this.continueResolving&&this.startResolutionWithBackoff()},this.minTimeBetweenResolutionsMs)).unref)===null||t===void 0?void 0:t.call(e),this.isNextResolutionTimerRunning=!0}stopNextResolutionTimer(){clearTimeout(this.nextResolutionTimer),this.isNextResolutionTimerRunning=!1}startResolutionWithBackoff(){this.pendingLookupPromise===null&&(this.continueResolving=!1,this.backoff.runOnce(),this.startNextResolutionTimer(),this.startResolution())}updateResolution(){this.pendingLookupPromise===null&&(this.isNextResolutionTimerRunning||this.backoff.isRunning()?(this.isNextResolutionTimerRunning?Ss('resolution update delayed by "min time between resolutions" rate limit'):Ss("resolution update delayed by backoff timer until "+this.backoff.getEndTime().toISOString()),this.continueResolving=!0):this.startResolutionWithBackoff())}destroy(){this.continueResolving=!1,this.backoff.reset(),this.backoff.stop(),this.stopNextResolutionTimer(),this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfig=null,this.latestServiceConfigError=null,this.returnedIpResult=!1}static getDefaultAuthority(e){return e.path}};function ite(){(0,n2.registerResolver)("dns",bC),(0,n2.registerDefaultScheme)("dns")}Cs.setup=ite});var SC=A(Ac=>{"use strict";Object.defineProperty(Ac,"__esModule",{value:!0});Ac.getProxiedConnection=Ac.mapProxyName=void 0;var fd=et(),Ic=Ae(),ste=Mr(),ote=Me("http"),ate=Me("tls"),cte=et(),o2=kr(),Dc=Sn(),lte=Me("url"),ute=_C(),dte="proxy";function Is(n){cte.trace(Ic.LogVerbosity.DEBUG,dte,n)}function fte(){let n="",e="";if(process.env.grpc_proxy)e="grpc_proxy",n=process.env.grpc_proxy;else if(process.env.https_proxy)e="https_proxy",n=process.env.https_proxy;else if(process.env.http_proxy)e="http_proxy",n=process.env.http_proxy;else return{};let t;try{t=new lte.URL(n)}catch{return(0,fd.log)(Ic.LogVerbosity.ERROR,`cannot parse value of "${e}" env var`),{}}if(t.protocol!=="http:")return(0,fd.log)(Ic.LogVerbosity.ERROR,`"${t.protocol}" scheme not supported in proxy URI`),{};let r=null;t.username&&(t.password?((0,fd.log)(Ic.LogVerbosity.INFO,"userinfo found in proxy URI"),r=`${t.username}:${t.password}`):r=t.username);let i=t.hostname,s=t.port;s===""&&(s="80");let o={address:`${i}:${s}`};return r&&(o.creds=r),Is("Proxy server "+o.address+" set by environment variable "+e),o}function hte(){let n=process.env.no_grpc_proxy,e="no_grpc_proxy";return n||(n=process.env.no_proxy,e="no_proxy"),n?(Is("No proxy server list set by environment variable "+e),n.split(",")):[]}function pte(n,e){var t;let r={target:n,extraOptions:{}};if(((t=e["grpc.enable_http_proxy"])!==null&&t!==void 0?t:1)===0||n.scheme==="unix")return r;let i=fte();if(!i.address)return r;let s=(0,Dc.splitHostPort)(n.path);if(!s)return r;let o=s.host;for(let c of hte())if(c===o)return Is("Not using proxy for target in no_proxy list: "+(0,Dc.uriToString)(n)),r;let a={"grpc.http_connect_target":(0,Dc.uriToString)(n)};return i.creds&&(a["grpc.http_connect_creds"]=i.creds),{target:{scheme:"dns",path:i.address},extraOptions:a}}Ac.mapProxyName=pte;function gte(n,e,t){var r;if(!("grpc.http_connect_target"in e))return Promise.resolve({});let i=e["grpc.http_connect_target"],s=(0,Dc.parseUri)(i);if(s===null)return Promise.resolve({});let o=(0,Dc.splitHostPort)(s.path);if(o===null)return Promise.resolve({});let a=`${o.host}:${(r=o.port)!==null&&r!==void 0?r:ute.DEFAULT_PORT}`,c={method:"CONNECT",path:a},l={Host:a};(0,o2.isTcpSubchannelAddress)(n)?(c.host=n.host,c.port=n.port):c.socketPath=n.path,"grpc.http_connect_creds"in e&&(l["Proxy-Authorization"]="Basic "+Buffer.from(e["grpc.http_connect_creds"]).toString("base64")),c.headers=l;let u=(0,o2.subchannelAddressToString)(n);return Is("Using proxy "+u+" to connect to "+c.path),new Promise((d,h)=>{let f=ote.request(c);f.once("connect",(v,w,S)=>{var I;if(f.removeAllListeners(),w.removeAllListeners(),v.statusCode===200)if(Is("Successfully connected to "+c.path+" through proxy "+u),"secureContext"in t){let D=(0,ste.getDefaultAuthority)(s),M=(0,Dc.splitHostPort)(D),P=(I=M?.host)!==null&&I!==void 0?I:D,G=ate.connect(Object.assign({host:P,servername:P,socket:w},t),()=>{Is("Successfully established a TLS connection to "+c.path+" through proxy "+u),d({socket:G,realTarget:s})});G.on("error",W=>{Is("Failed to establish a TLS connection to "+c.path+" through proxy "+u+" with error "+W.message),h()})}else Is("Successfully established a plaintext connection to "+c.path+" through proxy "+u),d({socket:w,realTarget:s});else(0,fd.log)(Ic.LogVerbosity.ERROR,"Failed to connect to "+c.path+" through proxy "+u+" with status "+v.statusCode),h()}),f.once("error",v=>{f.removeAllListeners(),(0,fd.log)(Ic.LogVerbosity.ERROR,"Failed to connect to proxy "+u+" with error "+v.message),h()}),f.end()})}Ac.getProxiedConnection=gte});var IC=A(Gg=>{"use strict";Object.defineProperty(Gg,"__esModule",{value:!0});Gg.StreamDecoder=void 0;var bi=function(n){return n[n.NO_DATA=0]="NO_DATA",n[n.READING_SIZE=1]="READING_SIZE",n[n.READING_MESSAGE=2]="READING_MESSAGE",n}(bi||{}),CC=class{constructor(e){this.maxReadMessageLength=e,this.readState=bi.NO_DATA,this.readCompressFlag=Buffer.alloc(1),this.readPartialSize=Buffer.alloc(4),this.readSizeRemaining=4,this.readMessageSize=0,this.readPartialMessage=[],this.readMessageRemaining=0}write(e){let t=0,r,i=[];for(;t<e.length;)switch(this.readState){case bi.NO_DATA:this.readCompressFlag=e.slice(t,t+1),t+=1,this.readState=bi.READING_SIZE,this.readPartialSize.fill(0),this.readSizeRemaining=4,this.readMessageSize=0,this.readMessageRemaining=0,this.readPartialMessage=[];break;case bi.READING_SIZE:if(r=Math.min(e.length-t,this.readSizeRemaining),e.copy(this.readPartialSize,4-this.readSizeRemaining,t,t+r),this.readSizeRemaining-=r,t+=r,this.readSizeRemaining===0){if(this.readMessageSize=this.readPartialSize.readUInt32BE(0),this.maxReadMessageLength!==-1&&this.readMessageSize>this.maxReadMessageLength)throw new Error(`Received message larger than max (${this.readMessageSize} vs ${this.maxReadMessageLength})`);if(this.readMessageRemaining=this.readMessageSize,this.readMessageRemaining>0)this.readState=bi.READING_MESSAGE;else{let s=Buffer.concat([this.readCompressFlag,this.readPartialSize],5);this.readState=bi.NO_DATA,i.push(s)}}break;case bi.READING_MESSAGE:if(r=Math.min(e.length-t,this.readMessageRemaining),this.readPartialMessage.push(e.slice(t,t+r)),this.readMessageRemaining-=r,t+=r,this.readMessageRemaining===0){let s=[this.readCompressFlag,this.readPartialSize].concat(this.readPartialMessage),o=Buffer.concat(s,this.readMessageSize+5);this.readState=bi.NO_DATA,i.push(o)}break;default:throw new Error("Unexpected read state")}return i}};Gg.StreamDecoder=CC});var a2=A(Wg=>{"use strict";Object.defineProperty(Wg,"__esModule",{value:!0});Wg.Http2SubchannelCall=void 0;var _i=Me("http2"),mte=Me("os"),Oe=Ae(),Ds=dn(),yte=IC(),vte=et(),Ete=Ae(),wte="subchannel_call";function Tte(n){for(let[e,t]of Object.entries(mte.constants.errno))if(t===n)return e;return"Unknown system error "+n}var DC=class{constructor(e,t,r,i,s){var o;this.http2Stream=e,this.callEventTracker=t,this.listener=r,this.transport=i,this.callId=s,this.isReadFilterPending=!1,this.isPushPending=!1,this.canPush=!1,this.readsClosed=!1,this.statusOutput=!1,this.unpushedReadMessages=[],this.mappedStatusCode=Oe.Status.UNKNOWN,this.finalStatus=null,this.internalError=null;let a=(o=i.getOptions()["grpc.max_receive_message_length"])!==null&&o!==void 0?o:Oe.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH;this.decoder=new yte.StreamDecoder(a),e.on("response",(c,l)=>{let u="";for(let d of Object.keys(c))u+="		"+d+": "+c[d]+`
`;switch(this.trace(`Received server headers:
`+u),c[":status"]){case 400:this.mappedStatusCode=Oe.Status.INTERNAL;break;case 401:this.mappedStatusCode=Oe.Status.UNAUTHENTICATED;break;case 403:this.mappedStatusCode=Oe.Status.PERMISSION_DENIED;break;case 404:this.mappedStatusCode=Oe.Status.UNIMPLEMENTED;break;case 429:case 502:case 503:case 504:this.mappedStatusCode=Oe.Status.UNAVAILABLE;break;default:this.mappedStatusCode=Oe.Status.UNKNOWN}if(l&_i.constants.NGHTTP2_FLAG_END_STREAM)this.handleTrailers(c);else{let d;try{d=Ds.Metadata.fromHttp2Headers(c)}catch(h){this.endCall({code:Oe.Status.UNKNOWN,details:h.message,metadata:new Ds.Metadata});return}this.listener.onReceiveMetadata(d)}}),e.on("trailers",c=>{this.handleTrailers(c)}),e.on("data",c=>{if(this.statusOutput)return;this.trace("receive HTTP/2 data frame of length "+c.length);let l;try{l=this.decoder.write(c)}catch(u){this.cancelWithStatus(Oe.Status.RESOURCE_EXHAUSTED,u.message);return}for(let u of l)this.trace("parsed message of length "+u.length),this.callEventTracker.addMessageReceived(),this.tryPush(u)}),e.on("end",()=>{this.readsClosed=!0,this.maybeOutputStatus()}),e.on("close",()=>{process.nextTick(()=>{var c;if(this.trace("HTTP/2 stream closed with code "+e.rstCode),((c=this.finalStatus)===null||c===void 0?void 0:c.code)===Oe.Status.OK)return;let l,u="";switch(e.rstCode){case _i.constants.NGHTTP2_NO_ERROR:if(this.finalStatus!==null)return;l=Oe.Status.INTERNAL,u=`Received RST_STREAM with code ${e.rstCode}`;break;case _i.constants.NGHTTP2_REFUSED_STREAM:l=Oe.Status.UNAVAILABLE,u="Stream refused by server";break;case _i.constants.NGHTTP2_CANCEL:l=Oe.Status.CANCELLED,u="Call cancelled";break;case _i.constants.NGHTTP2_ENHANCE_YOUR_CALM:l=Oe.Status.RESOURCE_EXHAUSTED,u="Bandwidth exhausted or memory limit exceeded";break;case _i.constants.NGHTTP2_INADEQUATE_SECURITY:l=Oe.Status.PERMISSION_DENIED,u="Protocol not secure enough";break;case _i.constants.NGHTTP2_INTERNAL_ERROR:l=Oe.Status.INTERNAL,this.internalError===null?u=`Received RST_STREAM with code ${e.rstCode} (Internal server error)`:this.internalError.code==="ECONNRESET"||this.internalError.code==="ETIMEDOUT"?(l=Oe.Status.UNAVAILABLE,u=this.internalError.message):u=`Received RST_STREAM with code ${e.rstCode} triggered by internal client error: ${this.internalError.message}`;break;default:l=Oe.Status.INTERNAL,u=`Received RST_STREAM with code ${e.rstCode}`}this.endCall({code:l,details:u,metadata:new Ds.Metadata,rstCode:e.rstCode})})}),e.on("error",c=>{c.code!=="ERR_HTTP2_STREAM_ERROR"&&(this.trace("Node error event: message="+c.message+" code="+c.code+" errno="+Tte(c.errno)+" syscall="+c.syscall),this.internalError=c),this.callEventTracker.onStreamEnd(!1)})}onDisconnect(){this.endCall({code:Oe.Status.UNAVAILABLE,details:"Connection dropped",metadata:new Ds.Metadata})}outputStatus(){this.statusOutput||(this.statusOutput=!0,this.trace("ended with status: code="+this.finalStatus.code+' details="'+this.finalStatus.details+'"'),this.callEventTracker.onCallEnd(this.finalStatus),process.nextTick(()=>{this.listener.onReceiveStatus(this.finalStatus)}),this.http2Stream.resume())}trace(e){vte.trace(Ete.LogVerbosity.DEBUG,wte,"["+this.callId+"] "+e)}endCall(e){(this.finalStatus===null||this.finalStatus.code===Oe.Status.OK)&&(this.finalStatus=e,this.maybeOutputStatus()),this.destroyHttp2Stream()}maybeOutputStatus(){this.finalStatus!==null&&(this.finalStatus.code!==Oe.Status.OK||this.readsClosed&&this.unpushedReadMessages.length===0&&!this.isReadFilterPending&&!this.isPushPending)&&this.outputStatus()}push(e){this.trace("pushing to reader message of length "+(e instanceof Buffer?e.length:null)),this.canPush=!1,this.isPushPending=!0,process.nextTick(()=>{this.isPushPending=!1,!this.statusOutput&&(this.listener.onReceiveMessage(e),this.maybeOutputStatus())})}tryPush(e){this.canPush?(this.http2Stream.pause(),this.push(e)):(this.trace("unpushedReadMessages.push message of length "+e.length),this.unpushedReadMessages.push(e))}handleTrailers(e){this.callEventTracker.onStreamEnd(!0);let t="";for(let c of Object.keys(e))t+="		"+c+": "+e[c]+`
`;this.trace(`Received server trailers:
`+t);let r;try{r=Ds.Metadata.fromHttp2Headers(e)}catch{r=new Ds.Metadata}let i=r.getMap(),s=this.mappedStatusCode;if(s===Oe.Status.UNKNOWN&&typeof i["grpc-status"]=="string"){let c=Number(i["grpc-status"]);c in Oe.Status&&(s=c,this.trace("received status code "+c+" from server")),r.remove("grpc-status")}let o="";if(typeof i["grpc-message"]=="string"){try{o=decodeURI(i["grpc-message"])}catch{o=i["grpc-message"]}r.remove("grpc-message"),this.trace('received status details string "'+o+'" from server')}let a={code:s,details:o,metadata:r};this.endCall(a)}destroyHttp2Stream(){var e;if(!this.http2Stream.destroyed){let t;((e=this.finalStatus)===null||e===void 0?void 0:e.code)===Oe.Status.OK?t=_i.constants.NGHTTP2_NO_ERROR:t=_i.constants.NGHTTP2_CANCEL,this.trace("close http2 stream with code "+t),this.http2Stream.close(t)}}cancelWithStatus(e,t){this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),this.endCall({code:e,details:t,metadata:new Ds.Metadata})}getStatus(){return this.finalStatus}getPeer(){return this.transport.getPeerName()}getCallNumber(){return this.callId}startRead(){if(this.finalStatus!==null&&this.finalStatus.code!==Oe.Status.OK){this.readsClosed=!0,this.maybeOutputStatus();return}if(this.canPush=!0,this.unpushedReadMessages.length>0){let e=this.unpushedReadMessages.shift();this.push(e);return}this.http2Stream.resume()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length);let r=i=>{process.nextTick(()=>{var s;let o=Oe.Status.UNAVAILABLE;i?.code==="ERR_STREAM_WRITE_AFTER_END"&&(o=Oe.Status.INTERNAL),i&&this.cancelWithStatus(o,`Write error: ${i.message}`),(s=e.callback)===null||s===void 0||s.call(e)})};this.trace("sending data chunk of length "+t.length),this.callEventTracker.addMessageSent();try{this.http2Stream.write(t,r)}catch(i){this.endCall({code:Oe.Status.UNAVAILABLE,details:`Write failed with error ${i.message}`,metadata:new Ds.Metadata})}}halfClose(){this.trace("end() called"),this.trace("calling end() on HTTP/2 stream"),this.http2Stream.end()}};Wg.Http2SubchannelCall=DC});var AC=A(Kg=>{"use strict";Object.defineProperty(Kg,"__esModule",{value:!0});Kg.getNextCallNumber=void 0;var bte=0;function _te(){return bte++}Kg.getNextCallNumber=_te});var u2=A(Yg=>{"use strict";Object.defineProperty(Yg,"__esModule",{value:!0});Yg.Http2SubchannelConnector=void 0;var kC=Me("http2"),c2=Me("tls"),RC=Co(),hd=Ae(),Ste=SC(),Nc=et(),l2=Mr(),Qg=kr(),Rc=Sn(),Cte=Me("net"),Ite=a2(),Dte=AC(),NC="transport",Ate="transport_flowctrl",Rte=m_().version,{HTTP2_HEADER_AUTHORITY:Nte,HTTP2_HEADER_CONTENT_TYPE:Mte,HTTP2_HEADER_METHOD:Ote,HTTP2_HEADER_PATH:kte,HTTP2_HEADER_TE:xte,HTTP2_HEADER_USER_AGENT:Pte}=kC.constants,Lte=2e4,Fte=Buffer.from("too_many_pings","ascii"),MC=class{constructor(e,t,r,i){this.session=e,this.options=r,this.remoteName=i,this.keepaliveTimeMs=-1,this.keepaliveTimeoutMs=Lte,this.keepaliveTimerId=null,this.pendingSendKeepalivePing=!1,this.keepaliveTimeoutId=null,this.keepaliveWithoutCalls=!1,this.activeCalls=new Set,this.disconnectListeners=[],this.disconnectHandled=!1,this.channelzEnabled=!0,this.streamTracker=new RC.ChannelzCallTracker,this.keepalivesSent=0,this.messagesSent=0,this.messagesReceived=0,this.lastMessageSentTimestamp=null,this.lastMessageReceivedTimestamp=null,this.subchannelAddressString=(0,Qg.subchannelAddressToString)(t),r["grpc.enable_channelz"]===0&&(this.channelzEnabled=!1),this.channelzRef=(0,RC.registerChannelzSocket)(this.subchannelAddressString,()=>this.getChannelzInfo(),this.channelzEnabled),this.userAgent=[r["grpc.primary_user_agent"],`grpc-node-js/${Rte}`,r["grpc.secondary_user_agent"]].filter(s=>s).join(" "),"grpc.keepalive_time_ms"in r&&(this.keepaliveTimeMs=r["grpc.keepalive_time_ms"]),"grpc.keepalive_timeout_ms"in r&&(this.keepaliveTimeoutMs=r["grpc.keepalive_timeout_ms"]),"grpc.keepalive_permit_without_calls"in r?this.keepaliveWithoutCalls=r["grpc.keepalive_permit_without_calls"]===1:this.keepaliveWithoutCalls=!1,e.once("close",()=>{this.trace("session closed"),this.stopKeepalivePings(),this.handleDisconnect()}),e.once("goaway",(s,o,a)=>{let c=!1;s===kC.constants.NGHTTP2_ENHANCE_YOUR_CALM&&a&&a.equals(Fte)&&(c=!0),this.trace("connection closed by GOAWAY with code "+s+" and data "+a?.toString()),this.reportDisconnectToOwner(c)}),e.once("error",s=>{this.trace("connection closed with error "+s.message)}),Nc.isTracerEnabled(NC)&&(e.on("remoteSettings",s=>{this.trace("new settings received"+(this.session!==e?" on the old connection":"")+": "+JSON.stringify(s))}),e.on("localSettings",s=>{this.trace("local settings acknowledged by remote"+(this.session!==e?" on the old connection":"")+": "+JSON.stringify(s))})),this.keepaliveWithoutCalls&&this.maybeStartKeepalivePingTimer()}getChannelzInfo(){var e,t,r;let i=this.session.socket,s=i.remoteAddress?(0,Qg.stringToSubchannelAddress)(i.remoteAddress,i.remotePort):null,o=i.localAddress?(0,Qg.stringToSubchannelAddress)(i.localAddress,i.localPort):null,a;if(this.session.encrypted){let l=i,u=l.getCipher(),d=l.getCertificate(),h=l.getPeerCertificate();a={cipherSuiteStandardName:(e=u.standardName)!==null&&e!==void 0?e:null,cipherSuiteOtherName:u.standardName?null:u.name,localCertificate:d&&"raw"in d?d.raw:null,remoteCertificate:h&&"raw"in h?h.raw:null}}else a=null;return{remoteAddress:s,localAddress:o,security:a,remoteName:this.remoteName,streamsStarted:this.streamTracker.callsStarted,streamsSucceeded:this.streamTracker.callsSucceeded,streamsFailed:this.streamTracker.callsFailed,messagesSent:this.messagesSent,messagesReceived:this.messagesReceived,keepAlivesSent:this.keepalivesSent,lastLocalStreamCreatedTimestamp:this.streamTracker.lastCallStartedTimestamp,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:this.lastMessageSentTimestamp,lastMessageReceivedTimestamp:this.lastMessageReceivedTimestamp,localFlowControlWindow:(t=this.session.state.localWindowSize)!==null&&t!==void 0?t:null,remoteFlowControlWindow:(r=this.session.state.remoteWindowSize)!==null&&r!==void 0?r:null}}trace(e){Nc.trace(hd.LogVerbosity.DEBUG,NC,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}keepaliveTrace(e){Nc.trace(hd.LogVerbosity.DEBUG,"keepalive","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}flowControlTrace(e){Nc.trace(hd.LogVerbosity.DEBUG,Ate,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}internalsTrace(e){Nc.trace(hd.LogVerbosity.DEBUG,"transport_internals","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}reportDisconnectToOwner(e){this.disconnectHandled||(this.disconnectHandled=!0,this.disconnectListeners.forEach(t=>t(e)))}handleDisconnect(){this.reportDisconnectToOwner(!1),setImmediate(()=>{for(let e of this.activeCalls)e.onDisconnect()})}addDisconnectListener(e){this.disconnectListeners.push(e)}clearKeepaliveTimer(){this.keepaliveTimerId&&(clearTimeout(this.keepaliveTimerId),this.keepaliveTimerId=null)}clearKeepaliveTimeout(){this.keepaliveTimeoutId&&(clearTimeout(this.keepaliveTimeoutId),this.keepaliveTimeoutId=null)}canSendPing(){return this.keepaliveTimeMs>0&&(this.keepaliveWithoutCalls||this.activeCalls.size>0)}maybeSendPing(){var e,t;if(this.clearKeepaliveTimer(),!this.canSendPing()){this.pendingSendKeepalivePing=!0;return}this.channelzEnabled&&(this.keepalivesSent+=1),this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms"),this.keepaliveTimeoutId||(this.keepaliveTimeoutId=setTimeout(()=>{this.keepaliveTrace("Ping timeout passed without response"),this.handleDisconnect()},this.keepaliveTimeoutMs),(t=(e=this.keepaliveTimeoutId).unref)===null||t===void 0||t.call(e));try{this.session.ping((r,i,s)=>{r&&(this.keepaliveTrace("Ping failed with error "+r.message),this.handleDisconnect()),this.keepaliveTrace("Received ping response"),this.clearKeepaliveTimeout(),this.maybeStartKeepalivePingTimer()})}catch{this.handleDisconnect()}}maybeStartKeepalivePingTimer(){var e,t;this.canSendPing()&&(this.pendingSendKeepalivePing?(this.pendingSendKeepalivePing=!1,this.maybeSendPing()):!this.keepaliveTimerId&&!this.keepaliveTimeoutId&&(this.keepaliveTrace("Starting keepalive timer for "+this.keepaliveTimeMs+"ms"),this.keepaliveTimerId=(t=(e=setTimeout(()=>{this.maybeSendPing()},this.keepaliveTimeMs)).unref)===null||t===void 0?void 0:t.call(e)))}stopKeepalivePings(){this.keepaliveTimerId&&(clearTimeout(this.keepaliveTimerId),this.keepaliveTimerId=null),this.clearKeepaliveTimeout()}removeActiveCall(e){this.activeCalls.delete(e),this.activeCalls.size===0&&this.session.unref()}addActiveCall(e){this.activeCalls.add(e),this.activeCalls.size===1&&(this.session.ref(),this.keepaliveWithoutCalls||this.maybeStartKeepalivePingTimer())}createCall(e,t,r,i,s){let o=e.toHttp2Headers();o[Nte]=t,o[Pte]=this.userAgent,o[Mte]="application/grpc",o[Ote]="POST",o[kte]=r,o[xte]="trailers";let a;try{a=this.session.request(o)}catch(u){throw this.handleDisconnect(),u}this.flowControlTrace("local window size: "+this.session.state.localWindowSize+" remote window size: "+this.session.state.remoteWindowSize),this.internalsTrace("session.closed="+this.session.closed+" session.destroyed="+this.session.destroyed+" session.socket.destroyed="+this.session.socket.destroyed);let c,l;return this.channelzEnabled?(this.streamTracker.addCallStarted(),c={addMessageSent:()=>{var u;this.messagesSent+=1,this.lastMessageSentTimestamp=new Date,(u=s.addMessageSent)===null||u===void 0||u.call(s)},addMessageReceived:()=>{var u;this.messagesReceived+=1,this.lastMessageReceivedTimestamp=new Date,(u=s.addMessageReceived)===null||u===void 0||u.call(s)},onCallEnd:u=>{var d;(d=s.onCallEnd)===null||d===void 0||d.call(s,u),this.removeActiveCall(l)},onStreamEnd:u=>{var d;u?this.streamTracker.addCallSucceeded():this.streamTracker.addCallFailed(),(d=s.onStreamEnd)===null||d===void 0||d.call(s,u)}}):c={addMessageSent:()=>{var u;(u=s.addMessageSent)===null||u===void 0||u.call(s)},addMessageReceived:()=>{var u;(u=s.addMessageReceived)===null||u===void 0||u.call(s)},onCallEnd:u=>{var d;(d=s.onCallEnd)===null||d===void 0||d.call(s,u),this.removeActiveCall(l)},onStreamEnd:u=>{var d;(d=s.onStreamEnd)===null||d===void 0||d.call(s,u)}},l=new Ite.Http2SubchannelCall(a,c,i,this,(0,Dte.getNextCallNumber)()),this.addActiveCall(l),l}getChannelzRef(){return this.channelzRef}getPeerName(){return this.subchannelAddressString}getOptions(){return this.options}shutdown(){this.session.close(),(0,RC.unregisterChannelzRef)(this.channelzRef)}},OC=class{constructor(e){this.channelTarget=e,this.session=null,this.isShutdown=!1}trace(e){Nc.trace(hd.LogVerbosity.DEBUG,NC,(0,Rc.uriToString)(this.channelTarget)+" "+e)}createSession(e,t,r,i){return this.isShutdown?Promise.reject():new Promise((s,o)=>{var a,c,l;let u;i.realTarget?(u=(0,Rc.uriToString)(i.realTarget),this.trace("creating HTTP/2 session through proxy to "+(0,Rc.uriToString)(i.realTarget))):(u=null,this.trace("creating HTTP/2 session to "+(0,Qg.subchannelAddressToString)(e)));let d=(0,l2.getDefaultAuthority)((a=i.realTarget)!==null&&a!==void 0?a:this.channelTarget),h=t._getConnectionOptions()||{};h.maxSendHeaderBlockLength=Number.MAX_SAFE_INTEGER,"grpc-node.max_session_memory"in r?h.maxSessionMemory=r["grpc-node.max_session_memory"]:h.maxSessionMemory=Number.MAX_SAFE_INTEGER;let f="http://";if("secureContext"in h){if(f="https://",r["grpc.ssl_target_name_override"]){let S=r["grpc.ssl_target_name_override"];h.checkServerIdentity=(I,D)=>(0,c2.checkServerIdentity)(S,D),h.servername=S}else{let S=(l=(c=(0,Rc.splitHostPort)(d))===null||c===void 0?void 0:c.host)!==null&&l!==void 0?l:"localhost";h.servername=S}i.socket&&(h.createConnection=(S,I)=>i.socket)}else h.createConnection=(S,I)=>i.socket?i.socket:Cte.connect(e);h=Object.assign(Object.assign(Object.assign({},h),e),{enableTrace:r["grpc-node.tls_enable_trace"]===1});let v=kC.connect(f+d,h);this.session=v;let w="Failed to connect";v.unref(),v.once("connect",()=>{v.removeAllListeners(),s(new MC(v,e,r,u)),this.session=null}),v.once("close",()=>{this.session=null,setImmediate(()=>{o(`${w} (${new Date().toISOString()})`)})}),v.once("error",S=>{w=S.message,this.trace("connection failed with error "+w)})})}connect(e,t,r){var i,s;if(this.isShutdown)return Promise.reject();let o=t._getConnectionOptions()||{};if("secureContext"in o){if(o.ALPNProtocols=["h2"],r["grpc.ssl_target_name_override"]){let a=r["grpc.ssl_target_name_override"];o.checkServerIdentity=(c,l)=>(0,c2.checkServerIdentity)(a,l),o.servername=a}else if("grpc.http_connect_target"in r){let a=(0,l2.getDefaultAuthority)((i=(0,Rc.parseUri)(r["grpc.http_connect_target"]))!==null&&i!==void 0?i:{path:"localhost"}),c=(0,Rc.splitHostPort)(a);o.servername=(s=c?.host)!==null&&s!==void 0?s:a}r["grpc-node.tls_enable_trace"]&&(o.enableTrace=!0)}return(0,Ste.getProxiedConnection)(e,r,o).then(a=>this.createSession(e,t,r,a))}shutdown(){var e;this.isShutdown=!0,(e=this.session)===null||e===void 0||e.close(),this.session=null}};Yg.Http2SubchannelConnector=OC});var d2=A(Mc=>{"use strict";Object.defineProperty(Mc,"__esModule",{value:!0});Mc.getSubchannelPool=Mc.SubchannelPool=void 0;var Bte=Y1(),Ute=t2(),Vte=kr(),jte=Sn(),qte=u2(),$te=1e4,pd=class{constructor(){this.pool=Object.create(null),this.cleanupTimer=null}unrefUnusedSubchannels(){let e=!0;for(let t in this.pool){let i=this.pool[t].filter(s=>!s.subchannel.unrefIfOneRef());i.length>0&&(e=!1),this.pool[t]=i}e&&this.cleanupTimer!==null&&(clearInterval(this.cleanupTimer),this.cleanupTimer=null)}ensureCleanupTask(){var e,t;this.cleanupTimer===null&&(this.cleanupTimer=setInterval(()=>{this.unrefUnusedSubchannels()},$te),(t=(e=this.cleanupTimer).unref)===null||t===void 0||t.call(e))}getOrCreateSubchannel(e,t,r,i){this.ensureCleanupTask();let s=(0,jte.uriToString)(e);if(s in this.pool){let a=this.pool[s];for(let c of a)if((0,Vte.subchannelAddressEqual)(t,c.subchannelAddress)&&(0,Bte.channelOptionsEqual)(r,c.channelArguments)&&i._equals(c.channelCredentials))return c.subchannel}let o=new Ute.Subchannel(e,t,r,i,new qte.Http2SubchannelConnector(e));return s in this.pool||(this.pool[s]=[]),this.pool[s].push({subchannelAddress:t,channelArguments:r,channelCredentials:i,subchannel:o}),o.ref(),o}};Mc.SubchannelPool=pd;var zte=new pd;function Hte(n){return n?zte:new pd}Mc.getSubchannelPool=Hte});var PC=A(Oc=>{"use strict";Object.defineProperty(Oc,"__esModule",{value:!0});Oc.FilterStackFactory=Oc.FilterStack=void 0;var Zg=class{constructor(e){this.filters=e}sendMetadata(e){let t=e;for(let r=0;r<this.filters.length;r++)t=this.filters[r].sendMetadata(t);return t}receiveMetadata(e){let t=e;for(let r=this.filters.length-1;r>=0;r--)t=this.filters[r].receiveMetadata(t);return t}sendMessage(e){let t=e;for(let r=0;r<this.filters.length;r++)t=this.filters[r].sendMessage(t);return t}receiveMessage(e){let t=e;for(let r=this.filters.length-1;r>=0;r--)t=this.filters[r].receiveMessage(t);return t}receiveTrailers(e){let t=e;for(let r=this.filters.length-1;r>=0;r--)t=this.filters[r].receiveTrailers(t);return t}push(e){this.filters.unshift(...e)}getFilters(){return this.filters}};Oc.FilterStack=Zg;var xC=class n{constructor(e){this.factories=e}push(e){this.factories.unshift(...e)}clone(){return new n([...this.factories])}createFilter(){return new Zg(this.factories.map(e=>e.createFilter()))}};Oc.FilterStackFactory=xC});var LC=A(Jg=>{"use strict";Object.defineProperty(Jg,"__esModule",{value:!0});Jg.CompressionAlgorithms=void 0;var f2=function(n){return n[n.identity=0]="identity",n[n.deflate=1]="deflate",n[n.gzip=2]="gzip",n}(f2||(Jg.CompressionAlgorithms=f2={}))});var BC=A(Xg=>{"use strict";Object.defineProperty(Xg,"__esModule",{value:!0});Xg.BaseFilter=void 0;var FC=class{sendMetadata(e){return T(this,null,function*(){return e})}receiveMetadata(e){return e}sendMessage(e){return T(this,null,function*(){return e})}receiveMessage(e){return T(this,null,function*(){return e})}receiveTrailers(e){return e}};Xg.BaseFilter=FC});var g2=A(xc=>{"use strict";Object.defineProperty(xc,"__esModule",{value:!0});xc.CompressionFilterFactory=xc.CompressionFilter=void 0;var em=Me("zlib"),p2=LC(),tm=Ae(),Gte=BC(),Wte=et(),Kte=n=>typeof n=="number"&&typeof p2.CompressionAlgorithms[n]=="string",kc=class{writeMessage(e,t){return T(this,null,function*(){let r=e;t&&(r=yield this.compressMessage(r));let i=Buffer.allocUnsafe(r.length+5);return i.writeUInt8(t?1:0,0),i.writeUInt32BE(r.length,1),r.copy(i,5),i})}readMessage(e){return T(this,null,function*(){let t=e.readUInt8(0)===1,r=e.slice(5);return t&&(r=yield this.decompressMessage(r)),r})}},Io=class extends kc{compressMessage(e){return T(this,null,function*(){return e})}writeMessage(e,t){return T(this,null,function*(){let r=Buffer.allocUnsafe(e.length+5);return r.writeUInt8(0,0),r.writeUInt32BE(e.length,1),e.copy(r,5),r})}decompressMessage(e){return Promise.reject(new Error('Received compressed message but "grpc-encoding" header was identity'))}},UC=class extends kc{constructor(e){super(),this.maxRecvMessageLength=e}compressMessage(e){return new Promise((t,r)=>{em.deflate(e,(i,s)=>{i?r(i):t(s)})})}decompressMessage(e){return new Promise((t,r)=>{let i=0,s=[],o=em.createInflate();o.on("data",a=>{s.push(a),i+=a.byteLength,this.maxRecvMessageLength!==-1&&i>this.maxRecvMessageLength&&(o.destroy(),r({code:tm.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxRecvMessageLength}`}))}),o.on("end",()=>{t(Buffer.concat(s))}),o.write(e),o.end()})}},VC=class extends kc{constructor(e){super(),this.maxRecvMessageLength=e}compressMessage(e){return new Promise((t,r)=>{em.gzip(e,(i,s)=>{i?r(i):t(s)})})}decompressMessage(e){return new Promise((t,r)=>{let i=0,s=[],o=em.createGunzip();o.on("data",a=>{s.push(a),i+=a.byteLength,this.maxRecvMessageLength!==-1&&i>this.maxRecvMessageLength&&(o.destroy(),r({code:tm.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxRecvMessageLength}`}))}),o.on("end",()=>{t(Buffer.concat(s))}),o.write(e),o.end()})}},jC=class extends kc{constructor(e){super(),this.compressionName=e}compressMessage(e){return Promise.reject(new Error(`Received message compressed with unsupported compression method ${this.compressionName}`))}decompressMessage(e){return Promise.reject(new Error(`Compression method not supported: ${this.compressionName}`))}};function h2(n,e){switch(n){case"identity":return new Io;case"deflate":return new UC(e);case"gzip":return new VC(e);default:return new jC(n)}}var nm=class extends Gte.BaseFilter{constructor(e,t){var r,i;super(),this.sharedFilterConfig=t,this.sendCompression=new Io,this.receiveCompression=new Io,this.currentCompressionAlgorithm="identity";let s=e["grpc.default_compression_algorithm"];if(this.maxReceiveMessageLength=(r=e["grpc.max_receive_message_length"])!==null&&r!==void 0?r:tm.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,s!==void 0)if(Kte(s)){let o=p2.CompressionAlgorithms[s],a=(i=t.serverSupportedEncodingHeader)===null||i===void 0?void 0:i.split(",");(!a||a.includes(o))&&(this.currentCompressionAlgorithm=o,this.sendCompression=h2(this.currentCompressionAlgorithm,-1))}else Wte.log(tm.LogVerbosity.ERROR,`Invalid value provided for grpc.default_compression_algorithm option: ${s}`)}sendMetadata(e){return T(this,null,function*(){let t=yield e;return t.set("grpc-accept-encoding","identity,deflate,gzip"),t.set("accept-encoding","identity"),this.currentCompressionAlgorithm==="identity"?t.remove("grpc-encoding"):t.set("grpc-encoding",this.currentCompressionAlgorithm),t})}receiveMetadata(e){let t=e.get("grpc-encoding");if(t.length>0){let i=t[0];typeof i=="string"&&(this.receiveCompression=h2(i,this.maxReceiveMessageLength))}e.remove("grpc-encoding");let r=e.get("grpc-accept-encoding")[0];return r&&(this.sharedFilterConfig.serverSupportedEncodingHeader=r,r.split(",").includes(this.currentCompressionAlgorithm)||(this.sendCompression=new Io,this.currentCompressionAlgorithm="identity")),e.remove("grpc-accept-encoding"),e}sendMessage(e){return T(this,null,function*(){var t;let r=yield e,i;return this.sendCompression instanceof Io?i=!1:i=(((t=r.flags)!==null&&t!==void 0?t:0)&2)===0,{message:yield this.sendCompression.writeMessage(r.message,i),flags:r.flags}})}receiveMessage(e){return T(this,null,function*(){return this.receiveCompression.readMessage(yield e)})}};xc.CompressionFilter=nm;var qC=class{constructor(e,t){this.options=t,this.sharedFilterConfig={}}createFilter(){return new nm(this.options,this.sharedFilterConfig)}};xc.CompressionFilterFactory=qC});var rm=A($r=>{"use strict";Object.defineProperty($r,"__esModule",{value:!0});$r.deadlineToString=$r.getRelativeTimeout=$r.getDeadlineTimeoutString=$r.minDeadline=void 0;function Qte(...n){let e=1/0;for(let t of n){let r=t instanceof Date?t.getTime():t;r<e&&(e=r)}return e}$r.minDeadline=Qte;var Yte=[["m",1],["S",1e3],["M",60*1e3],["H",60*60*1e3]];function Zte(n){let e=new Date().getTime();n instanceof Date&&(n=n.getTime());let t=Math.max(n-e,0);for(let[r,i]of Yte){let s=t/i;if(s<1e8)return String(Math.ceil(s))+r}throw new Error("Deadline is too far in the future")}$r.getDeadlineTimeoutString=Zte;var Jte=2147483647;function Xte(n){let e=n instanceof Date?n.getTime():n,t=new Date().getTime(),r=e-t;return r<0?0:r>Jte?1/0:r}$r.getRelativeTimeout=Xte;function ene(n){if(n instanceof Date)return n.toISOString();{let e=new Date(n);return Number.isNaN(e.getTime())?""+n:e.toISOString()}}$r.deadlineToString=ene});var sm=A(im=>{"use strict";Object.defineProperty(im,"__esModule",{value:!0});im.restrictControlPlaneStatusCode=void 0;var zr=Ae(),tne=[zr.Status.OK,zr.Status.INVALID_ARGUMENT,zr.Status.NOT_FOUND,zr.Status.ALREADY_EXISTS,zr.Status.FAILED_PRECONDITION,zr.Status.ABORTED,zr.Status.OUT_OF_RANGE,zr.Status.DATA_LOSS];function nne(n,e){return tne.includes(n)?{code:zr.Status.INTERNAL,details:`Invalid status from control plane: ${n} ${zr.Status[n]} ${e}`}:{code:n,details:e}}im.restrictControlPlaneStatusCode=nne});var y2=A(cm=>{"use strict";Object.defineProperty(cm,"__esModule",{value:!0});cm.LoadBalancingCall=void 0;var m2=kn(),om=Ae(),rne=rm(),am=dn(),gd=ds(),ine=Sn(),sne=et(),$C=sm(),one=Me("http2"),ane="load_balancing_call",zC=class{constructor(e,t,r,i,s,o,a){var c,l;this.channel=e,this.callConfig=t,this.methodName=r,this.host=i,this.credentials=s,this.deadline=o,this.callNumber=a,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.ended=!1,this.metadata=null,this.listener=null,this.onCallEnded=null;let u=this.methodName.split("/"),d="";u.length>=2&&(d=u[1]);let h=(l=(c=(0,ine.splitHostPort)(this.host))===null||c===void 0?void 0:c.host)!==null&&l!==void 0?l:"localhost";this.serviceUrl=`https://${h}/${d}`}trace(e){sne.trace(om.LogVerbosity.DEBUG,ane,"["+this.callNumber+"] "+e)}outputStatus(e,t){var r,i;if(!this.ended){this.ended=!0,this.trace("ended with status: code="+e.code+' details="'+e.details+'"');let s=Object.assign(Object.assign({},e),{progress:t});(r=this.listener)===null||r===void 0||r.onReceiveStatus(s),(i=this.onCallEnded)===null||i===void 0||i.call(this,s.code)}}doPick(){var e,t;if(this.ended)return;if(!this.metadata)throw new Error("doPick called before start");this.trace("Pick called");let r=this.channel.doPick(this.metadata,this.callConfig.pickInformation),i=r.subchannel?"("+r.subchannel.getChannelzRef().id+") "+r.subchannel.getAddress():""+r.subchannel;switch(this.trace("Pick result: "+gd.PickResultType[r.pickResultType]+" subchannel: "+i+" status: "+((e=r.status)===null||e===void 0?void 0:e.code)+" "+((t=r.status)===null||t===void 0?void 0:t.details)),r.pickResultType){case gd.PickResultType.COMPLETE:this.credentials.generateMetadata({service_url:this.serviceUrl}).then(a=>{var c,l,u;if(this.ended){this.trace("Credentials metadata generation finished after call ended");return}let d=this.metadata.clone();if(d.merge(a),d.get("authorization").length>1&&this.outputStatus({code:om.Status.INTERNAL,details:'"authorization" metadata cannot have multiple values',metadata:new am.Metadata},"PROCESSED"),r.subchannel.getConnectivityState()!==m2.ConnectivityState.READY){this.trace("Picked subchannel "+i+" has state "+m2.ConnectivityState[r.subchannel.getConnectivityState()]+" after getting credentials metadata. Retrying pick"),this.doPick();return}this.deadline!==1/0&&d.set("grpc-timeout",(0,rne.getDeadlineTimeoutString)(this.deadline));try{this.child=r.subchannel.getRealSubchannel().createCall(d,this.host,this.methodName,{onReceiveMetadata:h=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(h)},onReceiveMessage:h=>{this.trace("Received message"),this.listener.onReceiveMessage(h)},onReceiveStatus:h=>{this.trace("Received status"),h.rstCode===one.constants.NGHTTP2_REFUSED_STREAM?this.outputStatus(h,"REFUSED"):this.outputStatus(h,"PROCESSED")}})}catch(h){this.trace("Failed to start call on picked subchannel "+i+" with error "+h.message),this.outputStatus({code:om.Status.INTERNAL,details:"Failed to start HTTP/2 stream with error "+h.message,metadata:new am.Metadata},"NOT_STARTED");return}(l=(c=this.callConfig).onCommitted)===null||l===void 0||l.call(c),(u=r.onCallStarted)===null||u===void 0||u.call(r),this.onCallEnded=r.onCallEnded,this.trace("Created child call ["+this.child.getCallNumber()+"]"),this.readPending&&this.child.startRead(),this.pendingMessage&&this.child.sendMessageWithContext(this.pendingMessage.context,this.pendingMessage.message),this.pendingHalfClose&&this.child.halfClose()},a=>{let{code:c,details:l}=(0,$C.restrictControlPlaneStatusCode)(typeof a.code=="number"?a.code:om.Status.UNKNOWN,`Getting metadata from plugin failed with error: ${a.message}`);this.outputStatus({code:c,details:l,metadata:new am.Metadata},"PROCESSED")});break;case gd.PickResultType.DROP:let{code:s,details:o}=(0,$C.restrictControlPlaneStatusCode)(r.status.code,r.status.details);setImmediate(()=>{this.outputStatus({code:s,details:o,metadata:r.status.metadata},"DROP")});break;case gd.PickResultType.TRANSIENT_FAILURE:if(this.metadata.getOptions().waitForReady)this.channel.queueCallForPick(this);else{let{code:a,details:c}=(0,$C.restrictControlPlaneStatusCode)(r.status.code,r.status.details);setImmediate(()=>{this.outputStatus({code:a,details:c,metadata:r.status.metadata},"PROCESSED")})}break;case gd.PickResultType.QUEUE:this.channel.queueCallForPick(this)}}cancelWithStatus(e,t){var r;this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),(r=this.child)===null||r===void 0||r.cancelWithStatus(e,t),this.outputStatus({code:e,details:t,metadata:new am.Metadata},"PROCESSED")}getPeer(){var e,t;return(t=(e=this.child)===null||e===void 0?void 0:e.getPeer())!==null&&t!==void 0?t:this.channel.getTarget()}start(e,t){this.trace("start called"),this.listener=t,this.metadata=e,this.doPick()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length),this.child?this.child.sendMessageWithContext(e,t):this.pendingMessage={context:e,message:t}}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=!0}halfClose(){this.trace("halfClose called"),this.child?this.child.halfClose():this.pendingHalfClose=!0}setCredentials(e){throw new Error("Method not implemented.")}getCallNumber(){return this.callNumber}};cm.LoadBalancingCall=zC});var E2=A(um=>{"use strict";Object.defineProperty(um,"__esModule",{value:!0});um.ResolvingCall=void 0;var Pc=Ae(),lm=rm(),v2=dn(),cne=et(),lne=sm(),une="resolving_call",HC=class{constructor(e,t,r,i,s,o){this.channel=e,this.method=t,this.filterStackFactory=i,this.credentials=s,this.callNumber=o,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.ended=!1,this.readFilterPending=!1,this.writeFilterPending=!1,this.pendingChildStatus=null,this.metadata=null,this.listener=null,this.statusWatchers=[],this.deadlineTimer=setTimeout(()=>{},0),this.filterStack=null,this.deadline=r.deadline,this.host=r.host,r.parentCall&&(r.flags&Pc.Propagate.CANCELLATION&&r.parentCall.on("cancelled",()=>{this.cancelWithStatus(Pc.Status.CANCELLED,"Cancelled by parent call")}),r.flags&Pc.Propagate.DEADLINE&&(this.trace("Propagating deadline from parent: "+r.parentCall.getDeadline()),this.deadline=(0,lm.minDeadline)(this.deadline,r.parentCall.getDeadline()))),this.trace("Created"),this.runDeadlineTimer()}trace(e){cne.trace(Pc.LogVerbosity.DEBUG,une,"["+this.callNumber+"] "+e)}runDeadlineTimer(){clearTimeout(this.deadlineTimer),this.trace("Deadline: "+(0,lm.deadlineToString)(this.deadline));let e=(0,lm.getRelativeTimeout)(this.deadline);if(e!==1/0){this.trace("Deadline will be reached in "+e+"ms");let t=()=>{this.cancelWithStatus(Pc.Status.DEADLINE_EXCEEDED,"Deadline exceeded")};e<=0?process.nextTick(t):this.deadlineTimer=setTimeout(t,e)}}outputStatus(e){if(!this.ended){this.ended=!0,this.filterStack||(this.filterStack=this.filterStackFactory.createFilter()),clearTimeout(this.deadlineTimer);let t=this.filterStack.receiveTrailers(e);this.trace("ended with status: code="+t.code+' details="'+t.details+'"'),this.statusWatchers.forEach(r=>r(t)),process.nextTick(()=>{var r;(r=this.listener)===null||r===void 0||r.onReceiveStatus(t)})}}sendMessageOnChild(e,t){if(!this.child)throw new Error("sendMessageonChild called with child not populated");let r=this.child;this.writeFilterPending=!0,this.filterStack.sendMessage(Promise.resolve({message:t,flags:e.flags})).then(i=>{this.writeFilterPending=!1,r.sendMessageWithContext(e,i.message),this.pendingHalfClose&&r.halfClose()},i=>{this.cancelWithStatus(i.code,i.details)})}getConfig(){if(this.ended)return;if(!this.metadata||!this.listener)throw new Error("getConfig called before start");let e=this.channel.getConfig(this.method,this.metadata);if(e.type==="NONE"){this.channel.queueCallForConfig(this);return}else if(e.type==="ERROR"){this.metadata.getOptions().waitForReady?this.channel.queueCallForConfig(this):this.outputStatus(e.error);return}let t=e.config;if(t.status!==Pc.Status.OK){let{code:r,details:i}=(0,lne.restrictControlPlaneStatusCode)(t.status,"Failed to route call to method "+this.method);this.outputStatus({code:r,details:i,metadata:new v2.Metadata});return}if(t.methodConfig.timeout){let r=new Date;r.setSeconds(r.getSeconds()+t.methodConfig.timeout.seconds),r.setMilliseconds(r.getMilliseconds()+t.methodConfig.timeout.nanos/1e6),this.deadline=(0,lm.minDeadline)(this.deadline,r),this.runDeadlineTimer()}this.filterStackFactory.push(t.dynamicFilterFactories),this.filterStack=this.filterStackFactory.createFilter(),this.filterStack.sendMetadata(Promise.resolve(this.metadata)).then(r=>{this.child=this.channel.createInnerCall(t,this.method,this.host,this.credentials,this.deadline),this.trace("Created child ["+this.child.getCallNumber()+"]"),this.child.start(r,{onReceiveMetadata:i=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(this.filterStack.receiveMetadata(i))},onReceiveMessage:i=>{this.trace("Received message"),this.readFilterPending=!0,this.filterStack.receiveMessage(i).then(s=>{this.trace("Finished filtering received message"),this.readFilterPending=!1,this.listener.onReceiveMessage(s),this.pendingChildStatus&&this.outputStatus(this.pendingChildStatus)},s=>{this.cancelWithStatus(s.code,s.details)})},onReceiveStatus:i=>{this.trace("Received status"),this.readFilterPending?this.pendingChildStatus=i:this.outputStatus(i)}}),this.readPending&&this.child.startRead(),this.pendingMessage?this.sendMessageOnChild(this.pendingMessage.context,this.pendingMessage.message):this.pendingHalfClose&&this.child.halfClose()},r=>{this.outputStatus(r)})}reportResolverError(e){var t;!((t=this.metadata)===null||t===void 0)&&t.getOptions().waitForReady?this.channel.queueCallForConfig(this):this.outputStatus(e)}cancelWithStatus(e,t){var r;this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),(r=this.child)===null||r===void 0||r.cancelWithStatus(e,t),this.outputStatus({code:e,details:t,metadata:new v2.Metadata})}getPeer(){var e,t;return(t=(e=this.child)===null||e===void 0?void 0:e.getPeer())!==null&&t!==void 0?t:this.channel.getTarget()}start(e,t){this.trace("start called"),this.metadata=e.clone(),this.listener=t,this.getConfig()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length),this.child?this.sendMessageOnChild(e,t):this.pendingMessage={context:e,message:t}}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=!0}halfClose(){this.trace("halfClose called"),this.child&&!this.writeFilterPending?this.child.halfClose():this.pendingHalfClose=!0}setCredentials(e){this.credentials=this.credentials.compose(e)}addStatusWatcher(e){this.statusWatchers.push(e)}getCallNumber(){return this.callNumber}};um.ResolvingCall=HC});var w2=A(As=>{"use strict";Object.defineProperty(As,"__esModule",{value:!0});As.RetryingCall=As.MessageBufferTracker=As.RetryThrottler=void 0;var dm=Ae(),dne=dn(),fne=et(),hne="retrying_call",WC=class{constructor(e,t,r){this.maxTokens=e,this.tokenRatio=t,r?this.tokens=r.tokens*(e/r.maxTokens):this.tokens=e}addCallSucceeded(){this.tokens=Math.max(this.tokens+this.tokenRatio,this.maxTokens)}addCallFailed(){this.tokens=Math.min(this.tokens-1,0)}canRetryCall(){return this.tokens>this.maxTokens/2}};As.RetryThrottler=WC;var KC=class{constructor(e,t){this.totalLimit=e,this.limitPerCall=t,this.totalAllocated=0,this.allocatedPerCall=new Map}allocate(e,t){var r;let i=(r=this.allocatedPerCall.get(t))!==null&&r!==void 0?r:0;return this.limitPerCall-i<e||this.totalLimit-this.totalAllocated<e?!1:(this.allocatedPerCall.set(t,i+e),this.totalAllocated+=e,!0)}free(e,t){var r;if(this.totalAllocated<e)throw new Error(`Invalid buffer allocation state: call ${t} freed ${e} > total allocated ${this.totalAllocated}`);this.totalAllocated-=e;let i=(r=this.allocatedPerCall.get(t))!==null&&r!==void 0?r:0;if(i<e)throw new Error(`Invalid buffer allocation state: call ${t} freed ${e} > allocated for call ${i}`);this.allocatedPerCall.set(t,i-e)}freeAll(e){var t;let r=(t=this.allocatedPerCall.get(e))!==null&&t!==void 0?t:0;if(this.totalAllocated<r)throw new Error(`Invalid buffer allocation state: call ${e} allocated ${r} > total allocated ${this.totalAllocated}`);this.totalAllocated-=r,this.allocatedPerCall.delete(e)}};As.MessageBufferTracker=KC;var GC="grpc-previous-rpc-attempts",QC=class{constructor(e,t,r,i,s,o,a,c,l){if(this.channel=e,this.callConfig=t,this.methodName=r,this.host=i,this.credentials=s,this.deadline=o,this.callNumber=a,this.bufferTracker=c,this.retryThrottler=l,this.listener=null,this.initialMetadata=null,this.underlyingCalls=[],this.writeBuffer=[],this.writeBufferOffset=0,this.readStarted=!1,this.transparentRetryUsed=!1,this.attempts=0,this.hedgingTimer=null,this.committedCallIndex=null,this.initialRetryBackoffSec=0,this.nextRetryBackoffSec=0,t.methodConfig.retryPolicy){this.state="RETRY";let u=t.methodConfig.retryPolicy;this.nextRetryBackoffSec=this.initialRetryBackoffSec=Number(u.initialBackoff.substring(0,u.initialBackoff.length-1))}else t.methodConfig.hedgingPolicy?this.state="HEDGING":this.state="TRANSPARENT_ONLY"}getCallNumber(){return this.callNumber}trace(e){fne.trace(dm.LogVerbosity.DEBUG,hne,"["+this.callNumber+"] "+e)}reportStatus(e){this.trace("ended with status: code="+e.code+' details="'+e.details+'"'),this.bufferTracker.freeAll(this.callNumber),this.writeBufferOffset=this.writeBufferOffset+this.writeBuffer.length,this.writeBuffer=[],process.nextTick(()=>{var t;(t=this.listener)===null||t===void 0||t.onReceiveStatus({code:e.code,details:e.details,metadata:e.metadata})})}cancelWithStatus(e,t){this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),this.reportStatus({code:e,details:t,metadata:new dne.Metadata});for(let{call:r}of this.underlyingCalls)r.cancelWithStatus(e,t)}getPeer(){return this.committedCallIndex!==null?this.underlyingCalls[this.committedCallIndex].call.getPeer():"unknown"}getBufferEntry(e){var t;return(t=this.writeBuffer[e-this.writeBufferOffset])!==null&&t!==void 0?t:{entryType:"FREED",allocated:!1}}getNextBufferIndex(){return this.writeBufferOffset+this.writeBuffer.length}clearSentMessages(){if(this.state!=="COMMITTED")return;let e=this.underlyingCalls[this.committedCallIndex].nextMessageToSend;for(let t=this.writeBufferOffset;t<e;t++){let r=this.getBufferEntry(t);r.allocated&&this.bufferTracker.free(r.message.message.length,this.callNumber)}this.writeBuffer=this.writeBuffer.slice(e-this.writeBufferOffset),this.writeBufferOffset=e}commitCall(e){if(this.state!=="COMMITTED"&&this.underlyingCalls[e].state!=="COMPLETED"){this.trace("Committing call ["+this.underlyingCalls[e].call.getCallNumber()+"] at index "+e),this.state="COMMITTED",this.committedCallIndex=e;for(let t=0;t<this.underlyingCalls.length;t++)t!==e&&this.underlyingCalls[t].state!=="COMPLETED"&&(this.underlyingCalls[t].state="COMPLETED",this.underlyingCalls[t].call.cancelWithStatus(dm.Status.CANCELLED,"Discarded in favor of other hedged attempt"));this.clearSentMessages()}}commitCallWithMostMessages(){if(this.state==="COMMITTED")return;let e=-1,t=-1;for(let[r,i]of this.underlyingCalls.entries())i.state==="ACTIVE"&&i.nextMessageToSend>e&&(e=i.nextMessageToSend,t=r);t===-1?this.state="TRANSPARENT_ONLY":this.commitCall(t)}isStatusCodeInList(e,t){return e.some(r=>r===t||r.toString().toLowerCase()===dm.Status[t].toLowerCase())}getNextRetryBackoffMs(){var e;let t=(e=this.callConfig)===null||e===void 0?void 0:e.methodConfig.retryPolicy;if(!t)return 0;let r=Math.random()*this.nextRetryBackoffSec*1e3,i=Number(t.maxBackoff.substring(0,t.maxBackoff.length-1));return this.nextRetryBackoffSec=Math.min(this.nextRetryBackoffSec*t.backoffMultiplier,i),r}maybeRetryCall(e,t){if(this.state!=="RETRY"){t(!1);return}let r=this.callConfig.methodConfig.retryPolicy;if(this.attempts>=Math.min(r.maxAttempts,5)){t(!1);return}let i;if(e===null)i=this.getNextRetryBackoffMs();else if(e<0){this.state="TRANSPARENT_ONLY",t(!1);return}else i=e,this.nextRetryBackoffSec=this.initialRetryBackoffSec;setTimeout(()=>{var s,o;if(this.state!=="RETRY"){t(!1);return}(!((o=(s=this.retryThrottler)===null||s===void 0?void 0:s.canRetryCall())!==null&&o!==void 0)||o)&&(t(!0),this.attempts+=1,this.startNewAttempt())},i)}countActiveCalls(){let e=0;for(let t of this.underlyingCalls)t?.state==="ACTIVE"&&(e+=1);return e}handleProcessedStatus(e,t,r){var i,s,o;switch(this.state){case"COMMITTED":case"TRANSPARENT_ONLY":this.commitCall(t),this.reportStatus(e);break;case"HEDGING":if(this.isStatusCodeInList((i=this.callConfig.methodConfig.hedgingPolicy.nonFatalStatusCodes)!==null&&i!==void 0?i:[],e.code)){(s=this.retryThrottler)===null||s===void 0||s.addCallFailed();let a;if(r===null)a=0;else if(r<0){this.state="TRANSPARENT_ONLY",this.commitCall(t),this.reportStatus(e);return}else a=r;setTimeout(()=>{this.maybeStartHedgingAttempt(),this.countActiveCalls()===0&&(this.commitCall(t),this.reportStatus(e))},a)}else this.commitCall(t),this.reportStatus(e);break;case"RETRY":this.isStatusCodeInList(this.callConfig.methodConfig.retryPolicy.retryableStatusCodes,e.code)?((o=this.retryThrottler)===null||o===void 0||o.addCallFailed(),this.maybeRetryCall(r,a=>{a||(this.commitCall(t),this.reportStatus(e))})):(this.commitCall(t),this.reportStatus(e));break}}getPushback(e){let t=e.get("grpc-retry-pushback-ms");if(t.length===0)return null;try{return parseInt(t[0])}catch{return-1}}handleChildStatus(e,t){var r;if(this.underlyingCalls[t].state==="COMPLETED")return;if(this.trace("state="+this.state+" handling status with progress "+e.progress+" from child ["+this.underlyingCalls[t].call.getCallNumber()+"] in state "+this.underlyingCalls[t].state),this.underlyingCalls[t].state="COMPLETED",e.code===dm.Status.OK){(r=this.retryThrottler)===null||r===void 0||r.addCallSucceeded(),this.commitCall(t),this.reportStatus(e);return}if(this.state==="COMMITTED"){this.reportStatus(e);return}let i=this.getPushback(e.metadata);switch(e.progress){case"NOT_STARTED":this.startNewAttempt();break;case"REFUSED":this.transparentRetryUsed?this.handleProcessedStatus(e,t,i):(this.transparentRetryUsed=!0,this.startNewAttempt());break;case"DROP":this.commitCall(t),this.reportStatus(e);break;case"PROCESSED":this.handleProcessedStatus(e,t,i);break}}maybeStartHedgingAttempt(){if(this.state!=="HEDGING"||!this.callConfig.methodConfig.hedgingPolicy)return;let e=this.callConfig.methodConfig.hedgingPolicy;this.attempts>=Math.min(e.maxAttempts,5)||(this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer())}maybeStartHedgingTimer(){var e,t,r;if(this.hedgingTimer&&clearTimeout(this.hedgingTimer),this.state!=="HEDGING"||!this.callConfig.methodConfig.hedgingPolicy)return;let i=this.callConfig.methodConfig.hedgingPolicy;if(this.attempts>=Math.min(i.maxAttempts,5))return;let s=(e=i.hedgingDelay)!==null&&e!==void 0?e:"0s",o=Number(s.substring(0,s.length-1));this.hedgingTimer=setTimeout(()=>{this.maybeStartHedgingAttempt()},o*1e3),(r=(t=this.hedgingTimer).unref)===null||r===void 0||r.call(t)}startNewAttempt(){let e=this.channel.createLoadBalancingCall(this.callConfig,this.methodName,this.host,this.credentials,this.deadline);this.trace("Created child call ["+e.getCallNumber()+"] for attempt "+this.attempts);let t=this.underlyingCalls.length;this.underlyingCalls.push({state:"ACTIVE",call:e,nextMessageToSend:0});let r=this.attempts-1,i=this.initialMetadata.clone();r>0&&i.set(GC,`${r}`);let s=!1;e.start(i,{onReceiveMetadata:o=>{this.trace("Received metadata from child ["+e.getCallNumber()+"]"),this.commitCall(t),s=!0,r>0&&o.set(GC,`${r}`),this.underlyingCalls[t].state==="ACTIVE"&&this.listener.onReceiveMetadata(o)},onReceiveMessage:o=>{this.trace("Received message from child ["+e.getCallNumber()+"]"),this.commitCall(t),this.underlyingCalls[t].state==="ACTIVE"&&this.listener.onReceiveMessage(o)},onReceiveStatus:o=>{this.trace("Received status from child ["+e.getCallNumber()+"]"),!s&&r>0&&o.metadata.set(GC,`${r}`),this.handleChildStatus(o,t)}}),this.sendNextChildMessage(t),this.readStarted&&e.startRead()}start(e,t){this.trace("start called"),this.listener=t,this.initialMetadata=e,this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer()}handleChildWriteCompleted(e){var t,r;let i=this.underlyingCalls[e],s=i.nextMessageToSend;(r=(t=this.getBufferEntry(s)).callback)===null||r===void 0||r.call(t),this.clearSentMessages(),i.nextMessageToSend+=1,this.sendNextChildMessage(e)}sendNextChildMessage(e){let t=this.underlyingCalls[e];if(t.state!=="COMPLETED"&&this.getBufferEntry(t.nextMessageToSend)){let r=this.getBufferEntry(t.nextMessageToSend);switch(r.entryType){case"MESSAGE":t.call.sendMessageWithContext({callback:i=>{this.handleChildWriteCompleted(e)}},r.message.message);break;case"HALF_CLOSE":t.nextMessageToSend+=1,t.call.halfClose();break;case"FREED":break}}}sendMessageWithContext(e,t){var r;this.trace("write() called with message of length "+t.length);let i={message:t,flags:e.flags},s=this.getNextBufferIndex(),o={entryType:"MESSAGE",message:i,allocated:this.bufferTracker.allocate(t.length,this.callNumber)};if(this.writeBuffer.push(o),o.allocated){(r=e.callback)===null||r===void 0||r.call(e);for(let[a,c]of this.underlyingCalls.entries())c.state==="ACTIVE"&&c.nextMessageToSend===s&&c.call.sendMessageWithContext({callback:l=>{this.handleChildWriteCompleted(a)}},t)}else{if(this.commitCallWithMostMessages(),this.committedCallIndex===null)return;let a=this.underlyingCalls[this.committedCallIndex];o.callback=e.callback,a.state==="ACTIVE"&&a.nextMessageToSend===s&&a.call.sendMessageWithContext({callback:c=>{this.handleChildWriteCompleted(this.committedCallIndex)}},t)}}startRead(){this.trace("startRead called"),this.readStarted=!0;for(let e of this.underlyingCalls)e?.state==="ACTIVE"&&e.call.startRead()}halfClose(){this.trace("halfClose called");let e=this.getNextBufferIndex();this.writeBuffer.push({entryType:"HALF_CLOSE",allocated:!1});for(let t of this.underlyingCalls)t?.state==="ACTIVE"&&t.nextMessageToSend===e&&(t.nextMessageToSend+=1,t.call.halfClose())}setCredentials(e){throw new Error("Method not implemented.")}getMethod(){return this.methodName}getHost(){return this.host}};As.RetryingCall=QC});var hm=A(fm=>{"use strict";Object.defineProperty(fm,"__esModule",{value:!0});fm.BaseSubchannelWrapper=void 0;var YC=class{constructor(e){this.child=e}getConnectivityState(){return this.child.getConnectivityState()}addConnectivityStateListener(e){this.child.addConnectivityStateListener(e)}removeConnectivityStateListener(e){this.child.removeConnectivityStateListener(e)}startConnecting(){this.child.startConnecting()}getAddress(){return this.child.getAddress()}throttleKeepalive(e){this.child.throttleKeepalive(e)}ref(){this.child.ref()}unref(){this.child.unref()}getChannelzRef(){return this.child.getChannelzRef()}getRealSubchannel(){return this.child.getRealSubchannel()}realSubchannelEquals(e){return this.getRealSubchannel()===e.getRealSubchannel()}};fm.BaseSubchannelWrapper=YC});var _2=A(mm=>{"use strict";Object.defineProperty(mm,"__esModule",{value:!0});mm.InternalChannel=void 0;var pne=Jp(),gne=Q1(),mne=d2(),T2=ds(),md=Ae(),yne=PC(),vne=g2(),b2=Mr(),ZC=et(),Ene=SC(),pm=Sn(),Hr=kn(),yd=Co(),wne=y2(),Tne=rm(),bne=E2(),JC=AC(),_ne=sm(),XC=w2(),Sne=hm(),Cne=2147483647,Ine=1e3,Dne=30*60*1e3,gm=new Map,Ane=1<<24,Rne=1<<20,eI=class extends Sne.BaseSubchannelWrapper{constructor(e,t){super(e),this.channel=t,this.refCount=0,this.subchannelStateListener=(r,i,s,o)=>{t.throttleKeepalive(o)},e.addConnectivityStateListener(this.subchannelStateListener)}ref(){this.child.ref(),this.refCount+=1}unref(){this.child.unref(),this.refCount-=1,this.refCount<=0&&(this.child.removeConnectivityStateListener(this.subchannelStateListener),this.channel.removeWrappedSubchannel(this))}},tI=class{constructor(e,t,r){var i,s,o,a,c,l,u,d;if(this.credentials=t,this.options=r,this.connectivityState=Hr.ConnectivityState.IDLE,this.currentPicker=new T2.UnavailablePicker,this.configSelectionQueue=[],this.pickQueue=[],this.connectivityStateWatchers=[],this.configSelector=null,this.currentResolutionError=null,this.wrappedSubchannels=new Set,this.callCount=0,this.idleTimer=null,this.channelzEnabled=!0,this.callTracker=new yd.ChannelzCallTracker,this.childrenTracker=new yd.ChannelzChildrenTracker,typeof e!="string")throw new TypeError("Channel target must be a string");if(!(t instanceof pne.ChannelCredentials))throw new TypeError("Channel credentials must be a ChannelCredentials object");if(r&&typeof r!="object")throw new TypeError("Channel options must be an object");this.originalTarget=e;let h=(0,pm.parseUri)(e);if(h===null)throw new Error(`Could not parse target name "${e}"`);let f=(0,b2.mapUriDefaultScheme)(h);if(f===null)throw new Error(`Could not find a default scheme for target name "${e}"`);this.callRefTimer=setInterval(()=>{},Cne),(s=(i=this.callRefTimer).unref)===null||s===void 0||s.call(i),this.options["grpc.enable_channelz"]===0&&(this.channelzEnabled=!1),this.channelzTrace=new yd.ChannelzTrace,this.channelzRef=(0,yd.registerChannelzChannel)(e,()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Channel created"),this.options["grpc.default_authority"]?this.defaultAuthority=this.options["grpc.default_authority"]:this.defaultAuthority=(0,b2.getDefaultAuthority)(f);let v=(0,Ene.mapProxyName)(f,r);this.target=v.target,this.options=Object.assign({},this.options,v.extraOptions),this.subchannelPool=(0,mne.getSubchannelPool)(((o=r["grpc.use_local_subchannel_pool"])!==null&&o!==void 0?o:0)===0),this.retryBufferTracker=new XC.MessageBufferTracker((a=r["grpc.retry_buffer_size"])!==null&&a!==void 0?a:Ane,(c=r["grpc.per_rpc_retry_buffer_size"])!==null&&c!==void 0?c:Rne),this.keepaliveTime=(l=r["grpc.keepalive_time_ms"])!==null&&l!==void 0?l:-1,this.idleTimeoutMs=Math.max((u=r["grpc.client_idle_timeout_ms"])!==null&&u!==void 0?u:Dne,Ine);let w={createSubchannel:(I,D)=>{let M=this.subchannelPool.getOrCreateSubchannel(this.target,I,Object.assign({},this.options,D),this.credentials);M.throttleKeepalive(this.keepaliveTime),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Created subchannel or used existing subchannel",M.getChannelzRef());let P=new eI(M,this);return this.wrappedSubchannels.add(P),P},updateState:(I,D)=>{this.currentPicker=D;let M=this.pickQueue.slice();this.pickQueue=[],M.length>0&&this.callRefTimerUnref();for(let P of M)P.doPick();this.updateState(I)},requestReresolution:()=>{throw new Error("Resolving load balancer should never call requestReresolution")},addChannelzChild:I=>{this.channelzEnabled&&this.childrenTracker.refChild(I)},removeChannelzChild:I=>{this.channelzEnabled&&this.childrenTracker.unrefChild(I)}};this.resolvingLoadBalancer=new gne.ResolvingLoadBalancer(this.target,w,r,(I,D)=>{I.retryThrottling?gm.set(this.getTarget(),new XC.RetryThrottler(I.retryThrottling.maxTokens,I.retryThrottling.tokenRatio,gm.get(this.getTarget()))):gm.delete(this.getTarget()),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Address resolution succeeded"),this.configSelector=D,this.currentResolutionError=null,process.nextTick(()=>{let M=this.configSelectionQueue;this.configSelectionQueue=[],M.length>0&&this.callRefTimerUnref();for(let P of M)P.getConfig()})},I=>{this.channelzEnabled&&this.channelzTrace.addTrace("CT_WARNING","Address resolution failed with code "+I.code+' and details "'+I.details+'"'),this.configSelectionQueue.length>0&&this.trace("Name resolution failed with calls queued for config selection"),this.configSelector===null&&(this.currentResolutionError=Object.assign(Object.assign({},(0,_ne.restrictControlPlaneStatusCode)(I.code,I.details)),{metadata:I.metadata}));let D=this.configSelectionQueue;this.configSelectionQueue=[],D.length>0&&this.callRefTimerUnref();for(let M of D)M.reportResolverError(I)}),this.filterStackFactory=new yne.FilterStackFactory([new vne.CompressionFilterFactory(this,this.options)]),this.trace("Channel constructed with options "+JSON.stringify(r,void 0,2));let S=new Error;(0,ZC.trace)(md.LogVerbosity.DEBUG,"channel_stacktrace","("+this.channelzRef.id+`) Channel constructed 
`+((d=S.stack)===null||d===void 0?void 0:d.substring(S.stack.indexOf(`
`)+1))),this.lastActivityTimestamp=new Date}getChannelzInfo(){return{target:this.originalTarget,state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists()}}trace(e,t){(0,ZC.trace)(t??md.LogVerbosity.DEBUG,"channel","("+this.channelzRef.id+") "+(0,pm.uriToString)(this.target)+" "+e)}callRefTimerRef(){var e,t,r,i;!((t=(e=this.callRefTimer).hasRef)===null||t===void 0)&&t.call(e)||(this.trace("callRefTimer.ref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),(i=(r=this.callRefTimer).ref)===null||i===void 0||i.call(r))}callRefTimerUnref(){var e,t;(!this.callRefTimer.hasRef||this.callRefTimer.hasRef())&&(this.trace("callRefTimer.unref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),(t=(e=this.callRefTimer).unref)===null||t===void 0||t.call(e))}removeConnectivityStateWatcher(e){let t=this.connectivityStateWatchers.findIndex(r=>r===e);t>=0&&this.connectivityStateWatchers.splice(t,1)}updateState(e){(0,ZC.trace)(md.LogVerbosity.DEBUG,"connectivity_state","("+this.channelzRef.id+") "+(0,pm.uriToString)(this.target)+" "+Hr.ConnectivityState[this.connectivityState]+" -> "+Hr.ConnectivityState[e]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connectivity state change to "+Hr.ConnectivityState[e]),this.connectivityState=e;let t=this.connectivityStateWatchers.slice();for(let r of t)e!==r.currentState&&(r.timer&&clearTimeout(r.timer),this.removeConnectivityStateWatcher(r),r.callback());e!==Hr.ConnectivityState.TRANSIENT_FAILURE&&(this.currentResolutionError=null)}throttleKeepalive(e){if(e>this.keepaliveTime){this.keepaliveTime=e;for(let t of this.wrappedSubchannels)t.throttleKeepalive(e)}}removeWrappedSubchannel(e){this.wrappedSubchannels.delete(e)}doPick(e,t){return this.currentPicker.pick({metadata:e,extraPickInfo:t})}queueCallForPick(e){this.pickQueue.push(e),this.callRefTimerRef()}getConfig(e,t){return this.resolvingLoadBalancer.exitIdle(),this.configSelector?{type:"SUCCESS",config:this.configSelector(e,t)}:this.currentResolutionError?{type:"ERROR",error:this.currentResolutionError}:{type:"NONE"}}queueCallForConfig(e){this.configSelectionQueue.push(e),this.callRefTimerRef()}enterIdle(){this.resolvingLoadBalancer.destroy(),this.updateState(Hr.ConnectivityState.IDLE),this.currentPicker=new T2.QueuePicker(this.resolvingLoadBalancer),this.idleTimer&&(clearTimeout(this.idleTimer),this.idleTimer=null)}startIdleTimeout(e){var t,r;this.idleTimer=setTimeout(()=>{if(this.callCount>0){this.startIdleTimeout(this.idleTimeoutMs);return}let s=new Date().valueOf()-this.lastActivityTimestamp.valueOf();s>=this.idleTimeoutMs?(this.trace("Idle timer triggered after "+this.idleTimeoutMs+"ms of inactivity"),this.enterIdle()):this.startIdleTimeout(this.idleTimeoutMs-s)},e),(r=(t=this.idleTimer).unref)===null||r===void 0||r.call(t)}maybeStartIdleTimer(){this.connectivityState!==Hr.ConnectivityState.SHUTDOWN&&!this.idleTimer&&this.startIdleTimeout(this.idleTimeoutMs)}onCallStart(){this.channelzEnabled&&this.callTracker.addCallStarted(),this.callCount+=1}onCallEnd(e){this.channelzEnabled&&(e.code===md.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()),this.callCount-=1,this.lastActivityTimestamp=new Date,this.maybeStartIdleTimer()}createLoadBalancingCall(e,t,r,i,s){let o=(0,JC.getNextCallNumber)();return this.trace("createLoadBalancingCall ["+o+'] method="'+t+'"'),new wne.LoadBalancingCall(this,e,t,r,i,s,o)}createRetryingCall(e,t,r,i,s){let o=(0,JC.getNextCallNumber)();return this.trace("createRetryingCall ["+o+'] method="'+t+'"'),new XC.RetryingCall(this,e,t,r,i,s,o,this.retryBufferTracker,gm.get(this.getTarget()))}createInnerCall(e,t,r,i,s){return this.options["grpc.enable_retries"]===0?this.createLoadBalancingCall(e,t,r,i,s):this.createRetryingCall(e,t,r,i,s)}createResolvingCall(e,t,r,i,s){let o=(0,JC.getNextCallNumber)();this.trace("createResolvingCall ["+o+'] method="'+e+'", deadline='+(0,Tne.deadlineToString)(t));let a={deadline:t,flags:s??md.Propagate.DEFAULTS,host:r??this.defaultAuthority,parentCall:i},c=new bne.ResolvingCall(this,e,a,this.filterStackFactory.clone(),this.credentials._getCallCredentials(),o);return this.onCallStart(),c.addStatusWatcher(l=>{this.onCallEnd(l)}),c}close(){this.resolvingLoadBalancer.destroy(),this.updateState(Hr.ConnectivityState.SHUTDOWN),clearInterval(this.callRefTimer),this.idleTimer&&clearTimeout(this.idleTimer),this.channelzEnabled&&(0,yd.unregisterChannelzRef)(this.channelzRef),this.subchannelPool.unrefUnusedSubchannels()}getTarget(){return(0,pm.uriToString)(this.target)}getConnectivityState(e){let t=this.connectivityState;return e&&(this.resolvingLoadBalancer.exitIdle(),this.lastActivityTimestamp=new Date,this.maybeStartIdleTimer()),t}watchConnectivityState(e,t,r){if(this.connectivityState===Hr.ConnectivityState.SHUTDOWN)throw new Error("Channel has been shut down");let i=null;if(t!==1/0){let o=t instanceof Date?t:new Date(t),a=new Date;if(t===-1/0||o<=a){process.nextTick(r,new Error("Deadline passed without connectivity state change"));return}i=setTimeout(()=>{this.removeConnectivityStateWatcher(s),r(new Error("Deadline passed without connectivity state change"))},o.getTime()-a.getTime())}let s={currentState:e,callback:r,timer:i};this.connectivityStateWatchers.push(s)}getChannelzRef(){return this.channelzRef}createCall(e,t,r,i,s){if(typeof e!="string")throw new TypeError("Channel#createCall: method must be a string");if(!(typeof t=="number"||t instanceof Date))throw new TypeError("Channel#createCall: deadline must be a number or Date");if(this.connectivityState===Hr.ConnectivityState.SHUTDOWN)throw new Error("Channel has been shut down");return this.createResolvingCall(e,t,r,i,s)}};mm.InternalChannel=tI});var sS=A(ym=>{"use strict";Object.defineProperty(ym,"__esModule",{value:!0});ym.ChannelImplementation=void 0;var Nne=Jp(),Mne=_2(),nI=class{constructor(e,t,r){if(typeof e!="string")throw new TypeError("Channel target must be a string");if(!(t instanceof Nne.ChannelCredentials))throw new TypeError("Channel credentials must be a ChannelCredentials object");if(r&&typeof r!="object")throw new TypeError("Channel options must be an object");this.internalChannel=new Mne.InternalChannel(e,t,r)}close(){this.internalChannel.close()}getTarget(){return this.internalChannel.getTarget()}getConnectivityState(e){return this.internalChannel.getConnectivityState(e)}watchConnectivityState(e,t,r){this.internalChannel.watchConnectivityState(e,t,r)}getChannelzRef(){return this.internalChannel.getChannelzRef()}createCall(e,t,r,i,s){if(typeof e!="string")throw new TypeError("Channel#createCall: method must be a string");if(!(typeof t=="number"||t instanceof Date))throw new TypeError("Channel#createCall: deadline must be a number or Date");return this.internalChannel.createCall(e,t,r,i,s)}};ym.ChannelImplementation=nI});var O2=A(qn=>{"use strict";Object.defineProperty(qn,"__esModule",{value:!0});qn.Http2ServerCallStream=qn.ServerDuplexStreamImpl=qn.ServerWritableStreamImpl=qn.ServerReadableStreamImpl=qn.ServerUnaryCallImpl=void 0;var R2=Me("events"),Lc=Me("http2"),sI=Me("stream"),S2=Me("zlib"),ze=Ae(),oI=dn(),One=IC(),N2=et(),Ed=Gp(),M2="server_call";function vd(n){N2.trace(ze.LogVerbosity.DEBUG,M2,n)}var kne="grpc-accept-encoding",xne="grpc-encoding",C2="grpc-message",I2="grpc-status",D2="grpc-timeout",Pne=/(\d{1,8})\s*([HMSmun])/,Lne={H:36e5,M:6e4,S:1e3,m:1,u:.001,n:1e-6},Fne={[kne]:"identity,deflate,gzip",[xne]:"identity"},A2={[Lc.constants.HTTP2_HEADER_STATUS]:Lc.constants.HTTP_STATUS_OK,[Lc.constants.HTTP2_HEADER_CONTENT_TYPE]:"application/grpc+proto"},Bne={waitForTrailers:!0},rI=class extends R2.EventEmitter{constructor(e,t,r){super(),this.call=e,this.metadata=t,this.request=r,this.cancelled=!1,this.call.setupSurfaceCall(this)}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}};qn.ServerUnaryCallImpl=rI;var vm=class extends sI.Readable{constructor(e,t,r,i){super({objectMode:!0}),this.call=e,this.metadata=t,this.deserialize=r,this.cancelled=!1,this.call.setupSurfaceCall(this),this.call.setupReadable(this,i)}_read(e){this.call.consumeUnpushedMessages(this)&&this.call.resume()}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}};qn.ServerReadableStreamImpl=vm;var wd=class extends sI.Writable{constructor(e,t,r,i){super({objectMode:!0}),this.call=e,this.metadata=t,this.serialize=r,this.request=i,this.cancelled=!1,this.trailingMetadata=new oI.Metadata,this.call.setupSurfaceCall(this),this.on("error",s=>{this.call.sendError(s),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}_write(e,t,r){try{let i=this.call.serializeMessage(e);if(!this.call.write(i)){this.call.once("drain",r);return}}catch(i){this.emit("error",{details:(0,Ed.getErrorMessage)(i),code:ze.Status.INTERNAL})}r()}_final(e){this.call.sendStatus({code:ze.Status.OK,details:"OK",metadata:this.trailingMetadata}),e(null)}end(e){return e&&(this.trailingMetadata=e),super.end()}};qn.ServerWritableStreamImpl=wd;var Fc=class extends sI.Duplex{constructor(e,t,r,i,s){super({objectMode:!0}),this.call=e,this.metadata=t,this.serialize=r,this.deserialize=i,this.cancelled=!1,this.trailingMetadata=new oI.Metadata,this.call.setupSurfaceCall(this),this.call.setupReadable(this,s),this.on("error",o=>{this.call.sendError(o),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}end(e){return e&&(this.trailingMetadata=e),super.end()}};qn.ServerDuplexStreamImpl=Fc;Fc.prototype._read=vm.prototype._read;Fc.prototype._write=wd.prototype._write;Fc.prototype._final=wd.prototype._final;var iI=class extends R2.EventEmitter{constructor(e,t,r){super(),this.stream=e,this.handler=t,this.cancelled=!1,this.deadlineTimer=null,this.statusSent=!1,this.deadline=1/0,this.wantTrailers=!1,this.metadataSent=!1,this.canPush=!1,this.isPushPending=!1,this.bufferedMessages=[],this.messagesToPush=[],this.maxSendMessageSize=ze.DEFAULT_MAX_SEND_MESSAGE_LENGTH,this.maxReceiveMessageSize=ze.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,this.stream.once("error",i=>{}),this.stream.once("close",()=>{var i;vd("Request to method "+((i=this.handler)===null||i===void 0?void 0:i.path)+" stream closed with rstCode "+this.stream.rstCode),this.statusSent||(this.cancelled=!0,this.emit("cancelled","cancelled"),this.emit("streamEnd",!1),this.sendStatus({code:ze.Status.CANCELLED,details:"Cancelled by client",metadata:null}),this.deadlineTimer&&clearTimeout(this.deadlineTimer))}),this.stream.on("drain",()=>{this.emit("drain")}),"grpc.max_send_message_length"in r&&(this.maxSendMessageSize=r["grpc.max_send_message_length"]),"grpc.max_receive_message_length"in r&&(this.maxReceiveMessageSize=r["grpc.max_receive_message_length"])}checkCancelled(){return(this.stream.destroyed||this.stream.closed)&&(this.cancelled=!0),this.cancelled}getDecompressedMessage(e,t){let r=e.subarray(5);if(t==="identity")return r;if(t==="deflate"||t==="gzip"){let i;return t==="deflate"?i=S2.createInflate():i=S2.createGunzip(),new Promise((s,o)=>{let a=0,c=[];i.on("data",l=>{c.push(l),a+=l.byteLength,this.maxReceiveMessageSize!==-1&&a>this.maxReceiveMessageSize&&(i.destroy(),o({code:ze.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxReceiveMessageSize}`}))}),i.on("end",()=>{s(Buffer.concat(c))}),i.write(r),i.end()})}else return Promise.reject({code:ze.Status.UNIMPLEMENTED,details:`Received message compressed with unsupported encoding "${t}"`})}sendMetadata(e){if(this.checkCancelled()||this.metadataSent)return;this.metadataSent=!0;let t=e?e.toHttp2Headers():null,r=Object.assign(Object.assign(Object.assign({},A2),Fne),t);this.stream.respond(r,Bne)}receiveMetadata(e){let t=oI.Metadata.fromHttp2Headers(e);N2.isTracerEnabled(M2)&&vd("Request to "+this.handler.path+" received headers "+JSON.stringify(t.toJSON()));let r=t.get(D2);if(r.length>0){let i=r[0].toString().match(Pne);if(i===null){let a=new Error("Invalid deadline");return a.code=ze.Status.OUT_OF_RANGE,this.sendError(a),t}let s=+i[1]*Lne[i[2]]|0,o=new Date;this.deadline=o.setMilliseconds(o.getMilliseconds()+s),this.deadlineTimer=setTimeout(Une,s,this),t.remove(D2)}return t.remove(Lc.constants.HTTP2_HEADER_ACCEPT_ENCODING),t.remove(Lc.constants.HTTP2_HEADER_TE),t.remove(Lc.constants.HTTP2_HEADER_CONTENT_TYPE),t.remove("grpc-accept-encoding"),t}receiveUnaryMessage(e){return new Promise((t,r)=>{let{stream:i}=this,s=0,o=this,a=[],c=this.maxReceiveMessageSize;this.stream.on("data",l),this.stream.on("end",u),this.stream.on("error",u);function l(d){if(s+=d.byteLength,c!==-1&&s>c){i.removeListener("data",l),i.removeListener("end",u),i.removeListener("error",u),r({code:ze.Status.RESOURCE_EXHAUSTED,details:`Received message larger than max (${s} vs. ${c})`});return}a.push(d)}function u(d){if(i.removeListener("data",l),i.removeListener("end",u),i.removeListener("error",u),d!==void 0){r({code:ze.Status.INTERNAL,details:d.message});return}if(s===0){r({code:ze.Status.INTERNAL,details:"received empty unary message"});return}o.emit("receiveMessage");let h=Buffer.concat(a,s),v=h.readUInt8(0)===1?e:"identity",w=o.getDecompressedMessage(h,v);if(Buffer.isBuffer(w)){t(o.deserializeMessageWithInternalError(w));return}w.then(S=>t(o.deserializeMessageWithInternalError(S)),S=>r(S.code?S:{code:ze.Status.INTERNAL,details:`Received "grpc-encoding" header "${e}" but ${e} decompression failed`}))}})}deserializeMessageWithInternalError(e){return T(this,null,function*(){try{return this.deserializeMessage(e)}catch(t){throw{details:(0,Ed.getErrorMessage)(t),code:ze.Status.INTERNAL}}})}serializeMessage(e){let t=this.handler.serialize(e),r=t.byteLength,i=Buffer.allocUnsafe(r+5);return i.writeUInt8(0,0),i.writeUInt32BE(r,1),t.copy(i,5),i}deserializeMessage(e){return this.handler.deserialize(e)}sendUnaryMessage(e,t,r,i){return T(this,null,function*(){if(!this.checkCancelled()){if(r===void 0&&(r=null),e){!Object.prototype.hasOwnProperty.call(e,"metadata")&&r&&(e.metadata=r),this.sendError(e);return}try{let s=this.serializeMessage(t);this.write(s),this.sendStatus({code:ze.Status.OK,details:"OK",metadata:r})}catch(s){this.sendError({details:(0,Ed.getErrorMessage)(s),code:ze.Status.INTERNAL})}}})}sendStatus(e){var t,r;if(this.emit("callEnd",e.code),this.emit("streamEnd",e.code===ze.Status.OK),!this.checkCancelled())if(vd("Request to method "+((t=this.handler)===null||t===void 0?void 0:t.path)+" ended with status code: "+ze.Status[e.code]+" details: "+e.details),this.deadlineTimer&&clearTimeout(this.deadlineTimer),this.stream.headersSent)this.wantTrailers||(this.wantTrailers=!0,this.stream.once("wantTrailers",()=>{var i;let s=Object.assign({[I2]:e.code,[C2]:encodeURI(e.details)},(i=e.metadata)===null||i===void 0?void 0:i.toHttp2Headers());this.stream.sendTrailers(s),this.statusSent=!0}),this.stream.end());else{let i=Object.assign(Object.assign({[I2]:e.code,[C2]:encodeURI(e.details)},A2),(r=e.metadata)===null||r===void 0?void 0:r.toHttp2Headers());this.stream.respond(i,{endStream:!0}),this.statusSent=!0}}sendError(e){let t={code:ze.Status.UNKNOWN,details:"message"in e?e.message:"Unknown Error",metadata:"metadata"in e&&e.metadata!==void 0?e.metadata:null};"code"in e&&typeof e.code=="number"&&Number.isInteger(e.code)&&(t.code=e.code,"details"in e&&typeof e.details=="string"&&(t.details=e.details)),this.sendStatus(t)}write(e){if(!this.checkCancelled()){if(this.maxSendMessageSize!==-1&&e.length>this.maxSendMessageSize){this.sendError({code:ze.Status.RESOURCE_EXHAUSTED,details:`Sent message larger than max (${e.length} vs. ${this.maxSendMessageSize})`});return}return this.sendMetadata(),this.emit("sendMessage"),this.stream.write(e)}}resume(){this.stream.resume()}setupSurfaceCall(e){this.once("cancelled",t=>{e.cancelled=!0,e.emit("cancelled",t)}),this.once("callEnd",t=>e.emit("callEnd",t))}setupReadable(e,t){let r=new One.StreamDecoder(this.maxReceiveMessageSize),i=!1,s=!1,o=!1,a=()=>T(this,null,function*(){!o&&i&&!s&&(o=!0,yield this.pushOrBufferMessage(e,null))});this.stream.on("data",c=>T(this,null,function*(){let l;try{l=r.write(c)}catch(u){this.sendError({code:ze.Status.RESOURCE_EXHAUSTED,details:u.message});return}s=!0,this.stream.pause();for(let u of l){this.emit("receiveMessage");let h=u.readUInt8(0)===1?t:"identity",f;try{f=yield this.getDecompressedMessage(u,h)}catch(v){this.sendError(v);return}if(!f)return;yield this.pushOrBufferMessage(e,f)}s=!1,this.stream.resume(),yield a()})),this.stream.once("end",()=>T(this,null,function*(){i=!0,yield a()}))}consumeUnpushedMessages(e){for(this.canPush=!0;this.messagesToPush.length>0;){let t=this.messagesToPush.shift(),r=e.push(t);if(t===null||r===!1){this.canPush=!1;break}}return this.canPush}pushOrBufferMessage(e,t){return T(this,null,function*(){this.isPushPending?this.bufferedMessages.push(t):yield this.pushMessage(e,t)})}pushMessage(e,t){return T(this,null,function*(){if(t===null){vd("Received end of stream"),this.canPush?e.push(null):this.messagesToPush.push(null);return}vd("Received message of length "+t.length),this.isPushPending=!0;try{let r=yield this.deserializeMessage(t);this.canPush?e.push(r)||(this.canPush=!1,this.stream.pause()):this.messagesToPush.push(r)}catch(r){this.bufferedMessages.length=0;let i=(0,Ed.getErrorCode)(r);(i===null||i<ze.Status.OK||i>ze.Status.UNAUTHENTICATED)&&(i=ze.Status.INTERNAL),e.emit("error",{details:(0,Ed.getErrorMessage)(r),code:i})}this.isPushPending=!1,this.bufferedMessages.length>0&&(yield this.pushMessage(e,this.bufferedMessages.shift()))})}getPeer(){var e;let t=(e=this.stream.session)===null||e===void 0?void 0:e.socket;return t?.remoteAddress?t.remotePort?`${t.remoteAddress}:${t.remotePort}`:t.remoteAddress:"unknown"}getDeadline(){return this.deadline}getPath(){return this.handler.path}};qn.Http2ServerCallStream=iI;function Une(n){let e=new Error("Deadline exceeded");e.code=ze.Status.DEADLINE_EXCEEDED,n.sendError(e),n.cancelled=!0,n.emit("cancelled","deadline")}});var lI=A(Em=>{"use strict";Object.defineProperty(Em,"__esModule",{value:!0});Em.ServerCredentials=void 0;var k2=R_(),Td=class{static createInsecure(){return new aI}static createSsl(e,t,r=!1){if(e!==null&&!Buffer.isBuffer(e))throw new TypeError("rootCerts must be null or a Buffer");if(!Array.isArray(t))throw new TypeError("keyCertPairs must be an array");if(typeof r!="boolean")throw new TypeError("checkClientCertificate must be a boolean");let i=[],s=[];for(let o=0;o<t.length;o++){let a=t[o];if(a===null||typeof a!="object")throw new TypeError(`keyCertPair[${o}] must be an object`);if(!Buffer.isBuffer(a.private_key))throw new TypeError(`keyCertPair[${o}].private_key must be a Buffer`);if(!Buffer.isBuffer(a.cert_chain))throw new TypeError(`keyCertPair[${o}].cert_chain must be a Buffer`);i.push(a.cert_chain),s.push(a.private_key)}return new cI({ca:e||(0,k2.getDefaultRootsData)()||void 0,cert:i,key:s,requestCert:r,ciphers:k2.CIPHER_SUITES})}};Em.ServerCredentials=Td;var aI=class extends Td{_isSecure(){return!1}_getSettings(){return null}},cI=class extends Td{constructor(e){super(),this.options=e}_isSecure(){return!0}_getSettings(){return this.options}}});var L2=A(bm=>{"use strict";Object.defineProperty(bm,"__esModule",{value:!0});bm.Server=void 0;var Rs=Me("http2"),Si=Ae(),Do=O2(),Vne=lI(),x2=Mr(),wm=et(),dr=kr(),jne=Sn(),pn=Co(),Tm=~(1<<31),qne=~(1<<31),$ne=2e4,{HTTP2_HEADER_PATH:P2}=Rs.constants,zne="server";function Hne(){}function uI(n){return{code:Si.Status.UNIMPLEMENTED,details:`The server does not implement the method ${n}`}}function Gne(n,e){let t=uI(e);switch(n){case"unary":return(r,i)=>{i(t,null)};case"clientStream":return(r,i)=>{i(t,null)};case"serverStream":return r=>{r.emit("error",t)};case"bidi":return r=>{r.emit("error",t)};default:throw new Error(`Invalid handlerType ${n}`)}}var dI=class{constructor(e){var t,r,i,s;this.http2ServerList=[],this.handlers=new Map,this.sessions=new Map,this.started=!1,this.shutdown=!1,this.serverAddressString="null",this.channelzEnabled=!0,this.channelzTrace=new pn.ChannelzTrace,this.callTracker=new pn.ChannelzCallTracker,this.listenerChildrenTracker=new pn.ChannelzChildrenTracker,this.sessionChildrenTracker=new pn.ChannelzChildrenTracker,this.options=e??{},this.options["grpc.enable_channelz"]===0&&(this.channelzEnabled=!1),this.channelzRef=(0,pn.registerChannelzServer)(()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Server created"),this.maxConnectionAgeMs=(t=this.options["grpc.max_connection_age_ms"])!==null&&t!==void 0?t:Tm,this.maxConnectionAgeGraceMs=(r=this.options["grpc.max_connection_age_grace_ms"])!==null&&r!==void 0?r:Tm,this.keepaliveTimeMs=(i=this.options["grpc.keepalive_time_ms"])!==null&&i!==void 0?i:qne,this.keepaliveTimeoutMs=(s=this.options["grpc.keepalive_timeout_ms"])!==null&&s!==void 0?s:$ne,this.trace("Server constructed")}getChannelzInfo(){return{trace:this.channelzTrace,callTracker:this.callTracker,listenerChildren:this.listenerChildrenTracker.getChildLists(),sessionChildren:this.sessionChildrenTracker.getChildLists()}}getChannelzSessionInfoGetter(e){return()=>{var t,r,i;let s=this.sessions.get(e),o=e.socket,a=o.remoteAddress?(0,dr.stringToSubchannelAddress)(o.remoteAddress,o.remotePort):null,c=o.localAddress?(0,dr.stringToSubchannelAddress)(o.localAddress,o.localPort):null,l;if(e.encrypted){let d=o,h=d.getCipher(),f=d.getCertificate(),v=d.getPeerCertificate();l={cipherSuiteStandardName:(t=h.standardName)!==null&&t!==void 0?t:null,cipherSuiteOtherName:h.standardName?null:h.name,localCertificate:f&&"raw"in f?f.raw:null,remoteCertificate:v&&"raw"in v?v.raw:null}}else l=null;return{remoteAddress:a,localAddress:c,security:l,remoteName:null,streamsStarted:s.streamTracker.callsStarted,streamsSucceeded:s.streamTracker.callsSucceeded,streamsFailed:s.streamTracker.callsFailed,messagesSent:s.messagesSent,messagesReceived:s.messagesReceived,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:s.streamTracker.lastCallStartedTimestamp,lastMessageSentTimestamp:s.lastMessageSentTimestamp,lastMessageReceivedTimestamp:s.lastMessageReceivedTimestamp,localFlowControlWindow:(r=e.state.localWindowSize)!==null&&r!==void 0?r:null,remoteFlowControlWindow:(i=e.state.remoteWindowSize)!==null&&i!==void 0?i:null}}}trace(e){wm.trace(Si.LogVerbosity.DEBUG,zne,"("+this.channelzRef.id+") "+e)}addProtoService(){throw new Error("Not implemented. Use addService() instead")}addService(e,t){if(e===null||typeof e!="object"||t===null||typeof t!="object")throw new Error("addService() requires two objects as arguments");let r=Object.keys(e);if(r.length===0)throw new Error("Cannot add an empty service to a server");r.forEach(i=>{let s=e[i],o;s.requestStream?s.responseStream?o="bidi":o="clientStream":s.responseStream?o="serverStream":o="unary";let a=t[i],c;if(a===void 0&&typeof s.originalName=="string"&&(a=t[s.originalName]),a!==void 0?c=a.bind(t):c=Gne(o,i),this.register(s.path,c,s.responseSerialize,s.requestDeserialize,o)===!1)throw new Error(`Method handler for ${s.path} already provided.`)})}removeService(e){if(e===null||typeof e!="object")throw new Error("removeService() requires object as argument");Object.keys(e).forEach(r=>{let i=e[r];this.unregister(i.path)})}bind(e,t){throw new Error("Not implemented. Use bindAsync() instead")}bindAsync(e,t,r){if(this.started===!0)throw new Error("server is already started");if(this.shutdown)throw new Error("bindAsync called after shutdown");if(typeof e!="string")throw new TypeError("port must be a string");if(t===null||!(t instanceof Vne.ServerCredentials))throw new TypeError("creds must be a ServerCredentials object");if(typeof r!="function")throw new TypeError("callback must be a function");let i=(0,jne.parseUri)(e);if(i===null)throw new Error(`Could not parse port "${e}"`);let s=(0,x2.mapUriDefaultScheme)(i);if(s===null)throw new Error(`Could not get a default scheme for port "${e}"`);let o={maxSendHeaderBlockLength:Number.MAX_SAFE_INTEGER};"grpc-node.max_session_memory"in this.options?o.maxSessionMemory=this.options["grpc-node.max_session_memory"]:o.maxSessionMemory=Number.MAX_SAFE_INTEGER,"grpc.max_concurrent_streams"in this.options&&(o.settings={maxConcurrentStreams:this.options["grpc.max_concurrent_streams"]});let a=(f,v)=>{process.nextTick(()=>r(f,v))},c=()=>{let f;if(t._isSecure()){let v=Object.assign(o,t._getSettings());v.enableTrace=this.options["grpc-node.tls_enable_trace"]===1,f=Rs.createSecureServer(v),f.on("secureConnection",w=>{w.on("error",S=>{this.trace("An incoming TLS connection closed with error: "+S.message)})})}else f=Rs.createServer(o);return f.setTimeout(0,Hne),this._setupHandlers(f),f},l=(f,v,w)=>f.length===0?Promise.resolve({port:v,count:w}):Promise.all(f.map(S=>{this.trace("Attempting to bind "+(0,dr.subchannelAddressToString)(S));let I;(0,dr.isTcpSubchannelAddress)(S)?I={host:S.host,port:v}:I=S;let D=c();return new Promise((M,P)=>{let G=W=>{this.trace("Failed to bind "+(0,dr.subchannelAddressToString)(S)+" with error "+W.message),M(W)};D.once("error",G),D.listen(I,()=>{if(this.shutdown){D.close(),M(new Error("bindAsync failed because server is shutdown"));return}let W=D.address(),_;typeof W=="string"?_={path:W}:_={host:W.address,port:W.port};let y=(0,pn.registerChannelzSocket)((0,dr.subchannelAddressToString)(_),()=>({localAddress:_,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled);this.channelzEnabled&&this.listenerChildrenTracker.refChild(y),this.http2ServerList.push({server:D,channelzRef:y}),this.trace("Successfully bound "+(0,dr.subchannelAddressToString)(_)),M("port"in _?_.port:v),D.removeListener("error",G)})})})).then(S=>{let I=0;for(let D of S)if(typeof D=="number"&&(I+=1,D!==v))throw new Error("Invalid state: multiple port numbers added from single address");return{port:v,count:I+w}}),u=f=>{if(f.length===0)return Promise.resolve({port:0,count:0});let v=f[0],w=c();return new Promise((S,I)=>{let D=M=>{this.trace("Failed to bind "+(0,dr.subchannelAddressToString)(v)+" with error "+M.message),S(u(f.slice(1)))};w.once("error",D),w.listen(v,()=>{if(this.shutdown){w.close(),S({port:0,count:0});return}let M=w.address(),P={host:M.address,port:M.port},G=(0,pn.registerChannelzSocket)((0,dr.subchannelAddressToString)(P),()=>({localAddress:P,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled);this.channelzEnabled&&this.listenerChildrenTracker.refChild(G),this.http2ServerList.push({server:w,channelzRef:G}),this.trace("Successfully bound "+(0,dr.subchannelAddressToString)(P)),S(l(f.slice(1),M.port,1)),w.removeListener("error",D)})})},d={onSuccessfulResolution:(f,v,w)=>{if(d.onSuccessfulResolution=()=>{},this.shutdown&&a(new Error("bindAsync failed because server is shutdown"),0),f.length===0){a(new Error(`No addresses resolved for port ${e}`),0);return}let S;(0,dr.isTcpSubchannelAddress)(f[0])?f[0].port===0?S=u(f):S=l(f,f[0].port,0):S=l(f,1,0),S.then(I=>{if(I.count===0){let D=`No address added out of total ${f.length} resolved`;wm.log(Si.LogVerbosity.ERROR,D),a(new Error(D),0)}else I.count<f.length&&wm.log(Si.LogVerbosity.INFO,`WARNING Only ${I.count} addresses added out of total ${f.length} resolved`),a(null,I.port)},I=>{let D=`No address added out of total ${f.length} resolved`;wm.log(Si.LogVerbosity.ERROR,D),a(new Error(D),0)})},onError:f=>{a(new Error(f.details),0)}};(0,x2.createResolver)(s,d,this.options).updateResolution()}forceShutdown(){for(let{server:e,channelzRef:t}of this.http2ServerList)e.listening&&e.close(()=>{this.channelzEnabled&&(this.listenerChildrenTracker.unrefChild(t),(0,pn.unregisterChannelzRef)(t))});this.started=!1,this.shutdown=!0,this.sessions.forEach((e,t)=>{t.destroy(Rs.constants.NGHTTP2_CANCEL)}),this.sessions.clear(),this.channelzEnabled&&(0,pn.unregisterChannelzRef)(this.channelzRef)}register(e,t,r,i,s){return this.handlers.has(e)?!1:(this.handlers.set(e,{func:t,serialize:r,deserialize:i,type:s,path:e}),!0)}unregister(e){return this.handlers.delete(e)}start(){if(this.http2ServerList.length===0||this.http2ServerList.every(({server:e})=>e.listening!==!0))throw new Error("server must be bound in order to start");if(this.started===!0)throw new Error("server is already started");this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Starting"),this.started=!0}tryShutdown(e){let t=s=>{this.channelzEnabled&&(0,pn.unregisterChannelzRef)(this.channelzRef),e(s)},r=0;function i(){r--,r===0&&t()}this.started=!1,this.shutdown=!0;for(let{server:s,channelzRef:o}of this.http2ServerList)s.listening&&(r++,s.close(()=>{this.channelzEnabled&&(this.listenerChildrenTracker.unrefChild(o),(0,pn.unregisterChannelzRef)(o)),i()}));this.sessions.forEach((s,o)=>{o.closed||(r+=1,o.close(i))}),r===0&&t()}addHttp2Port(){throw new Error("Not yet implemented")}getChannelzRef(){return this.channelzRef}_verifyContentType(e,t){let r=t[Rs.constants.HTTP2_HEADER_CONTENT_TYPE];return typeof r!="string"||!r.startsWith("application/grpc")?(e.respond({[Rs.constants.HTTP2_HEADER_STATUS]:Rs.constants.HTTP_STATUS_UNSUPPORTED_MEDIA_TYPE},{endStream:!0}),!1):!0}_retrieveHandler(e){this.trace("Received call to method "+e+" at address "+this.serverAddressString);let t=this.handlers.get(e);return t===void 0?(this.trace("No handler registered for method "+e+". Sending UNIMPLEMENTED status."),null):t}_respondWithError(e,t,r=null){let i=new Do.Http2ServerCallStream(t,null,this.options);e.code===void 0&&(e.code=Si.Status.INTERNAL),this.channelzEnabled&&(this.callTracker.addCallFailed(),r?.streamTracker.addCallFailed()),i.sendError(e)}_channelzHandler(e,t){let r=this.sessions.get(e.session);if(this.callTracker.addCallStarted(),r?.streamTracker.addCallStarted(),!this._verifyContentType(e,t)){this.callTracker.addCallFailed(),r?.streamTracker.addCallFailed();return}let i=t[P2],s=this._retrieveHandler(i);if(!s){this._respondWithError(uI(i),e,r);return}let o=new Do.Http2ServerCallStream(e,s,this.options);o.once("callEnd",a=>{a===Si.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}),r&&(o.once("streamEnd",a=>{a?r.streamTracker.addCallSucceeded():r.streamTracker.addCallFailed()}),o.on("sendMessage",()=>{r.messagesSent+=1,r.lastMessageSentTimestamp=new Date}),o.on("receiveMessage",()=>{r.messagesReceived+=1,r.lastMessageReceivedTimestamp=new Date})),this._runHandlerForCall(o,s,t)||(this.callTracker.addCallFailed(),r?.streamTracker.addCallFailed(),o.sendError({code:Si.Status.INTERNAL,details:`Unknown handler type: ${s.type}`}))}_streamHandler(e,t){if(this._verifyContentType(e,t)!==!0)return;let r=t[P2],i=this._retrieveHandler(r);if(!i){this._respondWithError(uI(r),e,null);return}let s=new Do.Http2ServerCallStream(e,i,this.options);this._runHandlerForCall(s,i,t)||s.sendError({code:Si.Status.INTERNAL,details:`Unknown handler type: ${i.type}`})}_runHandlerForCall(e,t,r){var i;let s=e.receiveMetadata(r),o=(i=s.get("grpc-encoding")[0])!==null&&i!==void 0?i:"identity";s.remove("grpc-encoding");let{type:a}=t;if(a==="unary")Wne(e,t,s,o);else if(a==="clientStream")Kne(e,t,s,o);else if(a==="serverStream")Qne(e,t,s,o);else if(a==="bidi")Yne(e,t,s,o);else return!1;return!0}_setupHandlers(e){if(e===null)return;let t=e.address(),r="null";t&&(typeof t=="string"?r=t:r=t.address+":"+t.port),this.serverAddressString=r;let i=this.channelzEnabled?this._channelzHandler:this._streamHandler;e.on("stream",i.bind(this)),e.on("session",s=>{var o,a,c,l,u;if(!this.started){s.destroy();return}let d=(0,pn.registerChannelzSocket)((o=s.socket.remoteAddress)!==null&&o!==void 0?o:"unknown",this.getChannelzSessionInfoGetter(s),this.channelzEnabled),h={ref:d,streamTracker:new pn.ChannelzCallTracker,messagesSent:0,messagesReceived:0,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null};this.sessions.set(s,h);let f=s.socket.remoteAddress;this.channelzEnabled&&(this.channelzTrace.addTrace("CT_INFO","Connection established by client "+f),this.sessionChildrenTracker.refChild(d));let v=null,w=null,S=!1;if(this.maxConnectionAgeMs!==Tm){let D=this.maxConnectionAgeMs/10,M=Math.random()*D*2-D;v=(c=(a=setTimeout(()=>{var P,G;S=!0,this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connection dropped by max connection age from "+f);try{s.goaway(Rs.constants.NGHTTP2_NO_ERROR,~(1<<31),Buffer.from("max_age"))}catch{s.destroy();return}s.close(),this.maxConnectionAgeGraceMs!==Tm&&(w=(G=(P=setTimeout(()=>{s.destroy()},this.maxConnectionAgeGraceMs)).unref)===null||G===void 0?void 0:G.call(P))},this.maxConnectionAgeMs+M)).unref)===null||c===void 0?void 0:c.call(a)}let I=(u=(l=setInterval(()=>{var D,M;let P=(M=(D=setTimeout(()=>{S=!0,this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connection dropped by keepalive timeout from "+f),s.close()},this.keepaliveTimeoutMs)).unref)===null||M===void 0?void 0:M.call(D);try{s.ping((G,W,_)=>{clearTimeout(P)})}catch{s.destroy()}},this.keepaliveTimeMs)).unref)===null||u===void 0?void 0:u.call(l);s.on("close",()=>{this.channelzEnabled&&(S||this.channelzTrace.addTrace("CT_INFO","Connection dropped by client "+f),this.sessionChildrenTracker.unrefChild(d),(0,pn.unregisterChannelzRef)(d)),v&&clearTimeout(v),w&&clearTimeout(w),I&&clearTimeout(I),this.sessions.delete(s)})})}};bm.Server=dI;function Wne(n,e,t,r){return T(this,null,function*(){try{let i=yield n.receiveUnaryMessage(r);if(i===void 0||n.cancelled)return;let s=new Do.ServerUnaryCallImpl(n,t,i);e.func(s,(o,a,c,l)=>{n.sendUnaryMessage(o,a,c,l)})}catch(i){n.sendError(i)}})}function Kne(n,e,t,r){let i=new Do.ServerReadableStreamImpl(n,t,e.deserialize,r);function s(o,a,c,l){i.destroy(),n.sendUnaryMessage(o,a,c,l)}n.cancelled||(i.on("error",s),e.func(i,s))}function Qne(n,e,t,r){return T(this,null,function*(){try{let i=yield n.receiveUnaryMessage(r);if(i===void 0||n.cancelled)return;let s=new Do.ServerWritableStreamImpl(n,t,e.serialize,i);e.func(s)}catch(i){n.sendError(i)}})}function Yne(n,e,t,r){let i=new Do.ServerDuplexStreamImpl(n,t,e.serialize,e.deserialize,r);n.cancelled||e.func(i)}});var F2=A(_m=>{"use strict";Object.defineProperty(_m,"__esModule",{value:!0});_m.StatusBuilder=void 0;var fI=class{constructor(){this.code=null,this.details=null,this.metadata=null}withCode(e){return this.code=e,this}withDetails(e){return this.details=e,this}withMetadata(e){return this.metadata=e,this}build(){let e={};return this.code!==null&&(e.code=this.code),this.details!==null&&(e.details=this.details),this.metadata!==null&&(e.metadata=this.metadata),e}};_m.StatusBuilder=fI});var hI=A(Ns=>{"use strict";Object.defineProperty(Ns,"__esModule",{value:!0});Ns.isDuration=Ns.durationToMs=Ns.msToDuration=void 0;function Zne(n){return{seconds:n/1e3|0,nanos:n%1e3*1e6|0}}Ns.msToDuration=Zne;function Jne(n){return n.seconds*1e3+n.nanos/1e6|0}Ns.durationToMs=Jne;function Xne(n){return typeof n.seconds=="number"&&typeof n.nanos=="number"}Ns.isDuration=Xne});var TI=A(Ms=>{"use strict";var pI;Object.defineProperty(Ms,"__esModule",{value:!0});Ms.setup=Ms.OutlierDetectionLoadBalancer=Ms.OutlierDetectionLoadBalancingConfig=void 0;var Cm=kn(),U2=Ae(),Ao=hI(),V2=bI(),j2=as(),ere=sg(),tre=ds(),B2=kr(),nre=hm(),rre=et(),ire="outlier_detection";function _t(n){rre.trace(U2.LogVerbosity.DEBUG,ire,n)}var wI="outlier_detection",sre=((pI=process.env.GRPC_EXPERIMENTAL_ENABLE_OUTLIER_DETECTION)!==null&&pI!==void 0?pI:"true")==="true",ore={stdev_factor:1900,enforcement_percentage:100,minimum_hosts:5,request_volume:100},are={threshold:85,enforcement_percentage:100,minimum_hosts:5,request_volume:50};function Bc(n,e,t,r){if(e in n&&typeof n[e]!==t){let i=r?`${r}.${e}`:e;throw new Error(`outlier detection config ${i} parse error: expected ${t}, got ${typeof n[e]}`)}}function gI(n,e,t){let r=t?`${t}.${e}`:e;if(e in n){if(!(0,Ao.isDuration)(n[e]))throw new Error(`outlier detection config ${r} parse error: expected Duration, got ${typeof n[e]}`);if(!(n[e].seconds>=0&&n[e].seconds<=315576e6&&n[e].nanos>=0&&n[e].nanos<=999999999))throw new Error(`outlier detection config ${r} parse error: values out of range for non-negative Duaration`)}}function Sm(n,e,t){let r=t?`${t}.${e}`:e;if(Bc(n,e,"number",t),e in n&&!(n[e]>=0&&n[e]<=100))throw new Error(`outlier detection config ${r} parse error: value out of range for percentage (0-100)`)}var bd=class n{constructor(e,t,r,i,s,o,a){if(this.childPolicy=a,a.length>0&&a[0].getLoadBalancerName()==="pick_first")throw new Error("outlier_detection LB policy cannot have a pick_first child policy");this.intervalMs=e??1e4,this.baseEjectionTimeMs=t??3e4,this.maxEjectionTimeMs=r??3e5,this.maxEjectionPercent=i??10,this.successRateEjection=s?Object.assign(Object.assign({},ore),s):null,this.failurePercentageEjection=o?Object.assign(Object.assign({},are),o):null}getLoadBalancerName(){return wI}toJsonObject(){return{interval:(0,Ao.msToDuration)(this.intervalMs),base_ejection_time:(0,Ao.msToDuration)(this.baseEjectionTimeMs),max_ejection_time:(0,Ao.msToDuration)(this.maxEjectionTimeMs),max_ejection_percent:this.maxEjectionPercent,success_rate_ejection:this.successRateEjection,failure_percentage_ejection:this.failurePercentageEjection,child_policy:this.childPolicy.map(e=>e.toJsonObject())}}getIntervalMs(){return this.intervalMs}getBaseEjectionTimeMs(){return this.baseEjectionTimeMs}getMaxEjectionTimeMs(){return this.maxEjectionTimeMs}getMaxEjectionPercent(){return this.maxEjectionPercent}getSuccessRateEjectionConfig(){return this.successRateEjection}getFailurePercentageEjectionConfig(){return this.failurePercentageEjection}getChildPolicy(){return this.childPolicy}copyWithChildPolicy(e){return new n(this.intervalMs,this.baseEjectionTimeMs,this.maxEjectionTimeMs,this.maxEjectionPercent,this.successRateEjection,this.failurePercentageEjection,e)}static createFromJson(e){var t;if(gI(e,"interval"),gI(e,"base_ejection_time"),gI(e,"max_ejection_time"),Sm(e,"max_ejection_percent"),"success_rate_ejection"in e){if(typeof e.success_rate_ejection!="object")throw new Error("outlier detection config success_rate_ejection must be an object");Bc(e.success_rate_ejection,"stdev_factor","number","success_rate_ejection"),Sm(e.success_rate_ejection,"enforcement_percentage","success_rate_ejection"),Bc(e.success_rate_ejection,"minimum_hosts","number","success_rate_ejection"),Bc(e.success_rate_ejection,"request_volume","number","success_rate_ejection")}if("failure_percentage_ejection"in e){if(typeof e.failure_percentage_ejection!="object")throw new Error("outlier detection config failure_percentage_ejection must be an object");Sm(e.failure_percentage_ejection,"threshold","failure_percentage_ejection"),Sm(e.failure_percentage_ejection,"enforcement_percentage","failure_percentage_ejection"),Bc(e.failure_percentage_ejection,"minimum_hosts","number","failure_percentage_ejection"),Bc(e.failure_percentage_ejection,"request_volume","number","failure_percentage_ejection")}return new n(e.interval?(0,Ao.durationToMs)(e.interval):null,e.base_ejection_time?(0,Ao.durationToMs)(e.base_ejection_time):null,e.max_ejection_time?(0,Ao.durationToMs)(e.max_ejection_time):null,(t=e.max_ejection_percent)!==null&&t!==void 0?t:null,e.success_rate_ejection,e.failure_percentage_ejection,e.child_policy.map(j2.validateLoadBalancingConfig))}};Ms.OutlierDetectionLoadBalancingConfig=bd;var yI=class extends nre.BaseSubchannelWrapper{constructor(e,t){super(e),this.mapEntry=t,this.stateListeners=[],this.ejected=!1,this.refCount=0,this.childSubchannelState=e.getConnectivityState(),e.addConnectivityStateListener((r,i,s,o)=>{if(this.childSubchannelState=s,!this.ejected)for(let a of this.stateListeners)a(this,i,s,o)})}getConnectivityState(){return this.ejected?Cm.ConnectivityState.TRANSIENT_FAILURE:this.childSubchannelState}addConnectivityStateListener(e){this.stateListeners.push(e)}removeConnectivityStateListener(e){let t=this.stateListeners.indexOf(e);t>-1&&this.stateListeners.splice(t,1)}ref(){this.child.ref(),this.refCount+=1}unref(){if(this.child.unref(),this.refCount-=1,this.refCount<=0&&this.mapEntry){let e=this.mapEntry.subchannelWrappers.indexOf(this);e>=0&&this.mapEntry.subchannelWrappers.splice(e,1)}}eject(){this.ejected=!0;for(let e of this.stateListeners)e(this,this.childSubchannelState,Cm.ConnectivityState.TRANSIENT_FAILURE,-1)}uneject(){this.ejected=!1;for(let e of this.stateListeners)e(this,Cm.ConnectivityState.TRANSIENT_FAILURE,this.childSubchannelState,-1)}getMapEntry(){return this.mapEntry}getWrappedSubchannel(){return this.child}};function mI(){return{success:0,failure:0}}var vI=class{constructor(){this.activeBucket=mI(),this.inactiveBucket=mI()}addSuccess(){this.activeBucket.success+=1}addFailure(){this.activeBucket.failure+=1}switchBuckets(){this.inactiveBucket=this.activeBucket,this.activeBucket=mI()}getLastSuccesses(){return this.inactiveBucket.success}getLastFailures(){return this.inactiveBucket.failure}},EI=class{constructor(e,t){this.wrappedPicker=e,this.countCalls=t}pick(e){let t=this.wrappedPicker.pick(e);if(t.pickResultType===tre.PickResultType.COMPLETE){let r=t.subchannel,i=r.getMapEntry();if(i){let s=t.onCallEnded;return this.countCalls&&(s=o=>{var a;o===U2.Status.OK?i.counter.addSuccess():i.counter.addFailure(),(a=t.onCallEnded)===null||a===void 0||a.call(t,o)}),Object.assign(Object.assign({},t),{subchannel:r.getWrappedSubchannel(),onCallEnded:s})}else return Object.assign(Object.assign({},t),{subchannel:r.getWrappedSubchannel()})}else return t}},Im=class{constructor(e){this.addressMap=new Map,this.latestConfig=null,this.timerStartTime=null,this.childBalancer=new ere.ChildLoadBalancerHandler((0,V2.createChildChannelControlHelper)(e,{createSubchannel:(t,r)=>{let i=e.createSubchannel(t,r),s=this.addressMap.get((0,B2.subchannelAddressToString)(t)),o=new yI(i,s);return s?.currentEjectionTimestamp!==null&&o.eject(),s?.subchannelWrappers.push(o),o},updateState:(t,r)=>{t===Cm.ConnectivityState.READY?e.updateState(t,new EI(r,this.isCountingEnabled())):e.updateState(t,r)}})),this.ejectionTimer=setInterval(()=>{},0),clearInterval(this.ejectionTimer)}isCountingEnabled(){return this.latestConfig!==null&&(this.latestConfig.getSuccessRateEjectionConfig()!==null||this.latestConfig.getFailurePercentageEjectionConfig()!==null)}getCurrentEjectionPercent(){let e=0;for(let t of this.addressMap.values())t.currentEjectionTimestamp!==null&&(e+=1);return e*100/this.addressMap.size}runSuccessRateCheck(e){if(!this.latestConfig)return;let t=this.latestConfig.getSuccessRateEjectionConfig();if(!t)return;_t("Running success rate check");let r=t.request_volume,i=0,s=[];for(let[d,h]of this.addressMap){let f=h.counter.getLastSuccesses(),v=h.counter.getLastFailures();_t("Stats for "+d+": successes="+f+" failures="+v+" targetRequestVolume="+r),f+v>=r&&(i+=1,s.push(f/(f+v)))}if(_t("Found "+i+" success rate candidates; currentEjectionPercent="+this.getCurrentEjectionPercent()+" successRates=["+s+"]"),i<t.minimum_hosts)return;let o=s.reduce((d,h)=>d+h)/s.length,a=0;for(let d of s){let h=d-o;a+=h*h}let c=a/s.length,l=Math.sqrt(c),u=o-l*(t.stdev_factor/1e3);_t("stdev="+l+" ejectionThreshold="+u);for(let[d,h]of this.addressMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;let f=h.counter.getLastSuccesses(),v=h.counter.getLastFailures();if(f+v<r)continue;let w=f/(f+v);if(_t("Checking candidate "+d+" successRate="+w),w<u){let S=Math.random()*100;_t("Candidate "+d+" randomNumber="+S+" enforcement_percentage="+t.enforcement_percentage),S<t.enforcement_percentage&&(_t("Ejecting candidate "+d),this.eject(h,e))}}}runFailurePercentageCheck(e){if(!this.latestConfig)return;let t=this.latestConfig.getFailurePercentageEjectionConfig();if(!t)return;_t("Running failure percentage check. threshold="+t.threshold+" request volume threshold="+t.request_volume);let r=0;for(let i of this.addressMap.values()){let s=i.counter.getLastSuccesses(),o=i.counter.getLastFailures();s+o>=t.request_volume&&(r+=1)}if(!(r<t.minimum_hosts))for(let[i,s]of this.addressMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;let o=s.counter.getLastSuccesses(),a=s.counter.getLastFailures();if(_t("Candidate successes="+o+" failures="+a),o+a<t.request_volume)continue;if(a*100/(a+o)>t.threshold){let l=Math.random()*100;_t("Candidate "+i+" randomNumber="+l+" enforcement_percentage="+t.enforcement_percentage),l<t.enforcement_percentage&&(_t("Ejecting candidate "+i),this.eject(s,e))}}}eject(e,t){e.currentEjectionTimestamp=new Date,e.ejectionTimeMultiplier+=1;for(let r of e.subchannelWrappers)r.eject()}uneject(e){e.currentEjectionTimestamp=null;for(let t of e.subchannelWrappers)t.uneject()}switchAllBuckets(){for(let e of this.addressMap.values())e.counter.switchBuckets()}startTimer(e){var t,r;this.ejectionTimer=setTimeout(()=>this.runChecks(),e),(r=(t=this.ejectionTimer).unref)===null||r===void 0||r.call(t)}runChecks(){let e=new Date;if(_t("Ejection timer running"),this.switchAllBuckets(),!!this.latestConfig){this.timerStartTime=e,this.startTimer(this.latestConfig.getIntervalMs()),this.runSuccessRateCheck(e),this.runFailurePercentageCheck(e);for(let[t,r]of this.addressMap.entries())if(r.currentEjectionTimestamp===null)r.ejectionTimeMultiplier>0&&(r.ejectionTimeMultiplier-=1);else{let i=this.latestConfig.getBaseEjectionTimeMs(),s=this.latestConfig.getMaxEjectionTimeMs(),o=new Date(r.currentEjectionTimestamp.getTime());o.setMilliseconds(o.getMilliseconds()+Math.min(i*r.ejectionTimeMultiplier,Math.max(i,s))),o<new Date&&(_t("Unejecting "+t),this.uneject(r))}}}updateAddressList(e,t,r){if(!(t instanceof bd))return;let i=new Set;for(let o of e)i.add((0,B2.subchannelAddressToString)(o));for(let o of i)this.addressMap.has(o)||(_t("Adding map entry for "+o),this.addressMap.set(o,{counter:new vI,currentEjectionTimestamp:null,ejectionTimeMultiplier:0,subchannelWrappers:[]}));for(let o of this.addressMap.keys())i.has(o)||(_t("Removing map entry for "+o),this.addressMap.delete(o));let s=(0,j2.getFirstUsableConfig)(t.getChildPolicy(),!0);if(this.childBalancer.updateAddressList(e,s,r),t.getSuccessRateEjectionConfig()||t.getFailurePercentageEjectionConfig())if(this.timerStartTime){_t("Previous timer existed. Replacing timer"),clearTimeout(this.ejectionTimer);let o=t.getIntervalMs()-(new Date().getTime()-this.timerStartTime.getTime());this.startTimer(o)}else _t("Starting new timer"),this.timerStartTime=new Date,this.startTimer(t.getIntervalMs()),this.switchAllBuckets();else{_t("Counting disabled. Cancelling timer."),this.timerStartTime=null,clearTimeout(this.ejectionTimer);for(let o of this.addressMap.values())this.uneject(o),o.ejectionTimeMultiplier=0}this.latestConfig=t}exitIdle(){this.childBalancer.exitIdle()}resetBackoff(){this.childBalancer.resetBackoff()}destroy(){clearTimeout(this.ejectionTimer),this.childBalancer.destroy()}getTypeName(){return wI}};Ms.OutlierDetectionLoadBalancer=Im;function cre(){sre&&(0,V2.registerLoadBalancerType)(wI,Im,bd)}Ms.setup=cre});var bI=A(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.OutlierDetectionLoadBalancingConfig=se.BaseSubchannelWrapper=se.registerAdminService=se.FilterStackFactory=se.BaseFilter=se.PickResultType=se.QueuePicker=se.UnavailablePicker=se.ChildLoadBalancerHandler=se.subchannelAddressToString=se.validateLoadBalancingConfig=se.getFirstUsableConfig=se.registerLoadBalancerType=se.createChildChannelControlHelper=se.BackoffTimeout=se.durationToMs=se.uriToString=se.createResolver=se.registerResolver=se.log=se.trace=void 0;var q2=et();Object.defineProperty(se,"trace",{enumerable:!0,get:function(){return q2.trace}});Object.defineProperty(se,"log",{enumerable:!0,get:function(){return q2.log}});var $2=Mr();Object.defineProperty(se,"registerResolver",{enumerable:!0,get:function(){return $2.registerResolver}});Object.defineProperty(se,"createResolver",{enumerable:!0,get:function(){return $2.createResolver}});var lre=Sn();Object.defineProperty(se,"uriToString",{enumerable:!0,get:function(){return lre.uriToString}});var ure=hI();Object.defineProperty(se,"durationToMs",{enumerable:!0,get:function(){return ure.durationToMs}});var dre=$u();Object.defineProperty(se,"BackoffTimeout",{enumerable:!0,get:function(){return dre.BackoffTimeout}});var Dm=as();Object.defineProperty(se,"createChildChannelControlHelper",{enumerable:!0,get:function(){return Dm.createChildChannelControlHelper}});Object.defineProperty(se,"registerLoadBalancerType",{enumerable:!0,get:function(){return Dm.registerLoadBalancerType}});Object.defineProperty(se,"getFirstUsableConfig",{enumerable:!0,get:function(){return Dm.getFirstUsableConfig}});Object.defineProperty(se,"validateLoadBalancingConfig",{enumerable:!0,get:function(){return Dm.validateLoadBalancingConfig}});var fre=kr();Object.defineProperty(se,"subchannelAddressToString",{enumerable:!0,get:function(){return fre.subchannelAddressToString}});var hre=sg();Object.defineProperty(se,"ChildLoadBalancerHandler",{enumerable:!0,get:function(){return hre.ChildLoadBalancerHandler}});var _I=ds();Object.defineProperty(se,"UnavailablePicker",{enumerable:!0,get:function(){return _I.UnavailablePicker}});Object.defineProperty(se,"QueuePicker",{enumerable:!0,get:function(){return _I.QueuePicker}});Object.defineProperty(se,"PickResultType",{enumerable:!0,get:function(){return _I.PickResultType}});var pre=BC();Object.defineProperty(se,"BaseFilter",{enumerable:!0,get:function(){return pre.BaseFilter}});var gre=PC();Object.defineProperty(se,"FilterStackFactory",{enumerable:!0,get:function(){return gre.FilterStackFactory}});var mre=ag();Object.defineProperty(se,"registerAdminService",{enumerable:!0,get:function(){return mre.registerAdminService}});var yre=hm();Object.defineProperty(se,"BaseSubchannelWrapper",{enumerable:!0,get:function(){return yre.BaseSubchannelWrapper}});var vre=TI();Object.defineProperty(se,"OutlierDetectionLoadBalancingConfig",{enumerable:!0,get:function(){return vre.OutlierDetectionLoadBalancingConfig}})});var z2=A(Am=>{"use strict";Object.defineProperty(Am,"__esModule",{value:!0});Am.setup=void 0;var Ere=Mr(),SI=class{constructor(e,t,r){this.listener=t,this.addresses=[],this.hasReturnedResult=!1;let i;e.authority===""?i="/"+e.path:i=e.path,this.addresses=[{path:i}]}updateResolution(){this.hasReturnedResult||(this.hasReturnedResult=!0,process.nextTick(this.listener.onSuccessfulResolution,this.addresses,null,null,null,{}))}destroy(){}static getDefaultAuthority(e){return"localhost"}};function wre(){(0,Ere.registerResolver)("unix",SI)}Am.setup=wre});var Q2=A(Mm=>{"use strict";Object.defineProperty(Mm,"__esModule",{value:!0});Mm.setup=void 0;var H2=Me("net"),Rm=Ae(),CI=dn(),G2=Mr(),W2=Sn(),Tre=et(),bre="ip_resolver";function K2(n){Tre.trace(Rm.LogVerbosity.DEBUG,bre,n)}var II="ipv4",DI="ipv6",_re=443,Nm=class{constructor(e,t,r){var i;this.listener=t,this.addresses=[],this.error=null,this.hasReturnedResult=!1,K2("Resolver constructed for target "+(0,W2.uriToString)(e));let s=[];if(!(e.scheme===II||e.scheme===DI)){this.error={code:Rm.Status.UNAVAILABLE,details:`Unrecognized scheme ${e.scheme} in IP resolver`,metadata:new CI.Metadata};return}let o=e.path.split(",");for(let a of o){let c=(0,W2.splitHostPort)(a);if(c===null){this.error={code:Rm.Status.UNAVAILABLE,details:`Failed to parse ${e.scheme} address ${a}`,metadata:new CI.Metadata};return}if(e.scheme===II&&!(0,H2.isIPv4)(c.host)||e.scheme===DI&&!(0,H2.isIPv6)(c.host)){this.error={code:Rm.Status.UNAVAILABLE,details:`Failed to parse ${e.scheme} address ${a}`,metadata:new CI.Metadata};return}s.push({host:c.host,port:(i=c.port)!==null&&i!==void 0?i:_re})}this.addresses=s,K2("Parsed "+e.scheme+" address list "+this.addresses)}updateResolution(){this.hasReturnedResult||(this.hasReturnedResult=!0,process.nextTick(()=>{this.error?this.listener.onError(this.error):this.listener.onSuccessfulResolution(this.addresses,null,null,null,{})}))}destroy(){this.hasReturnedResult=!1}static getDefaultAuthority(e){return e.path.split(",")[0]}};function Sre(){(0,G2.registerResolver)(II,Nm),(0,G2.registerResolver)(DI,Nm)}Mm.setup=Sre});var J2=A(Gr=>{"use strict";Object.defineProperty(Gr,"__esModule",{value:!0});Gr.setup=Gr.PickFirstLoadBalancer=Gr.shuffled=Gr.PickFirstLoadBalancingConfig=void 0;var Y2=as(),zt=kn(),Om=ds(),Cre=et(),Ire=Ae(),Dre="pick_first";function AI(n){Cre.trace(Ire.LogVerbosity.DEBUG,Dre,n)}var _d="pick_first",Are=250,Sd=class n{constructor(e){this.shuffleAddressList=e}getLoadBalancerName(){return _d}toJsonObject(){return{[_d]:{shuffleAddressList:this.shuffleAddressList}}}getShuffleAddressList(){return this.shuffleAddressList}static createFromJson(e){if("shuffleAddressList"in e&&typeof e.shuffleAddressList!="boolean")throw new Error("pick_first config field shuffleAddressList must be a boolean if provided");return new n(e.shuffleAddressList===!0)}};Gr.PickFirstLoadBalancingConfig=Sd;var RI=class{constructor(e){this.subchannel=e}pick(e){return{pickResultType:Om.PickResultType.COMPLETE,subchannel:this.subchannel,status:null,onCallStarted:null,onCallEnded:null}}};function Z2(n){let e=n.slice();for(let t=e.length-1;t>1;t--){let r=Math.floor(Math.random()*(t+1)),i=e[t];e[t]=e[r],e[r]=i}return e}Gr.shuffled=Z2;var km=class{constructor(e){this.channelControlHelper=e,this.children=[],this.currentState=zt.ConnectivityState.IDLE,this.currentSubchannelIndex=0,this.currentPick=null,this.subchannelStateListener=(t,r,i,s,o)=>{this.onSubchannelStateUpdate(t,r,i,o)},this.triedAllSubchannels=!1,this.stickyTransientFailureMode=!1,this.requestedResolutionSinceLastUpdate=!1,this.lastError=null,this.latestAddressList=null,this.connectionDelayTimeout=setTimeout(()=>{},0),clearTimeout(this.connectionDelayTimeout)}allChildrenHaveReportedTF(){return this.children.every(e=>e.hasReportedTransientFailure)}calculateAndReportNewState(){this.currentPick?this.updateState(zt.ConnectivityState.READY,new RI(this.currentPick)):this.children.length===0?this.updateState(zt.ConnectivityState.IDLE,new Om.QueuePicker(this)):this.stickyTransientFailureMode?this.updateState(zt.ConnectivityState.TRANSIENT_FAILURE,new Om.UnavailablePicker({details:`No connection established. Last error: ${this.lastError}`})):this.updateState(zt.ConnectivityState.CONNECTING,new Om.QueuePicker(this))}requestReresolution(){this.requestedResolutionSinceLastUpdate=!0,this.channelControlHelper.requestReresolution()}maybeEnterStickyTransientFailureMode(){if(this.allChildrenHaveReportedTF()&&(this.requestedResolutionSinceLastUpdate||this.requestReresolution(),!this.stickyTransientFailureMode)){this.stickyTransientFailureMode=!0;for(let{subchannel:e}of this.children)e.startConnecting();this.calculateAndReportNewState()}}removeCurrentPick(){if(this.currentPick!==null){let e=this.currentPick;this.currentPick=null,e.unref(),e.removeConnectivityStateListener(this.subchannelStateListener),this.channelControlHelper.removeChannelzChild(e.getChannelzRef())}}onSubchannelStateUpdate(e,t,r,i){var s;if(!((s=this.currentPick)===null||s===void 0)&&s.realSubchannelEquals(e)){r!==zt.ConnectivityState.READY&&(this.removeCurrentPick(),this.calculateAndReportNewState(),this.requestReresolution());return}for(let[o,a]of this.children.entries())if(e.realSubchannelEquals(a.subchannel)){r===zt.ConnectivityState.READY&&this.pickSubchannel(a.subchannel),r===zt.ConnectivityState.TRANSIENT_FAILURE&&(a.hasReportedTransientFailure=!0,i&&(this.lastError=i),this.maybeEnterStickyTransientFailureMode(),o===this.currentSubchannelIndex&&this.startNextSubchannelConnecting(o+1)),a.subchannel.startConnecting();return}}startNextSubchannelConnecting(e){if(clearTimeout(this.connectionDelayTimeout),!this.triedAllSubchannels){for(let[t,r]of this.children.entries())if(t>=e){let i=r.subchannel.getConnectivityState();if(i===zt.ConnectivityState.IDLE||i===zt.ConnectivityState.CONNECTING){this.startConnecting(t);return}}this.triedAllSubchannels=!0,this.maybeEnterStickyTransientFailureMode()}}startConnecting(e){var t,r;clearTimeout(this.connectionDelayTimeout),this.currentSubchannelIndex=e,this.children[e].subchannel.getConnectivityState()===zt.ConnectivityState.IDLE&&(AI("Start connecting to subchannel with address "+this.children[e].subchannel.getAddress()),process.nextTick(()=>{var i;(i=this.children[e])===null||i===void 0||i.subchannel.startConnecting()})),this.connectionDelayTimeout=(r=(t=setTimeout(()=>{this.startNextSubchannelConnecting(e+1)},Are)).unref)===null||r===void 0?void 0:r.call(t)}pickSubchannel(e){this.currentPick&&e.realSubchannelEquals(this.currentPick)||(AI("Pick subchannel with address "+e.getAddress()),this.stickyTransientFailureMode=!1,this.currentPick!==null&&(this.currentPick.unref(),this.channelControlHelper.removeChannelzChild(this.currentPick.getChannelzRef()),this.currentPick.removeConnectivityStateListener(this.subchannelStateListener)),this.currentPick=e,e.ref(),this.channelControlHelper.addChannelzChild(e.getChannelzRef()),this.resetSubchannelList(),clearTimeout(this.connectionDelayTimeout),this.calculateAndReportNewState())}updateState(e,t){AI(zt.ConnectivityState[this.currentState]+" -> "+zt.ConnectivityState[e]),this.currentState=e,this.channelControlHelper.updateState(e,t)}resetSubchannelList(){for(let e of this.children)this.currentPick&&e.subchannel.realSubchannelEquals(this.currentPick)||e.subchannel.removeConnectivityStateListener(this.subchannelStateListener),e.subchannel.unref(),this.channelControlHelper.removeChannelzChild(e.subchannel.getChannelzRef());this.currentSubchannelIndex=0,this.children=[],this.triedAllSubchannels=!1,this.requestedResolutionSinceLastUpdate=!1}connectToAddressList(e){let t=e.map(r=>({subchannel:this.channelControlHelper.createSubchannel(r,{}),hasReportedTransientFailure:!1}));for(let{subchannel:r}of t)r.ref(),this.channelControlHelper.addChannelzChild(r.getChannelzRef());this.resetSubchannelList(),this.children=t;for(let{subchannel:r}of this.children)if(r.addConnectivityStateListener(this.subchannelStateListener),r.getConnectivityState()===zt.ConnectivityState.READY){this.pickSubchannel(r);return}for(let r of this.children)r.subchannel.getConnectivityState()===zt.ConnectivityState.TRANSIENT_FAILURE&&(r.hasReportedTransientFailure=!0);this.startNextSubchannelConnecting(0),this.calculateAndReportNewState()}updateAddressList(e,t){t instanceof Sd&&(t.getShuffleAddressList()&&(e=Z2(e)),this.latestAddressList=e,this.connectToAddressList(e))}exitIdle(){this.currentState===zt.ConnectivityState.IDLE&&this.latestAddressList&&this.connectToAddressList(this.latestAddressList)}resetBackoff(){}destroy(){this.resetSubchannelList(),this.removeCurrentPick()}getTypeName(){return _d}};Gr.PickFirstLoadBalancer=km;function Rre(){(0,Y2.registerLoadBalancerType)(_d,km,Sd),(0,Y2.registerDefaultLoadBalancerType)(_d)}Gr.setup=Rre});var eU=A(Uc=>{"use strict";Object.defineProperty(Uc,"__esModule",{value:!0});Uc.setup=Uc.RoundRobinLoadBalancer=void 0;var Nre=as(),Ht=kn(),xm=ds(),Mre=kr(),Ore=et(),kre=Ae(),xre="round_robin";function X2(n){Ore.trace(kre.LogVerbosity.DEBUG,xre,n)}var Pm="round_robin",NI=class n{getLoadBalancerName(){return Pm}constructor(){}toJsonObject(){return{[Pm]:{}}}static createFromJson(e){return new n}},MI=class{constructor(e,t=0){this.subchannelList=e,this.nextIndex=t}pick(e){let t=this.subchannelList[this.nextIndex];return this.nextIndex=(this.nextIndex+1)%this.subchannelList.length,{pickResultType:xm.PickResultType.COMPLETE,subchannel:t,status:null,onCallStarted:null,onCallEnded:null}}peekNextSubchannel(){return this.subchannelList[this.nextIndex]}},Lm=class{constructor(e){this.channelControlHelper=e,this.subchannels=[],this.currentState=Ht.ConnectivityState.IDLE,this.currentReadyPicker=null,this.lastError=null,this.subchannelStateListener=(t,r,i,s,o)=>{this.calculateAndUpdateState(),(i===Ht.ConnectivityState.TRANSIENT_FAILURE||i===Ht.ConnectivityState.IDLE)&&(o&&(this.lastError=o),this.channelControlHelper.requestReresolution(),t.startConnecting())}}countSubchannelsWithState(e){return this.subchannels.filter(t=>t.getConnectivityState()===e).length}calculateAndUpdateState(){if(this.countSubchannelsWithState(Ht.ConnectivityState.READY)>0){let e=this.subchannels.filter(r=>r.getConnectivityState()===Ht.ConnectivityState.READY),t=0;this.currentReadyPicker!==null&&(t=e.indexOf(this.currentReadyPicker.peekNextSubchannel()),t<0&&(t=0)),this.updateState(Ht.ConnectivityState.READY,new MI(e,t))}else this.countSubchannelsWithState(Ht.ConnectivityState.CONNECTING)>0?this.updateState(Ht.ConnectivityState.CONNECTING,new xm.QueuePicker(this)):this.countSubchannelsWithState(Ht.ConnectivityState.TRANSIENT_FAILURE)>0?this.updateState(Ht.ConnectivityState.TRANSIENT_FAILURE,new xm.UnavailablePicker({details:`No connection established. Last error: ${this.lastError}`})):this.updateState(Ht.ConnectivityState.IDLE,new xm.QueuePicker(this))}updateState(e,t){X2(Ht.ConnectivityState[this.currentState]+" -> "+Ht.ConnectivityState[e]),e===Ht.ConnectivityState.READY?this.currentReadyPicker=t:this.currentReadyPicker=null,this.currentState=e,this.channelControlHelper.updateState(e,t)}resetSubchannelList(){for(let e of this.subchannels)e.removeConnectivityStateListener(this.subchannelStateListener),e.unref(),this.channelControlHelper.removeChannelzChild(e.getChannelzRef());this.subchannels=[]}updateAddressList(e,t){this.resetSubchannelList(),X2("Connect to address list "+e.map(r=>(0,Mre.subchannelAddressToString)(r))),this.subchannels=e.map(r=>this.channelControlHelper.createSubchannel(r,{}));for(let r of this.subchannels){r.ref(),r.addConnectivityStateListener(this.subchannelStateListener),this.channelControlHelper.addChannelzChild(r.getChannelzRef());let i=r.getConnectivityState();(i===Ht.ConnectivityState.IDLE||i===Ht.ConnectivityState.TRANSIENT_FAILURE)&&r.startConnecting()}this.calculateAndUpdateState()}exitIdle(){for(let e of this.subchannels)e.startConnecting()}resetBackoff(){}destroy(){this.resetSubchannelList()}getTypeName(){return Pm}};Uc.RoundRobinLoadBalancer=Lm;function Pre(){(0,Nre.registerLoadBalancerType)(Pm,Lm,NI)}Uc.setup=Pre});var iU=A(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});j.experimental=j.addAdminServicesToServer=j.getChannelzHandlers=j.getChannelzServiceDefinition=j.InterceptorConfigurationError=j.InterceptingCall=j.RequesterBuilder=j.ListenerBuilder=j.StatusBuilder=j.getClientChannel=j.ServerCredentials=j.Server=j.setLogVerbosity=j.setLogger=j.load=j.loadObject=j.CallCredentials=j.ChannelCredentials=j.waitForClientReady=j.closeClient=j.Channel=j.makeGenericClientConstructor=j.makeClientConstructor=j.loadPackageDefinition=j.Client=j.compressionAlgorithms=j.propagate=j.connectivityState=j.status=j.logVerbosity=j.Metadata=j.credentials=void 0;var Fm=D_();Object.defineProperty(j,"CallCredentials",{enumerable:!0,get:function(){return Fm.CallCredentials}});var Lre=sS();Object.defineProperty(j,"Channel",{enumerable:!0,get:function(){return Lre.ChannelImplementation}});var Fre=LC();Object.defineProperty(j,"compressionAlgorithms",{enumerable:!0,get:function(){return Fre.CompressionAlgorithms}});var Bre=kn();Object.defineProperty(j,"connectivityState",{enumerable:!0,get:function(){return Bre.ConnectivityState}});var Bm=Jp();Object.defineProperty(j,"ChannelCredentials",{enumerable:!0,get:function(){return Bm.ChannelCredentials}});var tU=iS();Object.defineProperty(j,"Client",{enumerable:!0,get:function(){return tU.Client}});var OI=Ae();Object.defineProperty(j,"logVerbosity",{enumerable:!0,get:function(){return OI.LogVerbosity}});Object.defineProperty(j,"status",{enumerable:!0,get:function(){return OI.Status}});Object.defineProperty(j,"propagate",{enumerable:!0,get:function(){return OI.Propagate}});var nU=et(),kI=aS();Object.defineProperty(j,"loadPackageDefinition",{enumerable:!0,get:function(){return kI.loadPackageDefinition}});Object.defineProperty(j,"makeClientConstructor",{enumerable:!0,get:function(){return kI.makeClientConstructor}});Object.defineProperty(j,"makeGenericClientConstructor",{enumerable:!0,get:function(){return kI.makeClientConstructor}});var Ure=dn();Object.defineProperty(j,"Metadata",{enumerable:!0,get:function(){return Ure.Metadata}});var Vre=L2();Object.defineProperty(j,"Server",{enumerable:!0,get:function(){return Vre.Server}});var jre=lI();Object.defineProperty(j,"ServerCredentials",{enumerable:!0,get:function(){return jre.ServerCredentials}});var qre=F2();Object.defineProperty(j,"StatusBuilder",{enumerable:!0,get:function(){return qre.StatusBuilder}});j.credentials={combineChannelCredentials:(n,...e)=>e.reduce((t,r)=>t.compose(r),n),combineCallCredentials:(n,...e)=>e.reduce((t,r)=>t.compose(r),n),createInsecure:Bm.ChannelCredentials.createInsecure,createSsl:Bm.ChannelCredentials.createSsl,createFromSecureContext:Bm.ChannelCredentials.createFromSecureContext,createFromMetadataGenerator:Fm.CallCredentials.createFromMetadataGenerator,createFromGoogleCredential:Fm.CallCredentials.createFromGoogleCredential,createEmpty:Fm.CallCredentials.createEmpty};var $re=n=>n.close();j.closeClient=$re;var zre=(n,e,t)=>n.waitForReady(e,t);j.waitForClientReady=zre;var Hre=(n,e)=>{throw new Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")};j.loadObject=Hre;var Gre=(n,e,t)=>{throw new Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")};j.load=Gre;var Wre=n=>{nU.setLogger(n)};j.setLogger=Wre;var Kre=n=>{nU.setLoggerVerbosity(n)};j.setLogVerbosity=Kre;var Qre=n=>tU.Client.prototype.getChannel.call(n);j.getClientChannel=Qre;var Um=tS();Object.defineProperty(j,"ListenerBuilder",{enumerable:!0,get:function(){return Um.ListenerBuilder}});Object.defineProperty(j,"RequesterBuilder",{enumerable:!0,get:function(){return Um.RequesterBuilder}});Object.defineProperty(j,"InterceptingCall",{enumerable:!0,get:function(){return Um.InterceptingCall}});Object.defineProperty(j,"InterceptorConfigurationError",{enumerable:!0,get:function(){return Um.InterceptorConfigurationError}});var rU=Co();Object.defineProperty(j,"getChannelzServiceDefinition",{enumerable:!0,get:function(){return rU.getChannelzServiceDefinition}});Object.defineProperty(j,"getChannelzHandlers",{enumerable:!0,get:function(){return rU.getChannelzHandlers}});var Yre=ag();Object.defineProperty(j,"addAdminServicesToServer",{enumerable:!0,get:function(){return Yre.addAdminServicesToServer}});var Zre=bI();j.experimental=Zre;var Jre=_C(),Xre=z2(),eie=Q2(),tie=J2(),nie=eU(),rie=TI(),iie=Co();Jre.setup(),Xre.setup(),eie.setup(),tie.setup(),nie.setup(),rie.setup(),iie.setup()});function ae(n){return typeof n=="function"}function Ho(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Jd=Ho(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Fs(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Je=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ae(r))try{r()}catch(s){e=s instanceof Jd?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Z0(s)}catch(o){e=e??[],o instanceof Jd?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Jd(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Z0(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Fs(t,e)}remove(e){let{_finalizers:t}=this;t&&Fs(t,e),e instanceof n&&e._removeParent(this)}};Je.EMPTY=(()=>{let n=new Je;return n.closed=!0,n})();var Uy=Je.EMPTY;function Xd(n){return n instanceof Je||n&&"closed"in n&&ae(n.remove)&&ae(n.add)&&ae(n.unsubscribe)}function Z0(n){ae(n)?n():n.unsubscribe()}var Hn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Go={setTimeout(n,e,...t){let{delegate:r}=Go;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Go;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ef(n){Go.setTimeout(()=>{let{onUnhandledError:e}=Hn;if(e)e(n);else throw n})}function ll(){}var J0=Vy("C",void 0,void 0);function X0(n){return Vy("E",void 0,n)}function eA(n){return Vy("N",n,void 0)}function Vy(n,e,t){return{kind:n,value:e,error:t}}var Bs=null;function Wo(n){if(Hn.useDeprecatedSynchronousErrorHandling){let e=!Bs;if(e&&(Bs={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Bs;if(Bs=null,t)throw r}}else n()}function tA(n){Hn.useDeprecatedSynchronousErrorHandling&&Bs&&(Bs.errorThrown=!0,Bs.error=n)}var Us=class extends Je{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Xd(e)&&e.add(this)):this.destination=Uj}static create(e,t,r){return new Gn(e,t,r)}next(e){this.isStopped?qy(eA(e),this):this._next(e)}error(e){this.isStopped?qy(X0(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?qy(J0,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Fj=Function.prototype.bind;function jy(n,e){return Fj.call(n,e)}var $y=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){tf(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){tf(r)}else tf(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){tf(t)}}},Gn=class extends Us{constructor(e,t,r){super();let i;if(ae(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Hn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&jy(e.next,s),error:e.error&&jy(e.error,s),complete:e.complete&&jy(e.complete,s)}):i=e}this.destination=new $y(i)}};function tf(n){Hn.useDeprecatedSynchronousErrorHandling?tA(n):ef(n)}function Bj(n){throw n}function qy(n,e){let{onStoppedNotification:t}=Hn;t&&Go.setTimeout(()=>t(n,e))}var Uj={closed:!0,next:ll,error:Bj,complete:ll};var Ko=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Qt(n){return n}function nf(...n){return zy(n)}function zy(n){return n.length===0?Qt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ue=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=jj(t)?t:new Gn(t,r,i);return Wo(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=nA(r),new r((i,s)=>{let o=new Gn({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Ko](){return this}pipe(...t){return zy(t)(this)}toPromise(t){return t=nA(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function nA(n){var e;return(e=n??Hn.Promise)!==null&&e!==void 0?e:Promise}function Vj(n){return n&&ae(n.next)&&ae(n.error)&&ae(n.complete)}function jj(n){return n&&n instanceof Us||Vj(n)&&Xd(n)}var rA=Ho(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var rt=(()=>{class n extends ue{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new rf(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new rA}next(t){Wo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Wo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Wo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Uy:(this.currentObservers=null,s.push(t),new Je(()=>{this.currentObservers=null,Fs(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new ue;return t.source=this,t}}return n.create=(e,t)=>new rf(e,t),n})(),rf=class extends rt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Uy}};var At=class extends rt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Wn=Ho(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function qj(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let s=new Gn({next:o=>{r(o),s.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new Wn)}});n.subscribe(s)})}function Hy(n){return ae(n?.lift)}function ne(n){return e=>{if(Hy(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ee(n,e,t,r,i){return new Gy(n,e,t,r,i)}var Gy=class extends Us{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function de(n,e){return ne((t,r)=>{let i=0;t.subscribe(ee(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:$j}=Array,{getPrototypeOf:zj,prototype:Hj,keys:Gj}=Object;function sf(n){if(n.length===1){let e=n[0];if($j(e))return{args:e,keys:null};if(Wj(e)){let t=Gj(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function Wj(n){return n&&typeof n=="object"&&zj(n)===Hj}function of(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function sA(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function iA(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Vs(n){return this instanceof Vs?(this.v=n,this):new Vs(n)}function oA(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(f){return function(v){return Promise.resolve(v).then(f,d)}}function a(f,v){r[f]&&(i[f]=function(w){return new Promise(function(S,I){s.push([f,w,S,I])>1||c(f,w)})},v&&(i[f]=v(i[f])))}function c(f,v){try{l(r[f](v))}catch(w){h(s[0][3],w)}}function l(f){f.value instanceof Vs?Promise.resolve(f.value.v).then(u,d):h(s[0][2],f)}function u(f){c("next",f)}function d(f){c("throw",f)}function h(f,v){f(v),s.shift(),s.length&&c(s[0][0],s[0][1])}}function aA(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof iA=="function"?iA(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var af=n=>n&&typeof n.length=="number"&&typeof n!="function";function cf(n){return ae(n?.then)}function lf(n){return ae(n[Ko])}function uf(n){return Symbol.asyncIterator&&ae(n?.[Symbol.asyncIterator])}function df(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Kj(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ff=Kj();function hf(n){return ae(n?.[ff])}function pf(n){return oA(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Vs(t.read());if(i)return yield Vs(void 0);yield yield Vs(r)}}finally{t.releaseLock()}})}function gf(n){return ae(n?.getReader)}function Le(n){if(n instanceof ue)return n;if(n!=null){if(lf(n))return Qj(n);if(af(n))return Yj(n);if(cf(n))return Zj(n);if(uf(n))return cA(n);if(hf(n))return Jj(n);if(gf(n))return Xj(n)}throw df(n)}function Qj(n){return new ue(e=>{let t=n[Ko]();if(ae(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Yj(n){return new ue(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Zj(n){return new ue(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ef)})}function Jj(n){return new ue(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function cA(n){return new ue(e=>{eq(n,e).catch(t=>e.error(t))})}function Xj(n){return cA(pf(n))}function eq(n,e){var t,r,i,s;return sA(this,void 0,void 0,function*(){try{for(t=aA(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function rn(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Oi(n,e=0){return ne((t,r)=>{t.subscribe(ee(r,i=>rn(r,n,()=>r.next(i),e),()=>rn(r,n,()=>r.complete(),e),i=>rn(r,n,()=>r.error(i),e)))})}function ki(n,e=0){return ne((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function lA(n,e){return Le(n).pipe(ki(e),Oi(e))}function uA(n,e){return Le(n).pipe(ki(e),Oi(e))}function dA(n,e){return new ue(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function fA(n,e){return new ue(t=>{let r;return rn(t,e,()=>{r=n[ff](),rn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>ae(r?.return)&&r.return()})}function mf(n,e){if(!n)throw new Error("Iterable cannot be null");return new ue(t=>{rn(t,e,()=>{let r=n[Symbol.asyncIterator]();rn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function hA(n,e){return mf(pf(n),e)}function pA(n,e){if(n!=null){if(lf(n))return lA(n,e);if(af(n))return dA(n,e);if(cf(n))return uA(n,e);if(uf(n))return mf(n,e);if(hf(n))return fA(n,e);if(gf(n))return hA(n,e)}throw df(n)}function He(n,e){return e?pA(n,e):Le(n)}var{isArray:tq}=Array;function nq(n,e){return tq(e)?n(...e):n(e)}function yf(n){return de(e=>nq(n,e))}function vf(n){return n&&ae(n.schedule)}function Wy(n){return n[n.length-1]}function Ef(n){return ae(Wy(n))?n.pop():void 0}function vr(n){return vf(Wy(n))?n.pop():void 0}function gA(n,e){return typeof Wy(n)=="number"?n.pop():e}function wf(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Tf(...n){let e=vr(n),t=Ef(n),{args:r,keys:i}=sf(n);if(r.length===0)return He([],e);let s=new ue(rq(r,e,i?o=>wf(i,o):Qt));return t?s.pipe(yf(t)):s}function rq(n,e,t=Qt){return r=>{mA(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)mA(e,()=>{let l=He(n[c],e),u=!1;l.subscribe(ee(r,d=>{s[c]=d,u||(u=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function mA(n,e,t){n?rn(t,n,e):e()}function yA(n,e,t,r,i,s,o,a){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&e.complete()},f=w=>l<r?v(w):c.push(w),v=w=>{s&&e.next(w),l++;let S=!1;Le(t(w,u++)).subscribe(ee(e,I=>{i?.(I),s?f(I):e.next(I)},()=>{S=!0},void 0,()=>{if(S)try{for(l--;c.length&&l<r;){let I=c.shift();o?rn(e,o,()=>v(I)):v(I)}h()}catch(I){e.error(I)}}))};return n.subscribe(ee(e,f,()=>{d=!0,h()})),()=>{a?.()}}function ht(n,e,t=1/0){return ae(e)?ht((r,i)=>de((s,o)=>e(r,s,i,o))(Le(n(r,i))),t):(typeof e=="number"&&(t=e),ne((r,i)=>yA(r,i,n,t)))}function ul(n=1/0){return ht(Qt,n)}function vA(){return ul(1)}function Qo(...n){return vA()(He(n,vr(n)))}function dl(...n){let e=vr(n);return ne((t,r)=>{(e?Qo(n,t,e):Qo(n,t)).subscribe(r)})}function Yo(){return ne((n,e)=>{let t=null;n._refCount++;let r=ee(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Zo=class extends ue{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Hy(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Je;let t=this.getSubject();e.add(this.source.subscribe(ee(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Je.EMPTY)}return e}refCount(){return Yo()(this)}};var fl={now(){return(fl.delegate||Date).now()},delegate:void 0};var hl=class extends rt{constructor(e=1/0,t=1/0,r=fl){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}};var bf=class extends Je{constructor(e,t){super()}schedule(e,t=0){return this}};var pl={setInterval(n,e,...t){let{delegate:r}=pl;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=pl;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Jo=class extends bf{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return pl.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&pl.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Fs(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Xo=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Xo.now=fl.now;var ea=class extends Xo{constructor(e,t=Xo.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var xi=new ea(Jo),Ky=xi;var _f=class extends Jo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Sf=class extends ea{};var Qy=new Sf(_f);var Pt=new ue(n=>n.complete());function re(...n){let e=vr(n);return He(n,e)}function ta(n,e){let t=ae(n)?n:()=>n,r=i=>i.error(t());return new ue(e?i=>e.schedule(r,0,i):r)}function Yy(n){return!!n&&(n instanceof ue||ae(n.lift)&&ae(n.subscribe))}function EA(n){return n instanceof Date&&!isNaN(n)}function Cf(n){return new ue(e=>{Le(n()).subscribe(e)})}function iq(...n){let e=Ef(n),{args:t,keys:r}=sf(n),i=new ue(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let u=0;u<o;u++){let d=!1;Le(t[u]).subscribe(ee(s,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||s.next(r?wf(r,a):a),s.complete())}))}});return e?i.pipe(yf(e)):i}function wA(n=0,e,t=Ky){let r=-1;return e!=null&&(vf(e)?t=e:r=e),new ue(i=>{let s=EA(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function sq(...n){let e=vr(n),t=gA(n,1/0),r=n;return r.length?r.length===1?Le(r[0]):ul(t)(He(r,e)):Pt}function Lt(n,e){return ne((t,r)=>{let i=0;t.subscribe(ee(r,s=>n.call(e,s,i++)&&r.next(s)))})}function TA(n){return ne((e,t)=>{let r=!1,i=null,s=null,o=!1,a=()=>{if(s?.unsubscribe(),s=null,r){r=!1;let l=i;i=null,t.next(l)}o&&t.complete()},c=()=>{s=null,o&&t.complete()};e.subscribe(ee(t,l=>{r=!0,i=l,s||Le(n(l)).subscribe(s=ee(t,a,c))},()=>{o=!0,(!r||!s||s.closed)&&t.complete()}))})}function oq(n,e=xi){return TA(()=>wA(n,e))}function Pi(n){return ne((e,t)=>{let r=null,i=!1,s;r=e.subscribe(ee(t,void 0,void 0,o=>{s=Le(n(o,Pi(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function bA(n,e,t,r,i){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(ee(o,u=>{let d=l++;c=a?n(c,u,d):(a=!0,u),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function Li(n,e){return ae(e)?ht(n,e,1):ht(n,1)}function aq(n,e=xi){return ne((t,r)=>{let i=null,s=null,o=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=s;s=null,r.next(l)}};function c(){let l=o+n,u=e.now();if(u<l){i=this.schedule(void 0,l-u),r.add(i);return}a()}t.subscribe(ee(r,l=>{s=l,o=e.now(),i||(i=e.schedule(c,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}function Fi(n){return ne((e,t)=>{let r=!1;e.subscribe(ee(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Yr(n){return n<=0?()=>Pt:ne((e,t)=>{let r=0;e.subscribe(ee(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function _A(n,e=Qt){return n=n??cq,ne((t,r)=>{let i,s=!0;t.subscribe(ee(r,o=>{let a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function cq(n,e){return n===e}function If(n=lq){return ne((e,t)=>{let r=!1;e.subscribe(ee(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function lq(){return new Wn}function js(n){return ne((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Zr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Lt((i,s)=>n(i,s,r)):Qt,Yr(1),t?Fi(e):If(()=>new Wn))}function na(n){return n<=0?()=>Pt:ne((e,t)=>{let r=[];e.subscribe(ee(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Zy(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Lt((i,s)=>n(i,s,r)):Qt,na(1),t?Fi(e):If(()=>new Wn))}function SA(){return ne((n,e)=>{let t,r=!1;n.subscribe(ee(e,i=>{let s=t;t=i,r&&e.next([s,i]),r=!0}))})}function Df(n,e){return ne(bA(n,e,arguments.length>=2,!0))}function Xy(n={}){let{connector:e=()=>new rt,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,c,l=0,u=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=c=void 0,u=d=!1},v=()=>{let w=o;f(),w?.unsubscribe()};return ne((w,S)=>{l++,!d&&!u&&h();let I=c=c??e();S.add(()=>{l--,l===0&&!d&&!u&&(a=Jy(v,i))}),I.subscribe(S),!o&&l>0&&(o=new Gn({next:D=>I.next(D),error:D=>{d=!0,h(),a=Jy(f,t,D),I.error(D)},complete:()=>{u=!0,h(),a=Jy(f,r),I.complete()}}),Le(w).subscribe(o))})(s)}}function Jy(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Gn({next:()=>{r.unsubscribe(),n()}});return Le(e(...t)).subscribe(r)}function uq(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,Xy({connector:()=>new hl(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function dq(n){return Lt((e,t)=>n<=t)}function mn(n,e){return ne((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(ee(r,c=>{i?.unsubscribe();let l=0,u=s++;Le(n(c,u)).subscribe(i=ee(r,d=>r.next(e?e(c,d,u,l++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function ev(n){return ne((e,t)=>{Le(n).subscribe(ee(t,()=>t.complete(),ll)),!t.closed&&e.subscribe(t)})}function fq(n,e=!1){return ne((t,r)=>{let i=0;t.subscribe(ee(r,s=>{let o=n(s,i++);(o||e)&&r.next(s),!o&&r.complete()}))})}function pt(n,e,t){let r=ae(n)||e||t?{next:n,error:e,complete:t}:n;return r?ne((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(ee(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Qt}function IA(n,e){return Object.is(n,e)}var gt=null,Af=!1,rv=1,sn=Symbol("SIGNAL");function me(n){let e=gt;return gt=n,e}function DA(){return gt}var ra={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Nf(n){if(Af)throw new Error("");if(gt===null)return;gt.consumerOnSignalRead(n);let e=gt.nextProducerIndex++;if(xf(gt),e<gt.producerNode.length&&gt.producerNode[e]!==n&&gl(gt)){let t=gt.producerNode[e];kf(t,gt.producerIndexOfThis[e])}gt.producerNode[e]!==n&&(gt.producerNode[e]=n,gt.producerIndexOfThis[e]=gl(gt)?MA(n,gt,e):0),gt.producerLastReadVersion[e]=n.version}function hq(){rv++}function AA(n){if(!(gl(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===rv)){if(!n.producerMustRecompute(n)&&!Of(n)){CA(n);return}n.producerRecomputeValue(n),CA(n)}}function RA(n){if(n.liveConsumerNode===void 0)return;let e=Af;Af=!0;try{for(let t of n.liveConsumerNode)t.dirty||pq(t)}finally{Af=e}}function NA(){return gt?.consumerAllowSignalWrites!==!1}function pq(n){n.dirty=!0,RA(n),n.consumerMarkedDirty?.(n)}function CA(n){n.dirty=!1,n.lastCleanEpoch=rv}function ml(n){return n&&(n.nextProducerIndex=0),me(n)}function Mf(n,e){if(me(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(gl(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)kf(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Of(n){xf(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(AA(t),r!==t.version))return!0}return!1}function yl(n){if(xf(n),gl(n))for(let e=0;e<n.producerNode.length;e++)kf(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function MA(n,e,t){if(OA(n),n.liveConsumerNode.length===0&&kA(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=MA(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function kf(n,e){if(OA(n),n.liveConsumerNode.length===1&&kA(n))for(let r=0;r<n.producerNode.length;r++)kf(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];xf(i),i.producerIndexOfThis[r]=e}}function gl(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function xf(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function OA(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function kA(n){return n.producerNode!==void 0}function iv(n,e){let t=Object.create(gq);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(AA(t),Nf(t),t.value===Rf)throw t.error;return t.value};return r[sn]=t,r}var tv=Symbol("UNSET"),nv=Symbol("COMPUTING"),Rf=Symbol("ERRORED"),gq=De(V({},ra),{value:tv,dirty:!0,error:null,equal:IA,kind:"computed",producerMustRecompute(n){return n.value===tv||n.value===nv},producerRecomputeValue(n){if(n.value===nv)throw new Error("Detected cycle in computations.");let e=n.value;n.value=nv;let t=ml(n),r,i=!1;try{r=n.computation(),me(null),i=e!==tv&&e!==Rf&&r!==Rf&&n.equal(e,r)}catch(s){r=Rf,n.error=s}finally{Mf(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function mq(){throw new Error}var xA=mq;function PA(n){xA(n)}function LA(n){xA=n}var yq=null;function FA(n,e){let t=Object.create(sv);t.value=n,e!==void 0&&(t.equal=e);let r=()=>(Nf(t),t.value);return r[sn]=t,r}function Pf(n,e){NA()||PA(n),n.equal(n.value,e)||(n.value=e,vq(n))}function BA(n,e){NA()||PA(n),Pf(n,e(n.value))}var sv=De(V({},ra),{equal:IA,value:void 0,kind:"signal"});function vq(n){n.version++,hq(),RA(n),yq?.()}function UA(n){let e=me(null);try{return n()}finally{me(e)}}var ov;function vl(){return ov}function Jr(n){let e=ov;return ov=n,e}var av=Symbol("NotFound");var cv={JSACTION:"jsaction"};var it={CLICK:"click",CLICKMOD:"clickmod",DBLCLICK:"dblclick",FOCUS:"focus",FOCUSIN:"focusin",BLUR:"blur",FOCUSOUT:"focusout",SUBMIT:"submit",KEYDOWN:"keydown",KEYPRESS:"keypress",KEYUP:"keyup",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",ERROR:"error",LOAD:"load",TOUCHSTART:"touchstart",TOUCHEND:"touchend",TOUCHMOVE:"touchmove",TOGGLE:"toggle"},zme=[it.MOUSEENTER,it.MOUSELEAVE,"pointerenter","pointerleave"],Eq=[it.CLICK,it.DBLCLICK,it.FOCUSIN,it.FOCUSOUT,it.KEYDOWN,it.KEYUP,it.KEYPRESS,it.MOUSEOVER,it.MOUSEOUT,it.SUBMIT,it.TOUCHSTART,it.TOUCHEND,it.TOUCHMOVE,"touchcancel","auxclick","change","compositionstart","compositionupdate","compositionend","beforeinput","input","select","copy","cut","paste","mousedown","mouseup","wheel","contextmenu","dragover","dragenter","dragleave","drop","dragstart","dragend","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","gotpointercapture","lostpointercapture","ended","loadedmetadata","pagehide","pageshow","visibilitychange","beforematch"],VA=[it.FOCUS,it.BLUR,it.ERROR,it.LOAD,it.TOGGLE],jA=n=>VA.indexOf(n)>=0,wq=Eq.concat(VA),qA=n=>wq.indexOf(n)>=0;var Hme=typeof navigator<"u"&&/Macintosh/.test(navigator.userAgent);var Gme=typeof navigator<"u"&&/iPhone|iPad|iPod/.test(navigator.userAgent);var Wme=it.CLICK;var HR="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",B=class extends Error{code;constructor(e,t){super(Ch(e,t)),this.code=e}};function Ch(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}var GR=Symbol("InputSignalNode#UNSET"),Tq=De(V({},sv),{transformFn:void 0,applyValueToInputSignal(n,e){Pf(n,e)}});function WR(n,e){let t=Object.create(Tq);t.value=n,t.transformFn=e?.transform;function r(){if(Nf(t),t.value===GR){let i=null;throw new B(-950,i)}return t.value}return r[sn]=t,r}function jl(n){return{toString:n}.toString()}var Lf="__parameters__";function bq(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function KR(n,e,t){return jl(()=>{let r=bq(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,u){let d=c.hasOwnProperty(Lf)?c[Lf]:Object.defineProperty(c,Lf,{value:[]})[Lf];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Wf=globalThis;function Fe(n){for(let e in n)if(n[e]===Fe)return e;throw Error("Could not find renamed property on target object.")}function _q(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function an(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(an).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Dv(n,e){return n?e?`${n} ${e}`:n:e||""}var Sq=Fe({__forward_ref__:Fe});function QR(n){return n.__forward_ref__=QR,n.toString=function(){return an(this())},n}function Rt(n){return YR(n)?n():n}function YR(n){return typeof n=="function"&&n.hasOwnProperty(Sq)&&n.__forward_ref__===QR}function H(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ql(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ih(n){return $A(n,JR)||$A(n,XR)}function ZR(n){return Ih(n)!==null}function $A(n,e){return n.hasOwnProperty(e)?n[e]:null}function Cq(n){let e=n&&(n[JR]||n[XR]);return e||null}function zA(n){return n&&(n.hasOwnProperty(HA)||n.hasOwnProperty(Iq))?n[HA]:null}var JR=Fe({\u0275prov:Fe}),HA=Fe({\u0275inj:Fe}),XR=Fe({ngInjectableDef:Fe}),Iq=Fe({ngInjectorDef:Fe}),U=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=H({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function eN(n){return n&&!!n.\u0275providers}var Dq=Fe({\u0275cmp:Fe}),Aq=Fe({\u0275dir:Fe}),Rq=Fe({\u0275pipe:Fe}),Nq=Fe({\u0275mod:Fe}),Kf=Fe({\u0275fac:Fe}),Tl=Fe({__NG_ELEMENT_ID__:Fe}),GA=Fe({__NG_ENV_ID__:Fe});function Xr(n){return typeof n=="string"?n:n==null?"":String(n)}function Mq(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Xr(n)}function tN(n,e){throw new B(-200,n)}function GE(n,e){throw new B(-201,!1)}var pe=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(pe||{}),Av;function nN(){return Av}function on(n){let e=Av;return Av=n,e}function rN(n,e,t){let r=Ih(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&pe.Optional)return null;if(e!==void 0)return e;GE(n,"Injector")}var Oq={},$s=Oq,Rv="__NG_DI_FLAG__",Qf=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=t;return this.injector.get(e,r.optional?av:$s,r)}},Yf="ngTempTokenPath",kq="ngTokenPath",xq=/\n/gm,Pq="\u0275",WA="__source";function Lq(n,e=pe.Default){if(vl()===void 0)throw new B(-203,!1);if(vl()===null)return rN(n,void 0,e);{let t=vl(),r;return t instanceof Qf?r=t.injector:r=t,r.get(n,e&pe.Optional?null:void 0,e)}}function J(n,e=pe.Default){return(nN()||Lq)(Rt(n),e)}function R(n,e=pe.Default){return J(n,Dh(e))}function Dh(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Nv(n){let e=[];for(let t=0;t<n.length;t++){let r=Rt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new B(900,!1);let i,s=pe.Default;for(let o=0;o<r.length;o++){let a=r[o],c=Fq(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(J(i,s))}else e.push(J(r))}return e}function iN(n,e){return n[Rv]=e,n.prototype[Rv]=e,n}function Fq(n){return n[Rv]}function Bq(n,e,t,r){let i=n[Yf];throw e[WA]&&i.unshift(e[WA]),n.message=Uq(`
`+n.message,i,t,r),n[kq]=i,n[Yf]=null,n}function Uq(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==Pq?n.slice(2):n;let i=an(e);if(Array.isArray(e))i=e.map(an).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):an(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(xq,`
  `)}`}var Yt=iN(KR("Optional"),8);var sN=iN(KR("SkipSelf"),4);function Gs(n,e){let t=n.hasOwnProperty(Kf);return t?n[Kf]:null}function Vq(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}function jq(n){return n.flat(Number.POSITIVE_INFINITY)}function WE(n,e){n.forEach(t=>Array.isArray(t)?WE(t,e):e(t))}function oN(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Zf(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function qq(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function $q(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function $l(n,e,t){let r=zl(n,e);return r>=0?n[r|1]=t:(r=~r,$q(n,r,e,t)),r}function lv(n,e){let t=zl(n,e);if(t>=0)return n[t|1]}function zl(n,e){return zq(n,e,1)}function zq(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var wr={},Ft=[],Ws=new U(""),aN=new U("",-1),cN=new U(""),Jf=class{get(e,t=$s){if(t===$s){let r=new Error(`NullInjectorError: No provider for ${an(e)}!`);throw r.name="NullInjectorError",r}return t}};function lN(n,e){let t=n[Nq]||null;if(!t&&e===!0)throw new Error(`Type ${an(n)} does not have '\u0275mod' property.`);return t}function ji(n){return n[Dq]||null}function uN(n){return n[Aq]||null}function Hq(n){return n[Rq]||null}function cn(n){return{\u0275providers:n}}function Gq(...n){return{\u0275providers:dN(!0,n),\u0275fromNgModule:!0}}function dN(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return WE(e,o=>{let a=o;Mv(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&fN(i,s),t}function fN(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];KE(i,s=>{e(s,r)})}}function Mv(n,e,t,r){if(n=Rt(n),!n)return!1;let i=null,s=zA(n),o=!s&&ji(n);if(!s&&!o){let c=n.ngModule;if(s=zA(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)Mv(l,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{WE(s.imports,u=>{Mv(u,e,t,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&fN(l,e)}if(!a){let l=Gs(i)||(()=>new i);e({provide:i,useFactory:l,deps:Ft},i),e({provide:cN,useValue:i,multi:!0},i),e({provide:Ws,useValue:()=>J(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=n;KE(c,u=>{e(u,l)})}}else return!1;return i!==n&&n.providers!==void 0}function KE(n,e){for(let t of n)eN(t)&&(t=t.\u0275providers),Array.isArray(t)?KE(t,e):e(t)}var Wq=Fe({provide:String,useValue:Fe});function hN(n){return n!==null&&typeof n=="object"&&Wq in n}function Kq(n){return!!(n&&n.useExisting)}function Qq(n){return!!(n&&n.useFactory)}function ua(n){return typeof n=="function"}function Yq(n){return!!n.useClass}var Ah=new U(""),jf={},KA={},uv;function Rh(){return uv===void 0&&(uv=new Jf),uv}var Bt=class{},Cl=class extends Bt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,kv(e,o=>this.processProvider(o)),this.records.set(aN,ia(void 0,this)),i.has("environment")&&this.records.set(Bt,ia(void 0,this));let s=this.records.get(Ah);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(cN,Ft,pe.Self))}retrieve(e,t){let r=t;return this.get(e,r.optional?av:$s,r)}destroy(){wl(this),this._destroyed=!0;let e=me(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),me(e)}}onDestroy(e){return wl(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){wl(this);let t=Jr(this),r=on(void 0),i;try{return e()}finally{Jr(t),on(r)}}get(e,t=$s,r=pe.Default){if(wl(this),e.hasOwnProperty(GA))return e[GA](this);r=Dh(r);let i,s=Jr(this),o=on(void 0);try{if(!(r&pe.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=t$(e)&&Ih(e);l&&this.injectableDefInScope(l)?c=ia(Ov(e),jf):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&pe.Self?Rh():this.parent;return t=r&pe.Optional&&t===$s?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Yf]=a[Yf]||[]).unshift(an(e)),s)throw a;return Bq(a,e,"R3InjectorError",this.source)}else throw a}finally{on(o),Jr(s)}}resolveInjectorInitializers(){let e=me(null),t=Jr(this),r=on(void 0),i;try{let s=this.get(Ws,Ft,pe.Self);for(let o of s)o()}finally{Jr(t),on(r),me(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(an(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Rt(e);let t=ua(e)?e:Rt(e&&e.provide),r=Jq(e);if(!ua(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ia(void 0,jf,!0),i.factory=()=>Nv(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=me(null);try{return t.value===KA?tN(an(e)):t.value===jf&&(t.value=KA,t.value=t.factory()),typeof t.value=="object"&&t.value&&e$(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{me(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Rt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Ov(n){let e=Ih(n),t=e!==null?e.factory:Gs(n);if(t!==null)return t;if(n instanceof U)throw new B(204,!1);if(n instanceof Function)return Zq(n);throw new B(204,!1)}function Zq(n){if(n.length>0)throw new B(204,!1);let t=Cq(n);return t!==null?()=>t.factory(n):()=>new n}function Jq(n){if(hN(n))return ia(void 0,n.useValue);{let e=pN(n);return ia(e,jf)}}function pN(n,e,t){let r;if(ua(n)){let i=Rt(n);return Gs(i)||Ov(i)}else if(hN(n))r=()=>Rt(n.useValue);else if(Qq(n))r=()=>n.useFactory(...Nv(n.deps||[]));else if(Kq(n))r=()=>J(Rt(n.useExisting));else{let i=Rt(n&&(n.useClass||n.provide));if(Xq(n))r=()=>new i(...Nv(n.deps));else return Gs(i)||Ov(i)}return r}function wl(n){if(n.destroyed)throw new B(205,!1)}function ia(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Xq(n){return!!n.deps}function e$(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function t$(n){return typeof n=="function"||typeof n=="object"&&n instanceof U}function kv(n,e){for(let t of n)Array.isArray(t)?kv(t,e):t&&eN(t)?kv(t.\u0275providers,e):e(t)}function Mt(n,e){let t;n instanceof Cl?(wl(n),t=n):t=new Qf(n);let r,i=Jr(t),s=on(void 0);try{return e()}finally{Jr(i),on(s)}}function gN(){return nN()!==void 0||vl()!=null}function Ta(n){if(!gN())throw new B(-203,!1)}function n$(n){let e=Wf.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function r$(n){return typeof n=="function"}var yt=0,Y=1,te=2,Et=3,Qn=4,ln=5,Yn=6,Il=7,lt=8,Dl=9,qi=10,Pe=11,Al=12,QA=13,ba=14,Ut=15,Ks=16,sa=17,ei=18,Nh=19,mN=20,Bi=21,dv=22,Qs=23,An=24,ca=25,_e=26,QE=1,Rl=6,ti=7,Xf=8,da=9,Nt=10;function Ui(n){return Array.isArray(n)&&typeof n[QE]=="object"}function Rn(n){return Array.isArray(n)&&n[QE]===!0}function YE(n){return(n.flags&4)!==0}function Hi(n){return n.componentOffset>-1}function Mh(n){return(n.flags&1)===1}function Tr(n){return!!n.template}function fa(n){return(n[te]&512)!==0}function yN(n){return(n.type&16)===16}function i$(n){return(n[te]&32)===32}function Hl(n){return(n[te]&256)===256}var xv=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function vN(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Oh=(()=>{let n=()=>EN;return n.ngInherit=!0,n})();function EN(n){return n.type.prototype.ngOnChanges&&(n.setInput=o$),s$}function s$(){let n=TN(this),e=n?.current;if(e){let t=n.previous;if(t===wr)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function o$(n,e,t,r,i){let s=this.declaredInputs[r],o=TN(n)||a$(n,{previous:wr,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new xv(l&&l.currentValue,t,c===wr),vN(n,e,i,t)}var wN="__ngSimpleChanges__";function TN(n){return n[wN]||null}function a$(n,e){return n[wN]=e}var YA=null;var xe=function(n,e=null,t){YA?.(n,e,t)},bN="svg",c$="math";function qe(n){for(;Array.isArray(n);)n=n[yt];return n}function _N(n){for(;Array.isArray(n);){if(typeof n[QE]=="object")return n;n=n[yt]}return null}function SN(n,e){return qe(e[n])}function Jn(n,e){return qe(e[n.index])}function ZE(n,e){return n.data[e]}function CN(n,e){return n[e]}function br(n,e){let t=e[n];return Ui(t)?t:t[yt]}function l$(n){return(n[te]&4)===4}function JE(n){return(n[te]&128)===128}function u$(n){return Rn(n[Et])}function $i(n,e){return e==null?null:n[e]}function IN(n){n[sa]=0}function DN(n){n[te]&1024||(n[te]|=1024,JE(n)&&_a(n))}function d$(n,e){for(;n>0;)e=e[ba],n--;return e}function kh(n){return!!(n[te]&9216||n[An]?.dirty)}function Pv(n){n[qi].changeDetectionScheduler?.notify(8),n[te]&64&&(n[te]|=1024),kh(n)&&_a(n)}function _a(n){n[qi].changeDetectionScheduler?.notify(0);let e=Ys(n);for(;e!==null&&!(e[te]&8192||(e[te]|=8192,!JE(e)));)e=Ys(e)}function AN(n,e){if(Hl(n))throw new B(911,!1);n[Bi]===null&&(n[Bi]=[]),n[Bi].push(e)}function f$(n,e){if(n[Bi]===null)return;let t=n[Bi].indexOf(e);t!==-1&&n[Bi].splice(t,1)}function Ys(n){let e=n[Et];return Rn(e)?e[Et]:e}function RN(n){return n[Il]??=[]}function NN(n){return n.cleanup??=[]}function h$(n,e,t,r){let i=RN(e);i.push(t),n.firstCreatePass&&NN(n).push(r,i.length-1)}var ce={lFrame:LN(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Lv=!1;function p$(){return ce.lFrame.elementDepthCount}function g$(){ce.lFrame.elementDepthCount++}function m$(){ce.lFrame.elementDepthCount--}function XE(){return ce.bindingsEnabled}function Sa(){return ce.skipHydrationRootTNode!==null}function y$(n){return ce.skipHydrationRootTNode===n}function v$(n){ce.skipHydrationRootTNode=n}function E$(){ce.skipHydrationRootTNode=null}function ie(){return ce.lFrame.lView}function Qe(){return ce.lFrame.tView}function Vye(n){return ce.lFrame.contextLView=n,n[lt]}function jye(n){return ce.lFrame.contextLView=null,n}function Vt(){let n=MN();for(;n!==null&&n.type===64;)n=n.parent;return n}function MN(){return ce.lFrame.currentTNode}function w$(){let n=ce.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function to(n,e){let t=ce.lFrame;t.currentTNode=n,t.isParent=e}function ew(){return ce.lFrame.isParent}function tw(){ce.lFrame.isParent=!1}function T$(){return ce.lFrame.contextLView}function ON(){return Lv}function eh(n){let e=Lv;return Lv=n,e}function nw(){let n=ce.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function kN(){return ce.lFrame.bindingIndex}function b$(n){return ce.lFrame.bindingIndex=n}function no(){return ce.lFrame.bindingIndex++}function xh(n){let e=ce.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function _$(){return ce.lFrame.inI18n}function S$(n,e){let t=ce.lFrame;t.bindingIndex=t.bindingRootIndex=n,Fv(e)}function C$(){return ce.lFrame.currentDirectiveIndex}function Fv(n){ce.lFrame.currentDirectiveIndex=n}function I$(n){let e=ce.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function rw(){return ce.lFrame.currentQueryIndex}function Ph(n){ce.lFrame.currentQueryIndex=n}function D$(n){let e=n[Y];return e.type===2?e.declTNode:e.type===1?n[ln]:null}function xN(n,e,t){if(t&pe.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&pe.Host);)if(i=D$(s),i===null||(s=s[ba],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=ce.lFrame=PN();return r.currentTNode=e,r.lView=n,!0}function iw(n){let e=PN(),t=n[Y];ce.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function PN(){let n=ce.lFrame,e=n===null?null:n.child;return e===null?LN(n):e}function LN(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function FN(){let n=ce.lFrame;return ce.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var BN=FN;function sw(){let n=FN();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function A$(n){return(ce.lFrame.contextLView=d$(n,ce.lFrame.contextLView))[lt]}function Cr(){return ce.lFrame.selectedIndex}function Zs(n){ce.lFrame.selectedIndex=n}function Lh(){let n=ce.lFrame;return ZE(n.tView,n.selectedIndex)}function qye(){ce.lFrame.currentNamespace=bN}function $ye(){R$()}function R$(){ce.lFrame.currentNamespace=null}function UN(){return ce.lFrame.currentNamespace}var VN=!0;function Fh(){return VN}function Gi(n){VN=n}function N$(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=EN(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function ow(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function qf(n,e,t){jN(n,e,3,t)}function $f(n,e,t,r){(n[te]&3)===t&&jN(n,e,t,r)}function fv(n,e){let t=n[te];(t&3)===e&&(t&=16383,t+=1,n[te]=t)}function jN(n,e,t,r){let i=r!==void 0?n[sa]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[sa]+=65536),(a<s||s==-1)&&(M$(n,t,e,c),n[sa]=(n[sa]&4294901760)+c+2),c++}function ZA(n,e){xe(4,n,e);let t=me(null);try{e.call(n)}finally{me(t),xe(5,n,e)}}function M$(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[te]>>14<n[sa]>>16&&(n[te]&3)===e&&(n[te]+=16384,ZA(a,s)):ZA(a,s)}var la=-1,Js=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function qN(n){return n!=null&&typeof n=="object"&&(n.insertBeforeIndex===null||typeof n.insertBeforeIndex=="number"||Array.isArray(n.insertBeforeIndex))}function O$(n){return!!(n.type&128)}function k$(n){return(n.flags&8)!==0}function x$(n){return(n.flags&16)!==0}function P$(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];L$(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function $N(n){return n===3||n===4||n===6}function L$(n){return n.charCodeAt(0)===64}function ha(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?JA(n,t,i,null,e[++r]):JA(n,t,i,null,null))}}return n}function JA(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){i!==null&&(n[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i)}var hv={},Bv=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Dh(r);let i=this.injector.get(e,hv,r);return i!==hv||t===hv?i:this.parentInjector.get(e,t,r)}};function zN(n){return n!==la}function th(n){return n&32767}function F$(n){return n>>16}function nh(n,e){let t=F$(n),r=e;for(;t>0;)r=r[ba],t--;return r}var Uv=!0;function rh(n){let e=Uv;return Uv=n,e}var B$=256,HN=B$-1,GN=5,U$=0,Er={};function V$(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Tl)&&(r=t[Tl]),r==null&&(r=t[Tl]=U$++);let i=r&HN,s=1<<i;e.data[n+(i>>GN)]|=s}function ih(n,e){let t=WN(n,e);if(t!==-1)return t;let r=e[Y];r.firstCreatePass&&(n.injectorIndex=e.length,pv(r.data,n),pv(e,null),pv(r.blueprint,null));let i=aw(n,e),s=n.injectorIndex;if(zN(i)){let o=th(i),a=nh(i,e),c=a[Y].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function pv(n,e){n.push(0,0,0,0,0,0,0,0,e)}function WN(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function aw(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=JN(i),r===null)return la;if(t++,i=i[ba],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return la}function Vv(n,e,t){V$(n,e,t)}function j$(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let s=t[i];if($N(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(s===e)return t[i+1];i=i+2}}}return null}function KN(n,e,t){if(t&pe.Optional||n!==void 0)return n;GE(e,"NodeInjector")}function QN(n,e,t,r){if(t&pe.Optional&&r===void 0&&(r=null),(t&(pe.Self|pe.Host))===0){let i=n[Dl],s=on(void 0);try{return i?i.get(e,r,t&pe.Optional):rN(e,r,t&pe.Optional)}finally{on(s)}}return KN(r,e,t)}function YN(n,e,t,r=pe.Default,i){if(n!==null){if(e[te]&2048&&!(r&pe.Self)){let o=H$(n,e,t,r,Er);if(o!==Er)return o}let s=ZN(n,e,t,r,Er);if(s!==Er)return s}return QN(e,t,r,i)}function ZN(n,e,t,r,i){let s=$$(t);if(typeof s=="function"){if(!xN(e,n,r))return r&pe.Host?KN(i,t,r):QN(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&pe.Optional))GE(t);else return o}finally{BN()}}else if(typeof s=="number"){let o=null,a=WN(n,e),c=la,l=r&pe.Host?e[Ut][ln]:null;for((a===-1||r&pe.SkipSelf)&&(c=a===-1?aw(n,e):e[a+8],c===la||!eR(r,!1)?a=-1:(o=e[Y],a=th(c),e=nh(c,e)));a!==-1;){let u=e[Y];if(XA(s,a,u.data)){let d=q$(a,e,t,o,r,l);if(d!==Er)return d}c=e[a+8],c!==la&&eR(r,e[Y].data[a+8]===l)&&XA(s,a,e)?(o=u,a=th(c),e=nh(c,e)):a=-1}}return i}function q$(n,e,t,r,i,s){let o=e[Y],a=o.data[n+8],c=r==null?Hi(a)&&Uv:r!=o&&(a.type&3)!==0,l=i&pe.Host&&s===a,u=zf(a,o,t,c,l);return u!==null?Nl(e,o,u,a):Er}function zf(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,u=s>>20,d=r?a:a+u,h=i?a+u:l;for(let f=d;f<h;f++){let v=o[f];if(f<c&&t===v||f>=c&&v.type===t)return f}if(i){let f=o[c];if(f&&Tr(f)&&f.type===t)return c}return null}function Nl(n,e,t,r){let i=n[t],s=e.data;if(i instanceof Js){let o=i;o.resolving&&tN(Mq(s[t]));let a=rh(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?on(o.injectImpl):null,u=xN(n,r,pe.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&N$(t,s[t],e)}finally{l!==null&&on(l),rh(a),o.resolving=!1,BN()}}return i}function $$(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Tl)?n[Tl]:void 0;return typeof e=="number"?e>=0?e&HN:z$:e}function XA(n,e,t){let r=1<<n;return!!(t[e+(n>>GN)]&r)}function eR(n,e){return!(n&pe.Self)&&!(n&pe.Host&&e)}var zs=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return YN(this._tNode,this._lView,e,Dh(r),t)}};function z$(){return new zs(Vt(),ie())}function cw(n){return jl(()=>{let e=n.prototype.constructor,t=e[Kf]||jv(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[Kf]||jv(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function jv(n){return YR(n)?()=>{let e=jv(Rt(n));return e&&e()}:Gs(n)}function H$(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[te]&2048&&!fa(o);){let a=ZN(s,o,t,r|pe.Self,Er);if(a!==Er)return a;let c=s.parent;if(!c){let l=o[mN];if(l){let u=l.get(t,Er,r);if(u!==Er)return u}c=JN(o),o=o[ba]}s=c}return i}function JN(n){let e=n[Y],t=e.type;return t===2?e.declTNode:t===1?n[ln]:null}function lw(n){return j$(Vt(),n)}function tR(n,e=null,t=null,r){let i=XN(n,e,t,r);return i.resolveInjectorInitializers(),i}function XN(n,e=null,t=null,r,i=new Set){let s=[t||Ft,Gq(n)];return r=r||(typeof n=="object"?void 0:an(n)),new Cl(s,e||Rh(),r||null,i)}var $e=class n{static THROW_IF_NOT_FOUND=$s;static NULL=new Jf;static create(e,t){if(Array.isArray(e))return tR({name:""},t,e,"");{let r=e.name??"";return tR({name:r},e.parent,e.providers,r)}}static \u0275prov=H({token:n,providedIn:"any",factory:()=>J(aN)});static __NG_ELEMENT_ID__=-1};var nR=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>lw(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},G$=new U("");G$.__NG_ELEMENT_ID__=n=>{let e=Vt();if(e===null)throw new B(204,!1);if(e.type&2)return e.value;if(n&pe.Optional)return null;throw new B(204,!1)};var eM=!1,ro=(()=>{class n{static __NG_ELEMENT_ID__=W$;static __NG_ENV_ID__=t=>t}return n})(),sh=class extends ro{_lView;constructor(e){super(),this._lView=e}onDestroy(e){return AN(this._lView,e),()=>f$(this._lView,e)}};function W$(){return new sh(ie())}var ni=class{},Bh=new U("",{providedIn:"root",factory:()=>!1});var tM=new U(""),nM=new U(""),si=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new At(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),Uh=(()=>{class n{internalPendingTasks=R(si);scheduler=R(ni);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){return T(this,null,function*(){let r=this.add();try{return yield t()}finally{r()}})}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),qv=class extends rt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,gN()&&(this.destroyRef=R(ro,{optional:!0})??void 0,this.pendingTasks=R(si,{optional:!0})??void 0)}emit(e){let t=me(null);try{super.next(e)}finally{me(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Je&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},yn=qv;function Ml(...n){}function rM(n){let e,t;function r(){n=Ml;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function rR(n){return queueMicrotask(()=>n()),()=>{n=Ml}}var uw="isAngularZone",oh=uw+"_ID",K$=0,Ce=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new yn(!1);onMicrotaskEmpty=new yn(!1);onStable=new yn(!1);onError=new yn(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=eM}=e;if(typeof Zone>"u")throw new B(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,Z$(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(uw)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new B(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new B(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Q$,Ml,Ml);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},Q$={};function dw(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Y$(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){rM(()=>{n.callbackScheduled=!1,$v(n),n.isCheckStableRunning=!0,dw(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),$v(n)}function Z$(n){let e=()=>{Y$(n)},t=K$++;n._inner=n._inner.fork({name:"angular",properties:{[uw]:!0,[oh]:t,[oh+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(J$(c))return r.invokeTask(s,o,a,c);try{return iR(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),sR(n)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return iR(n),r.invoke(s,o,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!X$(c)&&e(),sR(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,$v(n),dw(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function $v(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function iR(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function sR(n){n._nesting--,dw(n)}var ah=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new yn;onMicrotaskEmpty=new yn;onStable=new yn;onError=new yn;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function J$(n){return iM(n,"__ignore_ng_zone__")}function X$(n){return iM(n,"__scheduler_tick__")}function iM(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function ez(n="zone.js",e){return n==="noop"?new ah:n==="zone.js"?new Ce(e):n}var ri=class{_console=console;handleError(e){this._console.error("ERROR",e)}},tz=new U("",{providedIn:"root",factory:()=>{let n=R(Ce),e=R(ri);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function oR(n,e){return WR(n,e)}function nz(n){return WR(GR,n)}var sM=(oR.required=nz,oR);function rz(){return Ca(Vt(),ie())}function Ca(n,e){return new oi(Jn(n,e))}var oi=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=rz}return n})();function oM(n){return n instanceof oi?n.nativeElement:n}function iz(n){return typeof n=="function"&&n[sn]!==void 0}function fw(n,e){let t=FA(n,e?.equal),r=t[sn];return t.set=i=>Pf(r,i),t.update=i=>BA(r,i),t.asReadonly=sz.bind(t),t}function sz(){let n=this[sn];if(n.readonlyFn===void 0){let e=()=>this();e[sn]=n,n.readonlyFn=e}return n.readonlyFn}function aM(n){return iz(n)&&typeof n.set=="function"}function oz(){return this._results[Symbol.iterator]()}var zv=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new rt}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=jq(e);(this._changesDetected=!Vq(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=oz},Ol="ngSkipHydration",az="ngskiphydration";function hw(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let r=e[t];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===az)return!0}return!1}function cM(n){return n.hasAttribute(Ol)}function kl(n){return(n.flags&128)===128}function xl(n){if(kl(n))return!0;let e=n.parent;for(;e;){if(kl(n)||hw(e))return!0;e=e.parent}return!1}function cz(n){return kl(n)||hw(n)||xl(n)}var lM=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(lM||{}),uM=new Map,lz=0;function uz(){return lz++}function dz(n){uM.set(n[Nh],n)}function Hv(n){uM.delete(n[Nh])}var aR="__ngContext__";function Ia(n,e){Ui(e)?(n[aR]=e[Nh],dz(e)):n[aR]=e}function dM(n){return hM(n[Al])}function fM(n){return hM(n[Qn])}function hM(n){for(;n!==null&&!Rn(n);)n=n[Qn];return n}var Gv;function pM(n){Gv=n}function pw(){if(Gv!==void 0)return Gv;if(typeof document<"u")return document;throw new B(210,!1)}var Vh=new U("",{providedIn:"root",factory:()=>fz}),fz="ng",gw=new U(""),ai=new U("",{providedIn:"platform",factory:()=>"unknown"});var zye=new U(""),mw=new U("",{providedIn:"root",factory:()=>pw().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function hz(){return new Gl}var Gl=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:hz});store={};onSerializeCallbacks={};get(t,r){return this.store[t]!==void 0?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();var yw="h",vw="b",gM="f",mM="n",Wv="e",Kv="t",Pl="c",ch="x",Hs="r",Qv="i",Yv="n",bl="d",cR="l",yM="di",lR="s",pz="p",gz="t",uR=new U(""),vM=!1,mz=new U("",{providedIn:"root",factory:()=>vM}),yz=new U(""),EM=new U(""),vz=!1,Ez=new U("");var Ew=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(Ew||{}),Da=new U(""),dR=new Set;function Xn(n){dR.has(n)||(dR.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var ww=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=wz}return n})();function wz(){return new ww(ie(),Vt())}var oa=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(oa||{}),wM=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),Tz=[oa.EarlyRead,oa.Write,oa.MixedReadWrite,oa.Read],bz=(()=>{class n{ngZone=R(Ce);scheduler=R(ni);errorHandler=R(ri,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){R(Da,{optional:!0})}execute(){let t=this.sequences.size>0;t&&xe(16),this.executing=!0;for(let r of Tz)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=i.hooks[r];return s(i.pipelinedValue)},i.snapshot))}catch(s){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&xe(17)}register(t){let{view:r}=t;r!==void 0?((r[ca]??=[]).push(t),_a(r),r[te]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Ew.AFTER_NEXT_RENDER,t):t()}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),Zv=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,s,o=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=o,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[ca];e&&(this.view[ca]=e.filter(t=>t!==this))}};function _z(n,e){!e?.injector&&Ta(_z);let t=e?.injector??R($e);return _M}function TM(n,e){!e?.injector&&Ta(TM);let t=e?.injector??R($e);return _M}function Sz(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function bM(n,e,t,r){let i=e.get(wM);i.impl??=e.get(bz);let s=e.get(Da,null,{optional:!0}),o=t?.phase??oa.MixedReadWrite,a=t?.manualCleanup!==!0?e.get(ro):null,c=e.get(ww,null,{optional:!0}),l=new Zv(i.impl,Sz(n,o),c?.view,r,a,s?.snapshot(null));return i.impl.register(l),l}var _M={destroy(){}};var fR=1;function Tw(n){return n+1}function Cz(n,e){let t=n[Y],r=Tw(e.index);return n[r]}function SM(n,e){let t=Tw(e.index);return n.data[t]}function Iz(n){return n!==null&&typeof n=="object"&&typeof n.primaryTmplIndex=="number"}function Dz(n,e){let t=null,r=Tw(e.index);return _e<r&&r<n.bindingStartIndex&&(t=SM(n,e)),!!t&&Iz(t)}var Az=["click","keydown"],Rz=["mouseenter","mouseover","focusin"];var Nz="ngb";function CM(n,e,t=null){if(e.length===0||n.nodeType!==Node.ELEMENT_NODE)return;let r=n.getAttribute(cv.JSACTION),i=e.reduce((o,a)=>(r?.indexOf(a)??-1)===-1?o+a+":;":o,"");n.setAttribute(cv.JSACTION,`${r??""}${i}`);let s=t??"";s!==""&&i.length>0&&n.setAttribute(Nz,s)}var Mz="__nghData__",IM=Mz,Oz="__nghDeferData__",kz=Oz,_l="ngh",xz="nghm",DM=()=>null;function Pz(n,e,t=!1){let r=n.getAttribute(_l);if(r==null)return null;let[i,s]=r.split("|");if(r=t?s:i,!r)return null;let o=s?`|${s}`:"",a=t?i:o,c={};if(r!==""){let u=e.get(Gl,null,{optional:!0});u!==null&&(c=u.get(IM,[])[Number(r)])}let l={data:c,firstChild:n.firstChild??null};return t&&(l.firstChild=n,jh(l,0,n.nextSibling)),a?n.setAttribute(_l,a):n.removeAttribute(_l),l}function Lz(){DM=Pz}function AM(n,e,t=!1){return DM(n,e,t)}function Fz(n){let e=n._lView;return e[Y].type===2?null:(fa(e)&&(e=e[_e]),e)}function Bz(n){return n.textContent?.replace(/\s/gm,"")}function Uz(n){let e=pw(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(s){let o=Bz(s);return o==="ngetn"||o==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=t.nextNode();)i.push(r);for(let s of i)s.textContent==="ngetn"?s.replaceWith(e.createTextNode("")):s.remove()}function jh(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function Jv(n,e){return n.segmentHeads?.[e]??null}function Vz(n){return n.get(Ez,!1,{optional:!0})}function jz(n,e){let t=n.data,r=t[Wv]?.[e]??null;return r===null&&t[Pl]?.[e]&&(r=bw(n,e)),r}function RM(n,e){return n.data[Pl]?.[e]??null}function bw(n,e){let t=RM(n,e)??[],r=0;for(let i of t)r+=i[Hs]*(i[ch]??1);return r}function qz(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[bl];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function Wl(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[bl];n.disconnectedNodes=t?new Set(t):null}return!!qz(n)?.has(e)}function NM(n,e){let t=e,r=n.corruptedTextNodes;t.textContent===""?r.set(t,"ngetn"):t.nextSibling?.nodeType===Node.TEXT_NODE&&r.set(t,"ngtns")}function $z(n){let e=[];return n!==null&&(n.has(4)&&e.push(...Rz),n.has(3)&&e.push(...Az)),e}function gv(n){return!!n&&n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===xz}function hR(n){for(;n&&n.nodeType===Node.TEXT_NODE;)n=n.previousSibling;return n}function zz(n){for(let r of n.body.childNodes)if(gv(r))return;let e=hR(n.body.previousSibling);if(gv(e))return;let t=hR(n.head.lastChild);if(!gv(t))throw new B(-507,!1)}function MM(n,e){let t=n.contentQueries;if(t!==null){let r=me(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];Ph(s),a.contentQueries(2,e[o],o)}}}finally{me(r)}}}function Xv(n,e,t){Ph(0);let r=me(null);try{e(n,t)}finally{me(r)}}function _w(n,e,t){if(YE(e)){let r=me(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{me(r)}}}var Zn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Zn||{}),Ff;function Hz(){if(Ff===void 0&&(Ff=null,Wf.trustedTypes))try{Ff=Wf.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Ff}function qh(n){return Hz()?.createHTML(n)||n}var ii=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${HR})`}},eE=class extends ii{getTypeName(){return"HTML"}},tE=class extends ii{getTypeName(){return"Style"}},nE=class extends ii{getTypeName(){return"Script"}},rE=class extends ii{getTypeName(){return"URL"}},iE=class extends ii{getTypeName(){return"ResourceURL"}};function Ir(n){return n instanceof ii?n.changingThisBreaksApplicationSecurity:n}function Aa(n,e){let t=Gz(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${HR})`)}return t===e}function Gz(n){return n instanceof ii&&n.getTypeName()||null}function OM(n){return new eE(n)}function kM(n){return new tE(n)}function xM(n){return new nE(n)}function PM(n){return new rE(n)}function LM(n){return new iE(n)}function Wz(n){let e=new oE(n);return Kz()?new sE(e):e}var sE=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(qh(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},oE=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=qh(e),t}};function Kz(){try{return!!new window.DOMParser().parseFromString(qh(""),"text/html")}catch{return!1}}var Qz=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Sw(n){return n=String(n),n.match(Qz)?n:"unsafe:"+n}function ci(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function Kl(...n){let e={};for(let t of n)for(let r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}var FM=ci("area,br,col,hr,img,wbr"),BM=ci("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),UM=ci("rp,rt"),Yz=Kl(UM,BM),Zz=Kl(BM,ci("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Jz=Kl(UM,ci("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),pR=Kl(FM,Zz,Jz,Yz),VM=ci("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Xz=ci("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),eH=ci("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),tH=Kl(VM,Xz,eH),nH=ci("script,style,template"),aE=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){i.push(t),t=sH(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let s=iH(t);if(s){t=s;break}t=i.pop()}}return this.buf.join("")}startElement(e){let t=gR(e).toLowerCase();if(!pR.hasOwnProperty(t))return this.sanitizedSomething=!0,!nH.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=e.attributes;for(let i=0;i<r.length;i++){let s=r.item(i),o=s.name,a=o.toLowerCase();if(!tH.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;VM[a]&&(c=Sw(c)),this.buf.push(" ",o,'="',mR(c),'"')}return this.buf.push(">"),!0}endElement(e){let t=gR(e).toLowerCase();pR.hasOwnProperty(t)&&!FM.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(mR(e))}};function rH(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function iH(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw jM(e);return e}function sH(n){let e=n.firstChild;if(e&&rH(n,e))throw jM(e);return e}function gR(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function jM(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var oH=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,aH=/([^\#-~ |!])/g;function mR(n){return n.replace(/&/g,"&amp;").replace(oH,function(e){let t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(aH,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Bf;function qM(n,e){let t=null;try{Bf=Bf||Wz(n);let r=e?String(e):"";t=Bf.getInertBodyElement(r);let i=5,s=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=Bf.getInertBodyElement(r)}while(r!==s);let a=new aE().sanitizeChildren(yR(t)||t);return qh(a)}finally{if(t){let r=yR(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function yR(n){return"content"in n&&cH(n)?n.content:null}function cH(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var Wi=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Wi||{});var lH=/^>|^->|<!--|-->|--!>|<!-$/g,uH=/(<|>)/g,dH="\u200B$1\u200B";function fH(n){return n.replace(lH,e=>e.replace(uH,dH))}function Hye(n){return n.ownerDocument.defaultView}function Gye(n){return n.ownerDocument}function hH(n){return n.ownerDocument.body}function $M(n){return n instanceof Function?n():n}function pH(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}var zM="ng-template";function gH(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&pH(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Cw(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function Cw(n){return n.type===4&&n.value!==zM}function mH(n,e,t){let r=n.type===4&&!t?zM:n.value;return e===r}function yH(n,e,t){let r=4,i=n.attrs,s=i!==null?wH(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Kn(r)&&!Kn(c))return!1;if(o&&Kn(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!mH(n,c,t)||c===""&&e.length===1){if(Kn(r))return!1;o=!0}}else if(r&8){if(i===null||!gH(n,i,c,t)){if(Kn(r))return!1;o=!0}}else{let l=e[++a],u=vH(c,i,Cw(n),t);if(u===-1){if(Kn(r))return!1;o=!0;continue}if(l!==""){let d;if(u>s?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(Kn(r))return!1;o=!0}}}}return Kn(r)||o}function Kn(n){return(n&1)===0}function vH(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return TH(e,n)}function HM(n,e,t=!1){for(let r=0;r<e.length;r++)if(yH(n,e[r],t))return!0;return!1}function EH(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function wH(n){for(let e=0;e<n.length;e++){let t=n[e];if($N(t))return e}return n.length}function TH(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function bH(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function vR(n,e){return n?":not("+e.trim()+")":e}function _H(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Kn(o)&&(e+=vR(s,i),i=""),r=o,s=s||!Kn(r);t++}return i!==""&&(e+=vR(s,i)),e}function SH(n){return n.map(_H).join(",")}function CH(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!Kn(i))break;i=s}r++}return t.length&&e.push(1,...t),e}var un={};function GM(n,e){return n.createText(e)}function IH(n,e,t){n.setValue(e,t)}function WM(n,e){return n.createComment(fH(e))}function Iw(n,e,t){return n.createElement(e,t)}function lh(n,e,t,r,i){n.insertBefore(e,t,r,i)}function KM(n,e,t){n.appendChild(e,t)}function ER(n,e,t,r,i){r!==null?lh(n,e,t,r,i):KM(n,e,t)}function QM(n,e,t){n.removeChild(null,e,t)}function YM(n){n.textContent=""}function DH(n,e,t){n.setAttribute(e,"style",t)}function AH(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function ZM(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&P$(n,e,r),i!==null&&AH(n,e,i),s!==null&&DH(n,e,s)}function Dw(n,e,t,r,i,s,o,a,c,l,u){let d=_e+r,h=d+i,f=RH(d,h),v=typeof l=="function"?l():l;return f[Y]={type:n,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:v,incompleteFirstPass:!1,ssrId:u}}function RH(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:un);return t}function NH(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Dw(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Aw(n,e,t,r,i,s,o,a,c,l,u){let d=e.blueprint.slice();return d[yt]=i,d[te]=r|4|128|8|64|1024,(l!==null||n&&n[te]&2048)&&(d[te]|=2048),IN(d),d[Et]=d[ba]=n,d[lt]=t,d[qi]=o||n&&n[qi],d[Pe]=a||n&&n[Pe],d[Dl]=c||n&&n[Dl]||null,d[ln]=s,d[Nh]=uz(),d[Yn]=u,d[mN]=l,d[Ut]=e.type==2?n[Ut]:d,d}function MH(n,e,t){let r=Jn(e,n),i=NH(t),s=n[qi].rendererFactory,o=Rw(n,Aw(n,i,null,JM(t),r,e,null,s.createRenderer(r,t),null,null,null));return n[e.index]=o}function JM(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function XM(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Rw(n,e){return n[Al]?n[QA][Qn]=e:n[Al]=e,n[QA]=e,e}function Wye(n=1){eO(Qe(),ie(),Cr()+n,!1)}function eO(n,e,t,r){if(!r)if((e[te]&3)===3){let s=n.preOrderCheckHooks;s!==null&&qf(e,s,t)}else{let s=n.preOrderHooks;s!==null&&$f(e,s,0,t)}Zs(t)}var $h=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}($h||{});function cE(n,e,t,r){let i=me(null);try{let[s,o,a]=n.inputs[t],c=null;(o&$h.SignalBased)!==0&&(c=e[s][sn]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,s):vN(e,c,s,r)}finally{me(i)}}function tO(n,e,t,r,i){let s=Cr(),o=r&2;try{Zs(-1),o&&e.length>_e&&eO(n,e,_e,!1),xe(o?2:0,i),t(r,i)}finally{Zs(s),xe(o?3:1,i)}}function zh(n,e,t){BH(n,e,t),(t.flags&64)===64&&UH(n,e,t)}function Nw(n,e,t=Jn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function OH(n,e,t,r){let s=r.get(mz,vM)||t===Zn.ShadowDom,o=n.selectRootElement(e,s);return kH(o),o}function kH(n){nO(n)}var nO=()=>null;function xH(n){cM(n)?YM(n):Uz(n)}function PH(){nO=xH}function LH(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Mw(n,e,t,r,i,s,o,a){if(!a&&kw(e,n,t,r,i)){Hi(e)&&FH(t,e.index);return}if(e.type&3){let c=Jn(e,t);r=LH(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)}else e.type&12}function FH(n,e){let t=br(e,n);t[te]&16||(t[te]|=64)}function BH(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Hi(t)&&MH(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||ih(t,e);let s=t.initialInputs;for(let o=r;o<i;o++){let a=n.data[o],c=Nl(e,n,o,t);if(Ia(c,e),s!==null&&$H(e,o-r,c,a,t,s),Tr(a)){let l=br(t.index,e);l[lt]=Nl(e,n,o,t)}}}function UH(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=C$();try{Zs(s);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];Fv(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&VH(c,l)}}finally{Zs(-1),Fv(o)}}function VH(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Ow(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];HM(e,s.selectors,!1)&&(r??=[],Tr(s)?r.unshift(s):r.push(s))}return r}function jH(n,e,t,r,i,s){let o=Jn(n,e);qH(e[Pe],o,s,n.value,t,r,i)}function qH(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?Xr(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function $H(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let c=o[a],l=o[a+1];cE(r,t,c,l)}}function rO(n,e){let t=n[Dl],r=t?t.get(ri,null):null;r&&r.handleError(e)}function kw(n,e,t,r,i){let s=n.inputs?.[r],o=n.hostDirectiveInputs?.[r],a=!1;if(o)for(let c=0;c<o.length;c+=2){let l=o[c],u=o[c+1],d=e.data[l];cE(d,t[l],u,i),a=!0}if(s)for(let c of s){let l=t[c],u=e.data[c];cE(u,l,r,i),a=!0}return a}function zH(n,e){let t=br(e,n),r=t[Y];HH(r,t);let i=t[yt];i!==null&&t[Yn]===null&&(t[Yn]=AM(i,t[Dl])),xe(18),xw(r,t,t[lt]),xe(19,t[lt])}function HH(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function xw(n,e,t){iw(e);try{let r=n.viewQuery;r!==null&&Xv(1,r,t);let i=n.template;i!==null&&tO(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[ei]?.finishViewCreation(n),n.staticContentQueries&&MM(n,e),n.staticViewQueries&&Xv(2,n.viewQuery,t);let s=n.components;s!==null&&GH(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[te]&=-5,sw()}}function GH(n,e){for(let t=0;t<e.length;t++)zH(n,e[t])}function Ql(n,e,t,r){let i=me(null);try{let s=e.tView,a=n[te]&4096?4096:16,c=Aw(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[Ks]=l;let u=n[ei];return u!==null&&(c[ei]=u.createEmbeddedView(s)),xw(s,c,t),c}finally{me(i)}}function pa(n,e){return!e||e.firstChild===null||kl(n)}var WH;function Pw(n,e){return WH(n,e)}var _r=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(_r||{});function Ki(n){return(n.flags&32)===32}function aa(n,e,t,r,i){if(r!=null){let s,o=!1;Rn(r)?s=r:Ui(r)&&(o=!0,r=r[yt]);let a=qe(r);n===0&&t!==null?i==null?KM(e,t,a):lh(e,t,a,i||null,!0):n===1&&t!==null?lh(e,t,a,i||null,!0):n===2?QM(e,a,o):n===3&&e.destroyNode(a),s!=null&&r3(e,n,s,t,i)}}function KH(n,e){iO(n,e),e[yt]=null,e[ln]=null}function QH(n,e,t,r,i,s){r[yt]=i,r[ln]=e,Wh(n,r,t,1,i,s)}function iO(n,e){e[qi].changeDetectionScheduler?.notify(9),Wh(n,e,e[Pe],2,null,null)}function YH(n){let e=n[Al];if(!e)return mv(n[Y],n);for(;e;){let t=null;if(Ui(e))t=e[Al];else{let r=e[Nt];r&&(t=r)}if(!t){for(;e&&!e[Qn]&&e!==n;)Ui(e)&&mv(e[Y],e),e=e[Et];e===null&&(e=n),Ui(e)&&mv(e[Y],e),t=e&&e[Qn]}e=t}}function Lw(n,e){let t=n[da],r=t.indexOf(e);t.splice(r,1)}function Hh(n,e){if(Hl(e))return;let t=e[Pe];t.destroyNode&&Wh(n,e,t,3,null,null),YH(e)}function mv(n,e){if(Hl(e))return;let t=me(null);try{e[te]&=-129,e[te]|=256,e[An]&&yl(e[An]),JH(n,e),ZH(n,e),e[Y].type===1&&e[Pe].destroy();let r=e[Ks];if(r!==null&&Rn(e[Et])){r!==e[Et]&&Lw(r,e);let i=e[ei];i!==null&&i.detachView(n)}Hv(e)}finally{me(t)}}function ZH(n,e){let t=n.cleanup,r=e[Il];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[t[o+1]];t[o].call(a)}r!==null&&(e[Il]=null);let i=e[Bi];if(i!==null){e[Bi]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=e[Qs];if(s!==null){e[Qs]=null;for(let o of s)o.destroy()}}function JH(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Js)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];xe(4,a,c);try{c.call(a)}finally{xe(5,a,c)}}else{xe(4,i,s);try{s.call(i)}finally{xe(5,i,s)}}}}}function Fw(n,e,t){return XH(n,e.parent,t)}function XH(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[yt];if(Hi(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Zn.None||i===Zn.Emulated)return null}return Jn(r,t)}function sO(n,e,t){return t3(n,e,t)}function e3(n,e,t){return n.type&40?Jn(n,t):null}var t3=e3,wR;function Gh(n,e,t,r){let i=Fw(n,r,e),s=e[Pe],o=r.parent||e[ln],a=sO(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)ER(s,i,t[c],a,!1);else ER(s,i,t,a,!1);wR!==void 0&&wR(s,r,e,t,i)}function qs(n,e){if(e!==null){let t=e.type;if(t&3)return Jn(e,n);if(t&4)return lE(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return qs(n,r);{let i=n[e.index];return Rn(i)?lE(-1,i):qe(i)}}else{if(t&128)return qs(n,e.next);if(t&32)return Pw(e,n)()||qe(n[e.index]);{let r=oO(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ys(n[Ut]);return qs(i,r)}else return qs(n,e.next)}}}return null}function oO(n,e){if(e!==null){let r=n[Ut][ln],i=e.projection;return r.projection[i]}return null}function lE(n,e){let t=Nt+n+1;if(t<e.length){let r=e[t],i=r[Y].firstChild;if(i!==null)return qs(r,i)}return e[ti]}function Bw(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(o&&e===0&&(a&&Ia(qe(a),r),t.flags|=2),!Ki(t))if(c&8)Bw(n,e,t.child,r,i,s,!1),aa(e,n,i,a,s);else if(c&32){let l=Pw(t,r),u;for(;u=l();)aa(e,n,i,u,s);aa(e,n,i,a,s)}else c&16?aO(n,e,r,t,i,s):aa(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Wh(n,e,t,r,i,s){Bw(t,r,n.firstChild,e,i,s,!1)}function n3(n,e,t){let r=e[Pe],i=Fw(n,t,e),s=t.parent||e[ln],o=sO(s,t,e);aO(r,0,e,t,i,o)}function aO(n,e,t,r,i,s){let o=t[Ut],c=o[ln].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];aa(e,n,i,u,s)}else{let l=c,u=o[Et];kl(r)&&(l.flags|=128),Bw(n,e,l,u,i,s,!0)}}function r3(n,e,t,r,i){let s=t[ti],o=qe(t);s!==o&&aa(e,n,r,s,i);for(let a=Nt;a<t.length;a++){let c=t[a];Wh(c[Y],c,n,e,r,s)}}function i3(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:_r.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=_r.Important),n.setStyle(t,r,i,s))}}function Ll(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(qe(s)),Rn(s)&&Uw(s,r);let o=t.type;if(o&8)Ll(n,e,t.child,r);else if(o&32){let a=Pw(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=oO(e,t);if(Array.isArray(a))r.push(...a);else{let c=Ys(e[Ut]);Ll(c[Y],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function Uw(n,e){for(let t=Nt;t<n.length;t++){let r=n[t],i=r[Y].firstChild;i!==null&&Ll(r[Y],r,i,e)}n[ti]!==n[yt]&&e.push(n[ti])}function cO(n){if(n[ca]!==null){for(let e of n[ca])e.impl.addSequence(e);n[ca].length=0}}var lO=[];function s3(n){return n[An]??o3(n)}function o3(n){let e=lO.pop()??Object.create(c3);return e.lView=n,e}function a3(n){n.lView[An]!==n&&(n.lView=null,lO.push(n))}var c3=De(V({},ra),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{_a(n.lView)},consumerOnSignalRead(){this.lView[An]=this}});function l3(n){let e=n[An]??Object.create(u3);return e.lView=n,e}var u3=De(V({},ra),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Ys(n.lView);for(;e&&!uO(e[Y]);)e=Ys(e);e&&DN(e)},consumerOnSignalRead(){this.lView[An]=this}});function uO(n){return n.type!==2}function dO(n){if(n[Qs]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Qs])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[te]&8192)}}var d3=100;function fO(n,e=!0,t=0){let i=n[qi].rendererFactory,s=!1;s||i.begin?.();try{f3(n,t)}catch(o){throw e&&rO(n,o),o}finally{s||i.end?.()}}function f3(n,e){let t=ON();try{eh(!0),uE(n,e);let r=0;for(;kh(n);){if(r===d3)throw new B(103,!1);r++,uE(n,1)}}finally{eh(t)}}function h3(n,e,t,r){if(Hl(e))return;let i=e[te],s=!1,o=!1;iw(e);let a=!0,c=null,l=null;s||(uO(n)?(l=s3(e),c=ml(l)):DA()===null?(a=!1,l=l3(e),c=ml(l)):e[An]&&(yl(e[An]),e[An]=null));try{IN(e),b$(n.bindingStartIndex),t!==null&&tO(n,e,t,2,r);let u=(i&3)===3;if(!s)if(u){let f=n.preOrderCheckHooks;f!==null&&qf(e,f,null)}else{let f=n.preOrderHooks;f!==null&&$f(e,f,0,null),fv(e,0)}if(o||p3(e),dO(e),hO(e,0),n.contentQueries!==null&&MM(n,e),!s)if(u){let f=n.contentCheckHooks;f!==null&&qf(e,f)}else{let f=n.contentHooks;f!==null&&$f(e,f,1),fv(e,1)}m3(n,e);let d=n.components;d!==null&&gO(e,d,0);let h=n.viewQuery;if(h!==null&&Xv(2,h,r),!s)if(u){let f=n.viewCheckHooks;f!==null&&qf(e,f)}else{let f=n.viewHooks;f!==null&&$f(e,f,2),fv(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[dv]){for(let f of e[dv])f();e[dv]=null}s||(cO(e),e[te]&=-73)}catch(u){throw s||_a(e),u}finally{l!==null&&(Mf(l,c),a&&a3(l)),sw()}}function hO(n,e){for(let t=dM(n);t!==null;t=fM(t))for(let r=Nt;r<t.length;r++){let i=t[r];pO(i,e)}}function p3(n){for(let e=dM(n);e!==null;e=fM(e)){if(!(e[te]&2))continue;let t=e[da];for(let r=0;r<t.length;r++){let i=t[r];DN(i)}}}function g3(n,e,t){xe(18);let r=br(e,n);pO(r,t),xe(19,r[lt])}function pO(n,e){JE(n)&&uE(n,e)}function uE(n,e){let r=n[Y],i=n[te],s=n[An],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Of(s)),o||=!1,s&&(s.dirty=!1),n[te]&=-9217,o)h3(r,n,r.template,n[lt]);else if(i&8192){dO(n),hO(n,1);let a=r.components;a!==null&&gO(n,a,1),cO(n)}}function gO(n,e,t){for(let r=0;r<e.length;r++)g3(n,e[r],t)}function m3(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Zs(~i);else{let s=i,o=t[++r],a=t[++r];S$(o,s);let c=e[s];xe(24,c),a(2,c),xe(25,c)}}}finally{Zs(-1)}}function Vw(n,e){let t=ON()?64:1088;for(n[qi].changeDetectionScheduler?.notify(e);n;){n[te]|=t;let r=Ys(n);if(fa(n)&&!r)return n;n=r}return null}function mO(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function yO(n,e){let t=Nt+e;if(t<n.length)return n[t]}function Yl(n,e,t,r=!0){let i=e[Y];if(y3(i,e,n,t),r){let o=lE(t,n),a=e[Pe],c=a.parentNode(n[ti]);c!==null&&QH(i,n[ln],a,e,c,o)}let s=e[Yn];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function vO(n,e){let t=Fl(n,e);return t!==void 0&&Hh(t[Y],t),t}function Fl(n,e){if(n.length<=Nt)return;let t=Nt+e,r=n[t];if(r){let i=r[Ks];i!==null&&i!==n&&Lw(i,r),e>0&&(n[t-1][Qn]=r[Qn]);let s=Zf(n,Nt+e);KH(r[Y],r);let o=s[ei];o!==null&&o.detachView(s[Y]),r[Et]=null,r[Qn]=null,r[te]&=-129}return r}function y3(n,e,t,r){let i=Nt+r,s=t.length;r>0&&(t[i-1][Qn]=e),r<s-Nt?(e[Qn]=t[i],oN(t,Nt+r,e)):(t.push(e),e[Qn]=null),e[Et]=t;let o=e[Ks];o!==null&&t!==o&&EO(o,e);let a=e[ei];a!==null&&a.insertView(n),Pv(e),e[te]|=128}function EO(n,e){let t=n[da],r=e[Et];if(Ui(r))n[te]|=2;else{let i=r[Et][Ut];e[Ut]!==i&&(n[te]|=2)}t===null?n[da]=[e]:t.push(e)}var Bl=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[Y];return Ll(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[lt]}set context(e){this._lView[lt]=e}get destroyed(){return Hl(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Et];if(Rn(e)){let t=e[Xf],r=t?t.indexOf(this):-1;r>-1&&(Fl(e,r),Zf(t,r))}this._attachedToViewContainer=!1}Hh(this._lView[Y],this._lView)}onDestroy(e){AN(this._lView,e)}markForCheck(){Vw(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[te]&=-129}reattach(){Pv(this._lView),this._lView[te]|=128}detectChanges(){this._lView[te]|=1024,fO(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new B(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=fa(this._lView),t=this._lView[Ks];t!==null&&!e&&Lw(t,this._lView),iO(this._lView[Y],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new B(902,!1);this._appRef=e;let t=fa(this._lView),r=this._lView[Ks];r!==null&&!t&&EO(r,this._lView),Pv(this._lView)}};var Xs=(()=>{class n{static __NG_ELEMENT_ID__=w3}return n})(),v3=Xs,E3=class extends v3{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=Ql(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Bl(i)}};function w3(){return Kh(Vt(),ie())}function Kh(n,e){return n.type&4?new E3(e,n,Ca(n,e)):null}var dE="<-- AT THIS LOCATION";function T3(n){switch(n){case 4:return"view container";case 2:return"element";case 8:return"ng-container";case 32:return"icu";case 64:return"i18n";case 16:return"projection";case 1:return"text";case 128:return"@let";default:return"<unknown>"}}function b3(n,e){let t=`During serialization, Angular was unable to find an element in the DOM:

`,r=`${D3(n,e,!1)}

`,i=R3();throw new B(-502,t+r+i)}function _3(n){let e="During serialization, Angular detected DOM nodes that were created outside of Angular context and provided as projectable nodes (likely via `ViewContainerRef.createComponent` or `createComponent` APIs). Hydration is not supported for such cases, consider refactoring the code to avoid this pattern or using `ngSkipHydration` on the host element of the component.\n\n",t=`${A3(n)}

`,r=e+t+N3();return new B(-503,r)}function S3(n){let e=[];if(n.attrs)for(let t=0;t<n.attrs.length;){let r=n.attrs[t++];if(typeof r=="number")break;let i=n.attrs[t++];e.push(`${r}="${uh(i)}"`)}return e.join(" ")}var C3=new Set(["ngh","ng-version","ng-server-context"]);function I3(n){let e=[];for(let t=0;t<n.attributes.length;t++){let r=n.attributes[t];C3.has(r.name)||e.push(`${r.name}="${uh(r.value)}"`)}return e.join(" ")}function yv(n,e="\u2026"){switch(n.type){case 1:return`#text${n.value?`(${n.value})`:""}`;case 2:let r=S3(n),i=n.value.toLowerCase();return`<${i}${r?" "+r:""}>${e}</${i}>`;case 8:return"<!-- ng-container -->";case 4:return"<!-- container -->";default:return`#node(${T3(n.type)})`}}function Hf(n,e="\u2026"){let t=n;switch(t.nodeType){case Node.ELEMENT_NODE:let r=t.tagName.toLowerCase(),i=I3(t);return`<${r}${i?" "+i:""}>${e}</${r}>`;case Node.TEXT_NODE:let s=t.textContent?uh(t.textContent):"";return`#text${s?`(${s})`:""}`;case Node.COMMENT_NODE:return`<!-- ${uh(t.textContent??"")} -->`;default:return`#node(${t.nodeType})`}}function D3(n,e,t){let r="  ",i="";e.prev?(i+=r+`\u2026
`,i+=r+yv(e.prev)+`
`):e.type&&e.type&12&&(i+=r+`\u2026
`),t?(i+=r+yv(e)+`
`,i+=r+`<!-- container -->  ${dE}
`):i+=r+yv(e)+`  ${dE}
`,i+=r+`\u2026
`;let s=e.type?Fw(n[Y],e,n):null;return s&&(i=Hf(s,`
`+i)),i}function A3(n){let e="  ",t="",r=n;return r.previousSibling&&(t+=e+`\u2026
`,t+=e+Hf(r.previousSibling)+`
`),t+=e+Hf(r)+`  ${dE}
`,n.nextSibling&&(t+=e+`\u2026
`),n.parentNode&&(t=Hf(r.parentNode,`
`+t)),t}function R3(n){return`To fix this problem:
  * check ${n?`the "${n}"`:"corresponding"} component for hydration-related issues
  * check to see if your template has valid HTML structure
  * or skip hydration by adding the \`ngSkipHydration\` attribute to its host node in a template

`}function N3(){return`Note: attributes are only displayed to better represent the DOM but have no effect on hydration mismatches.

`}function M3(n){return n.replace(/\s+/gm,"")}function uh(n,e=50){return n?(n=M3(n),n.length>e?`${n.substring(0,e-1)}\u2026`:n):""}function Zl(n,e,t,r,i){let s=n.data[e];if(s===null)s=O3(n,e,t,r,i),_$()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=w$();s.injectorIndex=o===null?-1:o.injectorIndex}return to(s,!0),s}function O3(n,e,t,r,i){let s=MN(),o=ew(),a=o?s:s&&s.parent,c=n.data[e]=x3(n,a,t,e,r,i);return k3(n,c,s,o),c}function k3(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function x3(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return Sa()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function P3(n,e){let t=e[n.currentCaseLViewIndex];return t===null?t:t<0?~t:t}function wO(n,e,t){n.index=0;let r=P3(e,t);r!==null?n.removes=e.remove[r]:n.removes=Ft}function fE(n){if(n.index<n.removes.length){let e=n.removes[n.index++];if(e>0)return n.lView[e];{n.stack.push(n.index,n.removes);let t=~e,r=n.lView[Y].data[t];return wO(n,r,n.lView),fE(n)}}else return n.stack.length===0?null:(n.removes=n.stack.pop(),n.index=n.stack.pop(),fE(n))}function L3(n,e){let t={stack:[],index:-1,lView:e};return wO(t,n,e),fE.bind(null,t)}var F3=new RegExp(`^(\\d+)*(${vw}|${yw})*(.*)`);function B3(n,e){let t=[n];for(let r of e){let i=t.length-1;if(i>0&&t[i-1]===r){let s=t[i]||1;t[i]=s+1}else t.push(r,"")}return t.join("")}function U3(n){let e=n.match(F3),[t,r,i,s]=e,o=r?parseInt(r,10):i,a=[];for(let[c,l,u]of s.matchAll(/(f|n)(\d*)/g)){let d=parseInt(u,10)||1;a.push(l,d)}return[o,...a]}function V3(n){return!n.prev&&n.parent?.type===8}function vv(n){return n.index-_e}function Ul(n,e){return!(n.type&144)&&!!e[n.index]&&TO(qe(e[n.index]))}function TO(n){return!!n&&!n.isConnected}function j3(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function Qh(n,e,t,r){let i=vv(r),s=j3(n,i);if(s===void 0){let o=n.data[Yv];if(o?.[i])s=$3(o[i],t);else if(e.firstChild===r)s=n.firstChild;else{let a=r.prev===null,c=r.prev??r.parent;if(V3(r)){let l=vv(r.parent);s=Jv(n,l)}else{let l=Jn(c,t);if(a)s=l.firstChild;else{let u=vv(c),d=Jv(n,u);if(c.type===2&&d){let f=bw(n,u)+1;s=Yh(f,d)}else s=l.nextSibling}}}}return s}function Yh(n,e){let t=e;for(let r=0;r<n;r++)t=t.nextSibling;return t}function q3(n,e){let t=n;for(let r=0;r<e.length;r+=2){let i=e[r],s=e[r+1];for(let o=0;o<s;o++)switch(i){case gM:t=t.firstChild;break;case mM:t=t.nextSibling;break}}return t}function $3(n,e){let[t,...r]=U3(n),i;if(t===yw)i=e[Ut][yt];else if(t===vw)i=hH(e[Ut][yt]);else{let s=Number(t);i=qe(e[s+_e])}return q3(i,r)}function hE(n,e){if(n===e)return[];if(n.parentElement==null||e.parentElement==null)return null;if(n.parentElement===e.parentElement)return z3(n,e);{let t=e.parentElement,r=hE(n,t),i=hE(t.firstChild,e);return!r||!i?null:[...r,gM,...i]}}function z3(n,e){let t=[],r=null;for(r=n;r!=null&&r!==e;r=r.nextSibling)t.push(mM);return r==null?null:t}function TR(n,e,t){let r=hE(n,e);return r===null?null:B3(t,r)}function H3(n,e,t){let r=n.parent,i,s,o;for(;r!==null&&(Ul(r,e)||t?.has(r.index));)r=r.parent;r===null||!(r.type&3)?(i=o=yw,s=e[Ut][yt]):(i=r.index,s=qe(e[i]),o=Xr(i-_e));let a=qe(e[n.index]);if(n.type&44){let l=qs(e,n);l&&(a=l)}let c=TR(s,a,o);if(c===null&&s!==a){let l=s.ownerDocument.body;if(c=TR(l,a,vw),c===null)throw b3(e,n)}return c}var bO=!1;function G3(n){bO=n}function W3(){return bO}function K3(n){return n=n??R($e),n.get(yz,!1)}function Q3(n,e){let t=e.i18nChildren.get(n);return t===void 0&&(t=Y3(n),e.i18nChildren.set(n,t)),t}function Y3(n){let e=new Set;function t(r){switch(e.add(r.index),r.kind){case 1:case 2:{for(let i of r.children)t(i);break}case 3:{for(let i of r.cases)for(let s of i)t(s);break}}}for(let r=_e;r<n.bindingStartIndex;r++){let i=n.data[r];if(!(!i||!i.ast))for(let s of i.ast)t(s)}return e.size===0?null:e}function Z3(n,e,t){if(!t.isI18nHydrationEnabled)return null;let r=n[Y],i=r.data[e];if(!i||!i.ast)return null;let s=r.data[i.parentTNodeIndex];if(s&&cz(s))return null;let o={caseQueue:[],disconnectedNodes:new Set,disjointNodes:new Set};return pE(n,o,t,i.ast),o.caseQueue.length===0&&o.disconnectedNodes.size===0&&o.disjointNodes.size===0?null:o}function pE(n,e,t,r){let i=null;for(let s of r){let o=X3(n,e,t,s);o&&(J3(i,o)&&e.disjointNodes.add(s.index-_e),i=o)}return i}function J3(n,e){return n&&n.nextSibling!==e}function X3(n,e,t,r){let i=qe(n[r.index]);if(!i||TO(i))return e.disconnectedNodes.add(r.index-_e),null;let s=i;switch(r.kind){case 0:{NM(t,s);break}case 1:case 2:{pE(n,e,t,r.children);break}case 3:{let o=n[r.currentCaseLViewIndex];if(o!=null){let a=o<0?~o:o;e.caseQueue.push(a),pE(n,e,t,r.cases[a])}break}}return e4(n,r)}function e4(n,e){let r=n[Y].data[e.index];return qN(r)?qs(n,r):e.kind===3?L3(r,n)()??qe(n[e.index]):qe(n[e.index])??null}function t4(n){let e=n[Rl]??[],r=n[Et][Pe],i=[];for(let s of e)s.data[yM]!==void 0?i.push(s):n4(s,r);n[Rl]=i}function n4(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[Hs];for(;t<i;){let s=r.nextSibling;QM(e,r,!1),r=s,t++}}}function r4(n,e){let t=[];for(let r of e)for(let i=0;i<(r[ch]??1);i++){let s={data:r,firstChild:null};r[Hs]>0&&(s.firstChild=n,n=Yh(r[Hs],n)),t.push(s)}return[n,t]}var _O=()=>null;function i4(n,e){let t=n[Rl];return!e||t===null||t.length===0?null:t[0].data[Qv]===e?t.shift():(t4(n),null)}function s4(){_O=i4}function ga(n,e){return _O(n,e)}var o4=class{},SO=class{},gE=class{resolveComponentFactory(e){throw Error(`No component factory found for ${an(e)}.`)}},Zh=class{static NULL=new gE},ma=class{},Jl=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>a4()}return n})();function a4(){let n=ie(),e=Vt(),t=br(e.index,n);return(Ui(t)?t:n)[Pe]}var c4=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>null})}return n})();function mE(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=Dv(i,a);else if(s==2){let c=a,l=e[++o];r=Dv(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function wt(n,e=pe.Default){let t=ie();if(t===null)return J(n,e);let r=Vt();return YN(r,t,Rt(n),e)}function l4(){let n="invalid";throw new Error(n)}function jw(n,e,t,r,i){let s=r===null?null:{"":-1},o=i(n,t);if(o!==null){let a,c=null,l=null,u=d4(o);u===null?a=o:[a,c,l]=u,p4(n,e,t,a,s,c,l)}s!==null&&r!==null&&u4(t,r,s)}function u4(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new B(-301,!1);r.push(e[i],s)}}function d4(n){let e=null,t=!1;for(let o=0;o<n.length;o++){let a=n[o];if(o===0&&Tr(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let r=null,i=null,s=null;for(let o of n)o.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,s??=new Map,f4(o,r,s,i)),o===e&&(r??=[],r.push(o));return r!==null?(r.push(...e===null?n:n.slice(1)),[r,i,s]):null}function f4(n,e,t,r){let i=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[i,e.length-1])}function h4(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function p4(n,e,t,r,i,s,o){let a=r.length,c=!1;for(let h=0;h<a;h++){let f=r[h];!c&&Tr(f)&&(c=!0,h4(n,t,h)),Vv(ih(t,e),n,f.type)}w4(t,n.data.length,a);for(let h=0;h<a;h++){let f=r[h];f.providersResolver&&f.providersResolver(f)}let l=!1,u=!1,d=XM(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let h=0;h<a;h++){let f=r[h];if(t.mergedAttrs=ha(t.mergedAttrs,f.hostAttrs),m4(n,t,e,d,f),E4(d,f,i),o!==null&&o.has(f)){let[w,S]=o.get(f);t.directiveToIndex.set(f.type,[d,w+t.directiveStart,S+t.directiveStart])}else(s===null||!s.has(f))&&t.directiveToIndex.set(f.type,d);f.contentQueries!==null&&(t.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(t.flags|=64);let v=f.type.prototype;!l&&(v.ngOnChanges||v.ngOnInit||v.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!u&&(v.ngOnChanges||v.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),u=!0),d++}g4(n,t,s)}function g4(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))bR(0,e,i,r),bR(1,e,i,r),SR(e,r,!1);else{let s=t.get(i);_R(0,e,s,r),_R(1,e,s,r),SR(e,r,!0)}}}function bR(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;n===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),CO(e,s)}}function _R(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,s),CO(e,o)}}function CO(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function SR(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:s}=n;if(r===null||!t&&i===null||t&&s===null||Cw(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let l=i[c];for(let u of l)if(u===e){o??=[],o.push(c,r[a+1]);break}}else if(t&&s.hasOwnProperty(c)){let l=s[c];for(let u=0;u<l.length;u+=2)if(l[u]===e){o??=[],o.push(l[u+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function m4(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=Gs(i.type,!0)),o=new Js(s,Tr(i),wt);n.blueprint[r]=o,t[r]=o,y4(n,e,r,XM(n,t,i.hostVars,un),i)}function y4(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;v4(o)!=a&&o.push(a),o.push(t,r,s)}}function v4(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function E4(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Tr(e)&&(t[""]=n)}}function w4(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function IO(n,e,t,r,i,s,o,a){let c=e.consts,l=$i(c,o),u=Zl(e,n,2,r,l);return s&&jw(e,t,u,$i(c,a),i),u.mergedAttrs=ha(u.mergedAttrs,u.attrs),u.attrs!==null&&mE(u,u.attrs,!1),u.mergedAttrs!==null&&mE(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function DO(n,e){ow(n,e),YE(e)&&n.queries.elementEnd(e)}var dh=class extends Zh{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=ji(e);return new ya(t,this.ngModule)}};function T4(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],s={propName:t,templateName:e,isSignal:(r&$h.SignalBased)!==0};return i&&(s.transform=i),s})}function b4(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function _4(n,e,t){let r=e instanceof Bt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Bv(t,r):t}function S4(n){let e=n.get(ma,null);if(e===null)throw new B(407,!1);let t=n.get(c4,null),r=n.get(ni,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r}}function C4(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return Iw(e,t,t==="svg"?bN:t==="math"?c$:null)}var ya=class extends SO{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=T4(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=b4(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=SH(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){xe(22);let s=me(null);try{let o=this.componentDef,a=r?["ng-version","19.2.3"]:CH(this.componentDef.selectors[0]),c=Dw(0,null,null,1,0,null,null,null,null,[a],null),l=_4(o,i||this.ngModule,e),u=S4(l),d=u.rendererFactory.createRenderer(null,o),h=r?OH(d,r,o.encapsulation,l):C4(o,d),f=Aw(null,c,null,512|JM(o),null,null,u,d,l,null,AM(h,l,!0));f[_e]=h,iw(f);let v=null;try{let w=IO(_e,c,f,"#host",()=>[this.componentDef],!0,0);h&&(ZM(d,h,w),Ia(h,f)),zh(c,f,w),_w(c,w,f),DO(c,w),t!==void 0&&I4(w,this.ngContentSelectors,t),v=br(w.index,f),f[lt]=v[lt],xw(c,f,null)}catch(w){throw v!==null&&Hv(v),Hv(f),w}finally{xe(23),sw()}return new yE(this.componentType,f)}finally{me(s)}}},yE=class extends o4{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=ZE(t[Y],_e),this.location=Ca(this._tNode,t),this.instance=br(this._tNode.index,t)[lt],this.hostView=this.changeDetectorRef=new Bl(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,s=kw(r,i[Y],i,e,t);this.previousInputValues.set(e,t);let o=br(r.index,i);Vw(o,1)}get injector(){return new zs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function I4(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null&&s.length?Array.from(s):null)}}var li=(()=>{class n{static __NG_ELEMENT_ID__=D4}return n})();function D4(){let n=Vt();return RO(n,ie())}var A4=li,AO=class extends A4{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Ca(this._hostTNode,this._hostLView)}get injector(){return new zs(this._hostTNode,this._hostLView)}get parentInjector(){let e=aw(this._hostTNode,this._hostLView);if(zN(e)){let t=nh(e,this._hostLView),r=th(e),i=t[Y].data[r+8];return new zs(i,t)}else return new zs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=CR(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Nt}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=ga(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,pa(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!r$(e),a;if(o)a=t;else{let v=t||{};a=v.index,r=v.injector,i=v.projectableNodes,s=v.environmentInjector||v.ngModuleRef}let c=o?e:new ya(ji(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let w=(o?l:this.parentInjector).get(Bt,null);w&&(s=w)}let u=ji(c.componentType??{}),d=ga(this._lContainer,u?.id??null),h=d?.firstChild??null,f=c.create(l,i,h,s);return this.insertImpl(f.hostView,a,pa(this._hostTNode,d)),f}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(u$(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Et],l=new AO(c,c[ln],c[Et]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return Yl(o,i,s,r),e.attachToViewContainerRef(),oN(Ev(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=CR(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Fl(this._lContainer,t);r&&(Zf(Ev(this._lContainer),t),Hh(r[Y],r))}detach(e){let t=this._adjustIndex(e,-1),r=Fl(this._lContainer,t);return r&&Zf(Ev(this._lContainer),t)!=null?new Bl(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function CR(n){return n[Xf]}function Ev(n){return n[Xf]||(n[Xf]=[])}function RO(n,e){let t,r=e[n.index];return Rn(r)?t=r:(t=mO(r,e,null,n),e[n.index]=t,Rw(e,t)),NO(t,e,n,r),new AO(t,n,e)}function R4(n,e){let t=n[Pe],r=t.createComment(""),i=Jn(e,n),s=t.parentNode(i);return lh(t,s,r,t.nextSibling(i),!1),r}var NO=MO,qw=()=>!1;function N4(n,e,t){return qw(n,e,t)}function MO(n,e,t,r){if(n[ti])return;let i;t.type&8?i=qe(r):i=R4(e,t),n[ti]=i}function M4(n,e,t){if(n[ti]&&n[Rl])return!0;let r=t[Yn],i=e.index-_e;if(!r||xl(e)||Wl(r,i))return!1;let o=Jv(r,i),a=r.data[Pl]?.[i],[c,l]=r4(o,a);return n[ti]=c,n[Rl]=l,!0}function O4(n,e,t,r){qw(n,t,e)||MO(n,e,t,r)}function k4(){NO=O4,qw=M4}var vE=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},EE=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)zw(e,t).matches!==null&&this.queries[t].setDirty()}},fh=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=U4(e):this.predicate=e}},wE=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},TE=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,t,x4(t,s)),this.matchTNodeWithReadOption(e,t,zf(t,e,s,!1,!1))}else r===Xs?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,zf(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===oi||i===li||i===Xs&&t.type&4)this.addMatch(t.index,-2);else{let s=zf(t,e,i,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function x4(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function P4(n,e){return n.type&11?Ca(n,e):n.type&4?Kh(n,e):null}function L4(n,e,t,r){return t===-1?P4(e,n):t===-2?F4(n,e,r):Nl(n,n[Y],t,e)}function F4(n,e,t){if(t===oi)return Ca(e,n);if(t===Xs)return Kh(e,n);if(t===li)return RO(e,n)}function OO(n,e,t,r){let i=e[ei].queries[r];if(i.matches===null){let s=n.data,o=t.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let l=o[c];if(l<0)a.push(null);else{let u=s[l];a.push(L4(e,u,o[c+1],t.metadata.read))}}i.matches=a}return i.matches}function bE(n,e,t,r){let i=n.queries.getByIndex(t),s=i.matches;if(s!==null){let o=OO(n,e,i,t);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)r.push(o[a/2]);else{let l=s[a+1],u=e[-c];for(let d=Nt;d<u.length;d++){let h=u[d];h[Ks]===h[Et]&&bE(h[Y],h,l,r)}if(u[da]!==null){let d=u[da];for(let h=0;h<d.length;h++){let f=d[h];bE(f[Y],f,l,r)}}}}}return r}function $w(n,e){return n[ei].queries[e].queryList}function kO(n,e,t){let r=new zv((t&4)===4);return h$(n,e,r,r.destroy),(e[ei]??=new EE).queries.push(new vE(r))-1}function B4(n,e,t){let r=Qe();return r.firstCreatePass&&(PO(r,new fh(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),kO(r,ie(),e)}function xO(n,e,t,r){let i=Qe();if(i.firstCreatePass){let s=Vt();PO(i,new fh(e,t,r),s.index),V4(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return kO(i,ie(),t)}function U4(n){return n.split(",").map(e=>e.trim())}function PO(n,e,t){n.queries===null&&(n.queries=new wE),n.queries.track(new TE(e,t))}function V4(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function zw(n,e){return n.queries.getByIndex(e)}function LO(n,e){let t=n[Y],r=zw(t,e);return r.crossesNgTemplate?bE(t,n,e,[]):OO(t,n,r,e)}function FO(n,e,t){let r,i=iv(()=>{r._dirtyCounter();let s=z4(r,n);if(e&&s===void 0)throw new B(-951,!1);return s});return r=i[sn],r._dirtyCounter=fw(0),r._flatValue=void 0,i}function j4(n){return FO(!0,!1,n)}function q4(n){return FO(!0,!0,n)}function $4(n,e){let t=n[sn];t._lView=ie(),t._queryIndex=e,t._queryList=$w(t._lView,e),t._queryList.onDirty(()=>t._dirtyCounter.update(r=>r+1))}function z4(n,e){let t=n._lView,r=n._queryIndex;if(t===void 0||r===void 0||t[te]&4)return e?void 0:Ft;let i=$w(t,r),s=LO(t,r);return i.reset(s,oM),e?i.first:i._changesDetected||n._flatValue===void 0?n._flatValue=i.toArray():n._flatValue}function IR(n,e){return j4(e)}function H4(n,e){return q4(e)}var eve=(IR.required=H4,IR);function G4(n){let e=[],t=new Map;function r(i){let s=t.get(i);if(!s){let o=n(i);t.set(i,s=o.then(Y4))}return s}return hh.forEach((i,s)=>{let o=[];i.templateUrl&&o.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,u=i.styleUrls;i.styleUrls.forEach((d,h)=>{a.push(""),o.push(r(d).then(f=>{a[l+h]=f,u.splice(u.indexOf(d),1),u.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&o.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let c=Promise.all(o).then(()=>Z4(s));e.push(c)}),K4(),Promise.all(e).then(()=>{})}var hh=new Map,W4=new Set;function K4(){let n=hh;return hh=new Map,n}function Q4(){return hh.size===0}function Y4(n){return typeof n=="string"?n:n.text()}function Z4(n){W4.delete(n)}var va=class{},Hw=class{};var ph=class extends va{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new dh(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let s=lN(e);this._bootstrapComponents=$M(s.bootstrap),this._r3Injector=XN(e,t,[{provide:va,useValue:this},{provide:Zh,useValue:this.componentFactoryResolver},...r],an(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},gh=class extends Hw{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new ph(this.moduleType,e,[])}};function J4(n,e,t){return new ph(n,e,t,!1)}var mh=class extends va{injector;componentFactoryResolver=new dh(this);instance=null;constructor(e){super();let t=new Cl([...e.providers,{provide:va,useValue:this},{provide:Zh,useValue:this.componentFactoryResolver}],e.parent||Rh(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Gw(n,e,t=null){return new mh({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var X4=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=dN(!1,t.type),i=r.length>0?Gw([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=H({token:n,providedIn:"environment",factory:()=>new n(J(Bt))})}return n})();function BO(n){return jl(()=>{let e=VO(n),t=De(V({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===lM.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(X4).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Zn.Emulated,styles:n.styles||Ft,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Xn("NgStandalone"),jO(t);let r=n.dependencies;return t.directiveDefs=DR(r,!1),t.pipeDefs=DR(r,!0),t.id=s6(t),t})}function e6(n){return ji(n)||uN(n)}function t6(n){return n!==null}function Xl(n){return jl(()=>({type:n.type,bootstrap:n.bootstrap||Ft,declarations:n.declarations||Ft,imports:n.imports||Ft,exports:n.exports||Ft,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function n6(n,e){if(n==null)return wr;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a,c;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,c=i[3]||null):(s=i,o=i,a=$h.None,c=null),t[s]=[r,a,c],e[s]=o}return t}function r6(n){if(n==null)return wr;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Qi(n){return jl(()=>{let e=VO(n);return jO(e),e})}function UO(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function VO(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||wr,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Ft,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:n6(n.inputs,e),outputs:r6(n.outputs),debugInfo:null}}function jO(n){n.features?.forEach(e=>e(n))}function DR(n,e){if(!n)return null;let t=e?Hq:e6;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(t6)}var i6=new Map;function s6(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function o6(n){return Object.getPrototypeOf(n.prototype).constructor}function a6(n){let e=o6(n.type),t=!0,r=[n];for(;e;){let i;if(Tr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new B(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=wv(n.inputs),o.declaredInputs=wv(n.declaredInputs),o.outputs=wv(n.outputs);let a=i.hostBindings;a&&f6(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&u6(n,c),l&&d6(n,l),c6(n,i),_q(n.outputs,i.outputs),Tr(i)&&i.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===a6&&(t=!1)}}e=Object.getPrototypeOf(e)}l6(r)}function c6(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function l6(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ha(i.hostAttrs,t=ha(t,i.hostAttrs))}}function wv(n){return n===wr?{}:n===Ft?[]:n}function u6(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function d6(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function f6(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function rve(n){let e=t=>{let r=Array.isArray(n);t.hostDirectives===null?(t.findHostDirectiveDefs=qO,t.hostDirectives=r?n.map(_E):[n]):r?t.hostDirectives.unshift(...n.map(_E)):t.hostDirectives.unshift(n)};return e.ngInherit=!0,e}function qO(n,e,t){if(n.hostDirectives!==null)for(let r of n.hostDirectives)if(typeof r=="function"){let i=r();for(let s of i)AR(_E(s),e,t)}else AR(r,e,t)}function AR(n,e,t){let r=uN(n.directive);h6(r.declaredInputs,n.inputs),qO(r,e,t),t.set(r,n),e.push(r)}function _E(n){return typeof n=="function"?{directive:Rt(n),inputs:wr,outputs:wr}:{directive:Rt(n.directive),inputs:RR(n.inputs),outputs:RR(n.outputs)}}function RR(n){if(n===void 0||n.length===0)return wr;let e={};for(let t=0;t<n.length;t+=2)e[n[t]]=n[t+1];return e}function h6(n,e){for(let t in e)if(e.hasOwnProperty(t)){let r=e[t],i=n[t];n[r]=i}}function $O(n){return Ww(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function p6(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function Ww(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function zO(n,e,t){return n[e]=t}function vn(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Kw(n,e,t,r){let i=vn(n,e,t);return vn(n,e+1,r)||i}function g6(n,e,t,r,i){let s=Kw(n,e,t,r);return vn(n,e+2,i)||s}function m6(n,e,t,r,i,s,o,a,c){let l=e.consts,u=Zl(e,n,4,o||null,a||null);XE()&&jw(e,t,u,$i(l,c),Ow),u.mergedAttrs=ha(u.mergedAttrs,u.attrs),ow(e,u);let d=u.tView=Dw(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function yh(n,e,t,r,i,s,o,a,c,l){let u=t+_e,d=e.firstCreatePass?m6(u,e,n,r,i,s,o,a,c):e.data[u];to(d,!1);let h=HO(e,n,d,t);Fh()&&Gh(e,n,h,d),Ia(h,n);let f=mO(h,n,h,d);return n[u]=f,Rw(n,f),N4(f,d,n),Mh(d)&&zh(e,n,d),c!=null&&Nw(n,d,l),d}function y6(n,e,t,r,i,s,o,a){let c=ie(),l=Qe(),u=$i(l.consts,s);return yh(c,l,n,e,t,r,i,u,o,a),y6}var HO=GO;function GO(n,e,t,r){return Gi(!0),e[Pe].createComment("")}function v6(n,e,t,r){let i=e[Yn],s=!i||Sa()||Ki(t)||Wl(i,r);if(Gi(s),s)return GO(n,e);let o=i.data[Kv]?.[r]??null;o!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=o);let a=Qh(i,n,e,t);jh(i,r,a);let c=bw(i,r);return Yh(c,a)}function E6(){HO=v6}var Qw=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var WO=new U(""),KO=new U(""),w6=(()=>{class n{_ngZone;registry;_isZoneStable=!0;_callbacks=[];taskTrackingZone=null;constructor(t,r,i){this._ngZone=t,this.registry=r,Yw||(T6(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ce.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t()},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static \u0275fac=function(r){return new(r||n)(J(Ce),J(QO),J(KO))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),QO=(()=>{class n{_applications=new Map;registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Yw?.findTestabilityInTree(this,t,r)??null}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function T6(n){Yw=n}var Yw,YO=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>new SE})}return n})(),SE=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function Ra(n){return!!n&&typeof n.then=="function"}function Zw(n){return!!n&&typeof n.subscribe=="function"}var ZO=new U("");var JO=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=R(ZO,{optional:!0})??[];injector=R($e);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=Mt(this.injector,i);if(Ra(s))t.push(s);else if(Zw(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),eu=new U("");function XO(){LA(()=>{throw new B(600,!1)})}function b6(n){return n.isBoundToModule}var _6=10;function ek(n,e){return Array.isArray(e)?e.reduce(ek,n):V(V({},n),e)}var Sr=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=R(tz);afterRenderManager=R(wM);zonelessEnabled=R(Bh);rootEffectScheduler=R(YO);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new rt;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=R(si).hasPendingTasks.pipe(de(t=>!t));constructor(){R(Da,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=R(Bt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){xe(10);let i=t instanceof SO;if(!this._injector.get(JO).done){let h="";throw new B(405,h)}let o;i?o=t:o=this._injector.get(Zh).resolveComponentFactory(t),this.componentTypes.push(o.componentType);let a=b6(o)?void 0:this._injector.get(va),c=r||o.selector,l=o.create($e.NULL,[],c,a),u=l.location.nativeElement,d=l.injector.get(WO,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),Gf(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),xe(11,l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){xe(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Ew.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new B(101,!1);let t=me(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,me(t),this.afterTick.next(),xe(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ma,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<_6;)xe(14),this.synchronizeOnce(),xe(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)S6(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>kh(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Gf(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(eu,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Gf(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new B(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Gf(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function S6(n,e,t,r){if(!t&&!kh(n))return;fO(n,e,t&&!r?0:1)}function tk(n,e,t,r){let i=ie(),s=no();if(vn(i,s,e)){let o=Qe(),a=Lh();jH(a,i,n,e,t,r)}return tk}function nk(n,e,t,r){return vn(n,no(),t)?e+Xr(t)+r:un}function C6(n,e,t,r,i,s){let o=kN(),a=Kw(n,o,t,i);return xh(2),a?e+Xr(t)+r+Xr(i)+s:un}function I6(n,e,t,r,i,s,o,a){let c=kN(),l=g6(n,c,t,i,o);return xh(3),l?e+Xr(t)+r+Xr(i)+s+Xr(o)+a:un}function Uf(n,e){return n<<17|e<<2}function eo(n){return n>>17&32767}function D6(n){return(n&2)==2}function A6(n,e){return n&131071|e<<17}function CE(n){return n|2}function Ea(n){return(n&131068)>>2}function Tv(n,e){return n&-131069|e<<2}function R6(n){return(n&1)===1}function IE(n){return n|1}function N6(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=eo(o),c=Ea(o);n[r]=t;let l=!1,u;if(Array.isArray(t)){let d=t;u=d[1],(u===null||zl(d,u)>0)&&(l=!0)}else u=t;if(i)if(c!==0){let h=eo(n[a+1]);n[r+1]=Uf(h,a),h!==0&&(n[h+1]=Tv(n[h+1],r)),n[a+1]=A6(n[a+1],r)}else n[r+1]=Uf(a,0),a!==0&&(n[a+1]=Tv(n[a+1],r)),a=r;else n[r+1]=Uf(c,0),a===0?a=r:n[c+1]=Tv(n[c+1],r),c=r;l&&(n[r+1]=CE(n[r+1])),NR(n,u,r,!0),NR(n,u,r,!1),M6(e,u,n,r,s),o=Uf(a,c),s?e.classBindings=o:e.styleBindings=o}function M6(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&zl(s,e)>=0&&(t[r+1]=IE(t[r+1]))}function NR(n,e,t,r){let i=n[t+1],s=e===null,o=r?eo(i):Ea(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],l=n[o+1];O6(c,e)&&(a=!0,n[o+1]=r?IE(l):CE(l)),o=r?eo(l):Ea(l)}a&&(n[t+1]=r?CE(i):IE(i))}function O6(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?zl(n,e)>=0:!1}var mt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function rk(n){return n.substring(mt.key,mt.keyEnd)}function k6(n){return n.substring(mt.value,mt.valueEnd)}function x6(n){return ok(n),ik(n,wa(n,0,mt.textEnd))}function ik(n,e){let t=mt.textEnd;return t===e?-1:(e=mt.keyEnd=L6(n,mt.key=e,t),wa(n,e,t))}function P6(n){return ok(n),sk(n,wa(n,0,mt.textEnd))}function sk(n,e){let t=mt.textEnd,r=mt.key=wa(n,e,t);return t===r?-1:(r=mt.keyEnd=F6(n,r,t),r=MR(n,r,t,58),r=mt.value=wa(n,r,t),r=mt.valueEnd=B6(n,r,t),MR(n,r,t,59))}function ok(n){mt.key=0,mt.keyEnd=0,mt.value=0,mt.valueEnd=0,mt.textEnd=n.length}function wa(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function L6(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function F6(n,e,t){let r;for(;e<t&&((r=n.charCodeAt(e))===45||r===95||(r&-33)>=65&&(r&-33)<=90||r>=48&&r<=57);)e++;return e}function MR(n,e,t,r){return e=wa(n,e,t),e<t&&e++,e}function B6(n,e,t){let r=-1,i=-1,s=-1,o=e,a=o;for(;o<t;){let c=n.charCodeAt(o++);if(c===59)return a;c===34||c===39?a=o=OR(n,c,o,t):e===o-4&&s===85&&i===82&&r===76&&c===40?a=o=OR(n,41,o,t):c>32&&(a=o),s=i,i=r,r=c&-33}return a}function OR(n,e,t,r){let i=-1,s=t;for(;s<r;){let o=n.charCodeAt(s++);if(o==e&&i!==92)return s;o==92&&i===92?i=0:i=o}throw new Error}function U6(n,e,t){let r=ie(),i=no();if(vn(r,i,e)){let s=Qe(),o=Lh();Mw(s,o,r,n,e,r[Pe],t,!1)}return U6}function DE(n,e,t,r,i){kw(e,n,t,i?"class":"style",r)}function ak(n,e,t){return lk(n,e,t,!1),ak}function V6(n,e){return lk(n,e,null,!0),V6}function ive(n){Jw(fk,j6,n,!1)}function j6(n,e){for(let t=P6(e);t>=0;t=sk(e,t))fk(n,rk(e),k6(e))}function sve(n){Jw(W6,ck,n,!0)}function ck(n,e){for(let t=x6(e);t>=0;t=ik(e,t))$l(n,rk(e),!0)}function lk(n,e,t,r){let i=ie(),s=Qe(),o=xh(2);if(s.firstUpdatePass&&dk(s,n,o,r),e!==un&&vn(i,o,e)){let a=s.data[Cr()];hk(s,a,i,i[Pe],n,i[o+1]=Q6(e,t),r,o)}}function Jw(n,e,t,r){let i=Qe(),s=xh(2);i.firstUpdatePass&&dk(i,null,s,r);let o=ie();if(t!==un&&vn(o,s,t)){let a=i.data[Cr()];if(pk(a,r)&&!uk(i,s)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=Dv(c,t||"")),DE(i,a,o,t,r)}else K6(i,a,o,o[Pe],o[s+1],o[s+1]=G6(n,e,t),r,s)}}function uk(n,e){return e>=n.expandoStartIndex}function dk(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[Cr()],o=uk(n,t);pk(s,r)&&e===null&&!o&&(e=!1),e=q6(i,s,e,r),N6(i,s,e,t,o,r)}}function q6(n,e,t,r){let i=I$(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=bv(null,n,e,t,r),t=Vl(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=bv(i,n,e,t,r),s===null){let c=$6(n,e,r);c!==void 0&&Array.isArray(c)&&(c=bv(null,n,e,c[1],r),c=Vl(c,e.attrs,r),z6(n,e,r,c))}else s=H6(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function $6(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Ea(r)!==0)return n[eo(r)]}function z6(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[eo(i)]=r}function H6(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=Vl(r,o,t)}return Vl(r,e.attrs,t)}function bv(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=Vl(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Vl(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),$l(n,o,t?!0:e[++s]))}return n===void 0?null:n}function G6(n,e,t){if(t==null||t==="")return Ft;let r=[],i=Ir(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function fk(n,e,t){$l(n,e,Ir(t))}function W6(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&$l(n,r,t)}function K6(n,e,t,r,i,s,o,a){i===un&&(i=Ft);let c=0,l=0,u=0<i.length?i[0]:null,d=0<s.length?s[0]:null;for(;u!==null||d!==null;){let h=c<i.length?i[c+1]:void 0,f=l<s.length?s[l+1]:void 0,v=null,w;u===d?(c+=2,l+=2,h!==f&&(v=d,w=f)):d===null||u!==null&&u<d?(c+=2,v=u):(l+=2,v=d,w=f),v!==null&&hk(n,e,t,r,v,w,o,a),u=c<i.length?i[c]:null,d=l<s.length?s[l]:null}}function hk(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],u=R6(l)?kR(c,e,t,i,Ea(l),o):void 0;if(!vh(u)){vh(s)||D6(l)&&(s=kR(c,null,t,i,a,o));let d=SN(Cr(),t);i3(r,o,d,i,s)}}function kR(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=t[i+1];h===un&&(h=d?Ft:void 0);let f=d?lv(h,r):u===r?h:void 0;if(l&&!vh(f)&&(f=lv(c,r)),vh(f)&&(a=f,o))return a;let v=n[i+1];i=o?eo(v):Ea(v)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=lv(c,r))}return a}function vh(n){return n!==void 0}function Q6(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=an(Ir(n)))),n}function pk(n,e){return(n.flags&(e?8:16))!==0}function ove(n,e,t){let r=ie(),i=nk(r,n,e,t);Jw($l,ck,i,!0)}var AE=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),s=this.detach(i);if(i-r>1){let o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,t){this.attach(t,this.detach(e))}};function _v(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function Y6(n,e,t){let r,i,s=0,o=n.length-1,a=void 0;if(Array.isArray(e)){let c=e.length-1;for(;s<=o&&s<=c;){let l=n.at(s),u=e[s],d=_v(s,l,s,u,t);if(d!==0){d<0&&n.updateValue(s,u),s++;continue}let h=n.at(o),f=e[c],v=_v(o,h,c,f,t);if(v!==0){v<0&&n.updateValue(o,f),o--,c--;continue}let w=t(s,l),S=t(o,h),I=t(s,u);if(Object.is(I,S)){let D=t(c,f);Object.is(D,w)?(n.swap(s,o),n.updateValue(o,f),c--,o--):n.move(o,s),n.updateValue(s,u),s++;continue}if(r??=new Eh,i??=PR(n,s,o,t),RE(n,r,s,I))n.updateValue(s,u),s++,o++;else if(i.has(I))r.set(w,n.detach(s)),o--;else{let D=n.create(s,e[s]);n.attach(s,D),s++,o++}}for(;s<=c;)xR(n,r,t,s,e[s]),s++}else if(e!=null){let c=e[Symbol.iterator](),l=c.next();for(;!l.done&&s<=o;){let u=n.at(s),d=l.value,h=_v(s,u,s,d,t);if(h!==0)h<0&&n.updateValue(s,d),s++,l=c.next();else{r??=new Eh,i??=PR(n,s,o,t);let f=t(s,d);if(RE(n,r,s,f))n.updateValue(s,d),s++,o++,l=c.next();else if(!i.has(f))n.attach(s,n.create(s,d)),s++,o++,l=c.next();else{let v=t(s,u);r.set(v,n.detach(s)),o--}}}for(;!l.done;)xR(n,r,t,n.length,l.value),l=c.next()}for(;s<=o;)n.destroy(n.detach(o--));r?.forEach(c=>{n.destroy(c)})}function RE(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function xR(n,e,t,r,i){if(RE(n,e,r,t(r,i)))n.updateValue(r,i);else{let s=n.create(r,i);n.attach(r,s)}}function PR(n,e,t,r){let i=new Set;for(let s=e;s<=t;s++)i.add(r(s,n.at(s)));return i}var Eh=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function ave(n,e){Xn("NgControlFlow");let t=ie(),r=no(),i=t[r]!==un?t[r]:-1,s=i!==-1?wh(t,_e+i):void 0,o=0;if(vn(t,r,n)){let a=me(null);try{if(s!==void 0&&vO(s,o),n!==-1){let c=_e+n,l=wh(t,c),u=kE(t[Y],c),d=ga(l,u.tView.ssrId),h=Ql(t,u,e,{dehydratedView:d});Yl(l,h,o,pa(u,d))}}finally{me(a)}}else if(s!==void 0){let a=yO(s,o);a!==void 0&&(a[lt]=e)}}var NE=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-Nt}};var ME=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function cve(n,e,t,r,i,s,o,a,c,l,u,d,h){Xn("NgControlFlow");let f=ie(),v=Qe(),w=c!==void 0,S=ie(),I=a?o.bind(S[Ut][lt]):o,D=new ME(w,I);S[_e+n]=D,yh(f,v,n+1,e,t,r,i,$i(v.consts,s)),w&&yh(f,v,n+2,c,l,u,d,$i(v.consts,h))}var OE=class extends AE{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-Nt}at(e){return this.getLView(e)[lt].$implicit}attach(e,t){let r=t[Yn];this.needsIndexUpdate||=e!==this.length,Yl(this.lContainer,t,e,pa(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,Z6(this.lContainer,e)}create(e,t){let r=ga(this.lContainer,this.templateTNode.tView.ssrId),i=Ql(this.hostLView,this.templateTNode,new NE(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Hh(e[Y],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[lt].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[lt].$index=e}getLView(e){return J6(this.lContainer,e)}};function lve(n){let e=me(null),t=Cr();try{let r=ie(),i=r[Y],s=r[t],o=t+1,a=wh(r,o);if(s.liveCollection===void 0){let l=kE(i,o);s.liveCollection=new OE(a,r,l)}else s.liveCollection.reset();let c=s.liveCollection;if(Y6(c,n,s.trackByFn),c.updateIndexes(),s.hasEmptyBlock){let l=no(),u=c.length===0;if(vn(r,l,u)){let d=t+2,h=wh(r,d);if(u){let f=kE(i,d),v=ga(h,f.tView.ssrId),w=Ql(r,f,void 0,{dehydratedView:v});Yl(h,w,0,pa(f,v))}else vO(h,0)}}}finally{me(e)}}function wh(n,e){return n[e]}function Z6(n,e){return Fl(n,e)}function J6(n,e){return yO(n,e)}function kE(n,e){return ZE(n,e)}function gk(n,e,t,r){let i=ie(),s=Qe(),o=_e+n,a=i[Pe],c=s.firstCreatePass?IO(o,s,i,e,Ow,XE(),t,r):s.data[o],l=yk(s,i,c,a,e,n);i[o]=l;let u=Mh(c);return to(c,!0),ZM(a,l,c),!Ki(c)&&Fh()&&Gh(s,i,l,c),(p$()===0||u)&&Ia(l,i),g$(),u&&(zh(s,i,c),_w(s,c,i)),r!==null&&Nw(i,c),gk}function mk(){let n=Vt();ew()?tw():(n=n.parent,to(n,!1));let e=n;y$(e)&&E$(),m$();let t=Qe();return t.firstCreatePass&&DO(t,e),e.classesWithoutHost!=null&&k$(e)&&DE(t,e,ie(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&x$(e)&&DE(t,e,ie(),e.stylesWithoutHost,!1),mk}function Xw(n,e,t,r){return gk(n,e,t,r),mk(),Xw}var yk=(n,e,t,r,i,s)=>(Gi(!0),Iw(r,i,UN()));function X6(n,e,t,r,i,s){let o=e[Yn],a=!o||Sa()||Ki(t)||Wl(o,s);if(Gi(a),a)return Iw(r,i,UN());let c=Qh(o,n,e,t);return RM(o,s)&&jh(o,s,c.nextSibling),o&&(hw(t)||cM(c))&&Hi(t)&&(v$(t),YM(c)),c}function eG(){yk=X6}function tG(n,e,t,r,i){let s=e.consts,o=$i(s,r),a=Zl(e,n,8,"ng-container",o);o!==null&&mE(a,o,!0);let c=$i(s,i);return XE()&&jw(e,t,a,c,Ow),a.mergedAttrs=ha(a.mergedAttrs,a.attrs),e.queries!==null&&e.queries.elementStart(e,a),a}function nG(n,e,t){let r=ie(),i=Qe(),s=n+_e,o=i.firstCreatePass?tG(s,i,r,e,t):i.data[s];to(o,!0);let a=vk(i,r,o,n);return r[s]=a,Fh()&&Gh(i,r,a,o),Ia(a,r),Mh(o)&&(zh(i,r,o),_w(i,o,r)),t!=null&&Nw(r,o),nG}function rG(){let n=Vt(),e=Qe();return ew()?tw():(n=n.parent,to(n,!1)),e.firstCreatePass&&(ow(e,n),YE(n)&&e.queries.elementEnd(n)),rG}var vk=(n,e,t,r)=>(Gi(!0),WM(e[Pe],""));function iG(n,e,t,r){let i,s=e[Yn],o=!s||Sa()||Wl(s,r)||Ki(t);if(Gi(o),o)return WM(e[Pe],"");let a=Qh(s,n,e,t),c=jz(s,r);return jh(s,r,a),i=Yh(c,a),i}function sG(){vk=iG}function uve(){return ie()}function oG(n,e,t){let r=ie(),i=no();if(vn(r,i,e)){let s=Qe(),o=Lh();Mw(s,o,r,n,e,r[Pe],t,!0)}return oG}var Th="en-US";var aG=Th;function cG(n){typeof n=="string"&&(aG=n.toLowerCase().replace(/_/g,"-"))}var lG=(n,e,t)=>{};function Ek(n,e,t,r){let i=ie(),s=Qe(),o=Vt();return wk(s,i,i[Pe],o,n,e,r),Ek}function uG(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[Il],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function wk(n,e,t,r,i,s,o){let a=Mh(r),l=n.firstCreatePass?NN(n):null,u=e[lt],d=RN(e),h=!0;if(r.type&3||o){let f=Jn(r,e),v=o?o(f):f,w=d.length,S=o?D=>o(qe(D[r.index])):r.index,I=null;if(!o&&a&&(I=uG(n,e,i,r.index)),I!==null){let D=I.__ngLastListenerFn__||I;D.__ngNextListenerFn__=s,I.__ngLastListenerFn__=s,h=!1}else{s=BR(r,e,u,s),lG(v,i,s);let D=t.listen(v,i,s);d.push(s,D),l&&l.push(i,S,w,w+1)}}else s=BR(r,e,u,s);if(h){let f=r.outputs?.[i],v=r.hostDirectiveOutputs?.[i];if(v&&v.length)for(let w=0;w<v.length;w+=2){let S=v[w],I=v[w+1];LR(r,n,e,S,I,i,s,d,l)}if(f&&f.length)for(let w of f)LR(r,n,e,w,i,i,s,d,l)}}function LR(n,e,t,r,i,s,o,a,c){let l=t[r],d=e.data[r].outputs[i],f=l[d].subscribe(o),v=a.length;a.push(o,f),c&&c.push(s,n.index,v,-(v+1))}function FR(n,e,t,r){let i=me(null);try{return xe(6,e,t),t(r)!==!1}catch(s){return rO(n,s),!1}finally{xe(7,e,t),me(i)}}function BR(n,e,t,r){return function i(s){if(s===Function)return r;let o=Hi(n)?br(n.index,e):e;Vw(o,5);let a=FR(e,t,r,s),c=i.__ngNextListenerFn__;for(;c;)a=FR(e,t,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function dve(n=1){return A$(n)}function dG(n,e){let t=null,r=EH(n);for(let i=0;i<e.length;i++){let s=e[i];if(s==="*"){t=i;continue}if(r===null?HM(n,s,!0):bH(r,s))return i}return t}function fve(n){let e=ie()[Ut][ln];if(!e.projection){let t=n?n.length:1,r=e.projection=qq(t,null),i=r.slice(),s=e.child;for(;s!==null;){if(s.type!==128){let o=n?dG(s,n):0;o!==null&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s)}s=s.next}}}function hve(n,e=0,t,r,i,s){let o=ie(),a=Qe(),c=r?n+1:null;c!==null&&yh(o,a,c,r,i,s,null,t);let l=Zl(a,_e+n,16,null,t||null);l.projection===null&&(l.projection=e),tw();let d=!o[Yn]||Sa();o[Ut][ln].projection[l.projection]===null&&c!==null?fG(o,a,c):d&&!Ki(l)&&n3(a,o,l)}function fG(n,e,t){let r=_e+t,i=e.data[r],s=n[r],o=ga(s,i.tView.ssrId),a=Ql(n,i,void 0,{dehydratedView:o});Yl(s,a,0,pa(i,o))}function hG(n,e,t,r){xO(n,e,t,r)}function pve(n,e,t){B4(n,e,t)}function pG(n){let e=ie(),t=Qe(),r=rw();Ph(r+1);let i=zw(t,r);if(n.dirty&&l$(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let s=LO(e,r);n.reset(s,oM),n.notifyOnChanges()}return!0}return!1}function gG(){return $w(ie(),rw())}function gve(n,e,t,r,i){$4(e,xO(n,t,r,i))}function mve(n=1){Ph(rw()+n)}function mG(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function yve(n){let e=T$();return CN(e,_e+n)}function vve(n,e=""){let t=ie(),r=Qe(),i=n+_e,s=r.firstCreatePass?Zl(r,i,1,e,null):r.data[i],o=Tk(r,t,s,e,n);t[i]=o,Fh()&&Gh(r,t,o,s),to(s,!1)}var Tk=(n,e,t,r,i)=>(Gi(!0),GM(e[Pe],r));function yG(n,e,t,r,i){let s=e[Yn],o=!s||Sa()||Ki(t)||Wl(s,i);return Gi(o),o?GM(e[Pe],r):Qh(s,n,e,t)}function vG(){Tk=yG}function EG(n){return bk("",n,""),EG}function bk(n,e,t){let r=ie(),i=nk(r,n,e,t);return i!==un&&eT(r,Cr(),i),bk}function wG(n,e,t,r,i){let s=ie(),o=C6(s,n,e,t,r,i);return o!==un&&eT(s,Cr(),o),wG}function TG(n,e,t,r,i,s,o){let a=ie(),c=I6(a,n,e,t,r,i,s,o);return c!==un&&eT(a,Cr(),c),TG}function eT(n,e,t){let r=SN(e,n);IH(n[Pe],r,t)}function bG(n,e,t){aM(e)&&(e=e());let r=ie(),i=no();if(vn(r,i,e)){let s=Qe(),o=Lh();Mw(s,o,r,n,e,r[Pe],t,!1)}return bG}function Eve(n,e){let t=aM(n);return t&&n.set(e),t}function _G(n,e){let t=ie(),r=Qe(),i=Vt();return wk(r,t,t[Pe],i,n,e),_G}function SG(n,e,t){let r=Qe();if(r.firstCreatePass){let i=Tr(n);xE(t,r.data,r.blueprint,i,!0),xE(e,r.data,r.blueprint,i,!1)}}function xE(n,e,t,r,i){if(n=Rt(n),Array.isArray(n))for(let s=0;s<n.length;s++)xE(n[s],e,t,r,i);else{let s=Qe(),o=ie(),a=Vt(),c=ua(n)?n:Rt(n.provide),l=pN(n),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(ua(n)||!n.multi){let f=new Js(l,i,wt),v=Cv(c,e,i?u:u+h,d);v===-1?(Vv(ih(a,o),s,c),Sv(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(f),o.push(f)):(t[v]=f,o[v]=f)}else{let f=Cv(c,e,u+h,d),v=Cv(c,e,u,u+h),w=f>=0&&t[f],S=v>=0&&t[v];if(i&&!S||!i&&!w){Vv(ih(a,o),s,c);let I=DG(i?IG:CG,t.length,i,r,l);!i&&S&&(t[v].providerFactory=I),Sv(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(I),o.push(I)}else{let I=_k(t[i?v:f],l,!i&&r);Sv(s,n,f>-1?f:v,I)}!i&&r&&S&&t[v].componentProviders++}}}function Sv(n,e,t,r){let i=ua(e),s=Yq(e);if(i||s){let c=(s?Rt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let u=l.indexOf(t);u===-1?l.push(t,[r,c]):l[u+1].push(r,c)}else l.push(t,c)}}}function _k(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Cv(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function CG(n,e,t,r){return PE(this.multi,[])}function IG(n,e,t,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Nl(t,t[Y],this.providerFactory.index,r);s=a.slice(0,o),PE(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],PE(i,s);return s}function PE(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function DG(n,e,t,r,i){let s=new Js(n,t,wt);return s.multi=[],s.index=e,s.componentProviders=0,_k(s,i,r&&!t),s}function wve(n,e=[]){return t=>{t.providersResolver=(r,i)=>SG(r,i?i(n):n,e)}}function Tve(n,e,t,r){return Ck(ie(),nw(),n,e,t,r)}function bve(n,e,t,r,i){return AG(ie(),nw(),n,e,t,r,i)}function Sk(n,e){let t=n[e];return t===un?void 0:t}function Ck(n,e,t,r,i,s){let o=e+t;return vn(n,o,i)?zO(n,o+1,s?r.call(s,i):r(i)):Sk(n,o+1)}function AG(n,e,t,r,i,s,o){let a=e+t;return Kw(n,a,i,s)?zO(n,a+2,o?r.call(o,i,s):r(i,s)):Sk(n,a+2)}function _ve(n,e){let t=Qe(),r,i=n+_e;t.firstCreatePass?(r=RG(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=Gs(r.type,!0)),o,a=on(wt);try{let c=rh(!1),l=s();return rh(c),mG(t,ie(),i,l),l}finally{on(a)}}function RG(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Sve(n,e,t){let r=n+_e,i=ie(),s=CN(i,r);return NG(i,r)?Ck(i,nw(),e,s.transform,t,s):s.transform(t)}function NG(n,e){return n[Y].data[e].pure}function Cve(n,e){return Kh(n,e)}var Vf=null;function MG(n){Vf!==null&&(n.defaultEncapsulation!==Vf.defaultEncapsulation||n.preserveWhitespaces!==Vf.preserveWhitespaces)||(Vf=n)}var OG=[];var kG=new WeakMap,xG=new WeakMap;function Ive(){kG=new WeakMap,xG=new WeakMap,OG.length=0,i6.clear()}var zi=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Ik=new zi("19.2.3"),LE=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},tT=(()=>{class n{compileModuleSync(t){return new gh(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=lN(t),s=$M(i.declarations).reduce((o,a)=>{let c=ji(a);return c&&o.push(new ya(c)),o},[]);return new LE(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),PG=new U("");function LG(n,e,t){let r=new gh(t);return Promise.resolve(r)}function UR(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var FG=(()=>{class n{zone=R(Ce);changeDetectionScheduler=R(ni);applicationRef=R(Sr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),BG=new U("",{factory:()=>!1});function nT({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ce(De(V({},rT()),{scheduleInRootZone:t})),[{provide:Ce,useFactory:n},{provide:Ws,multi:!0,useFactory:()=>{let r=R(FG,{optional:!0});return()=>r.initialize()}},{provide:Ws,multi:!0,useFactory:()=>{let r=R(UG);return()=>{r.initialize()}}},e===!0?{provide:tM,useValue:!0}:[],{provide:nM,useValue:t??eM}]}function Dve(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=nT({ngZoneFactory:()=>{let i=rT(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Xn("NgZone_CoalesceEvent"),new Ce(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return cn([{provide:BG,useValue:!0},{provide:Bh,useValue:!1},r])}function rT(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var UG=(()=>{class n{subscription=new Je;initialized=!1;zone=R(Ce);pendingTasks=R(si);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ce.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ce.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Dk=(()=>{class n{appRef=R(Sr);taskService=R(si);ngZone=R(Ce);zonelessEnabled=R(Bh);tracing=R(Da,{optional:!0});disableScheduling=R(tM,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Je;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(oh):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(R(nM,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ah||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?rR:rM;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(oh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,rR(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function VG(){return typeof $localize<"u"&&$localize.locale||Th}var iT=new U("",{providedIn:"root",factory:()=>R(iT,pe.Optional|pe.SkipSelf)||VG()});var bh=new U(""),jG=new U("");function El(n){return!n.moduleRef}function Ak(n){let e=El(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ce);return t.run(()=>{El(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(ri,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),El(n)){let s=()=>e.destroy(),o=n.platformInjector.get(bh);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(bh);o.add(s),n.moduleRef.onDestroy(()=>{Gf(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return $G(r,t,()=>{let s=e.get(JO);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(iT,Th);if(cG(o||Th),!e.get(jG,!0))return El(n)?e.get(Sr):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(El(n)){let c=e.get(Sr);return n.rootComponent!==void 0&&c.bootstrap(n.rootComponent),c}else return qG(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function qG(n,e){let t=n.injector.get(Sr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new B(-403,!1);e.push(n)}function $G(n,e,t){try{let r=t();return Ra(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var Rk=(()=>{class n{_injector;_modules=[];_destroyListeners=[];_destroyed=!1;constructor(t){this._injector=t}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,s=()=>ez(r?.ngZone,De(V({},rT({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),o=r?.ignoreChangesOutsideZone,a=[nT({ngZoneFactory:s,ignoreChangesOutsideZone:o}),{provide:ni,useExisting:Dk}],c=J4(t.moduleType,this.injector,a);return Ak({moduleRef:c,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=ek({},r);return LG(this.injector,i,t).then(s=>this.bootstrapModuleFactory(s,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new B(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(bh,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static \u0275fac=function(r){return new(r||n)(J($e))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Vi=null,Nk=new U("");function zG(n){if(Vi&&!Vi.get(Nk,!1))throw new B(400,!1);XO(),Vi=n;let e=n.get(Rk);return xk(n),e}function Mk(n,e,t=[]){let r=`Platform: ${e}`,i=new U(r);return(s=[])=>{let o=kk();if(!o||o.injector.get(Nk,!1)){let a=[...t,...s,{provide:i,useValue:!0}];n?n(a):zG(Ok(a,r))}return HG(i)}}function Ok(n=[],e){return $e.create({name:e,providers:[{provide:Ah,useValue:"platform"},{provide:bh,useValue:new Set([()=>Vi=null])},...n]})}function HG(n){let e=kk();if(!e)throw new B(401,!1);return e}function kk(){return Vi?.get(Rk)??null}function GG(n=[]){if(Vi)return Vi;let e=Ok(n);return Vi=e,XO(),xk(e),e}function xk(n){let e=n.get(gw,null);Mt(n,()=>{e?.forEach(t=>t())})}function sT(){return!1}var Na=(()=>{class n{static __NG_ELEMENT_ID__=WG}return n})();function WG(n){return KG(Vt(),ie(),(n&16)===16)}function KG(n,e,t){if(Hi(n)&&!t){let r=br(n.index,e);return new Bl(r,r)}else if(n.type&175){let r=e[Ut];return new Bl(r,e)}return null}var FE=class{constructor(){}supports(e){return $O(e)}create(e){return new BE(e)}},QG=(n,e)=>e,BE=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||QG}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<VR(r,i,s)?t:r,a=VR(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,u=c-i;if(l!=u){for(let h=0;h<l;h++){let f=h<s.length?s[h]:s[h]=0,v=f+h;u<=v&&v<l&&(s[h]=f+1)}let d=o.previousIndex;s[d]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!$O(e))throw new B(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,p6(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new UE(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new _h),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new _h),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},UE=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},VE=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},_h=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new VE,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function VR(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}var jE=class{constructor(){}supports(e){return e instanceof Map||Ww(e)}create(){return new qE}},qE=class{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||Ww(e)))throw new B(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,t);let s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}let r=new $E(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}},$E=class{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(e){this.key=e}};function jR(){return new oT([new FE])}var oT=(()=>{class n{factories;static \u0275prov=H({token:n,providedIn:"root",factory:jR});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||jR()),deps:[[n,new sN,new Yt]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new B(901,!1)}}return n})();function qR(){return new aT([new jE])}var aT=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:qR});factories;constructor(t){this.factories=t}static create(t,r){if(r){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||qR()),deps:[[n,new sN,new Yt]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r)return r;throw new B(901,!1)}}return n})();var YG=Mk(null,"core",[]);function Pk(n){xe(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=GG(r),s=[nT({}),{provide:ni,useExisting:Dk},...t||[]],o=new mh({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return Ak({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{xe(9)}}function Lk(){return[{provide:EM,useFactory:()=>{let e=!0;return e&&Xn("NgEventReplay"),e}}]}function ZG(n,e,t){let r=new Map,i=e[Il],s=n.cleanup;if(!s||!i)return r;for(let o=0;o<s.length;){let a=s[o++],c=s[o++];if(typeof a!="string")continue;let l=a;if(!qA(l))continue;jA(l)?t.capture.add(l):t.regular.add(l);let u=qe(e[c]);o++;let d=s[o++];(typeof d=="boolean"||d>=0)&&(r.has(u)?r.get(u).push(l):r.set(u,[l]))}return r}var zE=class{views=[];indexByContent=new Map;add(e){let t=JSON.stringify(e);if(!this.indexByContent.has(t)){let r=this.views.length;return this.views.push(e),this.indexByContent.set(t,r),r}return this.indexByContent.get(t)}getAll(){return this.views}},JG=0;function Fk(n){return n.ssrId||(n.ssrId=`t${JG++}`),n.ssrId}function Bk(n,e,t){let r=[];return Ll(n,e,t,r),r.length}function XG(n){let e=[];return Uw(n,e),e.length}function Uk(n,e,t){let r=n[yt];return r&&!r.hasAttribute(Ol)?Sh(r,n,null,e):null}function Vk(n,e,t){let r=_N(n[yt]),i=Uk(r,e);if(i===null)return;let s=qe(r[yt]),o=n[Et],a=Sh(s,o,null,e),c=r[Pe],l=`${i}|${a}`;c.setAttribute(s,_l,l)}function Ave(n,e){let t=n.injector,r=K3(t),i=Vz(t),s=new zE,o=new Map,a=n._views,c=t.get(EM,vz),l={regular:new Set,capture:new Set},u=new Map;n.injector.get(Vh);for(let f of a){let v=Fz(f);if(v!==null){let w={serializedViewCollection:s,corruptedTextNodes:o,isI18nHydrationEnabled:r,isIncrementalHydrationEnabled:i,i18nChildren:new Map,eventTypesToReplay:l,shouldReplayEvents:c,deferBlocks:u};Rn(v)?Vk(v,w):Uk(v,w),iW(o,e)}}let d=s.getAll(),h=t.get(Gl);if(h.set(IM,d),u.size>0){let f={};for(let[v,w]of u.entries())f[v]=w;h.set(kz,f)}return l}function eW(n,e,t,r,i){let s=[],o="";for(let a=Nt;a<n.length;a++){let c=n[a],l,u,d;if(fa(c)&&(c=c[_e],Rn(c))){u=XG(c)+1,Vk(c,i);let f=_N(c[yt]);d={[Qv]:f[Y].ssrId,[Hs]:u}}if(!d){let f=c[Y];f.type===1?(l=f.ssrId,u=1):(l=Fk(f),u=Bk(f,c,f.firstChild)),d={[Qv]:l,[Hs]:u};let v=!1;if(Dz(t[Y],e)){let w=Cz(t,e),S=SM(t[Y],e);if(i.isIncrementalHydrationEnabled&&S.hydrateTriggers!==null){let I=`d${i.deferBlocks.size}`;S.hydrateTriggers.has(7)&&(v=!0);let D=[];Uw(n,D);let M={[Hs]:D.length,[lR]:w[fR]},P=tW(S.hydrateTriggers);P.length>0&&(M[gz]=P),r!==null&&(M[pz]=r),i.deferBlocks.set(I,M);let G=qe(n);G!==void 0?G.nodeType===Node.COMMENT_NODE&&$R(G,I):$R(G,I),v||oW(S,D,I,i),r=I,d[yM]=I}d[lR]=w[fR]}v||Object.assign(d,jk(n[a],r,i))}let h=JSON.stringify(d);if(s.length>0&&h===o){let f=s[s.length-1];f[ch]??=1,f[ch]++}else o=h,s.push(d)}return s}function tW(n){let e=new Set([0,1,2,5]),t=[];for(let[r,i]of n)e.has(r)&&(i===null?t.push(r):t.push({trigger:r,delay:i.delay}));return t}function Sl(n,e,t,r){let i=e.index-_e;n[Yv]??={},n[Yv][i]??=H3(e,t,r)}function Iv(n,e){let t=typeof e=="number"?e:e.index-_e;n[bl]??=[],n[bl].includes(t)||n[bl].push(t)}function jk(n,e=null,t){let r={},i=n[Y],s=Q3(i,t),o=t.shouldReplayEvents?ZG(i,n,t.eventTypesToReplay):null;for(let a=_e;a<i.bindingStartIndex;a++){let c=i.data[a],l=a-_e,u=Z3(n,a,t);if(u){r[cR]??={},r[cR][l]=u.caseQueue;for(let d of u.disconnectedNodes)Iv(r,d);for(let d of u.disjointNodes){let h=i.data[d+_e];Sl(r,h,n,s)}continue}if(qN(c)&&!Ki(c)){if(Ul(c,n)&&sW(c)){Iv(r,c);continue}if(Array.isArray(c.projection)){for(let d of c.projection)if(d)if(!Array.isArray(d))!yN(d)&&!xl(d)&&(Ul(d,n)?Iv(r,d):Sl(r,d,n,s));else throw _3(qe(n[a]))}if(nW(r,c,n,s),Rn(n[a])){let d=c.tView;d!==null&&(r[Kv]??={},r[Kv][l]=Fk(d));let h=n[a][yt];if(Array.isArray(h)){let f=qe(h);f.hasAttribute(Ol)||Sh(f,h,e,t)}r[Pl]??={},r[Pl][l]=eW(n[a],c,n,e,t)}else if(Array.isArray(n[a])&&!O$(c)){let d=qe(n[a][yt]);d.hasAttribute(Ol)||Sh(d,n[a],e,t)}else if(c.type&8)r[Wv]??={},r[Wv][l]=Bk(i,n,c.child);else if(c.type&144){let d=c.next;for(;d!==null&&d.type&144;)d=d.next;d&&!xl(d)&&Sl(r,d,n,s)}else if(c.type&1){let d=qe(n[a]);NM(t,d)}if(o&&c.type&2){let d=qe(n[a]);o.has(d)&&CM(d,o.get(d),e)}}}return r}function nW(n,e,t,r){yN(e)||(e.projectionNext&&e.projectionNext!==e.next&&!xl(e.projectionNext)&&Sl(n,e.projectionNext,t,r),e.prev===null&&e.parent!==null&&Ul(e.parent,t)&&!Ul(e,t)&&Sl(n,e,t,r))}function rW(n){let e=n[lt];return e?.constructor?ji(e.constructor)?.encapsulation===Zn.ShadowDom:!1}function Sh(n,e,t,r){let i=e[Pe];if(i$(e)&&!W3()||rW(e))return i.setAttribute(n,Ol,""),null;{let s=jk(e,t,r),o=r.serializedViewCollection.add(s);return i.setAttribute(n,_l,o.toString()),o}}function $R(n,e){n.textContent=`ngh=${e}`}function iW(n,e){for(let[t,r]of n)t.after(e.createComment(r))}function sW(n){let e=n;for(;e!=null;){if(Hi(e))return!0;e=e.parent}return!1}function oW(n,e,t,r){let i=$z(n.hydrateTriggers);for(let s of i)r.eventTypesToReplay.regular.add(s);if(i.length>0){let s=e.filter(o=>o.nodeType===Node.ELEMENT_NODE);for(let o of s)CM(o,i,t)}}var zR=!1;function aW(){zR||(zR=!0,Lz(),eG(),vG(),sG(),E6(),k4(),s4(),PH())}function qk(){return cn([{provide:uR,useFactory:()=>{let e=!0;return e&&Xn("NgHydration"),e}},{provide:Ws,useValue:()=>{G3(!1)},multi:!0}])}function $k(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function cW(n,e=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):e}var lW="\u{1F170}\uFE0F",zk=!1;function Rve(n){if(!zk)return;let{startLabel:e}=Hk(n);performance.mark(e)}function Nve(n){if(!zk)return;let{startLabel:e,labelName:t,endLabel:r}=Hk(n);performance.mark(r),performance.measure(t,e,r),performance.clearMarks(e),performance.clearMarks(r)}function Hk(n){let e=`${lW}:${n}`;return{labelName:e,startLabel:`start:${e}`,endLabel:`end:${e}`}}function Jh(n){return UA(n)}function Gk(n,e){return iv(n,e?.equal)}var HE=class{[sn];constructor(e){this[sn]=e}destroy(){this[sn].destroy()}};function Wk(n,e){!e?.injector&&Ta(Wk);let t=e?.injector??R($e),r=e?.manualCleanup!==!0?t.get(ro):null,i,s=t.get(ww,null,{optional:!0}),o=t.get(ni);return s!==null&&!e?.forceRoot?(i=fW(s.view,o,n),r instanceof sh&&r._lView===s.view&&(r=null)):i=hW(n,t.get(YO),o),i.injector=t,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new HE(i)}var Kk=De(V({},ra),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:Ml,run(){if(this.dirty=!1,this.hasRun&&!Of(this))return;this.hasRun=!0;let n=r=>(this.cleanupFns??=[]).push(r),e=ml(this),t=eh(!1);try{this.maybeCleanup(),this.fn(n)}finally{eh(t),Mf(this,e)}},maybeCleanup(){if(this.cleanupFns?.length)try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[]}}}),uW=De(V({},Kk),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){yl(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),dW=De(V({},Kk),{consumerMarkedDirty(){this.view[te]|=8192,_a(this.view),this.notifier.notify(13)},destroy(){yl(this),this.onDestroyFn(),this.maybeCleanup(),this.view[Qs]?.delete(this)}});function fW(n,e,t){let r=Object.create(dW);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=t,n[Qs]??=new Set,n[Qs].add(r),r.consumerMarkedDirty(r),r}function hW(n,e,t){let r=Object.create(uW);return r.fn=n,r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.schedule(r),r.notifier.notify(12),r}function Mve(n,e){let t=ji(n),r=e.elementInjector||Rh();return new ya(t).create(r,e.projectableNodes,e.hostElement,e.environmentInjector)}function Ove(...n){return n.reduce((e,t)=>Object.assign(e,t,{providers:[...e.providers,...t.providers]}),{providers:[]})}var kve=new U("",{providedIn:"platform",factory:()=>null}),xve=new U("",{providedIn:"platform",factory:()=>null}),Pve=new U("",{providedIn:"platform",factory:()=>null});var ex=null;function Ma(){return ex}function tx(n){ex??=n}var Xh=class{};var Zt=new U(""),nx=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>R(pW),providedIn:"platform"})}return n})();var pW=(()=>{class n extends nx{_location;_history;_doc=R(Zt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ma().getBaseHref(this._doc)}onPopState(t){let r=Ma().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Ma().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function rx(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function Qk(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function io(n){return n&&n[0]!=="?"?`?${n}`:n}var ep=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>R(ix),providedIn:"root"})}return n})(),gW=new U(""),ix=(()=>{class n extends ep{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??R(Zt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return rx(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+io(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+io(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+io(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(J(nx),J(gW,8))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var nu=(()=>{class n{_subject=new rt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=vW(Qk(Yk(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+io(r))}normalize(t){return n.stripTrailingSlash(yW(this._basePath,Yk(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+io(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+io(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=io;static joinWithSlash=rx;static stripTrailingSlash=Qk;static \u0275fac=function(r){return new(r||n)(J(ep))};static \u0275prov=H({token:n,factory:()=>mW(),providedIn:"root"})}return n})();function mW(){return new nu(J(ep))}function yW(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function Yk(n){return n.replace(/\/index.html$/,"")}function vW(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function tp(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var cT=/\s+/,Zk=[],aEe=(()=>{class n{_ngEl;_renderer;initialClasses=Zk;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(cT):Zk}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(cT):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(cT).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(wt(oi),wt(Jl))};static \u0275dir=Qi({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var lT=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},cEe=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new lT(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),Jk(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);Jk(s,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(wt(li),wt(Xs),wt(oT))};static \u0275dir=Qi({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function Jk(n,e){n.context.$implicit=e.item}var lEe=(()=>{class n{_viewContainer;_context=new uT;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Xk(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Xk(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(wt(li),wt(Xs))};static \u0275dir=Qi({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),uT=class{$implicit=null;ngIf=null};function Xk(n,e){if(n&&!n.createEmbeddedView)throw new B(2020,!1)}var uEe=(()=>{class n{_ngEl;_differs;_renderer;_ngStyle=null;_differ=null;constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){let t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){let[i,s]=t.split("."),o=i.indexOf("-")===-1?void 0:_r.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,s?`${r}${s}`:r,o):this._renderer.removeStyle(this._ngEl.nativeElement,i,o)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static \u0275fac=function(r){return new(r||n)(wt(oi),wt(aT),wt(Jl))};static \u0275dir=Qi({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}})}return n})(),dEe=(()=>{class n{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(t){this._viewContainerRef=t}ngOnChanges(t){if(this._shouldRecreateView(t)){let r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let i=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,i,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(t){return!!t.ngTemplateOutlet||!!t.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(t,r,i)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,r,i):!1,get:(t,r,i)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,i)}})}static \u0275fac=function(r){return new(r||n)(wt(li))};static \u0275dir=Qi({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[Oh]})}return n})();function EW(n,e){return new B(2100,!1)}var dT=class{createSubscription(e,t){return Jh(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){Jh(()=>e.unsubscribe())}},fT=class{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}},wW=new fT,TW=new dT,fEe=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(Ra(t))return wW;if(Zw(t))return TW;throw EW(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(wt(Na,16))};static \u0275pipe=UO({name:"async",type:n,pure:!1})}return n})();var bW=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Xl({type:n});static \u0275inj=ql({})}return n})(),pT="browser",_W="server";function hEe(n){return n===pT}function gT(n){return n===_W}var SW=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>new hT})}return n})();var hT=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Oa=class{};var iu=class{},rp=class{},Zi=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=t.slice(r+1).trim();this.addHeaderEntry(i,s)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var yT=class{encodeKey(e){return sx(e)}encodeValue(e){return sx(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function IW(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}var DW=/%(\d[a-f0-9])/gi,AW={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function sx(n){return encodeURIComponent(n).replace(DW,(e,t)=>AW[t]??e)}function np(n){return`${n}`}var Yi=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new yT,e.fromString){if(e.fromObject)throw new B(2805,!1);this.map=IW(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(np):[np(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(np(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(np(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var vT=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function RW(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function ox(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function ax(n){return typeof Blob<"u"&&n instanceof Blob}function cx(n){return typeof FormData<"u"&&n instanceof FormData}function NW(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var lx="Content-Type",ux="Accept",wx="X-Request-URL",Tx="text/plain",bx="application/json",MW=`${bx}, ${Tx}, */*`,ru=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let s;if(RW(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Zi,this.context??=new vT,!this.params)this.params=new Yi,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||ox(this.body)||ax(this.body)||cx(this.body)||NW(this.body)?this.body:this.body instanceof Yi?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||cx(this.body)?null:ax(this.body)?this.body.type||null:ox(this.body)?null:typeof this.body=="string"?Tx:this.body instanceof Yi?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?bx:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,u=e.params||this.params,d=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((h,f)=>h.set(f,e.setHeaders[f]),l)),e.setParams&&(u=Object.keys(e.setParams).reduce((h,f)=>h.set(f,e.setParams[f]),u)),new n(t,r,o,{params:u,headers:l,context:d,reportProgress:c,responseType:i,withCredentials:a,transferCache:s})}},ka=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(ka||{}),su=class{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new Zi,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},ET=class n extends su{constructor(e={}){super(e)}type=ka.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},xa=class n extends su{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=ka.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ip=class extends su{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},OW=200,kW=204;function mT(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var xW=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof ru)s=t;else{let c;i.headers instanceof Zi?c=i.headers:c=new Zi(i.headers);let l;i.params&&(i.params instanceof Yi?l=i.params:l=new Yi({fromObject:i.params})),s=new ru(t,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let o=re(s).pipe(Li(c=>this.handler.handle(c)));if(t instanceof ru||i.observe==="events")return o;let a=o.pipe(Lt(c=>c instanceof xa));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(de(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new B(2806,!1);return c.body}));case"blob":return a.pipe(de(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new B(2807,!1);return c.body}));case"text":return a.pipe(de(c=>{if(c.body!==null&&typeof c.body!="string")throw new B(2808,!1);return c.body}));case"json":default:return a.pipe(de(c=>c.body))}case"response":return a;default:throw new B(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new Yi().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,mT(i,r))}post(t,r,i={}){return this.request("POST",t,mT(i,r))}put(t,r,i={}){return this.request("PUT",t,mT(i,r))}static \u0275fac=function(r){return new(r||n)(J(iu))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();var PW=new U("");function LW(n,e){return e(n)}function FW(n,e,t){return(r,i)=>Mt(t,()=>e(r,s=>n(s,i)))}var _x=new U(""),Sx=new U(""),BW=new U("",{providedIn:"root",factory:()=>!0});var dx=(()=>{class n extends iu{backend;injector;chain=null;pendingTasks=R(si);contributeToStability=R(BW);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(_x),...this.injector.get(Sx,[])]));this.chain=r.reduceRight((i,s)=>FW(i,s,this.injector),LW)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(js(()=>this.pendingTasks.remove(r)))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(J(rp),J(Bt))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();var UW=/^\)\]\}',?\n/,VW=RegExp(`^${wx}:`,"m");function jW(n){return"responseURL"in n&&n.responseURL?n.responseURL:VW.test(n.getAllResponseHeaders())?n.getResponseHeader(wx):null}var fx=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new B(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?He(r.\u0275loadImpl()):re(null)).pipe(mn(()=>new ue(s=>{let o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((w,S)=>o.setRequestHeader(w,S.join(","))),t.headers.has(ux)||o.setRequestHeader(ux,MW),!t.headers.has(lx)){let w=t.detectContentTypeHeader();w!==null&&o.setRequestHeader(lx,w)}if(t.responseType){let w=t.responseType.toLowerCase();o.responseType=w!=="json"?w:"text"}let a=t.serializeBody(),c=null,l=()=>{if(c!==null)return c;let w=o.statusText||"OK",S=new Zi(o.getAllResponseHeaders()),I=jW(o)||t.url;return c=new ET({headers:S,status:o.status,statusText:w,url:I}),c},u=()=>{let{headers:w,status:S,statusText:I,url:D}=l(),M=null;S!==kW&&(M=typeof o.response>"u"?o.responseText:o.response),S===0&&(S=M?OW:0);let P=S>=200&&S<300;if(t.responseType==="json"&&typeof M=="string"){let G=M;M=M.replace(UW,"");try{M=M!==""?JSON.parse(M):null}catch(W){M=G,P&&(P=!1,M={error:W,text:M})}}P?(s.next(new xa({body:M,headers:w,status:S,statusText:I,url:D||void 0})),s.complete()):s.error(new ip({error:M,headers:w,status:S,statusText:I,url:D||void 0}))},d=w=>{let{url:S}=l(),I=new ip({error:w,status:o.status||0,statusText:o.statusText||"Unknown Error",url:S||void 0});s.error(I)},h=!1,f=w=>{h||(s.next(l()),h=!0);let S={type:ka.DownloadProgress,loaded:w.loaded};w.lengthComputable&&(S.total=w.total),t.responseType==="text"&&o.responseText&&(S.partialText=o.responseText),s.next(S)},v=w=>{let S={type:ka.UploadProgress,loaded:w.loaded};w.lengthComputable&&(S.total=w.total),s.next(S)};return o.addEventListener("load",u),o.addEventListener("error",d),o.addEventListener("timeout",d),o.addEventListener("abort",d),t.reportProgress&&(o.addEventListener("progress",f),a!==null&&o.upload&&o.upload.addEventListener("progress",v)),o.send(a),s.next({type:ka.Sent}),()=>{o.removeEventListener("error",d),o.removeEventListener("abort",d),o.removeEventListener("load",u),o.removeEventListener("timeout",d),t.reportProgress&&(o.removeEventListener("progress",f),a!==null&&o.upload&&o.upload.removeEventListener("progress",v)),o.readyState!==o.DONE&&o.abort()}})))}static \u0275fac=function(r){return new(r||n)(J(Oa))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),Cx=new U(""),qW="XSRF-TOKEN",$W=new U("",{providedIn:"root",factory:()=>qW}),zW="X-XSRF-TOKEN",HW=new U("",{providedIn:"root",factory:()=>zW}),sp=class{},GW=(()=>{class n{doc;platform;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=tp(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(J(Zt),J(ai),J($W))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function WW(n,e){let t=n.url.toLowerCase();if(!R(Cx)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=R(sp).getToken(),i=R(HW);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function REe(...n){let e=[xW,fx,dx,{provide:iu,useExisting:dx},{provide:rp,useFactory:()=>R(PW,{optional:!0})??R(fx)},{provide:_x,useValue:WW,multi:!0},{provide:Cx,useValue:!0},{provide:sp,useClass:GW}];for(let t of n)e.push(...t.\u0275providers);return cn(e)}var KW=new U(""),hx="b",px="h",gx="s",mx="st",yx="u",vx="rt",wT=new U(""),QW=["GET","HEAD"];function YW(n,e){let h=R(wT),{isCacheActive:t}=h,r=Q0(h,["isCacheActive"]),{transferCache:i,method:s}=n;if(!t||i===!1||s==="POST"&&!r.includePostRequests&&!i||s!=="POST"&&!QW.includes(s)||!r.includeRequestsWithAuthHeaders&&ZW(n)||r.filter?.(n)===!1)return e(n);let o=R(Gl),a=R(KW,{optional:!0}),c=a?t9(n.url,a):n.url,l=XW(n,c),u=o.get(l,null),d=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(d=i.includeHeaders),u){let{[hx]:f,[vx]:v,[px]:w,[gx]:S,[mx]:I,[yx]:D}=u,M=f;switch(v){case"arraybuffer":M=new TextEncoder().encode(f).buffer;break;case"blob":M=new Blob([f]);break}let P=new Zi(w);return re(new xa({body:M,headers:P,status:S,statusText:I,url:D}))}return e(n).pipe(pt(f=>{f instanceof xa&&o.set(l,{[hx]:f.body,[px]:JW(f.headers,d),[gx]:f.status,[mx]:f.statusText,[yx]:c,[vx]:n.responseType})}))}function ZW(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function JW(n,e){if(!e)return{};let t={};for(let r of e){let i=n.getAll(r);i!==null&&(t[r]=i)}return t}function Ex(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function XW(n,e){let{params:t,method:r,responseType:i}=n,s=Ex(t),o=n.serializeBody();o instanceof URLSearchParams?o=Ex(o):typeof o!="string"&&(o="");let a=[r,i,e,o,s].join("|"),c=e9(a);return c}function e9(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function Ix(n){return[{provide:wT,useFactory:()=>(Xn("NgHttpTransferCache"),V({isCacheActive:!0},n))},{provide:Sx,useValue:YW,multi:!0},{provide:eu,multi:!0,useFactory:()=>{let e=R(Sr),t=R(wT);return()=>{e.whenStable().then(()=>{t.isCacheActive=!1})}}}]}function t9(n,e){let t=new URL(n,"resolve://").origin,r=e[t];return r?n.replace(t,r):n}var bT=class extends Xh{supportsDOMEvents=!0},_T=class n extends bT{static makeCurrent(){tx(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=n9();return t==null?null:r9(t)}resetBaseElement(){ou=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return tp(document.cookie,e)}},ou=null;function n9(){return ou=ou||document.querySelector("base"),ou?ou.getAttribute("href"):null}function r9(n){return new URL(n,document.baseURI).pathname}var i9=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),ST=new U(""),Ox=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new B(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(J(ST),J(Ce))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),ap=class{_doc;constructor(e){this._doc=e}manager},op="ng-app-id";function Dx(n){for(let e of n)e.remove()}function Ax(n,e){let t=e.createElement("style");return t.textContent=n,t}function s9(n,e,t,r){let i=n.head?.querySelectorAll(`style[${op}="${e}"],link[${op}="${e}"]`);if(i)for(let s of i)s.removeAttribute(op),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function CT(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var kx=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=gT(s),s9(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,Ax);r?.forEach(i=>this.addUsage(i,this.external,CT))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(Dx(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])Dx(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,Ax(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,CT(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(op,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(J(Zt),J(Vh),J(mw,8),J(ai))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),TT={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},DT=/%COMP%/g;var xx="%COMP%",o9=`_nghost-${xx}`,a9=`_ngcontent-${xx}`,c9=!0,l9=new U("",{providedIn:"root",factory:()=>c9});function u9(n){return a9.replace(DT,n)}function d9(n){return o9.replace(DT,n)}function Px(n,e){return e.map(t=>t.replace(DT,n))}var Rx=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,s,o,a,c,l=null,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.tracingService=u,this.platformIsServer=gT(a),this.defaultRenderer=new au(t,o,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Zn.ShadowDom&&(r=De(V({},r),{encapsulation:Zn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof cp?i.applyToHost(t):i instanceof cu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,h=this.tracingService;switch(r.encapsulation){case Zn.Emulated:s=new cp(c,l,r,this.appId,u,o,a,d,h);break;case Zn.ShadowDom:return new IT(c,l,t,r,o,a,this.nonce,d,h);default:s=new cu(c,l,r,u,o,a,d,h);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(J(Ox),J(kx),J(Vh),J(l9),J(Zt),J(ai),J(Ce),J(mw),J(Da,8))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),au=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(TT[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Nx(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Nx(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new B(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=TT[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=TT[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(_r.DashCase|_r.Important)?e.style.setProperty(t,r,i&_r.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&_r.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Ma().getGlobalEventTarget(this.doc,e),!e))throw new B(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function Nx(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var IT=class extends au{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,s,o,a,c,l){super(e,s,o,c,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=i.styles;u=Px(i.id,u);for(let h of u){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=h,this.shadowRoot.appendChild(f)}let d=i.getExternalStyles?.();if(d)for(let h of d){let f=CT(h,s);a&&f.setAttribute("nonce",a),this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},cu=class extends au{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,a,c,l){super(e,s,o,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=l?Px(l,u):u,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},cp=class extends cu{contentAttr;hostAttr;constructor(e,t,r,i,s,o,a,c,l){let u=i+"-"+r.id;super(e,t,r,s,o,a,c,l,u),this.contentAttr=u9(u),this.hostAttr=d9(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},f9=(()=>{class n extends ap{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(J(Zt))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),Mx=["alt","control","meta","shift"],h9={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},p9={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},g9=(()=>{class n extends ap{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ma().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),Mx.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=h9[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Mx.forEach(o=>{if(o!==i){let a=p9[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(J(Zt))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function $Ee(n,e){return Pk(V({rootComponent:n},m9(e)))}function m9(n){return{appProviders:[...T9,...n?.providers??[]],platformProviders:w9}}function y9(){_T.makeCurrent()}function v9(){return new ri}function E9(){return pM(document),document}var w9=[{provide:ai,useValue:pT},{provide:gw,useValue:y9,multi:!0},{provide:Zt,useFactory:E9,deps:[]}];var T9=[{provide:Ah,useValue:"root"},{provide:ri,useFactory:v9,deps:[]},{provide:ST,useClass:f9,multi:!0,deps:[Zt]},{provide:ST,useClass:g9,multi:!0,deps:[Zt]},Rx,kx,Ox,{provide:ma,useExisting:Rx},{provide:Oa,useClass:i9,deps:[]},[]];var Lx=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(J(Zt))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var b9=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=J(_9),i},providedIn:"root"})}return n})(),_9=(()=>{class n extends b9{_doc;constructor(t){super(),this._doc=t}sanitize(t,r){if(r==null)return null;switch(t){case Wi.NONE:return r;case Wi.HTML:return Aa(r,"HTML")?Ir(r):qM(this._doc,String(r)).toString();case Wi.STYLE:return Aa(r,"Style")?Ir(r):r;case Wi.SCRIPT:if(Aa(r,"Script"))return Ir(r);throw new B(5200,!1);case Wi.URL:return Aa(r,"URL")?Ir(r):Sw(String(r));case Wi.RESOURCE_URL:if(Aa(r,"ResourceURL"))return Ir(r);throw new B(5201,!1);default:throw new B(5202,!1)}}bypassSecurityTrustHtml(t){return OM(t)}bypassSecurityTrustStyle(t){return kM(t)}bypassSecurityTrustScript(t){return xM(t)}bypassSecurityTrustUrl(t){return PM(t)}bypassSecurityTrustResourceUrl(t){return LM(t)}static \u0275fac=function(r){return new(r||n)(J(Zt))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),lp=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n[n.IncrementalHydration=4]="IncrementalHydration",n}(lp||{});function S9(n,e=[],t={}){return{\u0275kind:n,\u0275providers:e}}function zEe(){return S9(lp.EventReplay,Lk())}function HEe(...n){let e=[],t=new Set,r=t.has(lp.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:s}of n)t.add(s),i.length&&e.push(i);return cn([[],qk(),t.has(lp.NoHttpTransferCache)||r?[]:Ix({}),e])}var he="primary",_u=Symbol("RouteTitle"),OT=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Va(n){return new OT(n)}function I9(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function D9(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Dr(n[t],e[t]))return!1;return!0}function Dr(n,e){let t=n?kT(n):void 0,r=e?kT(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!zx(n[i],e[i]))return!1;return!0}function kT(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function zx(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function Hx(n){return n.length>0?n[n.length-1]:null}function Ji(n){return Yy(n)?n:Ra(n)?He(Promise.resolve(n)):re(n)}var A9={exact:Wx,subset:Kx},Gx={exact:R9,subset:N9,ignored:()=>!0};function Fx(n,e,t){return A9[t.paths](n.root,e.root,t.matrixParams)&&Gx[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function R9(n,e){return Dr(n,e)}function Wx(n,e,t){if(!oo(n.segments,e.segments)||!fp(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!Wx(n.children[r],e.children[r],t))return!1;return!0}function N9(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>zx(n[t],e[t]))}function Kx(n,e,t){return Qx(n,e,e.segments,t)}function Qx(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!oo(i,t)||e.hasChildren()||!fp(i,t,r))}else if(n.segments.length===t.length){if(!oo(n.segments,t)||!fp(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!Kx(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!oo(n.segments,i)||!fp(n.segments,i,r)||!n.children[he]?!1:Qx(n.children[he],e,s,r)}}function fp(n,e,t){return e.every((r,i)=>Gx[t](n[i].parameters,r.parameters))}var di=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Re([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Va(this.queryParams),this._queryParamMap}toString(){return k9.serialize(this)}},Re=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return hp(this)}},so=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Va(this.parameters),this._parameterMap}toString(){return Zx(this)}};function M9(n,e){return oo(n,e)&&n.every((t,r)=>Dr(t.parameters,e[r].parameters))}function oo(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function O9(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===he&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==he&&(t=t.concat(e(i,r)))}),t}var sb=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>new hu,providedIn:"root"})}return n})(),hu=class{parse(e){let t=new PT(e);return new di(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${lu(e.root,!0)}`,r=L9(e.queryParams),i=typeof e.fragment=="string"?`#${x9(e.fragment)}`:"";return`${t}${r}${i}`}},k9=new hu;function hp(n){return n.segments.map(e=>Zx(e)).join("/")}function lu(n,e){if(!n.hasChildren())return hp(n);if(e){let t=n.children[he]?lu(n.children[he],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==he&&r.push(`${i}:${lu(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=O9(n,(r,i)=>i===he?[lu(n.children[he],!1)]:[`${i}:${lu(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[he]!=null?`${hp(n)}/${t[0]}`:`${hp(n)}/(${t.join("//")})`}}function Yx(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function up(n){return Yx(n).replace(/%3B/gi,";")}function x9(n){return encodeURI(n)}function xT(n){return Yx(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function pp(n){return decodeURIComponent(n)}function Bx(n){return pp(n.replace(/\+/g,"%20"))}function Zx(n){return`${xT(n.path)}${P9(n.parameters)}`}function P9(n){return Object.entries(n).map(([e,t])=>`;${xT(e)}=${xT(t)}`).join("")}function L9(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${up(t)}=${up(i)}`).join("&"):`${up(t)}=${up(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var F9=/^[^\/()?;#]+/;function AT(n){let e=n.match(F9);return e?e[0]:""}var B9=/^[^\/()?;=#]+/;function U9(n){let e=n.match(B9);return e?e[0]:""}var V9=/^[^=?&#]+/;function j9(n){let e=n.match(V9);return e?e[0]:""}var q9=/^[^&#]+/;function $9(n){let e=n.match(q9);return e?e[0]:""}var PT=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Re([],{}):new Re([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[he]=new Re(e,t)),r}parseSegment(){let e=AT(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new B(4009,!1);return this.capture(e),new so(pp(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=U9(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=AT(this.remaining);i&&(r=i,this.capture(r))}e[pp(t)]=pp(r)}parseQueryParam(e){let t=j9(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=$9(this.remaining);o&&(r=o,this.capture(r))}let i=Bx(t),s=Bx(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=AT(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new B(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=he);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[he]:new Re([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new B(4011,!1)}};function Jx(n){return n.segments.length>0?new Re([],{[he]:n}):n}function Xx(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=Xx(i);if(r===he&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new Re(n.segments,e);return z9(t)}function z9(n){if(n.numberOfChildren===1&&n.children[he]){let e=n.children[he];return new Re(n.segments.concat(e.segments),e.children)}return n}function pu(n){return n instanceof di}function H9(n,e,t=null,r=null){let i=eP(n);return tP(i,e,t,r)}function eP(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new Re(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=Jx(r);return e??i}function tP(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return RT(i,i,i,t,r);let s=G9(e);if(s.toRoot())return RT(i,i,new Re([],{}),t,r);let o=W9(s,i,n),a=o.processChildren?du(o.segmentGroup,o.index,s.commands):rP(o.segmentGroup,o.index,s.commands);return RT(i,o.segmentGroup,a,t,r)}function mp(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function gu(n){return typeof n=="object"&&n!=null&&n.outlets}function RT(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let o;n===e?o=t:o=nP(n,e,t);let a=Jx(Xx(o));return new di(a,s,i)}function nP(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=nP(s,e,t)}),new Re(n.segments,r)}var yp=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&mp(r[0]))throw new B(4003,!1);let i=r.find(gu);if(i&&i!==Hx(r))throw new B(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function G9(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new yp(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new yp(t,e,r)}var Fa=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function W9(n,e,t){if(n.isAbsolute)return new Fa(e,!0,0);if(!t)return new Fa(e,!1,NaN);if(t.parent===null)return new Fa(t,!0,0);let r=mp(n.commands[0])?0:1,i=t.segments.length-1+r;return K9(t,i,n.numberOfDoubleDots)}function K9(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new B(4005,!1);i=r.segments.length}return new Fa(r,!1,i-s)}function Q9(n){return gu(n[0])?n[0].outlets:{[he]:n}}function rP(n,e,t){if(n??=new Re([],{}),n.segments.length===0&&n.hasChildren())return du(n,e,t);let r=Y9(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new Re(n.segments.slice(0,r.pathIndex),{});return s.children[he]=new Re(n.segments.slice(r.pathIndex),n.children),du(s,0,i)}else return r.match&&i.length===0?new Re(n.segments,{}):r.match&&!n.hasChildren()?LT(n,e,t):r.match?du(n,0,i):LT(n,e,t)}function du(n,e,t){if(t.length===0)return new Re(n.segments,{});{let r=Q9(t),i={};if(Object.keys(r).some(s=>s!==he)&&n.children[he]&&n.numberOfChildren===1&&n.children[he].segments.length===0){let s=du(n.children[he],e,t);return new Re(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=rP(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Re(n.segments,i)}}function Y9(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(gu(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!Vx(c,l,o))return s;r+=2}else{if(!Vx(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function LT(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(gu(s)){let c=Z9(s.outlets);return new Re(r,c)}if(i===0&&mp(t[0])){let c=n.segments[e];r.push(new so(c.path,Ux(t[0]))),i++;continue}let o=gu(s)?s.outlets[he]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&mp(a)?(r.push(new so(o,Ux(a))),i+=2):(r.push(new so(o,{})),i++)}return new Re(r,{})}function Z9(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=LT(new Re([],{}),0,r))}),e}function Ux(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Vx(n,e,t){return n==t.path&&Dr(e,t.parameters)}var gp="imperative",Ot=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Ot||{}),Nn=class{id;url;constructor(e,t){this.id=e,this.url=t}},mu=class extends Nn{type=Ot.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ao=class extends Nn{urlAfterRedirects;type=Ot.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},wn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(wn||{}),FT=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(FT||{}),ui=class extends Nn{reason;code;type=Ot.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},co=class extends Nn{reason;code;type=Ot.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},yu=class extends Nn{error;target;type=Ot.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},vp=class extends Nn{urlAfterRedirects;state;type=Ot.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},BT=class extends Nn{urlAfterRedirects;state;type=Ot.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},UT=class extends Nn{urlAfterRedirects;state;shouldActivate;type=Ot.GuardsCheckEnd;constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},VT=class extends Nn{urlAfterRedirects;state;type=Ot.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jT=class extends Nn{urlAfterRedirects;state;type=Ot.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qT=class{route;type=Ot.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},$T=class{route;type=Ot.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},zT=class{snapshot;type=Ot.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},HT=class{snapshot;type=Ot.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},GT=class{snapshot;type=Ot.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},WT=class{snapshot;type=Ot.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var vu=class{},ja=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function J9(n,e){return n.providers&&!n._injector&&(n._injector=Gw(n.providers,e,`Route: ${n.path}`)),n._injector??e}function er(n){return n.outlet||he}function X9(n,e){let t=n.filter(r=>er(r)===e);return t.push(...n.filter(r=>er(r)!==e)),t}function Su(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var KT=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Su(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Cp(this.rootInjector)}},Cp=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new KT(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(J(Bt))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ep=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=QT(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=QT(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=YT(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return YT(e,this._root).map(t=>t.value)}};function QT(n,e){if(n===e.value)return e;for(let t of e.children){let r=QT(n,t);if(r)return r}return null}function YT(n,e){if(n===e.value)return[e];for(let t of e.children){let r=YT(n,t);if(r.length)return r.unshift(e),r}return[]}var En=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function La(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var wp=class extends Ep{snapshot;constructor(e,t){super(e),this.snapshot=t,ob(this,e)}toString(){return this.snapshot.toString()}};function iP(n){let e=e8(n),t=new At([new so("",{})]),r=new At({}),i=new At({}),s=new At({}),o=new At(""),a=new qa(t,r,s,o,i,he,n,e.root);return a.snapshot=e.root,new wp(new En(a,[]),e)}function e8(n){let e={},t={},r={},i="",s=new Ba([],e,r,i,t,he,n,null,{});return new bp("",new En(s,[]))}var qa=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(de(l=>l[_u]))??re(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(de(e=>Va(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(de(e=>Va(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Tp(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),n.params),data:V(V({},e.data),n.data),resolve:V(V(V(V({},n.data),e.data),i?.data),n._resolvedData)}:r={params:V({},n.params),data:V({},n.data),resolve:V(V({},n.data),n._resolvedData??{})},i&&oP(i)&&(r.resolve[_u]=i.title),r}var Ba=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[_u]}constructor(e,t,r,i,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Va(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Va(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},bp=class extends Ep{url;constructor(e,t){super(t),this.url=e,ob(this,t)}toString(){return sP(this._root)}};function ob(n,e){e.value._routerState=n,e.children.forEach(t=>ob(n,t))}function sP(n){let e=n.children.length>0?` { ${n.children.map(sP).join(", ")} } `:"";return`${n.value}${e}`}function NT(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Dr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Dr(e.params,t.params)||n.paramsSubject.next(t.params),D9(e.url,t.url)||n.urlSubject.next(t.url),Dr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function ZT(n,e){let t=Dr(n.params,e.params)&&M9(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||ZT(n.parent,e.parent))}function oP(n){return typeof n.title=="string"||n.title===null}var t8=new U(""),n8=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=he;activateEvents=new yn;deactivateEvents=new yn;attachEvents=new yn;detachEvents=new yn;routerOutletData=sM(void 0);parentContexts=R(Cp);location=R(li);changeDetector=R(Na);inputBinder=R(ab,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new B(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new B(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new B(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new B(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new JT(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Qi({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Oh]})}return n})(),JT=class n{route;childContexts;parent;outletData;__ngOutletInjector(e){return new n(this.route,this.childContexts,e,this.outletData)}constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===qa?this.route:e===Cp?this.childContexts:e===t8?this.outletData:this.parent.get(e,t)}},ab=new U("");function r8(n,e,t){let r=Eu(n,e._root,t?t._root:void 0);return new wp(r,e)}function Eu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=i8(n,e,t);return new En(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Eu(n,a)),o}}let r=s8(e.value),i=e.children.map(s=>Eu(n,s));return new En(r,i)}}function i8(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Eu(n,r,i);return Eu(n,r)})}function s8(n){return new qa(new At(n.url),new At(n.params),new At(n.queryParams),new At(n.fragment),new At(n.data),n.outlet,n.component,n)}var wu=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},aP="ngNavigationCancelingError";function _p(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=pu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=cP(!1,wn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function cP(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[aP]=!0,t.cancellationCode=e,t}function o8(n){return lP(n)&&pu(n.url)}function lP(n){return!!n&&n[aP]}var a8=(n,e,t,r)=>de(i=>(new XT(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),XT=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),NT(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=La(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=La(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=La(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=La(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new WT(s.value.snapshot))}),e.children.length&&this.forwardEvent(new HT(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(NT(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),NT(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Sp=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ua=class{component;route;constructor(e,t){this.component=e,this.route=t}};function c8(n,e,t){let r=n._root,i=e?e._root:null;return uu(r,i,t,[r.value])}function l8(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function za(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!ZR(n)?n:e.get(n):r}function uu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=La(e);return n.children.forEach(o=>{u8(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>fu(a,t.getContext(o),i)),i}function u8(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=d8(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Sp(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?uu(n,e,a?a.children:null,r,i):uu(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ua(a.outlet.component,o))}else o&&fu(e,a,i),i.canActivateChecks.push(new Sp(r)),s.component?uu(n,null,a?a.children:null,r,i):uu(n,null,t,r,i);return i}function d8(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!oo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!oo(n.url,e.url)||!Dr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ZT(n,e)||!Dr(n.queryParams,e.queryParams);case"paramsChange":default:return!ZT(n,e)}}function fu(n,e,t){let r=La(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?fu(o,e.children.getContext(s),t):fu(o,null,t):fu(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ua(e.outlet.component,i)):t.canDeactivateChecks.push(new Ua(null,i)):t.canDeactivateChecks.push(new Ua(null,i))}function Cu(n){return typeof n=="function"}function f8(n){return typeof n=="boolean"}function h8(n){return n&&Cu(n.canLoad)}function p8(n){return n&&Cu(n.canActivate)}function g8(n){return n&&Cu(n.canActivateChild)}function m8(n){return n&&Cu(n.canDeactivate)}function y8(n){return n&&Cu(n.canMatch)}function uP(n){return n instanceof Wn||n?.name==="EmptyError"}var dp=Symbol("INITIAL_VALUE");function $a(){return mn(n=>Tf(n.map(e=>e.pipe(Yr(1),dl(dp)))).pipe(de(e=>{for(let t of e)if(t!==!0){if(t===dp)return dp;if(t===!1||v8(t))return t}return!0}),Lt(e=>e!==dp),Yr(1)))}function v8(n){return pu(n)||n instanceof wu}function E8(n,e){return ht(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?re(De(V({},t),{guardsResult:!0})):w8(o,r,i,n).pipe(ht(a=>a&&f8(a)?T8(r,s,n,e):re(a)),de(a=>De(V({},t),{guardsResult:a})))})}function w8(n,e,t,r){return He(n).pipe(ht(i=>I8(i.component,i.route,t,e,r)),Zr(i=>i!==!0,!0))}function T8(n,e,t,r){return He(e).pipe(Li(i=>Qo(_8(i.route.parent,r),b8(i.route,r),C8(n,i.path,t),S8(n,i.route,t))),Zr(i=>i!==!0,!0))}function b8(n,e){return n!==null&&e&&e(new GT(n)),re(!0)}function _8(n,e){return n!==null&&e&&e(new zT(n)),re(!0)}function S8(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return re(!0);let i=r.map(s=>Cf(()=>{let o=Su(e)??t,a=za(s,o),c=p8(a)?a.canActivate(e,n):Mt(o,()=>a(e,n));return Ji(c).pipe(Zr())}));return re(i).pipe($a())}function C8(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>l8(o)).filter(o=>o!==null).map(o=>Cf(()=>{let a=o.guards.map(c=>{let l=Su(o.node)??t,u=za(c,l),d=g8(u)?u.canActivateChild(r,n):Mt(l,()=>u(r,n));return Ji(d).pipe(Zr())});return re(a).pipe($a())}));return re(s).pipe($a())}function I8(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return re(!0);let o=s.map(a=>{let c=Su(e)??i,l=za(a,c),u=m8(l)?l.canDeactivate(n,e,t,r):Mt(c,()=>l(n,e,t,r));return Ji(u).pipe(Zr())});return re(o).pipe($a())}function D8(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return re(!0);let s=i.map(o=>{let a=za(o,n),c=h8(a)?a.canLoad(e,t):Mt(n,()=>a(e,t));return Ji(c)});return re(s).pipe($a(),dP(r))}function dP(n){return nf(pt(e=>{if(typeof e!="boolean")throw _p(n,e)}),de(e=>e===!0))}function A8(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return re(!0);let s=i.map(o=>{let a=za(o,n),c=y8(a)?a.canMatch(e,t):Mt(n,()=>a(e,t));return Ji(c)});return re(s).pipe($a(),dP(r))}var Tu=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},bu=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Pa(n){return ta(new Tu(n))}function R8(n){return ta(new B(4e3,!1))}function N8(n){return ta(cP(!1,wn.GuardRejected))}var eb=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return re(r);if(i.numberOfChildren>1||!i.children[he])return R8(`${e.redirectTo}`);i=i.children[he]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:u,url:d,outlet:h,params:f,data:v,title:w}=i,S=Mt(s,()=>a({params:f,data:v,queryParams:c,fragment:l,routeConfig:u,url:d,outlet:h,title:w}));if(S instanceof di)throw new bu(S);t=S}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new bu(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new di(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Re(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new B(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},tb={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function M8(n,e,t,r,i){let s=fP(n,e,t);return s.matched?(r=J9(e,r),A8(r,e,t,i).pipe(de(o=>o===!0?s:V({},tb)))):re(s)}function fP(n,e,t){if(e.path==="**")return O8(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?V({},tb):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||I9)(t,n,e);if(!i)return V({},tb);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?V(V({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function O8(n){return{matched:!0,parameters:n.length>0?Hx(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function jx(n,e,t,r){return t.length>0&&P8(n,t,r)?{segmentGroup:new Re(e,x8(r,new Re(t,n.children))),slicedSegments:[]}:t.length===0&&L8(n,t,r)?{segmentGroup:new Re(n.segments,k8(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Re(n.segments,n.children),slicedSegments:t}}function k8(n,e,t,r){let i={};for(let s of t)if(Ip(n,e,s)&&!r[er(s)]){let o=new Re([],{});i[er(s)]=o}return V(V({},r),i)}function x8(n,e){let t={};t[he]=e;for(let r of n)if(r.path===""&&er(r)!==he){let i=new Re([],{});t[er(r)]=i}return t}function P8(n,e,t){return t.some(r=>Ip(n,e,r)&&er(r)!==he)}function L8(n,e,t){return t.some(r=>Ip(n,e,r))}function Ip(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function F8(n,e,t){return e.length===0&&!n.children[t]}var nb=class{};function B8(n,e,t,r,i,s,o="emptyOnly"){return new rb(n,e,t,r,i,o,s).recognize()}var U8=31,rb=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new eb(this.urlSerializer,this.urlTree)}noMatchError(e){return new B(4002,`'${e.segmentGroup}'`)}recognize(){let e=jx(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(de(({children:t,rootSnapshot:r})=>{let i=new En(r,t),s=new bp("",i),o=H9(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Ba([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),he,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,he,t).pipe(de(r=>({children:r,rootSnapshot:t})),Pi(r=>{if(r instanceof bu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Tu?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(de(o=>o instanceof En?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return He(s).pipe(Li(o=>{let a=r.children[o],c=X9(t,o);return this.processSegmentGroup(e,c,a,o,i)}),Df((o,a)=>(o.push(...a),o)),Fi(null),Zy(),ht(o=>{if(o===null)return Pa(r);let a=hP(o);return V8(a),re(a)}))}processSegment(e,t,r,i,s,o,a){return He(t).pipe(Li(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a).pipe(Pi(l=>{if(l instanceof Tu)return re(null);throw l}))),Zr(c=>!!c),Pi(c=>{if(uP(c))return F8(r,i,s)?re(new nb):Pa(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,c){return er(r)!==o&&(o===he||!Ip(i,s,r))?Pa(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c):Pa(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=fP(t,i,s);if(!c)return Pa(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>U8&&(this.allowRedirects=!1));let f=new Ba(s,l,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,qx(i),er(i),i.component??i._loadedComponent??null,i,$x(i)),v=Tp(f,a,this.paramsInheritanceStrategy);f.params=Object.freeze(v.params),f.data=Object.freeze(v.data);let w=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,f,e);return this.applyRedirects.lineralizeSegments(i,w).pipe(ht(S=>this.processSegment(e,r,t,S.concat(h),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=M8(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(mn(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(mn(({routes:l})=>{let u=r._loadedInjector??e,{parameters:d,consumedSegments:h,remainingSegments:f}=c,v=new Ba(h,d,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,qx(r),er(r),r.component??r._loadedComponent??null,r,$x(r)),w=Tp(v,o,this.paramsInheritanceStrategy);v.params=Object.freeze(w.params),v.data=Object.freeze(w.data);let{segmentGroup:S,slicedSegments:I}=jx(t,h,f,l);if(I.length===0&&S.hasChildren())return this.processChildren(u,l,S,v).pipe(de(M=>new En(v,M)));if(l.length===0&&I.length===0)return re(new En(v,[]));let D=er(r)===s;return this.processSegment(u,l,S,I,D?he:s,!0,v).pipe(de(M=>new En(v,M instanceof En?[M]:[])))}))):Pa(t)))}getChildConfig(e,t,r){return t.children?re({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?re({routes:t._loadedRoutes,injector:t._loadedInjector}):D8(e,t,r,this.urlSerializer).pipe(ht(i=>i?this.configLoader.loadChildren(e,t).pipe(pt(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):N8(t))):re({routes:[],injector:e})}};function V8(n){n.sort((e,t)=>e.value.outlet===he?-1:t.value.outlet===he?1:e.value.outlet.localeCompare(t.value.outlet))}function j8(n){let e=n.value.routeConfig;return e&&e.path===""}function hP(n){let e=[],t=new Set;for(let r of n){if(!j8(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=hP(r.children);e.push(new En(r.value,i))}return e.filter(r=>!t.has(r))}function qx(n){return n.data||{}}function $x(n){return n.resolve||{}}function q8(n,e,t,r,i,s){return ht(o=>B8(n,e,t,r,o.extractedUrl,i,s).pipe(de(({state:a,tree:c})=>De(V({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function $8(n,e){return ht(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return re(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of pP(c))o.add(l);let a=0;return He(o).pipe(Li(c=>s.has(c)?z8(c,r,n,e):(c.data=Tp(c,c.parent,n).resolve,re(void 0))),pt(()=>a++),na(1),ht(c=>a===o.size?re(t):Pt))})}function pP(n){let e=n.children.map(t=>pP(t)).flat();return[n,...e]}function z8(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!oP(i)&&(s[_u]=i.title),H8(s,n,e,r).pipe(de(o=>(n._resolvedData=o,n.data=Tp(n,n.parent,t).resolve,null)))}function H8(n,e,t,r){let i=kT(n);if(i.length===0)return re({});let s={};return He(i).pipe(ht(o=>G8(n[o],e,t,r).pipe(Zr(),pt(a=>{if(a instanceof wu)throw _p(new hu,a);s[o]=a}))),na(1),de(()=>s),Pi(o=>uP(o)?Pt:ta(o)))}function G8(n,e,t,r){let i=Su(e)??r,s=za(n,i),o=s.resolve?s.resolve(e,t):Mt(i,()=>s(e,t));return Ji(o)}function MT(n){return mn(e=>{let t=n(e);return t?He(t).pipe(de(()=>e)):re(e)})}var gP=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===he);return r}getResolvedTitleForRoute(t){return t.data[_u]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>R(W8),providedIn:"root"})}return n})(),W8=(()=>{class n extends gP{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(J(Lx))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cb=new U("",{providedIn:"root",factory:()=>({})}),K8=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=BO({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Xw(0,"router-outlet")},dependencies:[n8],encapsulation:2})}return n})();function lb(n){let e=n.children&&n.children.map(lb),t=e?De(V({},n),{children:e}):V({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==he&&(t.component=K8),t}var ub=new U(""),Q8=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=R(tT);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return re(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Ji(t.loadComponent()).pipe(de(mP),pt(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),js(()=>{this.componentLoaders.delete(t)})),i=new Zo(r,()=>new rt).pipe(Yo());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return re({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=Y8(r,this.compiler,t,this.onLoadEndListener).pipe(js(()=>{this.childrenLoaders.delete(r)})),o=new Zo(s,()=>new rt).pipe(Yo());return this.childrenLoaders.set(r,o),o}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Y8(n,e,t,r){return Ji(n.loadChildren()).pipe(de(mP),ht(i=>i instanceof Hw||Array.isArray(i)?re(i):He(e.compileModuleAsync(i))),de(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(ub,[],{optional:!0,self:!0}).flat()),{routes:o.map(lb),injector:s}}))}function Z8(n){return n&&typeof n=="object"&&"default"in n}function mP(n){return Z8(n)?n.default:n}var db=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>R(J8),providedIn:"root"})}return n})(),J8=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),X8=new U("");var e5=new U(""),t5=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new rt;transitionAbortSubject=new rt;configLoader=R(Q8);environmentInjector=R(Bt);destroyRef=R(ro);urlSerializer=R(sb);rootContexts=R(Cp);location=R(nu);inputBindingEnabled=R(ab,{optional:!0})!==null;titleStrategy=R(gP);options=R(cb,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=R(db);createViewTransition=R(X8,{optional:!0});navigationErrorHandler=R(e5,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>re(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new qT(i)),r=i=>this.events.next(new $T(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(De(V({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(t){return this.transitions=new At(null),this.transitions.pipe(Lt(r=>r!==null),mn(r=>{let i=!1,s=!1;return re(r).pipe(mn(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",wn.SupersededByNewNavigation),Pt;this.currentTransition=r,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?De(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&c!=="reload"){let l="";return this.events.next(new co(o.id,this.urlSerializer.serialize(o.rawUrl),l,FT.IgnoredSameUrlNavigation)),o.resolve(!1),Pt}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return re(o).pipe(mn(l=>(this.events.next(new mu(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?Pt:Promise.resolve(l))),q8(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),pt(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation=De(V({},this.currentNavigation),{finalUrl:l.urlAfterRedirects});let u=new vp(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:l,extractedUrl:u,source:d,restoredState:h,extras:f}=o,v=new mu(l,this.urlSerializer.serialize(u),d,h);this.events.next(v);let w=iP(this.rootComponentType).snapshot;return this.currentTransition=r=De(V({},o),{targetSnapshot:w,urlAfterRedirects:u,extras:De(V({},f),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=u,re(r)}else{let l="";return this.events.next(new co(o.id,this.urlSerializer.serialize(o.extractedUrl),l,FT.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Pt}}),pt(o=>{let a=new BT(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),de(o=>(this.currentTransition=r=De(V({},o),{guards:c8(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),E8(this.environmentInjector,o=>this.events.next(o)),pt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw _p(this.urlSerializer,o.guardsResult);let a=new UT(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),Lt(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",wn.GuardRejected),!1)),MT(o=>{if(o.guards.canActivateChecks.length!==0)return re(o).pipe(pt(a=>{let c=new VT(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),mn(a=>{let c=!1;return re(a).pipe($8(this.paramsInheritanceStrategy,this.environmentInjector),pt({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",wn.NoDataFromResolver)}}))}),pt(a=>{let c=new jT(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),MT(o=>{let a=c=>{let l=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&l.push(this.configLoader.loadComponent(c.routeConfig).pipe(pt(u=>{c.component=u}),de(()=>{})));for(let u of c.children)l.push(...a(u));return l};return Tf(a(o.targetSnapshot.root)).pipe(Fi(null),Yr(1))}),MT(()=>this.afterPreactivation()),mn(()=>{let{currentSnapshot:o,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return c?He(c).pipe(de(()=>r)):re(r)}),de(o=>{let a=r8(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=De(V({},o),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),pt(()=>{this.events.next(new vu)}),a8(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Yr(1),pt({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ao(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),ev(this.transitionAbortSubject.pipe(pt(o=>{throw o}))),js(()=>{!i&&!s&&this.cancelNavigationTransition(r,"",wn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Pi(o=>{if(this.destroyed)return r.resolve(!1),Pt;if(s=!0,lP(o))this.events.next(new ui(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),o8(o)?this.events.next(new ja(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let a=new yu(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let c=Mt(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof wu){let{message:l,cancellationCode:u}=_p(this.urlSerializer,c);this.events.next(new ui(r.id,this.urlSerializer.serialize(r.extractedUrl),l,u)),this.events.next(new ja(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return Pt}))}))}cancelNavigationTransition(t,r,i){let s=new ui(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function n5(n){return n!==gp}var r5=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>R(i5),providedIn:"root"})}return n})(),ib=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},i5=(()=>{class n extends ib{static \u0275fac=(()=>{let t;return function(i){return(t||(t=cw(n)))(i||n)}})();static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),yP=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>R(s5),providedIn:"root"})}return n})(),s5=(()=>{class n extends yP{location=R(nu);urlSerializer=R(sb);options=R(cb,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=R(db);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new di;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=iP(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof mu)this.stateMemento=this.createStateMemento();else if(t instanceof co)this.rawUrlTree=r.initialUrl;else if(t instanceof vp){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof vu?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof ui&&(t.code===wn.GuardRejected||t.code===wn.NoDataFromResolver)?this.restoreHistory(r):t instanceof yu?this.restoreHistory(r,!0):t instanceof ao&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof di?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=V(V({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=V(V({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=cw(n)))(i||n)}})();static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function o5(n,e){n.events.pipe(Lt(t=>t instanceof ao||t instanceof ui||t instanceof yu||t instanceof co),de(t=>t instanceof ao||t instanceof co?0:(t instanceof ui?t.code===wn.Redirect||t.code===wn.SupersededByNewNavigation:!1)?2:1),Lt(t=>t!==2),Yr(1)).subscribe(()=>{e()})}var a5={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},c5={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},vP=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=R(Qw);stateManager=R(yP);options=R(cb,{optional:!0})||{};pendingTasks=R(si);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=R(t5);urlSerializer=R(sb);location=R(nu);urlHandlingStrategy=R(db);_events=new rt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=R(r5);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=R(ub,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!R(ab,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Je;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof ui&&r.code!==wn.Redirect&&r.code!==wn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ao)this.navigated=!0;else if(r instanceof ja){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||n5(i.source)},o);this.scheduleNavigation(a,gp,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}u5(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),gp,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=V({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(lb),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=V(V({},this.currentUrlTree.queryParams),s);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let h=i?i.snapshot:this.routerState.snapshot.root;d=eP(h)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),d=this.currentUrlTree.root}return tP(d,t,u,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=pu(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,gp,null,r)}navigate(t,r={skipLocationChange:!1}){return l5(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=V({},a5):r===!1?i=V({},c5):i=r,pu(t))return Fx(this.currentUrlTree,t,i);let s=this.parseUrl(t);return Fx(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((d,h)=>{a=d,c=h});let u=this.pendingTasks.add();return o5(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function l5(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new B(4008,!1)}function u5(n){return!(n instanceof vu)&&!(n instanceof ja)}var d5=new U("");function gwe(n,...e){return cn([{provide:ub,multi:!0,useValue:n},[],{provide:qa,useFactory:f5,deps:[vP]},{provide:eu,multi:!0,useFactory:h5},e.map(t=>t.\u0275providers)])}function f5(n){return n.routerState.root}function h5(){let n=R($e);return e=>{let t=n.get(Sr);if(e!==t.components[0])return;let r=n.get(vP),i=n.get(p5);n.get(g5)===1&&r.initialNavigation(),n.get(m5,null,pe.Optional)?.setUpPreloading(),n.get(d5,null,pe.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var p5=new U("",{factory:()=>new rt}),g5=new U("",{providedIn:"root",factory:()=>1});var m5=new U("");var EP=()=>{};var y5={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var TP=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},v5=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Dp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4,h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),r.push(t[u],t[d],t[h],t[f])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(TP(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):v5(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let d=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||d==null)throw new hb;let h=s<<2|a>>4;if(r.push(h),l!==64){let f=a<<4&240|l>>2;if(r.push(f),d!==64){let v=l<<6&192|d;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},hb=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},E5=function(n){let e=TP(n);return Dp.encodeByteArray(e,!0)},Iu=function(n){return E5(n).replace(/\./g,"")},Ap=function(n){try{return Dp.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function bP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var w5=()=>bP().__FIREBASE_DEFAULTS__,T5=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},b5=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Ap(n[1]);return e&&JSON.parse(e)},gb=()=>{try{return EP()||w5()||T5()||b5()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},mb=n=>{var e,t;return(t=(e=gb())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},_P=n=>{let e=mb(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},yb=()=>{var n;return(n=gb())===null||n===void 0?void 0:n.config};var lo=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function SP(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Iu(JSON.stringify(t)),Iu(JSON.stringify(o)),""].join(".")}function bn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bn())}function _5(){var n;let e=(n=gb())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function IP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function DP(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function AP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function RP(){return!_5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Du(){try{return typeof indexedDB=="object"}catch{return!1}}function NP(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var S5="FirebaseError",Tn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=S5,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tr.prototype.create)}},tr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?C5(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Tn(i,a,r)}};function C5(n,e){return n.replace(I5,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var I5=/\{\$([^}]+)}/g;function Ar(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(wP(s)&&wP(o)){if(!Ar(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function wP(n){return n!==null&&typeof n=="object"}function Rp(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ha(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ga(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function MP(n,e){let t=new pb(n,e);return t.subscribe.bind(t)}var pb=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");D5(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=fb),i.error===void 0&&(i.error=fb),i.complete===void 0&&(i.complete=fb);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function D5(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function fb(){}var wwe=4*60*60*1e3;function jt(n){return n&&n._delegate?n._delegate:n}y5.NODE_CLIENT=!0;var Jt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var uo="[DEFAULT]";var vb=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new lo;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(R5(e))try{this.getOrInitializeService({instanceIdentifier:uo})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=uo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return T(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=uo){return this.instances.has(e)}getOptions(e=uo){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:A5(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=uo){return this.component?this.component.multipleInstances?e:uo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function A5(n){return n===uo?void 0:n}function R5(n){return n.instantiationMode==="EAGER"}var Np=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new vb(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var N5=[],ve=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ve||{}),M5={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},O5=ve.INFO,k5={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},x5=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=k5[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Rr=class{constructor(e){this.name=e,this._logLevel=O5,this._logHandler=x5,this._userLogHandler=null,N5.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?M5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}};var P5=(n,e)=>e.some(t=>n instanceof t),OP,kP;function L5(){return OP||(OP=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function F5(){return kP||(kP=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var xP=new WeakMap,wb=new WeakMap,PP=new WeakMap,Eb=new WeakMap,bb=new WeakMap;function B5(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Nr(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&xP.set(t,n)}).catch(()=>{}),bb.set(e,n),e}function U5(n){if(wb.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});wb.set(n,e)}var Tb={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return wb.get(n);if(e==="objectStoreNames")return n.objectStoreNames||PP.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Nr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function LP(n){Tb=n(Tb)}function V5(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Mp(this),e,...t);return PP.set(r,e.sort?e.sort():[e]),Nr(r)}:F5().includes(n)?function(...e){return n.apply(Mp(this),e),Nr(xP.get(this))}:function(...e){return Nr(n.apply(Mp(this),e))}}function j5(n){return typeof n=="function"?V5(n):(n instanceof IDBTransaction&&U5(n),P5(n,L5())?new Proxy(n,Tb):n)}function Nr(n){if(n instanceof IDBRequest)return B5(n);if(Eb.has(n))return Eb.get(n);let e=j5(n);return e!==n&&(Eb.set(n,e),bb.set(e,n)),e}var Mp=n=>bb.get(n);function BP(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=Nr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Nr(o.result),c.oldVersion,c.newVersion,Nr(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var q5=["get","getKey","getAll","getAllKeys","count"],$5=["put","add","delete","clear"],_b=new Map;function FP(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(_b.get(e))return _b.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=$5.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||q5.includes(t)))return;let s=function(o,...a){return T(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&c.done]))[0]})};return _b.set(e,s),s}LP(n=>De(V({},n),{get:(e,t,r)=>FP(e,t)||n.get(e,t,r),has:(e,t)=>!!FP(e,t)||n.has(e,t)}));var Cb=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(z5(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function z5(n){let e=n.getComponent();return e?.type==="VERSION"}var Ib="@firebase/app",UP="0.11.3";var fi=new Rr("@firebase/app"),H5="@firebase/app-compat",G5="@firebase/analytics-compat",W5="@firebase/analytics",K5="@firebase/app-check-compat",Q5="@firebase/app-check",Y5="@firebase/auth",Z5="@firebase/auth-compat",J5="@firebase/database",X5="@firebase/data-connect",eK="@firebase/database-compat",tK="@firebase/functions",nK="@firebase/functions-compat",rK="@firebase/installations",iK="@firebase/installations-compat",sK="@firebase/messaging",oK="@firebase/messaging-compat",aK="@firebase/performance",cK="@firebase/performance-compat",lK="@firebase/remote-config",uK="@firebase/remote-config-compat",dK="@firebase/storage",fK="@firebase/storage-compat",hK="@firebase/firestore",pK="@firebase/vertexai",gK="@firebase/firestore-compat",mK="firebase",yK="11.5.0";var Db="[DEFAULT]",vK={[Ib]:"fire-core",[H5]:"fire-core-compat",[W5]:"fire-analytics",[G5]:"fire-analytics-compat",[Q5]:"fire-app-check",[K5]:"fire-app-check-compat",[Y5]:"fire-auth",[Z5]:"fire-auth-compat",[J5]:"fire-rtdb",[X5]:"fire-data-connect",[eK]:"fire-rtdb-compat",[tK]:"fire-fn",[nK]:"fire-fn-compat",[rK]:"fire-iid",[iK]:"fire-iid-compat",[sK]:"fire-fcm",[oK]:"fire-fcm-compat",[aK]:"fire-perf",[cK]:"fire-perf-compat",[lK]:"fire-rc",[uK]:"fire-rc-compat",[dK]:"fire-gcs",[fK]:"fire-gcs-compat",[hK]:"fire-fst",[gK]:"fire-fst-compat",[pK]:"fire-vertex","fire-js":"fire-js",[mK]:"fire-js-all"};var Au=new Map,EK=new Map,Ab=new Map;function VP(n,e){try{n.container.addComponent(e)}catch(t){fi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function nr(n){let e=n.name;if(Ab.has(e))return fi.debug(`There were multiple attempts to register component ${e}.`),!1;Ab.set(e,n);for(let t of Au.values())VP(t,n);for(let t of EK.values())VP(t,n);return!0}function Wa(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Mn(n){return n==null?!1:n.settings!==void 0}var wK={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xi=new tr("app","Firebase",wK);var Rb=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Jt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xi.create("app-deleted",{appName:this._name})}};var Ka=yK;function Ob(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Db,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Xi.create("bad-app-name",{appName:String(i)});if(t||(t=yb()),!t)throw Xi.create("no-options");let s=Au.get(i);if(s){if(Ar(t,s.options)&&Ar(r,s.config))return s;throw Xi.create("duplicate-app",{appName:i})}let o=new Np(i);for(let c of Ab.values())o.addComponent(c);let a=new Rb(t,r,o);return Au.set(i,a),a}function fo(n=Db){let e=Au.get(n);if(!e&&n===Db&&yb())return Ob();if(!e)throw Xi.create("no-app",{appName:n});return e}function Op(){return Array.from(Au.values())}function Xe(n,e,t){var r;let i=(r=vK[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fi.warn(a.join(" "));return}nr(new Jt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var TK="firebase-heartbeat-database",bK=1,Ru="firebase-heartbeat-store",Sb=null;function zP(){return Sb||(Sb=BP(TK,bK,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ru)}catch(t){console.warn(t)}}}}).catch(n=>{throw Xi.create("idb-open",{originalErrorMessage:n.message})})),Sb}function _K(n){return T(this,null,function*(){try{let t=(yield zP()).transaction(Ru),r=yield t.objectStore(Ru).get(HP(n));return yield t.done,r}catch(e){if(e instanceof Tn)fi.warn(e.message);else{let t=Xi.create("idb-get",{originalErrorMessage:e?.message});fi.warn(t.message)}}})}function jP(n,e){return T(this,null,function*(){try{let r=(yield zP()).transaction(Ru,"readwrite");yield r.objectStore(Ru).put(e,HP(n)),yield r.done}catch(t){if(t instanceof Tn)fi.warn(t.message);else{let r=Xi.create("idb-set",{originalErrorMessage:t?.message});fi.warn(r.message)}}})}function HP(n){return`${n.name}!${n.options.appId}`}var SK=1024,CK=30,Nb=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Mb(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return T(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=qP();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>CK){let o=DK(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){fi.warn(r)}})}getHeartbeatsHeader(){return T(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=qP(),{heartbeatsToSend:r,unsentEntries:i}=IK(this._heartbeatsCache.heartbeats),s=Iu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return fi.warn(t),""}})}};function qP(){return new Date().toISOString().substring(0,10)}function IK(n,e=SK){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),$P(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),$P(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Mb=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return T(this,null,function*(){return Du()?NP().then(()=>!0).catch(()=>!1):!1})}read(){return T(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield _K(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return T(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return jP(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return T(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return jP(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function $P(n){return Iu(JSON.stringify({version:2,heartbeats:n})).length}function DK(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function AK(n){nr(new Jt("platform-logger",e=>new Cb(e),"PRIVATE")),nr(new Jt("heartbeat",e=>new Nb(e),"PRIVATE")),Xe(Ib,UP,n),Xe(Ib,UP,"esm2017"),Xe("fire-js","")}AK("");function t1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var n1=t1,r1=new tr("auth","Firebase",t1());var Pp=new Rr("@firebase/auth");function RK(n,...e){Pp.logLevel<=ve.WARN&&Pp.warn(`Auth (${Ka}): ${n}`,...e)}function xp(n,...e){Pp.logLevel<=ve.ERROR&&Pp.error(`Auth (${Ka}): ${n}`,...e)}function go(n,...e){throw Xb(n,...e)}function Jb(n,...e){return Xb(n,...e)}function i1(n,e,t){let r=Object.assign(Object.assign({},n1()),{[e]:t});return new tr("auth","Firebase",r).create(e,{appName:n.name})}function po(n){return i1(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Xb(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return r1.create(n,...e)}function Ee(n,e,...t){if(!n)throw Xb(e,...t)}function hi(n){let e="INTERNAL ASSERTION FAILED: "+n;throw xp(e),new Error(e)}function Lp(n,e){n||hi(e)}function NK(){return GP()==="http:"||GP()==="https:"}function GP(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function MK(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NK()||DP()||"connection"in navigator)?navigator.onLine:!0}function OK(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Lb=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Lp(t>e,"Short delay should be less than long delay!"),this.isMobile=CP()||AP()}get(){return MK()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function kK(n,e){Lp(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var ku=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var xK={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var PK=new Lb(3e4,6e4);function ts(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function mo(s,o,a,c){return T(this,arguments,function*(n,e,t,r,i={}){return s1(n,i,()=>T(this,null,function*(){let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});let d=Rp(Object.assign({key:n.config.apiKey},u)).slice(1),h=yield n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);let f=Object.assign({method:e,headers:h},l);return IP()||(f.referrerPolicy="no-referrer"),ku.fetch()(o1(n,n.config.apiHost,t,d),f)}))})}function s1(n,e,t){return T(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},xK),e);try{let i=new Fb(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw kp(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw kp(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw kp(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw kp(n,"user-disabled",o);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw i1(n,u,l);go(n,u)}}catch(i){if(i instanceof Tn)throw i;go(n,"network-request-failed",{message:String(i)})}})}function Fu(s,o,a,c){return T(this,arguments,function*(n,e,t,r,i={}){let l=yield mo(n,e,t,r,i);return"mfaPendingCredential"in l&&go(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function o1(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?kK(n.config,i):`${n.config.apiScheme}://${i}`}function LK(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Fb=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Jb(this.auth,"network-request-failed")),PK.get())})}};function kp(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Jb(n,e,r);return i.customData._tokenResponse=t,i}function WP(n){return n!==void 0&&n.enterprise!==void 0}var Bb=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return LK(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function FK(n,e){return T(this,null,function*(){return mo(n,"GET","/v2/recaptchaConfig",ts(n,e))})}function BK(n,e){return T(this,null,function*(){return mo(n,"POST","/v1/accounts:delete",e)})}function a1(n,e){return T(this,null,function*(){return mo(n,"POST","/v1/accounts:lookup",e)})}function Mu(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function e_(n,e=!1){return T(this,null,function*(){let t=jt(n),r=yield t.getIdToken(e),i=c1(r);Ee(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Mu(kb(i.auth_time)),issuedAtTime:Mu(kb(i.iat)),expirationTime:Mu(kb(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function kb(n){return Number(n)*1e3}function c1(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return xp("JWT malformed, contained fewer than 3 sections"),null;try{let i=Ap(t);return i?JSON.parse(i):(xp("Failed to decode base64 JWT payload"),null)}catch(i){return xp("Caught error parsing JWT payload as JSON",i?.toString()),null}}function KP(n){let e=c1(n);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ub(n,e,t=!1){return T(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Tn&&UK(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function UK({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Vb=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>T(this,null,function*(){yield this.iteration()}),t)}iteration(){return T(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var xu=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mu(this.lastLoginAt),this.creationTime=Mu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Fp(n){return T(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Ub(n,a1(t,{idToken:r}));Ee(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?l1(s.providerUserInfo):[],a=VK(n.providerData,o),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,u=c?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new xu(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,d)})}function t_(n){return T(this,null,function*(){let e=jt(n);yield Fp(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function VK(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function l1(n){return n.map(e=>{var{providerId:t}=e,r=of(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function jK(n,e){return T(this,null,function*(){let t=yield s1(n,{},()=>T(this,null,function*(){let r=Rp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=o1(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",ku.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function qK(n,e){return T(this,null,function*(){return mo(n,"POST","/v2/accounts:revokeToken",ts(n,e))})}var Ou=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):KP(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");let t=KP(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return T(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return T(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield jK(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(Ee(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Ee(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Ee(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return hi("not implemented")}};function es(n,e){Ee(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Qa=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=of(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Vb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new xu(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return T(this,null,function*(){let t=yield Ub(this,this.stsTokenManager.getToken(this.auth,e));return Ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return e_(this,e)}reload(){return t_(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return T(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Fp(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return T(this,null,function*(){if(Mn(this.auth.app))return Promise.reject(po(this.auth));let e=yield this.getIdToken();return yield Ub(this,BK(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,l,u;let d=(r=t.displayName)!==null&&r!==void 0?r:void 0,h=(i=t.email)!==null&&i!==void 0?i:void 0,f=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,v=(o=t.photoURL)!==null&&o!==void 0?o:void 0,w=(a=t.tenantId)!==null&&a!==void 0?a:void 0,S=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,I=(l=t.createdAt)!==null&&l!==void 0?l:void 0,D=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:M,emailVerified:P,isAnonymous:G,providerData:W,stsTokenManager:_}=t;Ee(M&&_,e,"internal-error");let y=Ou.fromJSON(this.name,_);Ee(typeof M=="string",e,"internal-error"),es(d,e.name),es(h,e.name),Ee(typeof P=="boolean",e,"internal-error"),Ee(typeof G=="boolean",e,"internal-error"),es(f,e.name),es(v,e.name),es(w,e.name),es(S,e.name),es(I,e.name),es(D,e.name);let E=new n({uid:M,auth:e,email:h,emailVerified:P,displayName:d,isAnonymous:G,photoURL:v,phoneNumber:f,tenantId:w,stsTokenManager:y,createdAt:I,lastLoginAt:D});return W&&Array.isArray(W)&&(E.providerData=W.map(b=>Object.assign({},b))),S&&(E._redirectEventId=S),E}static _fromIdTokenResponse(e,t,r=!1){return T(this,null,function*(){let i=new Ou;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Fp(s),s})}static _fromGetAccountInfoResponse(e,t,r){return T(this,null,function*(){let i=t.users[0];Ee(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?l1(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Ou;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new xu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var QP=new Map;function ho(n){Lp(n instanceof Function,"Expected a class definition");let e=QP.get(n);return e?(Lp(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,QP.set(n,e),e)}var $K=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return T(this,null,function*(){return!0})}_set(t,r){return T(this,null,function*(){this.storage[t]=r})}_get(t){return T(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return T(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),jb=$K;function xb(n,e,t){return`firebase:${n}:${e}:${t}`}var Bp=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=xb(this.userKey,i.apiKey,s),this.fullPersistenceKey=xb("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return T(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Qa._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return T(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return T(this,null,function*(){if(!t.length)return new n(ho(jb),e,r);let i=(yield Promise.all(t.map(l=>T(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||ho(jb),o=xb(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let u=yield l._get(o);if(u){let d=Qa._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(l=>T(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,e,r))})}};function YP(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(WK(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zK(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(QK(e))return"Blackberry";if(YK(e))return"Webos";if(HK(e))return"Safari";if((e.includes("chrome/")||GK(e))&&!e.includes("edge/"))return"Chrome";if(KK(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function zK(n=bn()){return/firefox\//i.test(n)}function HK(n=bn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function GK(n=bn()){return/crios\//i.test(n)}function WK(n=bn()){return/iemobile/i.test(n)}function KK(n=bn()){return/android/i.test(n)}function QK(n=bn()){return/blackberry/i.test(n)}function YK(n=bn()){return/webos/i.test(n)}function u1(n,e=[]){let t;switch(n){case"Browser":t=YP(bn());break;case"Worker":t=`${YP(bn())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ka}/${r}`}var qb=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return T(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function ZK(t){return T(this,arguments,function*(n,e={}){return mo(n,"GET","/v2/passwordPolicy",ts(n,e))})}var JK=6,$b=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:JK,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Up=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vp(this),this.idTokenSubscription=new Vp(this),this.beforeStateQueue=new qb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=r1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ho(t)),this._initializationPromise=this.queue(()=>T(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Bp.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return T(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return T(this,null,function*(){try{let t=yield a1(this,{idToken:e}),r=yield Qa._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return T(this,null,function*(){var t;if(Mn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return T(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return T(this,null,function*(){try{yield Fp(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=OK()}_delete(){return T(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return T(this,null,function*(){if(Mn(this.app))return Promise.reject(po(this));let t=e?jt(e):null;return t&&Ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return T(this,null,function*(){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>T(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return T(this,null,function*(){return Mn(this.app)?Promise.reject(po(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Mn(this.app)?Promise.reject(po(this)):this.queue(()=>T(this,null,function*(){yield this.assertedPersistence.setPersistence(ho(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return T(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return T(this,null,function*(){let e=yield ZK(this),t=new $b(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new tr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return T(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield qK(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return T(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return T(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&ho(e)||this._popupRedirectResolver;Ee(t,this,"argument-error"),this.redirectPersistenceManager=yield Bp.create(this,[ho(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return T(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>T(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return T(this,null,function*(){if(e===this.currentUser)return this.queue(()=>T(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return T(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=u1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return T(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return T(this,null,function*(){var e;if(Mn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&RK(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Ya(n){return jt(n)}var Vp=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=MP(t=>this.observer=t)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var d1={loadJS(){return T(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function XK(n){return d1.loadJS(n)}function e7(){return d1.recaptchaEnterpriseScript}var zb=class{constructor(){this.enterprise=new Hb}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},Hb=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},t7="recaptcha-enterprise",f1="NO_RECAPTCHA",Gb=class{constructor(e){this.type=t7,this.auth=Ya(e)}verify(e="verify",t=!1){return T(this,null,function*(){function r(s){return T(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>T(this,null,function*(){FK(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new Bb(c);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(c=>{a(c)})}))})}function i(s,o,a){let c=window.grecaptcha;WP(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(f1)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new zb().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&WP(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=e7();c.length!==0&&(c+=a),XK(c).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})})}};function Nu(n,e,t,r=!1,i=!1){return T(this,null,function*(){let s=new Gb(n),o;if(i)o=f1;else try{o=yield s.verify(t)}catch{o=yield s.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function Wb(n,e,t,r,i){return T(this,null,function*(){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield Nu(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(a=>T(this,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let c=yield Nu(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){let a=yield Nu(n,e,t);return r(n,a).catch(c=>T(this,null,function*(){var l;if(((l=n._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let u=yield Nu(n,e,t,!1,!0);return r(n,u)}return Promise.reject(c)}))}else{let a=yield Nu(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")})}function n_(n,e){let t=Wa(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(Ar(s,e??{}))return i;go(i,"already-initialized")}return t.initialize({options:e})}function n7(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ho);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function r_(n,e,t){let r=Ya(n);Ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=h1(e),{host:o,port:a}=r7(e),c=a===null?"":`:${a}`,l={url:`${s}//${o}${c}/`},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ee(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ee(Ar(l,r.config.emulator)&&Ar(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,i||i7()}function h1(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function r7(n){let e=h1(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:ZP(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:ZP(o)}}}function ZP(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function i7(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Pu=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return hi("not implemented")}_getIdTokenResponse(e){return hi("not implemented")}_linkToIdToken(e,t){return hi("not implemented")}_getReauthenticationResolver(e){return hi("not implemented")}};function s7(n,e){return T(this,null,function*(){return mo(n,"POST","/v1/accounts:signUp",e)})}function o7(n,e){return T(this,null,function*(){return Fu(n,"POST","/v1/accounts:signInWithPassword",ts(n,e))})}function a7(n,e){return T(this,null,function*(){return Fu(n,"POST","/v1/accounts:signInWithEmailLink",ts(n,e))})}function c7(n,e){return T(this,null,function*(){return Fu(n,"POST","/v1/accounts:signInWithEmailLink",ts(n,e))})}var Lu=class n extends Pu{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return T(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wb(e,t,"signInWithPassword",o7,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return a7(e,{email:this._email,oobCode:this._password});default:go(e,"internal-error")}})}_linkToIdToken(e,t){return T(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wb(e,r,"signUpPassword",s7,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return c7(e,{idToken:t,email:this._email,oobCode:this._password});default:go(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Pb(n,e){return T(this,null,function*(){return Fu(n,"POST","/v1/accounts:signInWithIdp",ts(n,e))})}var l7="http://localhost",jp=class n extends Pu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):go("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=of(t,["providerId","signInMethod"]);if(!r||!i)return null;let o=new n(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return Pb(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,Pb(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Pb(e,t)}buildRequest(){let e={requestUri:l7,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Rp(t)}return e}};function u7(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function d7(n){let e=Ha(Ga(n)).link,t=e?Ha(Ga(e)).deep_link_id:null,r=Ha(Ga(n)).deep_link_id;return(r?Ha(Ga(r)).link:null)||r||t||e||n}var qp=class n{constructor(e){var t,r,i,s,o,a;let c=Ha(Ga(e)),l=(t=c.apiKey)!==null&&t!==void 0?t:null,u=(r=c.oobCode)!==null&&r!==void 0?r:null,d=u7((i=c.mode)!==null&&i!==void 0?i:null);Ee(l&&u&&d,"argument-error"),this.apiKey=l,this.operation=d,this.code=u,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=d7(e);try{return new n(t)}catch{return null}}};var p1=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Lu._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=qp.parseLink(r);return Ee(i,"argument-error"),Lu._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Kb=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Qb=class extends Kb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var f7=(()=>{class n extends Qb{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return jp._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();function h7(n,e){return T(this,null,function*(){return Fu(n,"POST","/v1/accounts:signUp",ts(n,e))})}var $p=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return T(this,null,function*(){let s=yield Qa._fromIdTokenResponse(e,r,i),o=JP(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return T(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=JP(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function JP(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Yb=class n extends Tn{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function p7(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Yb._fromErrorAndOperation(n,s,e,r):s})}function g7(n,e,t=!1){return T(this,null,function*(){if(Mn(n.app))return Promise.reject(po(n));let r="signIn",i=yield p7(n,r,e),s=yield $p._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function i_(n,e){return T(this,null,function*(){return g7(Ya(n),e)})}function g1(n){return T(this,null,function*(){let e=Ya(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function m1(n,e,t){return T(this,null,function*(){if(Mn(n.app))return Promise.reject(po(n));let r=Ya(n),o=yield Wb(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",h7,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&g1(n),c}),a=yield $p._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function y1(n,e,t){return Mn(n.app)?Promise.reject(po(n)):i_(jt(n),p1.credential(e,t)).catch(r=>T(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&g1(n),r}))}function v1(n){return jt(n).signOut()}var XP="@firebase/auth",e1="1.9.1";var Zb=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return T(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function m7(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function y7(n){nr(new Jt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ee(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:u1(n)},l=new Up(r,i,s,c);return n7(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),nr(new Jt("auth-internal",e=>{let t=Ya(e.getProvider("auth").getImmediate());return(r=>new Zb(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xe(XP,e1,m7(n)),Xe(XP,e1,"esm2017")}ku.initialize(fetch,Headers,Response);function s_(n=fo()){let e=Wa(n,"auth");if(e.isInitialized())return e.getImmediate();let t=n_(n),r=mb("auth");return r&&r_(t,`http://${r}`),t}y7("Node");var v7=Jb("operation-not-supported-in-this-environment");function E7(){return T(this,null,function*(){throw v7})}var E1=E7;Up.prototype.setPersistence=()=>T(void 0,null,function*(){});var lQ="firebase",uQ="11.5.0";Xe(lQ,uQ,"app");function o_(n){n===void 0&&(Ta(o_),n=R($e));let e=n.get(Uh);return t=>new ue(r=>{let i=e.add(),s=!1;function o(){s||(i(),s=!0)}let a=t.subscribe({next:c=>{r.next(c),o()},complete:()=>{r.complete(),o()},error:c=>{r.error(c),o()}});return a.add(()=>{r.unsubscribe(),o()}),a})}var ns=new zi("ANGULARFIRE2_VERSION");function Bu(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Ja=(n,e)=>{let t=e?[e]:Op(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Za=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(Za||{}),w1=sT()&&typeof Zone<"u"?Za.WARN:Za.SILENT;var zp=class{zone;delegate;constructor(e,t=Qy){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i?i.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,t,r)}},rs=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=R(Ce);this.outsideAngular=t.runOutsideAngular(()=>new zp(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new zp(typeof Zone>"u"?void 0:Zone.current,xi))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),T1=!1;function dQ(n,e){!T1&&(w1>Za.SILENT||sT())&&(T1=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),w1>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function fQ(n){let e=R(Ce,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function yo(n){let e=R(Ce,{optional:!0});return e?e.run(()=>n()):n()}var hQ=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),Mt(t,()=>yo(()=>n.apply(void 0,r)))),_n=(n,e,t)=>(t||=e?Za.WARN:Za.VERBOSE,function(){let r,i=arguments,s,o,a;try{s=R(rs),o=R(Uh),a=R(Bt)}catch{return dQ(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=yo(()=>o.add())),i[l]=hQ(i[l],r,a));let c=fQ(()=>n.apply(this,i));return e?c instanceof ue?c.pipe(ki(s.outsideAngular),Oi(s.insideAngular),o_(a)):c instanceof Promise?yo(()=>new Promise((l,u)=>{o.run(()=>c).then(d=>Mt(a,()=>yo(()=>l(d))),d=>Mt(a,()=>yo(()=>u(d))))})):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:yo(()=>c):c instanceof ue?c.pipe(ki(s.outsideAngular),Oi(s.insideAngular)):yo(()=>c)});var pi=class{constructor(e){return e}},vo=class{constructor(){return Op()}};function pQ(n){return n&&n.length===1?n[0]:new pi(fo())}var a_=new U("angularfire2._apps"),gQ={provide:pi,useFactory:pQ,deps:[[new Yt,a_]]},mQ={provide:vo,deps:[[new Yt,a_]]};function yQ(n){return(e,t)=>{let r=t.get(ai);Xe("angularfire",ns.full,"core"),Xe("angularfire",ns.full,"app"),Xe("angular",Ik.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new pi(i)}}function ebe(n,...e){return cn([gQ,mQ,{provide:a_,useFactory:yQ(n),multi:!0,deps:[Ce,$e,rs,...e]}])}var tbe=_n(Ob,!0);var vQ=new Map,EQ={activated:!1,tokenObservers:[]},wQ={initialized:!1,enabled:!1};function rr(n){return vQ.get(n)||Object.assign({},EQ)}function C1(){return wQ}var TQ="https://content-firebaseappcheck.googleapis.com/v1";var bQ="exchangeDebugToken",b1={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},ube=24*60*60*1e3;var u_=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return T(this,null,function*(){this.stop();try{this.pending=new lo,this.pending.promise.catch(t=>{}),yield _Q(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new lo,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function _Q(n){return new Promise(e=>{setTimeout(e,n)})}var SQ={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},is=new tr("appCheck","AppCheck",SQ);function I1(n){if(!rr(n).activated)throw is.create("use-before-activation",{appName:n.name})}function D1(r,i){return T(this,arguments,function*({url:n,body:e},t){let s={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){let f=yield o.getHeartbeatsHeader();f&&(s["X-Firebase-Client"]=f)}let a={method:"POST",body:JSON.stringify(e),headers:s},c;try{c=yield fetch(n,a)}catch(f){throw is.create("fetch-network-error",{originalErrorMessage:f?.message})}if(c.status!==200)throw is.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(f){throw is.create("fetch-parse-error",{originalErrorMessage:f?.message})}let u=l.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw is.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let d=Number(u[1])*1e3,h=Date.now();return{token:l.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}})}function A1(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${TQ}/projects/${t}/apps/${r}:${bQ}?key=${i}`,body:{debug_token:e}}}var CQ="firebase-app-check-database",IQ=1,d_="firebase-app-check-store";var Hp=null;function DQ(){return Hp||(Hp=new Promise((n,e)=>{try{let t=indexedDB.open(CQ,IQ);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(is.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(d_,{keyPath:"compositeKey"})}}}catch(t){e(is.create("storage-open",{originalErrorMessage:t?.message}))}}),Hp)}function AQ(n,e){return RQ(NQ(n),e)}function RQ(n,e){return T(this,null,function*(){let r=(yield DQ()).transaction(d_,"readwrite"),s=r.objectStore(d_).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var l;a(is.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function NQ(n){return`${n.options.appId}-${n.name}`}var Uu=new Rr("@firebase/app-check");function c_(n,e){return Du()?AQ(n,e).catch(t=>{Uu.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function R1(){return C1().enabled}function N1(){return T(this,null,function*(){let n=C1();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var MQ={error:"UNKNOWN_ERROR"};function OQ(n){return Dp.encodeString(JSON.stringify(n),!1)}function f_(n,e=!1,t=!1){return T(this,null,function*(){let r=n.app;I1(r);let i=rr(r),s=i.token,o;if(s&&!Vu(s)&&(i.token=void 0,s=void 0),!s){let l=yield i.cachedTokenPromise;l&&(Vu(l)?s=l:yield c_(r,void 0))}if(!e&&s&&Vu(s))return{token:s.token};let a=!1;if(R1())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=D1(A1(r,yield N1()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield c_(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Uu.warn(l.message):t&&Uu.error(l),l_(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),s=yield rr(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Uu.warn(l.message):t&&Uu.error(l),o=l}let c;return s?o?Vu(s)?c={token:s.token,internalError:o}:c=l_(o):(c={token:s.token},i.token=s,yield c_(r,s)):c=l_(o),a&&LQ(r,c),c})}function kQ(n){return T(this,null,function*(){let e=n.app;I1(e);let{provider:t}=rr(e);if(R1()){let r=yield N1(),{token:i}=yield D1(A1(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function xQ(n,e,t,r){let{app:i}=n,s=rr(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Vu(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),_1(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>_1(n))}function M1(n,e){let t=rr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function _1(n){let{app:e}=n,t=rr(e),r=t.tokenRefresher;r||(r=PQ(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function PQ(n){let{app:e}=n;return new u_(()=>T(this,null,function*(){let t=rr(e),r;if(t.token?r=yield f_(n,!0):r=yield f_(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=rr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},b1.RETRIAL_MIN_WAIT,b1.RETRIAL_MAX_WAIT)}function LQ(n,e){let t=rr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Vu(n){return n.expireTimeMillis-Date.now()>0}function l_(n){return{token:OQ(MQ),error:n}}var h_=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=rr(this.app);for(let t of e)M1(this.app,t.next);return Promise.resolve()}};function FQ(n,e){return new h_(n,e)}function BQ(n){return{getToken:e=>f_(n,e),getLimitedUseToken:()=>kQ(n),addTokenListener:e=>xQ(n,"INTERNAL",e),removeTokenListener:e=>M1(n.app,e)}}var UQ="@firebase/app-check",VQ="0.8.13";var jQ="app-check",S1="app-check-internal";function qQ(){nr(new Jt(jQ,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return FQ(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(S1).initialize()})),nr(new Jt(S1,n=>{let e=n.getProvider("app-check").getImmediate();return BQ(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Xe(UQ,VQ)}qQ();var $Q="app-check";var Xa=class{constructor(){return Ja($Q)}};var zQ=["localhost","0.0.0.0","127.0.0.1"],_be=typeof window<"u"&&zQ.includes(window.location.hostname);var O1="auth",ju=class{constructor(e){return e}},qu=class{constructor(){return Ja(O1)}};var p_=new U("angularfire2.auth-instances");function HQ(n,e){let t=Bu(O1,n,e);return t&&new ju(t)}function GQ(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new ju(r)}}var WQ={provide:qu,deps:[[new Yt,p_]]},KQ={provide:ju,useFactory:HQ,deps:[[new Yt,p_],pi]};function kbe(n,...e){return Xe("angularfire",ns.full,"auth"),cn([KQ,WQ,{provide:p_,useFactory:GQ(n),multi:!0,deps:[Ce,$e,rs,vo,[new Yt,Xa],...e]}])}var xbe=_n(s_,!0);import{inspect as sie,TextEncoder as oie,TextDecoder as ZSe}from"util";import{randomBytes as aie}from"crypto";var k1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},x1={};var gi,g_;(function(){var n;function e(_,y){function E(){}E.prototype=y.prototype,_.D=y.prototype,_.prototype=new E,_.prototype.constructor=_,_.C=function(b,m,C){for(var p=Array(arguments.length-2),g=2;g<arguments.length;g++)p[g-2]=arguments[g];return y.prototype[m].apply(b,p)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(_,y,E){E||(E=0);var b=Array(16);if(typeof y=="string")for(var m=0;16>m;++m)b[m]=y.charCodeAt(E++)|y.charCodeAt(E++)<<8|y.charCodeAt(E++)<<16|y.charCodeAt(E++)<<24;else for(m=0;16>m;++m)b[m]=y[E++]|y[E++]<<8|y[E++]<<16|y[E++]<<24;y=_.g[0],E=_.g[1],m=_.g[2];var C=_.g[3],p=y+(C^E&(m^C))+b[0]+3614090360&4294967295;y=E+(p<<7&4294967295|p>>>25),p=C+(m^y&(E^m))+b[1]+3905402710&4294967295,C=y+(p<<12&4294967295|p>>>20),p=m+(E^C&(y^E))+b[2]+606105819&4294967295,m=C+(p<<17&4294967295|p>>>15),p=E+(y^m&(C^y))+b[3]+3250441966&4294967295,E=m+(p<<22&4294967295|p>>>10),p=y+(C^E&(m^C))+b[4]+4118548399&4294967295,y=E+(p<<7&4294967295|p>>>25),p=C+(m^y&(E^m))+b[5]+1200080426&4294967295,C=y+(p<<12&4294967295|p>>>20),p=m+(E^C&(y^E))+b[6]+2821735955&4294967295,m=C+(p<<17&4294967295|p>>>15),p=E+(y^m&(C^y))+b[7]+4249261313&4294967295,E=m+(p<<22&4294967295|p>>>10),p=y+(C^E&(m^C))+b[8]+1770035416&4294967295,y=E+(p<<7&4294967295|p>>>25),p=C+(m^y&(E^m))+b[9]+2336552879&4294967295,C=y+(p<<12&4294967295|p>>>20),p=m+(E^C&(y^E))+b[10]+4294925233&4294967295,m=C+(p<<17&4294967295|p>>>15),p=E+(y^m&(C^y))+b[11]+2304563134&4294967295,E=m+(p<<22&4294967295|p>>>10),p=y+(C^E&(m^C))+b[12]+1804603682&4294967295,y=E+(p<<7&4294967295|p>>>25),p=C+(m^y&(E^m))+b[13]+4254626195&4294967295,C=y+(p<<12&4294967295|p>>>20),p=m+(E^C&(y^E))+b[14]+2792965006&4294967295,m=C+(p<<17&4294967295|p>>>15),p=E+(y^m&(C^y))+b[15]+1236535329&4294967295,E=m+(p<<22&4294967295|p>>>10),p=y+(m^C&(E^m))+b[1]+4129170786&4294967295,y=E+(p<<5&4294967295|p>>>27),p=C+(E^m&(y^E))+b[6]+3225465664&4294967295,C=y+(p<<9&4294967295|p>>>23),p=m+(y^E&(C^y))+b[11]+643717713&4294967295,m=C+(p<<14&4294967295|p>>>18),p=E+(C^y&(m^C))+b[0]+3921069994&4294967295,E=m+(p<<20&4294967295|p>>>12),p=y+(m^C&(E^m))+b[5]+3593408605&4294967295,y=E+(p<<5&4294967295|p>>>27),p=C+(E^m&(y^E))+b[10]+38016083&4294967295,C=y+(p<<9&4294967295|p>>>23),p=m+(y^E&(C^y))+b[15]+3634488961&4294967295,m=C+(p<<14&4294967295|p>>>18),p=E+(C^y&(m^C))+b[4]+3889429448&4294967295,E=m+(p<<20&4294967295|p>>>12),p=y+(m^C&(E^m))+b[9]+568446438&4294967295,y=E+(p<<5&4294967295|p>>>27),p=C+(E^m&(y^E))+b[14]+3275163606&4294967295,C=y+(p<<9&4294967295|p>>>23),p=m+(y^E&(C^y))+b[3]+4107603335&4294967295,m=C+(p<<14&4294967295|p>>>18),p=E+(C^y&(m^C))+b[8]+1163531501&4294967295,E=m+(p<<20&4294967295|p>>>12),p=y+(m^C&(E^m))+b[13]+2850285829&4294967295,y=E+(p<<5&4294967295|p>>>27),p=C+(E^m&(y^E))+b[2]+4243563512&4294967295,C=y+(p<<9&4294967295|p>>>23),p=m+(y^E&(C^y))+b[7]+1735328473&4294967295,m=C+(p<<14&4294967295|p>>>18),p=E+(C^y&(m^C))+b[12]+2368359562&4294967295,E=m+(p<<20&4294967295|p>>>12),p=y+(E^m^C)+b[5]+4294588738&4294967295,y=E+(p<<4&4294967295|p>>>28),p=C+(y^E^m)+b[8]+2272392833&4294967295,C=y+(p<<11&4294967295|p>>>21),p=m+(C^y^E)+b[11]+1839030562&4294967295,m=C+(p<<16&4294967295|p>>>16),p=E+(m^C^y)+b[14]+4259657740&4294967295,E=m+(p<<23&4294967295|p>>>9),p=y+(E^m^C)+b[1]+2763975236&4294967295,y=E+(p<<4&4294967295|p>>>28),p=C+(y^E^m)+b[4]+1272893353&4294967295,C=y+(p<<11&4294967295|p>>>21),p=m+(C^y^E)+b[7]+4139469664&4294967295,m=C+(p<<16&4294967295|p>>>16),p=E+(m^C^y)+b[10]+3200236656&4294967295,E=m+(p<<23&4294967295|p>>>9),p=y+(E^m^C)+b[13]+681279174&4294967295,y=E+(p<<4&4294967295|p>>>28),p=C+(y^E^m)+b[0]+3936430074&4294967295,C=y+(p<<11&4294967295|p>>>21),p=m+(C^y^E)+b[3]+3572445317&4294967295,m=C+(p<<16&4294967295|p>>>16),p=E+(m^C^y)+b[6]+76029189&4294967295,E=m+(p<<23&4294967295|p>>>9),p=y+(E^m^C)+b[9]+3654602809&4294967295,y=E+(p<<4&4294967295|p>>>28),p=C+(y^E^m)+b[12]+3873151461&4294967295,C=y+(p<<11&4294967295|p>>>21),p=m+(C^y^E)+b[15]+530742520&4294967295,m=C+(p<<16&4294967295|p>>>16),p=E+(m^C^y)+b[2]+3299628645&4294967295,E=m+(p<<23&4294967295|p>>>9),p=y+(m^(E|~C))+b[0]+4096336452&4294967295,y=E+(p<<6&4294967295|p>>>26),p=C+(E^(y|~m))+b[7]+1126891415&4294967295,C=y+(p<<10&4294967295|p>>>22),p=m+(y^(C|~E))+b[14]+2878612391&4294967295,m=C+(p<<15&4294967295|p>>>17),p=E+(C^(m|~y))+b[5]+4237533241&4294967295,E=m+(p<<21&4294967295|p>>>11),p=y+(m^(E|~C))+b[12]+1700485571&4294967295,y=E+(p<<6&4294967295|p>>>26),p=C+(E^(y|~m))+b[3]+2399980690&4294967295,C=y+(p<<10&4294967295|p>>>22),p=m+(y^(C|~E))+b[10]+4293915773&4294967295,m=C+(p<<15&4294967295|p>>>17),p=E+(C^(m|~y))+b[1]+2240044497&4294967295,E=m+(p<<21&4294967295|p>>>11),p=y+(m^(E|~C))+b[8]+1873313359&4294967295,y=E+(p<<6&4294967295|p>>>26),p=C+(E^(y|~m))+b[15]+4264355552&4294967295,C=y+(p<<10&4294967295|p>>>22),p=m+(y^(C|~E))+b[6]+2734768916&4294967295,m=C+(p<<15&4294967295|p>>>17),p=E+(C^(m|~y))+b[13]+1309151649&4294967295,E=m+(p<<21&4294967295|p>>>11),p=y+(m^(E|~C))+b[4]+4149444226&4294967295,y=E+(p<<6&4294967295|p>>>26),p=C+(E^(y|~m))+b[11]+3174756917&4294967295,C=y+(p<<10&4294967295|p>>>22),p=m+(y^(C|~E))+b[2]+718787259&4294967295,m=C+(p<<15&4294967295|p>>>17),p=E+(C^(m|~y))+b[9]+3951481745&4294967295,_.g[0]=_.g[0]+y&4294967295,_.g[1]=_.g[1]+(m+(p<<21&4294967295|p>>>11))&4294967295,_.g[2]=_.g[2]+m&4294967295,_.g[3]=_.g[3]+C&4294967295}r.prototype.u=function(_,y){y===void 0&&(y=_.length);for(var E=y-this.blockSize,b=this.B,m=this.h,C=0;C<y;){if(m==0)for(;C<=E;)i(this,_,C),C+=this.blockSize;if(typeof _=="string"){for(;C<y;)if(b[m++]=_.charCodeAt(C++),m==this.blockSize){i(this,b),m=0;break}}else for(;C<y;)if(b[m++]=_[C++],m==this.blockSize){i(this,b),m=0;break}}this.h=m,this.o+=y},r.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var y=1;y<_.length-8;++y)_[y]=0;var E=8*this.o;for(y=_.length-8;y<_.length;++y)_[y]=E&255,E/=256;for(this.u(_),_=Array(16),y=E=0;4>y;++y)for(var b=0;32>b;b+=8)_[E++]=this.g[y]>>>b&255;return _};function s(_,y){var E=a;return Object.prototype.hasOwnProperty.call(E,_)?E[_]:E[_]=y(_)}function o(_,y){this.h=y;for(var E=[],b=!0,m=_.length-1;0<=m;m--){var C=_[m]|0;b&&C==y||(E[m]=C,b=!1)}this.g=E}var a={};function c(_){return-128<=_&&128>_?s(_,function(y){return new o([y|0],0>y?-1:0)}):new o([_|0],0>_?-1:0)}function l(_){if(isNaN(_)||!isFinite(_))return d;if(0>_)return S(l(-_));for(var y=[],E=1,b=0;_>=E;b++)y[b]=_/E|0,E*=4294967296;return new o(y,0)}function u(_,y){if(_.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(_.charAt(0)=="-")return S(u(_.substring(1),y));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(y,8)),b=d,m=0;m<_.length;m+=8){var C=Math.min(8,_.length-m),p=parseInt(_.substring(m,m+C),y);8>C?(C=l(Math.pow(y,C)),b=b.j(C).add(l(p))):(b=b.j(E),b=b.add(l(p)))}return b}var d=c(0),h=c(1),f=c(16777216);n=o.prototype,n.m=function(){if(w(this))return-S(this).m();for(var _=0,y=1,E=0;E<this.g.length;E++){var b=this.i(E);_+=(0<=b?b:4294967296+b)*y,y*=4294967296}return _},n.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(v(this))return"0";if(w(this))return"-"+S(this).toString(_);for(var y=l(Math.pow(_,6)),E=this,b="";;){var m=P(E,y).g;E=I(E,m.j(y));var C=((0<E.g.length?E.g[0]:E.h)>>>0).toString(_);if(E=m,v(E))return C+b;for(;6>C.length;)C="0"+C;b=C+b}},n.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function v(_){if(_.h!=0)return!1;for(var y=0;y<_.g.length;y++)if(_.g[y]!=0)return!1;return!0}function w(_){return _.h==-1}n.l=function(_){return _=I(this,_),w(_)?-1:v(_)?0:1};function S(_){for(var y=_.g.length,E=[],b=0;b<y;b++)E[b]=~_.g[b];return new o(E,~_.h).add(h)}n.abs=function(){return w(this)?S(this):this},n.add=function(_){for(var y=Math.max(this.g.length,_.g.length),E=[],b=0,m=0;m<=y;m++){var C=b+(this.i(m)&65535)+(_.i(m)&65535),p=(C>>>16)+(this.i(m)>>>16)+(_.i(m)>>>16);b=p>>>16,C&=65535,p&=65535,E[m]=p<<16|C}return new o(E,E[E.length-1]&-2147483648?-1:0)};function I(_,y){return _.add(S(y))}n.j=function(_){if(v(this)||v(_))return d;if(w(this))return w(_)?S(this).j(S(_)):S(S(this).j(_));if(w(_))return S(this.j(S(_)));if(0>this.l(f)&&0>_.l(f))return l(this.m()*_.m());for(var y=this.g.length+_.g.length,E=[],b=0;b<2*y;b++)E[b]=0;for(b=0;b<this.g.length;b++)for(var m=0;m<_.g.length;m++){var C=this.i(b)>>>16,p=this.i(b)&65535,g=_.i(m)>>>16,L=_.i(m)&65535;E[2*b+2*m]+=p*L,D(E,2*b+2*m),E[2*b+2*m+1]+=C*L,D(E,2*b+2*m+1),E[2*b+2*m+1]+=p*g,D(E,2*b+2*m+1),E[2*b+2*m+2]+=C*g,D(E,2*b+2*m+2)}for(b=0;b<y;b++)E[b]=E[2*b+1]<<16|E[2*b];for(b=y;b<2*y;b++)E[b]=0;return new o(E,0)};function D(_,y){for(;(_[y]&65535)!=_[y];)_[y+1]+=_[y]>>>16,_[y]&=65535,y++}function M(_,y){this.g=_,this.h=y}function P(_,y){if(v(y))throw Error("division by zero");if(v(_))return new M(d,d);if(w(_))return y=P(S(_),y),new M(S(y.g),S(y.h));if(w(y))return y=P(_,S(y)),new M(S(y.g),y.h);if(30<_.g.length){if(w(_)||w(y))throw Error("slowDivide_ only works with positive integers.");for(var E=h,b=y;0>=b.l(_);)E=G(E),b=G(b);var m=W(E,1),C=W(b,1);for(b=W(b,2),E=W(E,2);!v(b);){var p=C.add(b);0>=p.l(_)&&(m=m.add(E),C=p),b=W(b,1),E=W(E,1)}return y=I(_,m.j(y)),new M(m,y)}for(m=d;0<=_.l(y);){for(E=Math.max(1,Math.floor(_.m()/y.m())),b=Math.ceil(Math.log(E)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),C=l(E),p=C.j(y);w(p)||0<p.l(_);)E-=b,C=l(E),p=C.j(y);v(C)&&(C=h),m=m.add(C),_=I(_,p)}return new M(m,_)}n.A=function(_){return P(this,_).h},n.and=function(_){for(var y=Math.max(this.g.length,_.g.length),E=[],b=0;b<y;b++)E[b]=this.i(b)&_.i(b);return new o(E,this.h&_.h)},n.or=function(_){for(var y=Math.max(this.g.length,_.g.length),E=[],b=0;b<y;b++)E[b]=this.i(b)|_.i(b);return new o(E,this.h|_.h)},n.xor=function(_){for(var y=Math.max(this.g.length,_.g.length),E=[],b=0;b<y;b++)E[b]=this.i(b)^_.i(b);return new o(E,this.h^_.h)};function G(_){for(var y=_.g.length+1,E=[],b=0;b<y;b++)E[b]=_.i(b)<<1|_.i(b-1)>>>31;return new o(E,_.h)}function W(_,y){var E=y>>5;y%=32;for(var b=_.g.length-E,m=[],C=0;C<b;C++)m[C]=0<y?_.i(C+E)>>>y|_.i(C+E+1)<<32-y:_.i(C+E);return new o(m,_.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,g_=x1.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=u,gi=x1.Integer=o}).apply(typeof k1<"u"?k1:typeof self<"u"?self:typeof window<"u"?window:{});var Mo=Y0(iU(),1),HU=Y0(uC(),1);var sU="@firebase/firestore",oU="4.7.10";var It=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};It.UNAUTHENTICATED=new It(null);It.GOOGLE_CREDENTIALS=new It("google-credentials-uid");It.FIRST_PARTY=new It("first-party-uid");It.MOCK_USER=new It("mock-user");var cie="11.5.0";var sl=cie;function lie(n){sl=n}function uie(n){return sie(n,{depth:100})}var Oo=new Rr("@firebase/firestore");function Vc(){return Oo.logLevel}function $(n,...e){if(Oo.logLevel<=ve.DEBUG){let t=e.map(E0);Oo.debug(`Firestore (${sl}): ${n}`,...t)}}function gr(n,...e){if(Oo.logLevel<=ve.ERROR){let t=e.map(E0);Oo.error(`Firestore (${sl}): ${n}`,...t)}}function Hc(n,...e){if(Oo.logLevel<=ve.WARN){let t=e.map(E0);Oo.warn(`Firestore (${sl}): ${n}`,...t)}}function E0(n){if(typeof n=="string")return n;try{return uie(n)}catch{return n}}function X(n="Unexpected state"){let e=`FIRESTORE (${sl}) INTERNAL ASSERTION FAILED: `+n;throw gr(e),new Error(e)}function Ne(n,e){n||X()}function oe(n,e){return n}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},q=class extends Tn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var zn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Gm=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},jI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(It.UNAUTHENTICATED))}shutdown(){}},qI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},$I=class{constructor(e){this.authProvider=e,this.currentUser=It.UNAUTHENTICATED,this.tokenCounter=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ne(this.tokenListener===void 0);let r=this.tokenCounter,i=c=>this.tokenCounter!==r?(r=this.tokenCounter,t(c)):Promise.resolve(),s=new zn;this.tokenListener=()=>{this.tokenCounter++,this.currentUser=this.getUser(),s.resolve(),s=new zn,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>T(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.tokenListener&&(this.auth.addAuthTokenListener(this.tokenListener),o())};this.authProvider.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.authProvider.getImmediate({optional:!0});c?a(c):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new zn)}},0),o()}getToken(){let e=this.tokenCounter,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.tokenCounter!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ne(typeof r.accessToken=="string"),new Gm(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.tokenListener&&this.auth.removeAuthTokenListener(this.tokenListener),this.tokenListener=void 0}getUser(){let e=this.auth&&this.auth.getUid();return Ne(e===null||typeof e=="string"),new It(e)}},zI=class{constructor(e,t,r){this.sessionIndex=e,this.iamToken=t,this.authTokenFactory=r,this.type="FirstParty",this.user=It.FIRST_PARTY,this._headers=new Map}getAuthToken(){return this.authTokenFactory?this.authTokenFactory():null}get headers(){this._headers.set("X-Goog-AuthUser",this.sessionIndex);let e=this.getAuthToken();return e&&this._headers.set("Authorization",e),this.iamToken&&this._headers.set("X-Goog-Iam-Authorization-Token",this.iamToken),this._headers}},HI=class{constructor(e,t,r){this.sessionIndex=e,this.iamToken=t,this.authTokenFactory=r}getToken(){return Promise.resolve(new zI(this.sessionIndex,this.iamToken,this.authTokenFactory))}start(e,t){e.enqueueRetryable(()=>t(It.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Wm=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},GI=class{constructor(e,t){this.appCheckProvider=t,this.forceRefresh=!1,this.appCheck=null,this.latestAppCheckToken=null,this.serverAppAppCheckToken=null,Mn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken)}start(e,t){Ne(this.tokenListener===void 0);let r=s=>{s.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.latestAppCheckToken;return this.latestAppCheckToken=s.token,$("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.tokenListener=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.tokenListener&&this.appCheck.addTokenListener(this.tokenListener)};this.appCheckProvider.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.appCheckProvider.getImmediate({optional:!0});s?i(s):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.serverAppAppCheckToken)return Promise.resolve(new Wm(this.serverAppAppCheckToken));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ne(typeof t.token=="string"),this.latestAppCheckToken=t.token,new Wm(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.tokenListener&&this.appCheck.removeTokenListener(this.tokenListener),this.tokenListener=void 0}};function die(n){if(!n)return new jI;switch(n.type){case"firstParty":return new HI(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new q(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}function fie(n){return aie(n)}function GU(){return new oie}var Km=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="",i=20;for(;r.length<i;){let s=fie(40);for(let o=0;o<s.length;++o)r.length<i&&s[o]<t&&(r+=e.charAt(s[o]%e.length))}return r}};function ge(n,e){return n<e?-1:n>e?1:0}function w0(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return ge(r,i);{let s=GU(),o=s.encode(aU(n,t)),a=s.encode(aU(e,t)),c=hie(o,a);return c!==0?c:ge(r,i)}}t+=r>65535?2:1}return ge(n.length,e.length)}function aU(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function hie(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ge(n[t],e[t]);return ge(n.length,e.length)}function ko(n,e,t){return n.length!==e.length?!1:n.every((r,i)=>t(r,e[i]))}var cU=-62135596800,lU=1e6,kt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-t*1e3)*lU);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new q(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new q(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<cU)throw new q(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return this.seconds*1e3+this.nanoseconds/lU}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-cU,t=String(e).padStart(12,"0"),r=String(this.nanoseconds).padStart(9,"0");return t+"."+r}};var le=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new kt(0,0))}static max(){return new n(new kt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return this.timestamp.seconds*1e6+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var uU="__name__",Qm=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&X(),r===void 0?r=e.length-t:r>e.length-t&&X(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return ge(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):w0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return gi.fromString(e.substring(4,e.length-2))}},Ye=class n extends Qm{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new q(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},pie=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Dn=class n extends Qm{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return pie.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===uU}static keyField(){return new n([uU])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new q(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new q(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(!(c==="\\"||c==="."||c==="`"))throw new q(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a==="."&&!o?(s(),i++):(r+=a,i++)}if(s(),o)throw new q(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Z=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ye.fromString(e))}static fromName(e){return new n(Ye.fromString(e).popFirst(5))}static empty(){return new n(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ye.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2===0}static fromSegments(e){return new n(new Ye(e.slice()))}};var Rd=-1;function gie(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=le.fromTimestamp(r===1e9?new kt(t+1,0):new kt(t,r));return new xo(i,Z.empty(),e)}function mie(n){return new xo(n.readTime,n.key,Rd)}var xo=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(le.min(),Z.empty(),Rd)}static max(){return new n(le.max(),Z.empty(),Rd)}};function yie(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0||(t=Z.comparator(n.documentKey,e.documentKey),t!==0)?t:ge(n.largestBatchId,e.largestBatchId)}var vie="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",WI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ol(n){return T(this,null,function*(){if(n.code===N.FAILED_PRECONDITION&&n.message===vie)$("LocalStore","Unexpectedly lost primary lease");else throw n})}var O=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&X(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(u=>{o[l]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function Eie(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function al(n){return n.name==="IndexedDbTransactionError"}var tCe=15*1e3,nCe=60*1e3;var T0=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.setPreviousValue(i),this.writeNewSequenceNumber=i=>r.writeSequenceNumber(i))}setPreviousValue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(t),t}}n.INVALID=-1;return n})(),$m="",wie="",Tie="",bie="";function _ie(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=dU(e)),e=Sie(n.get(t),e);return dU(e)}function Sie(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+=$m+Tie;break;case $m:t+=$m+bie;break;default:t+=s}}return t}function dU(n){return n+$m+wie}var Cie="remoteDocuments";var WU="owner";var KU="mutationQueues";var QU="mutations";var YU="documentMutations",Iie="remoteDocumentsV14";var ZU="remoteDocumentGlobal";var JU="targets";var XU="targetDocuments";var eV="targetGlobal",tV="collectionParents";var nV="clientMetadata";var rV="bundles";var iV="namedQueries";var Die="indexConfiguration";var Aie="indexState";var Rie="indexEntries";var sV="documentOverlays";var Nie="globals";var Mie=[KU,QU,YU,Cie,JU,WU,eV,XU],Oie=Mie,kie=[...Oie,nV],xie=[...kie,ZU],Pie=[...xie,tV],Lie=[...Pie,rV,iV],rCe=[...Lie,sV],Fie=[KU,QU,YU,Iie,JU,WU,eV,XU,nV,ZU,tV,rV,iV,sV],Bie=Fie,Uie=[...Bie,Die,Aie,Rie];var iCe=[...Uie,Nie];function fU(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function qo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function oV(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var tt=class n{constructor(e,t){this.comparator=e,this.root=t||Id.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Id.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Id.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $c(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $c(this.root,e,this.comparator,!1)}getReverseIterator(){return new $c(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $c(this.root,e,this.comparator,!0)}},$c=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)this.isReverse?e=e.left:e=e.right;else if(s===0){this.nodeStack.push(e);break}else this.nodeStack.push(e),this.isReverse?e=e.right:e=e.left}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Id=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this,o=i(t,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(t,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let t=this;return!t.left.isRed()&&!t.left.left.isRed()&&(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let i,s=this;if(r(t,s.key)<0)!s.left.isEmpty()&&!s.left.isRed()&&!s.left.left.isRed()&&(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),!s.right.isEmpty()&&!s.right.isRed()&&!s.right.left.isRed()&&(s=s.moveRedRight()),r(t,s.key)===0){if(s.right.isEmpty())return n.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw X();let t=this.left.check();if(t!==this.right.check())throw X();return t+(this.isRed()?0:1)}}return n.EMPTY=null,n.RED=!0,n.BLACK=!1,n})(),KI=class{constructor(){this.size=0}get key(){throw X()}get value(){throw X()}get color(){throw X()}get left(){throw X()}get right(){throw X()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Id(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};Id.EMPTY=new KI;var Ct=class n{constructor(e){this.comparator=e,this.data=new tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(t!==void 0?r=this.data.getIteratorFrom(t):r=this.data.getIterator();r.hasNext();){let i=r.getNext();if(!e(i.key))return}}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ym(this.data.getIterator())}getIteratorFrom(e){return new Ym(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Ym=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Wr=class n{constructor(e){this.fields=e,e.sort(Dn.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ct(Dn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ko(this.fields,e.fields,(t,r)=>t.isEqual(r))}};function Vie(n){return Buffer.from(n,"base64").toString("binary")}function jie(n){return Buffer.from(n,"binary").toString("base64")}var Gt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=Vie(e);return new n(t)}static fromUint8Array(e){let t=qie(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return jie(this.binaryString)}toUint8Array(){return $ie(this.binaryString)}approximateByteSize(){return this.binaryString.length*2}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Gt.EMPTY_BYTE_STRING=new Gt("");function qie(n){let e="";for(let t=0;t<n.length;++t)e+=String.fromCharCode(n[t]);return e}function $ie(n){let e=new Uint8Array(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}var zie=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ci(n){if(Ne(!!n),typeof n=="string"){let e=0,t=zie.exec(n);if(Ne(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}else{let e=We(n.seconds),t=We(n.nanos);return{seconds:e,nanos:t}}}function We(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ii(n){return typeof n=="string"?Gt.fromBase64String(n):Gt.fromUint8Array(n)}var aV="server_timestamp",cV="__type__",lV="__previous_value__",uV="__local_write_time__";function b0(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[cV])===null||t===void 0?void 0:t.stringValue)===aV}function Hie(n,e){let t={fields:{[cV]:{stringValue:aV},[uV]:{timestampValue:{seconds:n.seconds,nanos:n.nanoseconds}}}};return e&&b0(e)&&(e=Sy(e)),e&&(t.fields[lV]=e),{mapValue:t}}function Sy(n){let e=n.mapValue.fields[lV];return b0(e)?Sy(e):e}function Nd(n){let e=Ci(n.mapValue.fields[uV].timestampValue);return new kt(e.seconds,e.nanos)}var QI=class{constructor(e,t,r,i,s,o,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},YI="(default)",Zm=class n{constructor(e,t){this.projectId=e,this.database=t||YI}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===YI}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};function Gie(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new q(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zm(n.options.projectId,e)}var _0=-1;function Cy(n){return n==null}function Md(n){return n===0&&1/n===-1/0}function Wie(n){return typeof n=="number"&&Number.isInteger(n)&&!Md(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var S0="__type__",dV="__max__",Vm={mapValue:{fields:{__type__:{stringValue:dV}}}},C0="__vector__",Wc="value";function xs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?b0(n)?4:pV(n)?9007199254740991:hV(n)?10:11:X()}function hr(n,e){if(n===e)return!0;let t=xs(n),r=xs(e);if(t!==r)return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Nd(n).isEqual(Nd(e));case 3:return Kie(n,e);case 5:return n.stringValue===e.stringValue;case 6:return Yie(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return Qie(n,e);case 2:return Zie(n,e);case 9:return ko(n.arrayValue.values||[],e.arrayValue.values||[],hr);case 10:case 11:return Jie(n,e);case 9007199254740991:return!0;default:return X()}}function Kie(n,e){if(typeof n.timestampValue=="string"&&typeof e.timestampValue=="string"&&n.timestampValue.length===e.timestampValue.length)return n.timestampValue===e.timestampValue;let t=Ci(n.timestampValue),r=Ci(e.timestampValue);return t.seconds===r.seconds&&t.nanos===r.nanos}function Qie(n,e){return We(n.geoPointValue.latitude)===We(e.geoPointValue.latitude)&&We(n.geoPointValue.longitude)===We(e.geoPointValue.longitude)}function Yie(n,e){return Ii(n.bytesValue).isEqual(Ii(e.bytesValue))}function Zie(n,e){if("integerValue"in n&&"integerValue"in e)return We(n.integerValue)===We(e.integerValue);if("doubleValue"in n&&"doubleValue"in e){let t=We(n.doubleValue),r=We(e.doubleValue);return t===r?Md(t)===Md(r):isNaN(t)&&isNaN(r)}return!1}function Jie(n,e){let t=n.mapValue.fields||{},r=e.mapValue.fields||{};if(fU(t)!==fU(r))return!1;for(let i in t)if(t.hasOwnProperty(i)&&(r[i]===void 0||!hr(t[i],r[i])))return!1;return!0}function Od(n,e){return(n.values||[]).find(t=>hr(t,e))!==void 0}function Kc(n,e){if(n===e)return 0;let t=xs(n),r=xs(e);if(t!==r)return ge(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ge(n.booleanValue,e.booleanValue);case 2:return Xie(n,e);case 3:return hU(n.timestampValue,e.timestampValue);case 4:return hU(Nd(n),Nd(e));case 5:return w0(n.stringValue,e.stringValue);case 6:return nse(n.bytesValue,e.bytesValue);case 7:return ese(n.referenceValue,e.referenceValue);case 8:return tse(n.geoPointValue,e.geoPointValue);case 9:return fV(n.arrayValue,e.arrayValue);case 10:return rse(n.mapValue,e.mapValue);case 11:return ise(n.mapValue,e.mapValue);default:throw X()}}function Xie(n,e){let t=We(n.integerValue||n.doubleValue),r=We(e.integerValue||e.doubleValue);return t<r?-1:t>r?1:t===r?0:isNaN(t)?isNaN(r)?0:-1:1}function hU(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ge(n,e);let t=Ci(n),r=Ci(e),i=ge(t.seconds,r.seconds);return i!==0?i:ge(t.nanos,r.nanos)}function ese(n,e){let t=n.split("/"),r=e.split("/");for(let i=0;i<t.length&&i<r.length;i++){let s=ge(t[i],r[i]);if(s!==0)return s}return ge(t.length,r.length)}function tse(n,e){let t=ge(We(n.latitude),We(e.latitude));return t!==0?t:ge(We(n.longitude),We(e.longitude))}function nse(n,e){let t=Ii(n),r=Ii(e);return t.compareTo(r)}function fV(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Kc(t[i],r[i]);if(s)return s}return ge(t.length,r.length)}function rse(n,e){var t,r,i,s;let o=n.fields||{},a=e.fields||{},c=(t=o[Wc])===null||t===void 0?void 0:t.arrayValue,l=(r=a[Wc])===null||r===void 0?void 0:r.arrayValue,u=ge(((i=c?.values)===null||i===void 0?void 0:i.length)||0,((s=l?.values)===null||s===void 0?void 0:s.length)||0);return u!==0?u:fV(c,l)}function ise(n,e){if(n===Vm.mapValue&&e===Vm.mapValue)return 0;if(n===Vm.mapValue)return 1;if(e===Vm.mapValue)return-1;let t=n.fields||{},r=Object.keys(t),i=e.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){let a=w0(r[o],s[o]);if(a!==0)return a;let c=Kc(t[r[o]],i[s[o]]);if(c!==0)return c}return ge(r.length,s.length)}function Qc(n){return I0(n)}function I0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?ose(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?sse(n.bytesValue):"referenceValue"in n?cse(n.referenceValue):"geoPointValue"in n?ase(n.geoPointValue):"arrayValue"in n?use(n.arrayValue):"mapValue"in n?lse(n.mapValue):X()}function sse(n){return Ii(n).toBase64()}function ose(n){let e=Ci(n);return`time(${e.seconds},${e.nanos})`}function ase(n){return`geo(${n.latitude},${n.longitude})`}function cse(n){return Z.fromName(n).toString()}function lse(n){let e=Object.keys(n.fields||{}).sort(),t="{",r=!0;for(let i of e)r?r=!1:t+=",",t+=`${i}:${I0(n.fields[i])}`;return t+"}"}function use(n){let e="[",t=!0;for(let r of n.values||[])t?t=!1:e+=",",e+=I0(r);return e+"]"}function Iy(n){switch(xs(n)){case 0:return 4;case 1:return 4;case 2:return 8;case 3:return 16;case 4:let e=Sy(n);return e?16+Iy(e):16;case 5:return n.stringValue.length*2;case 6:return Ii(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 8:return 16;case 9:return fse(n.arrayValue);case 10:case 11:return dse(n.mapValue);default:throw X()}}function dse(n){let e=0;return qo(n.fields,(t,r)=>{e+=t.length+Iy(r)}),e}function fse(n){return(n.values||[]).reduce((e,t)=>e+Iy(t),0)}function pU(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ZI(n){return!!n&&"integerValue"in n}function hse(n){return!!n&&"doubleValue"in n}function pse(n){return ZI(n)||hse(n)}function D0(n){return!!n&&"arrayValue"in n}function gU(n){return!!n&&"nullValue"in n}function mU(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function zm(n){return!!n&&"mapValue"in n}function hV(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[S0])===null||t===void 0?void 0:t.stringValue)===C0}function Dd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return qo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Dd(r)),e}else if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Dd(n.arrayValue.values[t]);return e}else return Object.assign({},n)}function pV(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===dV}var sCe={mapValue:{fields:{[S0]:{stringValue:C0},[Wc]:{arrayValue:{}}}}};var fr=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!zm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){let r=this.getFieldsMap(e.popLast());r[e.lastSegment()]=Dd(t)}setAll(e){let t=Dn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Dd(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());zm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return hr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];(!zm(i)||!i.mapValue.fields)&&(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){qo(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Dd(this.value))}};function gV(n){let e=[];return qo(n.fields,(t,r)=>{let i=new Dn([t]);if(zm(r)){let o=gV(r.mapValue).fields;if(o.length===0)e.push(i);else for(let a of o)e.push(i.child(a))}else e.push(i)}),new Wr(e)}var mr=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,le.min(),le.min(),le.min(),fr.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,le.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,le.min(),le.min(),fr.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,le.min(),le.min(),fr.empty(),2)}convertToFoundDocument(e,t){return this.createTime.isEqual(le.min())&&(this.documentType===2||this.documentType===0)&&(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};function gse(n,e,t){let r=e.data.field(n),i=t.data.field(n);return r!==null&&i!==null?Kc(r,i):X()}var Yc=class{constructor(e,t){this.position=e,this.inclusive=t}};function mV(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField())r=Z.comparator(Z.fromName(o.referenceValue),t.key);else{let a=t.data.field(s.field);r=Kc(o,a)}if(s.dir==="desc"&&(r=r*-1),r!==0)break}return r}function mse(n,e,t){let r=mV(n,e,t);return n.inclusive?r>=0:r>0}function yse(n,e,t){let r=mV(n,e,t);return n.inclusive?r<=0:r<0}function yU(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++){let r=n.position[t],i=e.position[t];if(!hr(r,i))return!1}return!0}var Zc=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function vse(n){return n.field.canonicalString()+n.dir}function Ese(n){return`${n.field.canonicalString()} (${n.dir})`}function wse(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Jm=class{},ft=class n extends Jm{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new XI(e,t,r):t==="array-contains"?new nD(e,r):t==="in"?new rD(e,r):t==="not-in"?new iD(e,r):t==="array-contains-any"?new sD(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new eD(e,r):new tD(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Kc(t,this.value)):t!==null&&xs(this.value)===xs(t)&&this.matchesComparison(Kc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},yr=class n extends Jm{constructor(e,t){super(),this.filters=e,this.op=t,this.memoizedFlattenedFilters=null}static create(e,t){return new n(e,t)}matches(e){return yV(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.memoizedFlattenedFilters!==null?this.memoizedFlattenedFilters:(this.memoizedFlattenedFilters=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[]),this.memoizedFlattenedFilters)}getFilters(){return Object.assign([],this.filters)}};function yV(n){return n.op==="and"}function vV(n){return Tse(n)&&yV(n)}function Tse(n){for(let e of n.filters)if(e instanceof yr)return!1;return!0}function JI(n){if(n instanceof ft)return n.field.canonicalString()+n.op.toString()+Qc(n.value);if(vV(n))return n.filters.map(e=>JI(e)).join(",");{let e=n.filters.map(t=>JI(t)).join(",");return`${n.op}(${e})`}}function EV(n,e){if(n instanceof ft)return bse(n,e);if(n instanceof yr)return _se(n,e);X()}function bse(n,e){return e instanceof ft&&n.op===e.op&&n.field.isEqual(e.field)&&hr(n.value,e.value)}function _se(n,e){return e instanceof yr&&n.op===e.op&&n.filters.length===e.filters.length?n.filters.reduce((r,i,s)=>r&&EV(i,e.filters[s]),!0):!1}function wV(n){return n instanceof ft?Cse(n):n instanceof yr?Sse(n):"Filter"}function Sse(n){return n.op.toString()+" {"+n.getFilters().map(wV).join(" ,")+"}"}function Cse(n){return`${n.field.canonicalString()} ${n.op} ${Qc(n.value)}`}var XI=class extends ft{constructor(e,t,r){super(e,t,r),this.key=Z.fromName(r.referenceValue)}matches(e){let t=Z.comparator(e.key,this.key);return this.matchesComparison(t)}},eD=class extends ft{constructor(e,t){super(e,"in",t),this.keys=TV("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},tD=class extends ft{constructor(e,t){super(e,"not-in",t),this.keys=TV("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function TV(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Z.fromName(r.referenceValue))}var nD=class extends ft{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return D0(t)&&Od(t.arrayValue,this.value)}},rD=class extends ft{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Od(this.value.arrayValue,t)}},iD=class extends ft{constructor(e,t){super(e,"not-in",t)}matches(e){if(Od(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Od(this.value.arrayValue,t)}},sD=class extends ft{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!D0(t)||!t.arrayValue.values?!1:t.arrayValue.values.some(r=>Od(this.value.arrayValue,r))}};var oD=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.memoizedCanonicalId=null}};function vU(n,e=null,t=[],r=[],i=null,s=null,o=null){return new oD(n,e,t,r,i,s,o)}function A0(n){let e=oe(n);if(e.memoizedCanonicalId===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>JI(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>vse(r)).join(","),Cy(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Qc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Qc(r)).join(",")),e.memoizedCanonicalId=t}return e.memoizedCanonicalId}function Ise(n){let e=n.path.canonicalString();return n.collectionGroup!==null&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>wV(t)).join(", ")}]`),Cy(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>Ese(t)).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Qc(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Qc(t)).join(",")),`Target(${e})`}function R0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!wse(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!EV(n.filters[t],e.filters[t]))return!1;return n.collectionGroup!==e.collectionGroup||!n.path.isEqual(e.path)||!yU(n.startAt,e.startAt)?!1:yU(n.endAt,e.endAt)}function aD(n){return Z.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Po=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.memoizedNormalizedOrderBy=null,this.memoizedTarget=null,this.memoizedAggregateTarget=null,this.startAt,this.endAt}};function Dse(n,e,t,r,i,s,o,a){return new Po(n,e,t,r,i,s,o,a)}function Dy(n){return new Po(n)}function Ase(n,e){return new Po(e,null,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function EU(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Rse(n){let e=new Ct(Dn.comparator);return n.filters.forEach(t=>{t.getFlattenedFilters().forEach(i=>{i.isInequality()&&(e=e.add(i.field))})}),e}function Nse(n){return Z.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function bV(n){return n.collectionGroup!==null}function kd(n){let e=oe(n);if(e.memoizedNormalizedOrderBy===null){e.memoizedNormalizedOrderBy=[];let t=new Set;for(let s of e.explicitOrderBy)e.memoizedNormalizedOrderBy.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";Rse(e).forEach(s=>{!t.has(s.canonicalString())&&!s.isKeyField()&&e.memoizedNormalizedOrderBy.push(new Zc(s,r))}),t.has(Dn.keyField().canonicalString())||e.memoizedNormalizedOrderBy.push(new Zc(Dn.keyField(),r))}return e.memoizedNormalizedOrderBy}function Kr(n){let e=oe(n);return e.memoizedTarget||(e.memoizedTarget=Mse(e,kd(n))),e.memoizedTarget}function Mse(n,e){if(n.limitType==="F")return vU(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Zc(i.field,s)});let t=n.endAt?new Yc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Yc(n.startAt.position,n.startAt.inclusive):null;return vU(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function N0(n,e){let t=n.filters.concat([e]);return new Po(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function cD(n,e,t){return new Po(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ay(n,e){return R0(Kr(n),Kr(e))&&n.limitType===e.limitType}function _V(n){return`${A0(Kr(n))}|lt:${n.limitType}`}function jc(n){return`Query(target=${Ise(Kr(n))}; limitType=${n.limitType})`}function Ry(n,e){return e.isFoundDocument()&&Ose(n,e)&&kse(n,e)&&xse(n,e)&&Pse(n,e)}function Ose(n,e){let t=e.key.path;return n.collectionGroup!==null?e.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(t):Z.isDocumentKey(n.path)?n.path.isEqual(t):n.path.isImmediateParentOf(t)}function kse(n,e){for(let t of kd(n))if(!t.field.isKeyField()&&e.data.field(t.field)===null)return!1;return!0}function xse(n,e){for(let t of n.filters)if(!t.matches(e))return!1;return!0}function Pse(n,e){return!(n.startAt&&!yse(n.startAt,kd(n),e)||n.endAt&&!mse(n.endAt,kd(n),e))}function Lse(n){return n.collectionGroup||(n.path.length%2===1?n.path.lastSegment():n.path.get(n.path.length-2))}function SV(n){return(e,t)=>{let r=!1;for(let i of kd(n)){let s=Fse(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Fse(n,e,t){let r=n.field.isKeyField()?Z.comparator(e.key,t.key):gse(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return X()}}var Di=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0){this.inner[r]=[[e,t]],this.innerSize++;return}for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e)){i[s]=[e,t];return}i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){qo(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return oV(this.inner)}size(){return this.innerSize}};var Bse=new tt(Z.comparator);function Ai(){return Bse}var CV=new tt(Z.comparator);function Cd(...n){let e=CV;for(let t of n)e=e.insert(t.key,t);return e}function Use(){return xd()}function IV(n){let e=CV;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ro(){return xd()}function DV(){return xd()}function xd(){return new Di(n=>n.toString(),(n,e)=>n.isEqual(e))}var Vse=new tt(Z.comparator);function jse(){return Vse}var qse=new Ct(Z.comparator);function we(...n){let e=qse;for(let t of n)e=e.add(t);return e}var $se=new Ct(ge);function zse(){return $se}function M0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Md(e)?"-0":e}}function AV(n){return{integerValue:""+n}}function Hse(n,e){return Wie(e)?AV(e):M0(n,e)}var Jc=class{constructor(){this._=void 0}};function Gse(n,e,t){return n instanceof Xc?Hie(t,e):n instanceof Lo?NV(n,e):n instanceof Fo?MV(n,e):Qse(n,e)}function Wse(n,e,t){return n instanceof Lo?NV(n,e):n instanceof Fo?MV(n,e):t}function RV(n,e){return n instanceof el?pse(e)?e:{integerValue:0}:null}function Kse(n,e){return n instanceof Lo&&e instanceof Lo||n instanceof Fo&&e instanceof Fo?ko(n.elements,e.elements,hr):n instanceof el&&e instanceof el?hr(n.operand,e.operand):n instanceof Xc&&e instanceof Xc}var Xc=class extends Jc{},Lo=class extends Jc{constructor(e){super(),this.elements=e}};function NV(n,e){let t=OV(e);for(let r of n.elements)t.some(i=>hr(i,r))||t.push(r);return{arrayValue:{values:t}}}var Fo=class extends Jc{constructor(e){super(),this.elements=e}};function MV(n,e){let t=OV(e);for(let r of n.elements)t=t.filter(i=>!hr(i,r));return{arrayValue:{values:t}}}var el=class extends Jc{constructor(e,t){super(),this.serializer=e,this.operand=t}};function Qse(n,e){let t=RV(n,e),r=wU(t)+wU(n.operand);return ZI(t)&&ZI(n.operand)?AV(r):M0(n.serializer,r)}function wU(n){return We(n.integerValue||n.doubleValue)}function OV(n){return D0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Yse(n,e){return n.field.isEqual(e.field)&&Kse(n.transform,e.transform)}function Zse(n,e){return n===void 0&&e===void 0?!0:n&&e?ko(n,e,(t,r)=>Yse(t,r)):!1}var lD=class{constructor(e,t){this.version=e,this.transformResults=t}},Os=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ny(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists!==void 0?n.exists===e.isFoundDocument():!0}var tl=class{};function kV(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Pd(n.key,Os.none()):new Bo(n.key,n.data,Os.none());{let t=n.data,r=fr.empty(),i=new Ct(Dn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ri(n.key,r,new Wr(i.toArray()),Os.none())}}function Jse(n,e,t){n instanceof Bo?eoe(n,e,t):n instanceof Ri?noe(n,e,t):ioe(n,e,t)}function Ad(n,e,t,r){return n instanceof Bo?toe(n,e,t,r):n instanceof Ri?roe(n,e,t,r):soe(n,e,t)}function Xse(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=RV(r.transform,i||null);s!=null&&(t===null&&(t=fr.empty()),t.set(r.field,s))}return t||null}function TU(n,e){return n.type!==e.type||!n.key.isEqual(e.key)||!n.precondition.isEqual(e.precondition)||!Zse(n.fieldTransforms,e.fieldTransforms)?!1:n.type===0?n.value.isEqual(e.value):n.type===1?n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask):!0}var Bo=class extends tl{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}};function eoe(n,e,t){let r=n.value.clone(),i=PV(n.fieldTransforms,e,t.transformResults);r.setAll(i),e.convertToFoundDocument(t.version,r).setHasCommittedMutations()}function toe(n,e,t,r){if(!Ny(n.precondition,e))return t;let i=n.value.clone(),s=LV(n.fieldTransforms,r,e);return i.setAll(s),e.convertToFoundDocument(e.version,i).setHasLocalMutations(),null}var Ri=class extends tl{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function noe(n,e,t){if(!Ny(n.precondition,e)){e.convertToUnknownDocument(t.version);return}let r=PV(n.fieldTransforms,e,t.transformResults),i=e.data;i.setAll(xV(n)),i.setAll(r),e.convertToFoundDocument(t.version,i).setHasCommittedMutations()}function roe(n,e,t,r){if(!Ny(n.precondition,e))return t;let i=LV(n.fieldTransforms,r,e),s=e.data;return s.setAll(xV(n)),s.setAll(i),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),t===null?null:t.unionWith(n.fieldMask.fields).unionWith(n.fieldTransforms.map(o=>o.field))}function xV(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function PV(n,e,t){let r=new Map;Ne(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Wse(o,a,t[i]))}return r}function LV(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,Gse(s,o,e))}return r}var Pd=class extends tl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};function ioe(n,e,t){e.convertToNoDocument(t.version).setHasCommittedMutations()}function soe(n,e,t){return Ny(n.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):t}var uD=class extends tl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var dD=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];if(s.key.isEqual(e.key)){let o=r[i];Jse(s,e,o)}}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ad(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Ad(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=DV();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=kV(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),we())}isEqual(e){return this.batchId===e.batchId&&ko(this.mutations,e.mutations,(t,r)=>TU(t,r))&&ko(this.baseMutations,e.baseMutations,(t,r)=>TU(t,r))}},fD=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ne(e.mutations.length===r.length);let i=jse(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var hD=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var pD=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var St=function(n){return n[n.OK=0]="OK",n[n.CANCELLED=1]="CANCELLED",n[n.UNKNOWN=2]="UNKNOWN",n[n.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",n[n.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",n[n.NOT_FOUND=5]="NOT_FOUND",n[n.ALREADY_EXISTS=6]="ALREADY_EXISTS",n[n.PERMISSION_DENIED=7]="PERMISSION_DENIED",n[n.UNAUTHENTICATED=16]="UNAUTHENTICATED",n[n.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",n[n.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",n[n.ABORTED=10]="ABORTED",n[n.OUT_OF_RANGE=11]="OUT_OF_RANGE",n[n.UNIMPLEMENTED=12]="UNIMPLEMENTED",n[n.INTERNAL=13]="INTERNAL",n[n.UNAVAILABLE=14]="UNAVAILABLE",n[n.DATA_LOSS=15]="DATA_LOSS",n}(St||{});function ooe(n){switch(n){case N.OK:return X();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return X()}}function aoe(n){return ooe(n)&&n!==N.ABORTED}function Hm(n){if(n===void 0)return gr("GRPC error has no .code"),N.UNKNOWN;switch(n){case St.OK:return N.OK;case St.CANCELLED:return N.CANCELLED;case St.UNKNOWN:return N.UNKNOWN;case St.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case St.INTERNAL:return N.INTERNAL;case St.UNAVAILABLE:return N.UNAVAILABLE;case St.UNAUTHENTICATED:return N.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case St.NOT_FOUND:return N.NOT_FOUND;case St.ALREADY_EXISTS:return N.ALREADY_EXISTS;case St.PERMISSION_DENIED:return N.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case St.ABORTED:return N.ABORTED;case St.OUT_OF_RANGE:return N.OUT_OF_RANGE;case St.UNIMPLEMENTED:return N.UNIMPLEMENTED;case St.DATA_LOSS:return N.DATA_LOSS;default:return X()}}var gD=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var xI=null;var coe=new gi([4294967295,4294967295],0);function bU(n){let e=GU().encode(n),t=new g_;return t.update(e),new Uint8Array(t.digest())}function _U(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0),o=new gi([t,r],0),a=new gi([i,s],0);return[o,a]}var mD=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new No(`Invalid padding: ${t}`);if(r<0)throw new No(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new No(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new No(`Invalid padding when bitmap length is 0: ${t}`);this.bitCount=e.length*8-t,this.bitCountInInteger=gi.fromNumber(this.bitCount)}getBitIndex(e,t,r){let i=e.add(t.multiply(gi.fromNumber(r)));return i.compare(coe)===1&&(i=new gi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.bitCountInInteger).toNumber()}isBitSet(e){let t=this.bitmap[Math.floor(e/8)],r=e%8;return(t&1<<r)!==0}mightContain(e){if(this.bitCount===0)return!1;let t=bU(e),[r,i]=_U(t);for(let s=0;s<this.hashCount;s++){let o=this.getBitIndex(r,i,s);if(!this.isBitSet(o))return!1}return!0}static create(e,t,r){let i=e%8===0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.bitCount===0)return;let t=bU(e),[r,i]=_U(t);for(let s=0;s<this.hashCount;s++){let o=this.getBitIndex(r,i,s);this.setBit(o)}}setBit(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},No=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Xm=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Ld.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(le.min(),i,new tt(ge),Ai(),we())}},Ld=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,we(),we(),we())}};var Gc=class{constructor(e,t,r,i){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=r,this.newDoc=i}},ey=class{constructor(e,t){this.targetId=e,this.existenceFilter=t}},ty=class{constructor(e,t,r=Gt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},ny=class{constructor(){this.pendingResponses=0,this.documentChanges=SU(),this._resumeToken=Gt.EMPTY_BYTE_STRING,this._current=!1,this._hasPendingChanges=!0}get current(){return this._current}get resumeToken(){return this._resumeToken}get isPending(){return this.pendingResponses!==0}get hasPendingChanges(){return this._hasPendingChanges}updateResumeToken(e){e.approximateByteSize()>0&&(this._hasPendingChanges=!0,this._resumeToken=e)}toTargetChange(){let e=we(),t=we(),r=we();return this.documentChanges.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:X()}}),new Ld(this._resumeToken,this._current,e,t,r)}clearPendingChanges(){this._hasPendingChanges=!1,this.documentChanges=SU()}addDocumentChange(e,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,t)}removeDocumentChange(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)}recordPendingTargetRequest(){this.pendingResponses+=1}recordTargetResponse(){this.pendingResponses-=1,Ne(this.pendingResponses>=0)}markCurrent(){this._hasPendingChanges=!0,this._current=!0}},loe="WatchChangeAggregator",yD=class{constructor(e){this.metadataProvider=e,this.targetStates=new Map,this.pendingDocumentUpdates=Ai(),this.pendingDocumentUpdatesByTarget=jm(),this.pendingDocumentTargetMapping=jm(),this.pendingTargetResets=new tt(ge)}handleDocumentChange(e){for(let t of e.updatedTargetIds)e.newDoc&&e.newDoc.isFoundDocument()?this.addDocumentToTarget(t,e.newDoc):this.removeDocumentFromTarget(t,e.key,e.newDoc);for(let t of e.removedTargetIds)this.removeDocumentFromTarget(t,e.key,e.newDoc)}handleTargetChange(e){this.forEachTarget(e,t=>{let r=this.ensureTargetState(t);switch(e.state){case 0:this.isActiveTarget(t)&&r.updateResumeToken(e.resumeToken);break;case 1:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(e.resumeToken);break;case 2:r.recordTargetResponse(),r.isPending||this.removeTarget(t);break;case 3:this.isActiveTarget(t)&&(r.markCurrent(),r.updateResumeToken(e.resumeToken));break;case 4:this.isActiveTarget(t)&&(this.resetTarget(t),r.updateResumeToken(e.resumeToken));break;default:X()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.targetStates.forEach((r,i)=>{this.isActiveTarget(i)&&t(i)})}handleExistenceFilter(e){let t=e.targetId,r=e.existenceFilter.count,i=this.targetDataForActiveTarget(t);if(i){let s=i.target;if(aD(s))if(r===0){let o=new Z(s.path);this.removeDocumentFromTarget(t,o,mr.newNoDocument(o,le.min()))}else Ne(r===1);else{let o=this.getCurrentDocumentCountForTarget(t);if(o!==r){let a=this.parseBloomFilter(e),c=a?this.applyBloomFilter(a,e,o):1;if(c!==0){this.resetTarget(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.pendingTargetResets=this.pendingTargetResets.insert(t,l)}xI?.notifyOnExistenceFilterMismatch(uoe(o,e.existenceFilter,this.metadataProvider.getDatabaseId(),a,c))}}}}parseBloomFilter(e){let t=e.existenceFilter.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o;try{o=Ii(r).toUint8Array()}catch(c){if(c instanceof gD)return Hc("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}let a;try{a=new mD(o,i,s)}catch(c){return c instanceof No?Hc("BloomFilter error: ",c):Hc("Applying bloom filter failed: ",c),null}return a.bitCount===0?null:a}applyBloomFilter(e,t,r){let i=t.existenceFilter.count,s=this.filterRemovedDocuments(e,t.targetId);return i===r-s?0:2}filterRemovedDocuments(e,t){let r=this.metadataProvider.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.metadataProvider.getDatabaseId(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.removeDocumentFromTarget(t,s,null),i++)}),i}createRemoteEvent(e){let t=new Map;this.targetStates.forEach((s,o)=>{let a=this.targetDataForActiveTarget(o);if(a){if(s.current&&aD(a.target)){let c=new Z(a.target.path);!this.ensureDocumentUpdateByTarget(c).has(o)&&!this.targetContainsDocument(o,c)&&this.removeDocumentFromTarget(o,c,mr.newNoDocument(c,e))}s.hasPendingChanges&&(t.set(o,s.toTargetChange()),s.clearPendingChanges())}});let r=we();this.pendingDocumentTargetMapping.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.targetDataForActiveTarget(c);return l&&l.purpose!=="TargetPurposeLimboResolution"?(a=!1,!1):!0}),a&&(r=r.add(s))}),this.pendingDocumentUpdates.forEach((s,o)=>o.setReadTime(e));let i=new Xm(e,t,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=Ai(),this.pendingDocumentUpdatesByTarget=jm(),this.pendingDocumentTargetMapping=jm(),this.pendingTargetResets=new tt(ge),i}addDocumentToTarget(e,t){if(!this.isActiveTarget(e))return;let r=this.targetContainsDocument(e,t.key)?2:0;this.ensureTargetState(e).addDocumentChange(t.key,r),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentUpdatesByTarget=this.pendingDocumentUpdatesByTarget.insert(t.key,this.ensureDocumentUpdateByTarget(t.key).add(e)),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(e))}removeDocumentFromTarget(e,t,r){if(!this.isActiveTarget(e))return;let i=this.ensureTargetState(e);this.targetContainsDocument(e,t)?i.addDocumentChange(t,1):i.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(e)),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).add(e)),r&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,r))}removeTarget(e){this.targetStates.delete(e)}getCurrentDocumentCountForTarget(e){let r=this.ensureTargetState(e).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}recordPendingTargetRequest(e){this.ensureTargetState(e).recordPendingTargetRequest()}ensureTargetState(e){let t=this.targetStates.get(e);return t||(t=new ny,this.targetStates.set(e,t)),t}ensureDocumentTargetMapping(e){let t=this.pendingDocumentTargetMapping.get(e);return t||(t=new Ct(ge),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,t)),t}ensureDocumentUpdateByTarget(e){let t=this.pendingDocumentUpdatesByTarget.get(e);return t||(t=new Ct(ge),this.pendingDocumentUpdatesByTarget=this.pendingDocumentUpdatesByTarget.insert(e,t)),t}isActiveTarget(e){let t=this.targetDataForActiveTarget(e)!==null;return t||$(loe,"Detected inactive target",e),t}targetDataForActiveTarget(e){let t=this.targetStates.get(e);return t&&t.isPending?null:this.metadataProvider.getTargetDataForTarget(e)}resetTarget(e){this.targetStates.set(e,new ny),this.metadataProvider.getRemoteKeysForTarget(e).forEach(r=>{this.removeDocumentFromTarget(e,r,null)})}targetContainsDocument(e,t){return this.metadataProvider.getRemoteKeysForTarget(e).has(t)}};function jm(){return new tt(Z.comparator)}function SU(){return new tt(Z.comparator)}function uoe(n,e,t,r,i){var s,o,a,c,l,u;let d={localCacheCount:n,existenceFilterCount:e.count,databaseId:t.database,projectId:t.projectId},h=e.unchangedNames;return h&&(d.bloomFilter={applied:i===0,hashCount:(s=h?.hashCount)!==null&&s!==void 0?s:0,bitmapLength:(c=(a=(o=h?.bits)===null||o===void 0?void 0:o.bitmap)===null||a===void 0?void 0:a.length)!==null&&c!==void 0?c:0,padding:(u=(l=h?.bits)===null||l===void 0?void 0:l.padding)!==null&&u!==void 0?u:0,mightContain:f=>{var v;return(v=r?.mightContain(f))!==null&&v!==void 0?v:!1}}),d}var doe=(()=>{let n={};return n.asc="ASCENDING",n.desc="DESCENDING",n})(),foe=(()=>{let n={};return n["<"]="LESS_THAN",n["<="]="LESS_THAN_OR_EQUAL",n[">"]="GREATER_THAN",n[">="]="GREATER_THAN_OR_EQUAL",n["=="]="EQUAL",n["!="]="NOT_EQUAL",n["array-contains"]="ARRAY_CONTAINS",n.in="IN",n["not-in"]="NOT_IN",n["array-contains-any"]="ARRAY_CONTAINS_ANY",n})(),hoe=(()=>{let n={};return n.and="AND",n.or="OR",n})();var vD=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function poe(n){let e=n.code===void 0?N.UNKNOWN:Hm(n.code);return new q(e,n.message||"")}function ED(n,e){return n.useProto3Json||Cy(e)?e:{value:e}}function goe(n){let e;return typeof n=="object"?e=n.value:e=n,Cy(e)?null:e}function ry(n,e){if(n.useProto3Json){let r=new Date(e.seconds*1e3).toISOString().replace(/\.\d*/,"").replace("Z",""),i=("000000000"+e.nanoseconds).slice(-9);return`${r}.${i}Z`}else return{seconds:""+e.seconds,nanos:e.nanoseconds}}function moe(n){let e=Ci(n);return new kt(e.seconds,e.nanos)}function FV(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function yoe(n,e){return n.useProto3Json?(Ne(e===void 0||typeof e=="string"),Gt.fromBase64String(e||"")):(Ne(e===void 0||e instanceof Buffer||e instanceof Uint8Array),Gt.fromUint8Array(e||new Uint8Array))}function voe(n,e){return ry(n,e.toTimestamp())}function Qr(n){return Ne(!!n),le.fromTimestamp(moe(n))}function O0(n,e){return wD(n,e).canonicalString()}function wD(n,e){let t=woe(n).child("documents");return e===void 0?t:t.child(e)}function BV(n){let e=Ye.fromString(n);return Ne($V(e)),e}function TD(n,e){return O0(n.databaseId,e.path)}function PI(n,e){let t=BV(e);if(t.get(1)!==n.databaseId.projectId)throw new q(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new q(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Z(VV(t))}function UV(n,e){return O0(n.databaseId,e)}function Eoe(n){let e=BV(n);return e.length===4?Ye.emptyPath():VV(e)}function bD(n){return new Ye(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function woe(n){return new Ye(["projects",n.projectId,"databases",n.database])}function VV(n){return Ne(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function CU(n,e,t){return{name:TD(n,e),fields:t.value.mapValue.fields}}function Toe(n,e){let t;if("targetChange"in e){e.targetChange;let r=boe(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=yoe(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&poe(o);t=new ty(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=PI(n,r.document.name),s=Qr(r.document.updateTime),o=r.document.createTime?Qr(r.document.createTime):le.min(),a=new fr({mapValue:{fields:r.document.fields}}),c=mr.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];t=new Gc(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=PI(n,r.document),s=r.readTime?Qr(r.readTime):le.min(),o=mr.newNoDocument(i,s),a=r.removedTargetIds||[];t=new Gc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=PI(n,r.document),s=r.removedTargetIds||[];t=new Gc([],s,i,null)}else if("filter"in e){e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new pD(i,s),a=r.targetId;t=new ey(a,o)}else return X();return t}function boe(n){return n==="NO_CHANGE"?0:n==="ADD"?1:n==="REMOVE"?2:n==="CURRENT"?3:n==="RESET"?4:X()}function _oe(n){if(!("targetChange"in n))return le.min();let e=n.targetChange;return e.targetIds&&e.targetIds.length||!e.readTime?le.min():Qr(e.readTime)}function Soe(n,e){let t;if(e instanceof Bo)t={update:CU(n,e.key,e.value)};else if(e instanceof Pd)t={delete:TD(n,e.key)};else if(e instanceof Ri)t={update:CU(n,e.key,e.data),updateMask:nae(e.fieldMask)};else if(e instanceof uD)t={verify:TD(n,e.key)};else return X();return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>Aoe(n,r))),e.precondition.isNone||(t.currentDocument=Coe(n,e.precondition)),t}function Coe(n,e){return e.updateTime!==void 0?{updateTime:voe(n,e.updateTime)}:e.exists!==void 0?{exists:e.exists}:X()}function Ioe(n,e){let t=n.updateTime?Qr(n.updateTime):Qr(e);return t.isEqual(le.min())&&(t=Qr(e)),new lD(t,n.transformResults||[])}function Doe(n,e){return n&&n.length>0?(Ne(e!==void 0),n.map(t=>Ioe(t,e))):[]}function Aoe(n,e){let t=e.transform;if(t instanceof Xc)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(t instanceof Lo)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:t.elements}};if(t instanceof Fo)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:t.elements}};if(t instanceof el)return{fieldPath:e.field.canonicalString(),increment:t.operand};throw X()}function Roe(n,e){return{documents:[UV(n,e.path)]}}function Noe(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=UV(n,i);let s=Poe(e.filters);s&&(t.structuredQuery.where=s);let o=Foe(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=ED(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=Uoe(e.startAt)),e.endAt&&(t.structuredQuery.endAt=Voe(e.endAt)),{queryTarget:t,parent:i}}function Moe(n){let e=Eoe(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Ne(r===1);let u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=Loe(t.where));let o=[];t.orderBy&&(o=Boe(t.orderBy));let a=null;t.limit&&(a=goe(t.limit));let c=null;t.startAt&&(c=joe(t.startAt));let l=null;return t.endAt&&(l=qoe(t.endAt)),Dse(e,i,o,s,a,"F",c,l)}function Ooe(n,e){let t=koe(e.purpose);return t==null?null:{"goog-listen-tags":t}}function koe(n){switch(n){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X()}}function xoe(n,e){let t,r=e.target;if(aD(r)?t={documents:Roe(n,r)}:t={query:Noe(n,r).queryTarget},t.targetId=e.targetId,e.resumeToken.approximateByteSize()>0){t.resumeToken=FV(n,e.resumeToken);let i=ED(n,e.expectedCount);i!==null&&(t.expectedCount=i)}else if(e.snapshotVersion.compareTo(le.min())>0){t.readTime=ry(n,e.snapshotVersion.toTimestamp());let i=ED(n,e.expectedCount);i!==null&&(t.expectedCount=i)}return t}function Poe(n){if(n.length!==0)return qV(yr.create(n,"and"))}function Loe(n){let e=jV(n);return e instanceof yr&&vV(e)?e.getFilters():[e]}function jV(n){return n.unaryFilter!==void 0?Xoe(n):n.fieldFilter!==void 0?eae(n):n.compositeFilter!==void 0?tae(n):X()}function Foe(n){if(n.length!==0)return n.map(e=>Qoe(e))}function Boe(n){return n.map(e=>Yoe(e))}function Uoe(n){return{before:n.inclusive,values:n.position}}function Voe(n){return{before:!n.inclusive,values:n.position}}function joe(n){let e=!!n.before,t=n.values||[];return new Yc(t,e)}function qoe(n){let e=!n.before,t=n.values||[];return new Yc(t,e)}function $oe(n){return doe[n]}function zoe(n){switch(n){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}function Hoe(n){return foe[n]}function Goe(n){return hoe[n]}function Woe(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return X();default:return X()}}function Koe(n){switch(n){case"AND":return"and";case"OR":return"or";default:return X()}}function qc(n){return{fieldPath:n.canonicalString()}}function zc(n){return Dn.fromServerFormat(n.fieldPath)}function Qoe(n){return{field:qc(n.field),direction:$oe(n.dir)}}function Yoe(n){return new Zc(zc(n.field),zoe(n.direction))}function qV(n){return n instanceof ft?Joe(n):n instanceof yr?Zoe(n):X()}function Zoe(n){let e=n.getFilters().map(t=>qV(t));return e.length===1?e[0]:{compositeFilter:{op:Goe(n.op),filters:e}}}function Joe(n){if(n.op==="=="){if(mU(n.value))return{unaryFilter:{field:qc(n.field),op:"IS_NAN"}};if(gU(n.value))return{unaryFilter:{field:qc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(mU(n.value))return{unaryFilter:{field:qc(n.field),op:"IS_NOT_NAN"}};if(gU(n.value))return{unaryFilter:{field:qc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qc(n.field),op:Hoe(n.op),value:n.value}}}function Xoe(n){switch(n.unaryFilter.op){case"IS_NAN":let e=zc(n.unaryFilter.field);return ft.create(e,"==",{doubleValue:NaN});case"IS_NULL":let t=zc(n.unaryFilter.field);return ft.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let r=zc(n.unaryFilter.field);return ft.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let i=zc(n.unaryFilter.field);return ft.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return X();default:return X()}}function eae(n){return ft.create(zc(n.fieldFilter.field),Woe(n.fieldFilter.op),n.fieldFilter.value)}function tae(n){return yr.create(n.compositeFilter.filters.map(e=>jV(e)),Koe(n.compositeFilter.op))}function nae(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function $V(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Fd=class n{constructor(e,t,r,i,s=le.min(),o=le.min(),a=Gt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var _D=class{constructor(e){this.remoteSerializer=e}};function rae(n){let e=Moe({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?cD(e,e.limit,"L"):e}function iae(n){return{name:n.name,query:rae(n.bundledQuery),readTime:Qr(n.readTime)}}function sae(n){return{id:n.id,version:n.version,createTime:Qr(n.createTime)}}var oae=5,aae=10,cae=13,LI=15,lae=20,uae=25,dae=30,fae=37,hae=45,pae=50,gae=53,mae=55,yae=60,vae=2,iy=class{constructor(){}writeIndexValue(e,t){this.writeIndexValueAux(e,t),t.writeInfinity()}writeIndexValueAux(e,t){if("nullValue"in e)this.writeValueTypeLabel(t,oae);else if("booleanValue"in e)this.writeValueTypeLabel(t,aae),t.writeNumber(e.booleanValue?1:0);else if("integerValue"in e)this.writeValueTypeLabel(t,LI),t.writeNumber(We(e.integerValue));else if("doubleValue"in e){let r=We(e.doubleValue);isNaN(r)?this.writeValueTypeLabel(t,cae):(this.writeValueTypeLabel(t,LI),Md(r)?t.writeNumber(0):t.writeNumber(r))}else if("timestampValue"in e){let r=e.timestampValue;this.writeValueTypeLabel(t,lae),typeof r=="string"&&(r=Ci(r)),t.writeString(`${r.seconds||""}`),t.writeNumber(r.nanos||0)}else if("stringValue"in e)this.writeIndexString(e.stringValue,t),this.writeTruncationMarker(t);else if("bytesValue"in e)this.writeValueTypeLabel(t,dae),t.writeBytes(Ii(e.bytesValue)),this.writeTruncationMarker(t);else if("referenceValue"in e)this.writeIndexEntityRef(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.writeValueTypeLabel(t,hae),t.writeNumber(r.latitude||0),t.writeNumber(r.longitude||0)}else"mapValue"in e?pV(e)?this.writeValueTypeLabel(t,Number.MAX_SAFE_INTEGER):hV(e)?this.writeIndexVector(e.mapValue,t):(this.writeIndexMap(e.mapValue,t),this.writeTruncationMarker(t)):"arrayValue"in e?(this.writeIndexArray(e.arrayValue,t),this.writeTruncationMarker(t)):X()}writeIndexString(e,t){this.writeValueTypeLabel(t,uae),this.writeUnlabeledIndexString(e,t)}writeUnlabeledIndexString(e,t){t.writeString(e)}writeIndexMap(e,t){let r=e.fields||{};this.writeValueTypeLabel(t,mae);for(let i of Object.keys(r))this.writeIndexString(i,t),this.writeIndexValueAux(r[i],t)}writeIndexVector(e,t){var r,i;let s=e.fields||{};this.writeValueTypeLabel(t,gae);let o=Wc,a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.writeValueTypeLabel(t,LI),t.writeNumber(We(a)),this.writeIndexString(o,t),this.writeIndexValueAux(s[o],t)}writeIndexArray(e,t){let r=e.values||[];this.writeValueTypeLabel(t,pae);for(let i of r)this.writeIndexValueAux(i,t)}writeIndexEntityRef(e,t){this.writeValueTypeLabel(t,fae),Z.fromName(e).path.forEach(i=>{this.writeValueTypeLabel(t,yae),this.writeUnlabeledIndexString(i,t)})}writeValueTypeLabel(e,t){e.writeNumber(t)}writeTruncationMarker(e){e.writeNumber(vae)}};iy.INSTANCE=new iy;var SD=class{constructor(){this.collectionParentIndex=new CD}addToCollectionParentIndex(e,t){return this.collectionParentIndex.add(t),O.resolve()}getCollectionParents(e,t){return O.resolve(this.collectionParentIndex.getEntries(t))}addFieldIndex(e,t){return O.resolve()}deleteFieldIndex(e,t){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,t){return O.resolve()}getDocumentsMatchingTarget(e,t){return O.resolve(null)}getIndexType(e,t){return O.resolve(0)}getFieldIndexes(e,t){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,t){return O.resolve(xo.min())}getMinOffsetFromCollectionGroup(e,t){return O.resolve(xo.min())}updateCollectionGroup(e,t,r){return O.resolve()}updateIndexEntries(e,t){return O.resolve()}},CD=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ct(Ye.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ct(Ye.comparator)).toArray()}};var oCe=new Uint8Array(0);var FI=2,Bd=class n{constructor(e){this.lastId=e}next(){return this.lastId+=FI,this.lastId}static forTargetCache(){return new n(2-FI)}static forSyncEngine(){return new n(1-FI)}};var IU={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},My=-1,zV=40*1024*1024,$n=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};$n.DEFAULT_COLLECTION_PERCENTILE=10;$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3;$n.DEFAULT=new $n(zV,$n.DEFAULT_COLLECTION_PERCENTILE,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT);$n.DISABLED=new $n(My,0,0);var DU="LruGarbageCollector",AU=1*1024*1024,Eae=1*60*1e3,wae=5*60*1e3;function RU([n,e],[t,r]){let i=ge(n,t);return i===0?ge(e,r):i}var ID=class{constructor(e){this.maxElements=e,this.buffer=new Ct(RU),this.previousIndex=0}nextIndex(){return++this.previousIndex}addElement(e){let t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();RU(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},DD=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.gcTask=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==My&&this.scheduleGC(Eae)}stop(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)}get started(){return this.gcTask!==null}scheduleGC(e){$(DU,`Garbage collection scheduled in ${e}ms`),this.gcTask=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>T(this,null,function*(){this.gcTask=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){al(t)?$(DU,"Ignoring IndexedDB error during garbage collection: ",t):yield ol(t)}yield this.scheduleGC(wae)}))}},AD=class{constructor(e,t){this.delegate=e,this.params=t}calculateTargetCount(e,t){return this.delegate.getSequenceNumberCount(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return O.resolve(T0.INVALID);let r=new ID(t);return this.delegate.forEachTarget(e,i=>r.addElement(i.sequenceNumber)).next(()=>this.delegate.forEachOrphanedDocumentSequenceNumber(e,i=>r.addElement(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.delegate.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.delegate.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===My?($("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(IU)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),IU):this.runGarbageCollection(e,t))}getCacheSize(e){return this.delegate.getCacheSize(e)}runGarbageCollection(e,t){let r,i,s,o,a,c,l,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?($("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,t))).next(d=>(s=d,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>{if(l=Date.now(),Vc()<=ve.DEBUG){let h=`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in ${a-o}ms
	Removed ${s} targets in ${c-a}ms
	Removed ${d} documents in ${l-c}ms
Total Duration: ${l-u}ms`;$("LruGarbageCollector",h)}return O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})})}};function Tae(n,e){return new AD(n,e)}var RD=class{constructor(){this.changes=new Di(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?O.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var ND=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var MD=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Ad(r.mutation,i,Wr.empty(),kt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,we()).next(()=>r))}getLocalViewOfDocuments(e,t,r=we()){let i=Ro();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Cd();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Ro();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,we()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Ai(),o=xd(),a=Use();return t.forEach((c,l)=>{let u=r.get(l.key);i.has(l.key)&&(u===void 0||u.mutation instanceof Ri)?s=s.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),Ad(u.mutation,l,u.mutation.getFieldMask(),kt.now())):o.set(l.key,Wr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),t.forEach((l,u)=>{var d;return a.set(l,new ND(u,(d=o.get(l))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,t){let r=xd(),i=new tt((o,a)=>o-a),s=we();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let u=r.get(c)||Wr.empty();u=a.applyToLocalView(l,u),r.set(c,u);let d=(i.get(a.batchId)||we()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,d=DV();u.forEach(h=>{if(!s.has(h)){let f=kV(t.get(h),r.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,d))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Nse(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):bV(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):O.resolve(Ro()),a=Rd,c=s;return o.next(l=>O.forEach(l,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?O.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{c=c.insert(u,h)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,we())).next(u=>({batchId:a,changes:IV(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Z(t)).next(r=>{let i=Cd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Cd();return this.indexManager.getCollectionParents(e,s).next(a=>O.forEach(a,c=>{let l=Ase(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(u=>{u.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,l)=>{let u=l.getKey();o.get(u)===null&&(o=o.insert(u,mr.newInvalidDocument(u)))});let a=Cd();return o.forEach((c,l)=>{let u=s.get(c);u!==void 0&&Ad(u.mutation,l,Wr.empty(),kt.now()),Ry(t,l)&&(a=a.insert(c,l))}),a})}};var OD=class{constructor(e){this.serializer=e,this.bundles=new Map,this.namedQueries=new Map}getBundleMetadata(e,t){return O.resolve(this.bundles.get(t))}saveBundleMetadata(e,t){return this.bundles.set(t.id,sae(t)),O.resolve()}getNamedQuery(e,t){return O.resolve(this.namedQueries.get(t))}saveNamedQuery(e,t){return this.namedQueries.set(t.name,iae(t)),O.resolve()}};var kD=class{constructor(){this.overlays=new tt(Z.comparator),this.overlayByBatchId=new Map}getOverlay(e,t){return O.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Ro();return O.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.saveOverlay(e,t,s)}),O.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.overlayByBatchId.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.overlayByBatchId.delete(r)),O.resolve()}getOverlaysForCollection(e,t,r){let i=Ro(),s=t.length+1,o=new Z(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let l=a.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return O.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new tt((l,u)=>l-u),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let h=s.get(u.largestBatchId);h===null&&(h=Ro(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}let a=Ro(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=i)););return O.resolve(a)}saveOverlay(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.overlayByBatchId.get(i.largestBatchId).delete(r.key);this.overlayByBatchId.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new hD(t,r));let s=this.overlayByBatchId.get(t);s===void 0&&(s=we(),this.overlayByBatchId.set(t,s)),this.overlayByBatchId.set(t,s.add(r.key))}};var xD=class{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,O.resolve()}};var Ud=class{constructor(){this.refsByKey=new Ct(dt.compareByKey),this.refsByTarget=new Ct(dt.compareByTargetId)}isEmpty(){return this.refsByKey.isEmpty()}addReference(e,t){let r=new dt(e,t);this.refsByKey=this.refsByKey.add(r),this.refsByTarget=this.refsByTarget.add(r)}addReferences(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.removeRef(new dt(e,t))}removeReferences(e,t){e.forEach(r=>this.removeReference(r,t))}removeReferencesForId(e){let t=new Z(new Ye([])),r=new dt(t,e),i=new dt(t,e+1),s=[];return this.refsByTarget.forEachInRange([r,i],o=>{this.removeRef(o),s.push(o.key)}),s}removeAllReferences(){this.refsByKey.forEach(e=>this.removeRef(e))}removeRef(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)}referencesForId(e){let t=new Z(new Ye([])),r=new dt(t,e),i=new dt(t,e+1),s=we();return this.refsByTarget.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new dt(e,0),r=this.refsByKey.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},dt=class{constructor(e,t){this.key=e,this.targetOrBatchId=t}static compareByKey(e,t){return Z.comparator(e.key,t.key)||ge(e.targetOrBatchId,t.targetOrBatchId)}static compareByTargetId(e,t){return ge(e.targetOrBatchId,t.targetOrBatchId)||Z.comparator(e.key,t.key)}};var PD=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.batchesByDocumentKey=new Ct(dt.compareByKey)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.nextBatchId;this.nextBatchId++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new dD(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.batchesByDocumentKey=this.batchesByDocumentKey.add(new dt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,t){return O.resolve(this.findMutationBatch(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.indexOfBatchId(r),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?_0:this.nextBatchId-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new dt(t,0),i=new dt(t,Number.POSITIVE_INFINITY),s=[];return this.batchesByDocumentKey.forEachInRange([r,i],o=>{let a=this.findMutationBatch(o.targetOrBatchId);s.push(a)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ct(ge);return t.forEach(i=>{let s=new dt(i,0),o=new dt(i,Number.POSITIVE_INFINITY);this.batchesByDocumentKey.forEachInRange([s,o],a=>{r=r.add(a.targetOrBatchId)})}),O.resolve(this.findMutationBatches(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;Z.isDocumentKey(s)||(s=s.child(""));let o=new dt(new Z(s),0),a=new Ct(ge);return this.batchesByDocumentKey.forEachWhile(c=>{let l=c.key.path;return r.isPrefixOf(l)?(l.length===i&&(a=a.add(c.targetOrBatchId)),!0):!1},o),O.resolve(this.findMutationBatches(a))}findMutationBatches(e){let t=[];return e.forEach(r=>{let i=this.findMutationBatch(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){let r=this.indexOfExistingBatchId(t.batchId,"removed");Ne(r===0),this.mutationQueue.shift();let i=this.batchesByDocumentKey;return O.forEach(t.mutations,s=>{let o=new dt(s.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.batchesByDocumentKey=i})}removeCachedMutationKeys(e){}containsKey(e,t){let r=new dt(t,0),i=this.batchesByDocumentKey.firstAfterOrEqual(r);return O.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}indexOfExistingBatchId(e,t){return this.indexOfBatchId(e)}indexOfBatchId(e){if(this.mutationQueue.length===0)return 0;let t=this.mutationQueue[0].batchId;return e-t}findMutationBatch(e){let t=this.indexOfBatchId(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var bae="-9223372036854775808";function _ae(){return new tt(Z.comparator)}var LD=class{constructor(e){this.sizer=e,this.docs=_ae(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.sizer(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return O.resolve(r?r.document.mutableCopy():mr.newInvalidDocument(t))}getEntries(e,t){let r=Ai();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():mr.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Ai(),o=t.path,a=new Z(o.child("__id"+bae+"__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||yie(mie(u),r)<=0||!i.has(u.key)&&!Ry(t,u)||(s=s.insert(u.key,u.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,t,r,i){X()}forEachDocumentKey(e,t){return O.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new FD(this)}getSize(e){return O.resolve(this.size)}};function Sae(n){return new LD(n)}var FD=class extends RD{constructor(e){super(),this.documentCache=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.documentCache.addEntry(e,i)):this.documentCache.removeEntry(r)}),O.waitFor(t)}getFromCache(e,t){return this.documentCache.getEntry(e,t)}getAllFromCache(e,t){return this.documentCache.getEntries(e,t)}};var BD=class{constructor(e){this.persistence=e,this.targets=new Di(t=>A0(t),R0),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new Ud,this.targetCount=0,this.targetIdGenerator=Bd.forTargetCache()}forEachTarget(e,t){return this.targets.forEach((r,i)=>t(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.highestSequenceNumber)}allocateTargetId(e){return this.highestTargetId=this.targetIdGenerator.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),O.resolve()}saveTargetData(e){this.targets.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.targetIdGenerator=new Bd(t),this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)}addTargetData(e,t){return this.saveTargetData(t),this.targetCount+=1,O.resolve()}updateTargetData(e,t){return this.saveTargetData(t),O.resolve()}removeTargetData(e,t){return this.targets.delete(t.target),this.references.removeReferencesForId(t.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.targets.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.targets.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,t){let r=this.targets.get(t)||null;return O.resolve(r)}addMatchingKeys(e,t,r){return this.references.addReferences(t,r),O.resolve()}removeMatchingKeys(e,t,r){this.references.removeReferences(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.references.removeReferencesForId(t),O.resolve()}getMatchingKeysForTargetId(e,t){let r=this.references.referencesForId(t);return O.resolve(r)}containsKey(e,t){return O.resolve(this.references.containsKey(t))}};var Cae="MemoryPersistence",sy=class{constructor(e,t){this.mutationQueues={},this.overlays={},this.listenSequence=new T0(0),this._started=!1,this._started=!0,this.globalsCache=new xD,this.referenceDelegate=e(this),this.targetCache=new BD(this);let r=i=>this.referenceDelegate.documentSize(i);this.indexManager=new SD,this.remoteDocumentCache=Sae(r),this.serializer=new _D(t),this.bundleCache=new OD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this._started=!1,Promise.resolve()}get started(){return this._started}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new kD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.mutationQueues[e.toKey()];return r||(r=new PD(t,this.referenceDelegate),this.mutationQueues[e.toKey()]=r),r}getGlobalsCache(){return this.globalsCache}getTargetCache(){return this.targetCache}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.bundleCache}runTransaction(e,t,r){$(Cae,"Starting transaction:",e);let i=new UD(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),r(i).next(s=>this.referenceDelegate.onTransactionCommitted(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}mutationQueuesContainKey(e,t){return O.or(Object.values(this.mutationQueues).map(r=>()=>r.containsKey(e,t)))}},UD=class extends WI{constructor(e){super(),this.currentSequenceNumber=e}},VD=class n{constructor(e){this.persistence=e,this.localViewReferences=new Ud,this._orphanedDocuments=null}static factory(e){return new n(e)}get orphanedDocuments(){if(this._orphanedDocuments)return this._orphanedDocuments;throw X()}addReference(e,t,r){return this.localViewReferences.addReference(r,t),this.orphanedDocuments.delete(r.toString()),O.resolve()}removeReference(e,t,r){return this.localViewReferences.removeReference(r,t),this.orphanedDocuments.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,t){return this.orphanedDocuments.add(t.toString()),O.resolve()}removeTarget(e,t){this.localViewReferences.removeReferencesForId(t.targetId).forEach(s=>this.orphanedDocuments.add(s.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(o=>this.orphanedDocuments.add(o.toString()))}).next(()=>i.removeTargetData(e,t))}onTransactionStarted(){this._orphanedDocuments=new Set}onTransactionCommitted(e){let r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.orphanedDocuments,i=>{let s=Z.fromPath(i);return this.isReferenced(e,s).next(o=>{o||r.removeEntry(s,le.min())})}).next(()=>(this._orphanedDocuments=null,r.apply(e)))}updateLimboDocument(e,t){return this.isReferenced(e,t).next(r=>{r?this.orphanedDocuments.delete(t.toString()):this.orphanedDocuments.add(t.toString())})}documentSize(e){return 0}isReferenced(e,t){return O.or([()=>O.resolve(this.localViewReferences.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.mutationQueuesContainKey(e,t)])}},oy=class n{constructor(e,t){this.persistence=e,this.orphanedSequenceNumbers=new Di(r=>_ie(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Tae(this,t)}static factory(e,t){return new n(e,t)}onTransactionStarted(){}onTransactionCommitted(e){return O.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}getSequenceNumberCount(e){let t=this.orphanedDocumentCount(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(s=>i+s))}orphanedDocumentCount(e){let t=0;return this.forEachOrphanedDocumentSequenceNumber(e,r=>{t++}).next(()=>t)}forEachOrphanedDocumentSequenceNumber(e,t){return O.forEach(this.orphanedSequenceNumbers,(r,i)=>this.isPinned(e,r,i).next(s=>s?O.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.forEachDocumentKey(e,a=>this.isPinned(e,a,t).next(c=>{c||(r++,s.removeEntry(a,le.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),O.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.orphanedSequenceNumbers.set(r,e.currentSequenceNumber),O.resolve()}removeReference(e,t,r){return this.orphanedSequenceNumbers.set(r,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),O.resolve()}documentSize(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Iy(e.data.value)),t}isPinned(e,t,r){return O.or([()=>this.persistence.mutationQueuesContainKey(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.orphanedSequenceNumbers.get(t);return O.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var aCe=30*60*1e3;function Iae(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(n[t]!==e[t])return!1;return!0}var k0="LocalStore",Dae=5*60*1e6,jD=class{constructor(e,t,r,i){this.persistence=e,this.queryEngine=t,this.serializer=i,this.targetDataByTarget=new tt(ge),this.targetIdByTarget=new Di(s=>A0(s),R0),this.collectionGroupReadTime=new Map,this.remoteDocuments=e.getRemoteDocumentCache(),this.targetCache=e.getTargetCache(),this.bundleCache=e.getBundleCache(),this.initializeUserComponents(r)}initializeUserComponents(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new MD(this.remoteDocuments,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.remoteDocuments.setIndexManager(this.indexManager),this.queryEngine.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.targetDataByTarget))}};function Aae(n,e,t,r){return new jD(n,e,t,r)}function HV(n,e){return T(this,null,function*(){let t=oe(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next(o=>(s=o,t.initializeUserComponents(e),t.mutationQueue.getAllMutationBatches(i))).next(o=>{let a=[],c=[],l=we();for(let u of s){a.push(u.batchId);for(let d of u.mutations)l=l.add(d.key)}for(let u of o){c.push(u.batchId);for(let d of u.mutations)l=l.add(d.key)}return t.localDocuments.getDocuments(i,l).next(u=>({affectedDocuments:u,removedBatchIds:a,addedBatchIds:c}))})})})}function Rae(n,e){let t=oe(n),r=kt.now(),i=e.reduce((a,c)=>a.add(c.key),we()),s,o;return t.persistence.runTransaction("Locally write mutations","readwrite",a=>{let c=Ai(),l=we();return t.remoteDocuments.getEntries(a,i).next(u=>{c=u,c.forEach((d,h)=>{h.isValidDocument()||(l=l.add(d))})}).next(()=>t.localDocuments.getOverlayedDocuments(a,c)).next(u=>{s=u;let d=[];for(let h of e){let f=Xse(h,s.get(h.key).overlayedDocument);f!=null&&d.push(new Ri(h.key,f,gV(f.value.mapValue),Os.exists(!0)))}return t.mutationQueue.addMutationBatch(a,r,d,e)}).next(u=>{o=u;let d=u.applyToLocalDocumentSet(s,l);return t.documentOverlayCache.saveOverlays(a,u.batchId,d)})}).then(()=>({batchId:o.batchId,changes:IV(s)}))}function Nae(n,e){let t=oe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.remoteDocuments.newChangeBuffer({trackRemovals:!0});return Vae(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,Mae(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Mae(n){let e=we();for(let t=0;t<n.mutationResults.length;++t)n.mutationResults[t].transformResults.length>0&&(e=e.add(n.batch.mutations[t].key));return e}function Oae(n,e){let t=oe(n);return t.persistence.runTransaction("Reject batch","readwrite-primary",r=>{let i;return t.mutationQueue.lookupMutationBatch(r,e).next(s=>(Ne(s!==null),i=s.keys(),t.mutationQueue.removeMutationBatch(r,s))).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,i)).next(()=>t.localDocuments.getDocuments(r,i))})}function GV(n){let e=oe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.targetCache.getLastRemoteSnapshotVersion(t))}function kae(n,e){let t=oe(n),r=e.snapshotVersion,i=t.targetDataByTarget;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.remoteDocuments.newChangeBuffer({trackRemovals:!0});i=t.targetDataByTarget;let a=[];e.targetChanges.forEach((u,d)=>{let h=i.get(d);if(!h)return;a.push(t.targetCache.removeMatchingKeys(s,u.removedDocuments,d).next(()=>t.targetCache.addMatchingKeys(s,u.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(Gt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,r)),i=i.insert(d,f),Pae(h,f,u)&&a.push(t.targetCache.updateTargetData(s,f))});let c=Ai(),l=we();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(xae(s,o,e.documentUpdates).next(u=>{c=u.changedDocuments,l=u.existenceChangedKeys})),!r.isEqual(le.min())){let u=t.targetCache.getLastRemoteSnapshotVersion(s).next(d=>t.targetCache.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return O.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.targetDataByTarget=i,s))}function xae(n,e,t){let r=we(),i=we();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Ai();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(le.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):$(k0,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{changedDocuments:o,existenceChangedKeys:i}})}function Pae(n,e,t){return n.resumeToken.approximateByteSize()===0||e.snapshotVersion.toMicroseconds()-n.snapshotVersion.toMicroseconds()>=Dae?!0:t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size>0}function Lae(n,e){return T(this,null,function*(){let t=oe(n);try{yield t.persistence.runTransaction("notifyLocalViewChanges","readwrite",r=>O.forEach(e,i=>O.forEach(i.addedKeys,s=>t.persistence.referenceDelegate.addReference(r,i.targetId,s)).next(()=>O.forEach(i.removedKeys,s=>t.persistence.referenceDelegate.removeReference(r,i.targetId,s)))))}catch(r){if(al(r))$(k0,"Failed to update sequence numbers: "+r);else throw r}for(let r of e){let i=r.targetId;if(!r.fromCache){let s=t.targetDataByTarget.get(i),o=s.snapshotVersion,a=s.withLastLimboFreeSnapshotVersion(o);t.targetDataByTarget=t.targetDataByTarget.insert(i,a)}}})}function Fae(n,e){let t=oe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=_0),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Bae(n,e){let t=oe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.targetCache.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):t.targetCache.allocateTargetId(r).next(o=>(i=new Fd(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.targetCache.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.targetDataByTarget.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.targetDataByTarget=t.targetDataByTarget.insert(r.targetId,r),t.targetIdByTarget.set(e,r.targetId)),r})}function Uae(n,e,t){let r=oe(n),i=r.targetIdByTarget.get(t);return i!==void 0?O.resolve(r.targetDataByTarget.get(i)):r.targetCache.getTargetData(e,t)}function qD(n,e,t){return T(this,null,function*(){let r=oe(n),i=r.targetDataByTarget.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(al(o))$(k0,`Failed to update sequence numbers for target ${e}: ${o}`);else throw o}r.targetDataByTarget=r.targetDataByTarget.remove(e),r.targetIdByTarget.delete(i.target)})}function WV(n,e,t){let r=oe(n),i=le.min(),s=we();return r.persistence.runTransaction("Execute query","readwrite",o=>Uae(r,o,Kr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.targetCache.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.queryEngine.getDocumentsMatchingQuery(o,e,t?i:le.min(),t?s:we())).next(a=>(jae(r,Lse(e),a),{documents:a,remoteKeys:s})))}function Vae(n,e,t,r){let i=t.batch,s=i.keys(),o=O.resolve();return s.forEach(a=>{o=o.next(()=>r.getEntry(e,a)).next(c=>{let l=t.docVersions.get(a);Ne(l!==null),c.version.compareTo(l)<0&&(i.applyToRemoteDocument(c,t),c.isValidDocument()&&(c.setReadTime(t.commitVersion),r.addEntry(c)))})}),o.next(()=>n.mutationQueue.removeMutationBatch(e,i))}function jae(n,e,t){let r=n.collectionGroupReadTime.get(e)||le.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.collectionGroupReadTime.set(e,r)}var $D=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var qae=100;function $ae(){return RP()?8:Eie(bn())>0?6:4}var zD=class{constructor(){this.initialized=!1,this.indexAutoCreationEnabled=!1,this.indexAutoCreationMinCollectionSize=qae,this.relativeIndexReadCostPerDocument=$ae()}initialize(e,t){this.localDocumentsView=e,this.indexManager=t,this.initialized=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.performQueryUsingIndex(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.performQueryUsingRemoteKeys(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new $D;return this.executeFullCollectionScan(e,t,o).next(a=>{if(s.result=a,this.indexAutoCreationEnabled)return this.createCacheIndexes(e,t,o,a.size)})}).next(()=>s.result)}createCacheIndexes(e,t,r,i){return r.documentReadCount<this.indexAutoCreationMinCollectionSize?(Vc()<=ve.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",jc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.indexAutoCreationMinCollectionSize,"documents"),O.resolve()):(Vc()<=ve.DEBUG&&$("QueryEngine","Query:",jc(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.relativeIndexReadCostPerDocument*i?(Vc()<=ve.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",jc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kr(t))):O.resolve())}performQueryUsingIndex(e,t){if(EU(t))return O.resolve(null);let r=Kr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=cD(t,null,"F"),r=Kr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=we(...s);return this.localDocumentsView.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.applyQuery(t,a);return this.needsRefill(t,l,o,c.readTime)?this.performQueryUsingIndex(e,cD(t,null,"F")):this.appendRemainingResults(e,l,t,c)}))})))}performQueryUsingRemoteKeys(e,t,r,i){return EU(t)||i.isEqual(le.min())?O.resolve(null):this.localDocumentsView.getDocuments(e,r).next(s=>{let o=this.applyQuery(t,s);return this.needsRefill(t,o,r,i)?O.resolve(null):(Vc()<=ve.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),jc(t)),this.appendRemainingResults(e,o,t,gie(i,Rd)).next(a=>a))})}applyQuery(e,t){let r=new Ct(SV(e));return t.forEach((i,s)=>{Ry(e,s)&&(r=r.add(s))}),r}needsRefill(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return s?s.hasPendingWrites||s.version.compareTo(i)>0:!1}executeFullCollectionScan(e,t,r){return Vc()<=ve.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",jc(t)),this.localDocumentsView.getDocumentsMatchingQuery(e,t,xo.min(),r)}appendRemainingResults(e,t,r,i){return this.localDocumentsView.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var ay=class{constructor(){this.activeTargetIds=zse()}addQueryTarget(e){this.activeTargetIds=this.activeTargetIds.add(e)}removeQueryTarget(e){this.activeTargetIds=this.activeTargetIds.delete(e)}toWebStorageJSON(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var HD=class{constructor(){this.localState=new ay,this.queryState={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.localState.addQueryTarget(e),this.queryState[e]||"not-current"}updateQueryState(e,t,r){this.queryState[e]=t}removeLocalQueryTarget(e){this.localState.removeQueryTarget(e)}isLocalQueryTarget(e){return this.localState.activeTargetIds.has(e)}clearQueryState(e){delete this.queryState[e]}getAllActiveQueryTargets(){return this.localState.activeTargetIds}isActiveQueryTarget(e){return this.localState.activeTargetIds.has(e)}start(){return this.localState=new ay,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var GD=class{addCallback(e){}shutdown(){}};var WD=class{constructor(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}onConnected(e){this.wrappedOnConnected=e}onOpen(e){this.wrappedOnOpen=e}onClose(e){this.wrappedOnClose=e}onMessage(e){this.wrappedOnMessage=e}close(){this.closeFn()}send(e){this.sendFn(e)}callOnConnected(){this.wrappedOnConnected()}callOnOpen(){this.wrappedOnOpen()}callOnClose(e){this.wrappedOnClose(e)}callOnMessage(e){this.wrappedOnMessage(e)}};var qm=null;function zae(){return 268435456+Math.round(2147483648*Math.random())}function BI(){return qm===null?qm=zae():qm++,"0x"+qm.toString(16)}function Hae(n){return new Promise((e,t)=>{n((r,i)=>{r?t(r):e(i)})})}var Gae="1.9.15",tn="GrpcConnection",Wae=`gl-node/${process.versions.node} fire/${sl} grpc/${Gae}`;function UI(n,e,t,r){Ne(e===null||e.type==="OAuth");let i=new Mo.Metadata;return e&&e.headers.forEach((s,o)=>i.set(o,s)),t&&t.headers.forEach((s,o)=>i.set(o,s)),r&&i.set("X-Firebase-GMPID",r),i.set("X-Goog-Api-Client",Wae),i.set("Google-Cloud-Resource-Prefix",n),i.set("x-goog-request-params",n),i}var KD=class{get shouldResourcePathBeIncludedInRequest(){return!0}constructor(e,t){this.databaseInfo=t,this.cachedStub=null,this.firestore=e.google.firestore.v1,this.databasePath=`projects/${t.databaseId.projectId}/databases/${t.databaseId.database}`}ensureActiveStub(){if(!this.cachedStub){$(tn,"Creating Firestore stub.");let e=this.databaseInfo.ssl?Mo.credentials.createSsl():Mo.credentials.createInsecure();this.cachedStub=new this.firestore.Firestore(this.databaseInfo.host,e)}return this.cachedStub}invokeRPC(e,t,r,i,s){let o=BI(),a=this.ensureActiveStub(),c=UI(this.databasePath,i,s,this.databaseInfo.appId),l=Object.assign({database:this.databasePath},r);return Hae(u=>($(tn,`RPC '${e}' ${o} invoked with request:`,r),a[e](l,c,(d,h)=>{d?($(tn,`RPC '${e}' ${o} failed with error:`,d),u(new q(Hm(d.code),d.message))):($(tn,`RPC '${e}' ${o} completed with response:`,h),u(void 0,h))})))}invokeStreamingRPC(e,t,r,i,s,o){let a=BI(),c=[],l=new zn;$(tn,`RPC '${e}' ${a} invoked (streaming) with request:`,r);let u=this.ensureActiveStub(),d=UI(this.databasePath,i,s,this.databaseInfo.appId),h=Object.assign(Object.assign({},r),{database:this.databasePath}),f=u[e](h,d),v=!1;return f.on("data",w=>{$(tn,`RPC ${e} ${a} received result:`,w),c.push(w),o!==void 0&&c.length===o&&(v=!0,l.resolve(c))}),f.on("end",()=>{$(tn,`RPC '${e}' ${a} completed.`),v||(v=!0,l.resolve(c))}),f.on("error",w=>{$(tn,`RPC '${e}' ${a} failed with error:`,w);let S=Hm(w.code);l.reject(new q(S,w.message))}),l.promise}openStream(e,t,r){let i=BI(),s=this.ensureActiveStub(),o=UI(this.databasePath,t,r,this.databaseInfo.appId),a=s[e](o),c=!1,l=h=>{c||(c=!0,u.callOnClose(h),a.end())},u=new WD({sendFn:h=>{if(c)$(tn,`RPC '${e}' stream ${i} not sending because gRPC stream is closed:`,h);else{$(tn,`RPC '${e}' stream ${i} sending:`,h);try{a.write(h)}catch(f){throw gr("Failure sending:",h),gr("Error:",f),f}}},closeFn:()=>{$(tn,`RPC '${e}' stream ${i} closed locally via close().`),l()}}),d=!1;return a.on("data",h=>{c||($(tn,`RPC '${e}' stream ${i} received:`,h),d||(u.callOnConnected(),d=!0),u.callOnMessage(h))}),a.on("end",()=>{$(tn,`RPC '${e}' stream ${i} ended.`),l()}),a.on("error",h=>{if(!c){Hc(tn,`RPC '${e}' stream ${i} error. Code:`,h.code,"Message:",h.message);let f=Hm(h.code);l(new q(f,h.message))}}),$(tn,`Opening RPC '${e}' stream ${i} to ${this.databaseInfo.host}`),setTimeout(()=>{u.callOnOpen()},0),u}terminate(){this.cachedStub&&(this.cachedStub.close(),this.cachedStub=void 0)}},KV={google:{nested:{protobuf:{options:{csharp_namespace:"Google.Protobuf.WellKnownTypes",go_package:"github.com/golang/protobuf/ptypes/wrappers",java_package:"com.google.protobuf",java_outer_classname:"WrappersProto",java_multiple_files:!0,objc_class_prefix:"GPB",cc_enable_arenas:!0,optimize_for:"SPEED"},nested:{Timestamp:{fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}},FileDescriptorSet:{fields:{file:{rule:"repeated",type:"FileDescriptorProto",id:1}}},FileDescriptorProto:{fields:{name:{type:"string",id:1},package:{type:"string",id:2},dependency:{rule:"repeated",type:"string",id:3},publicDependency:{rule:"repeated",type:"int32",id:10,options:{packed:!1}},weakDependency:{rule:"repeated",type:"int32",id:11,options:{packed:!1}},messageType:{rule:"repeated",type:"DescriptorProto",id:4},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:5},service:{rule:"repeated",type:"ServiceDescriptorProto",id:6},extension:{rule:"repeated",type:"FieldDescriptorProto",id:7},options:{type:"FileOptions",id:8},sourceCodeInfo:{type:"SourceCodeInfo",id:9},syntax:{type:"string",id:12}}},DescriptorProto:{fields:{name:{type:"string",id:1},field:{rule:"repeated",type:"FieldDescriptorProto",id:2},extension:{rule:"repeated",type:"FieldDescriptorProto",id:6},nestedType:{rule:"repeated",type:"DescriptorProto",id:3},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:4},extensionRange:{rule:"repeated",type:"ExtensionRange",id:5},oneofDecl:{rule:"repeated",type:"OneofDescriptorProto",id:8},options:{type:"MessageOptions",id:7},reservedRange:{rule:"repeated",type:"ReservedRange",id:9},reservedName:{rule:"repeated",type:"string",id:10}},nested:{ExtensionRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}},ReservedRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}}}},FieldDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:3},label:{type:"Label",id:4},type:{type:"Type",id:5},typeName:{type:"string",id:6},extendee:{type:"string",id:2},defaultValue:{type:"string",id:7},oneofIndex:{type:"int32",id:9},jsonName:{type:"string",id:10},options:{type:"FieldOptions",id:8}},nested:{Type:{values:{TYPE_DOUBLE:1,TYPE_FLOAT:2,TYPE_INT64:3,TYPE_UINT64:4,TYPE_INT32:5,TYPE_FIXED64:6,TYPE_FIXED32:7,TYPE_BOOL:8,TYPE_STRING:9,TYPE_GROUP:10,TYPE_MESSAGE:11,TYPE_BYTES:12,TYPE_UINT32:13,TYPE_ENUM:14,TYPE_SFIXED32:15,TYPE_SFIXED64:16,TYPE_SINT32:17,TYPE_SINT64:18}},Label:{values:{LABEL_OPTIONAL:1,LABEL_REQUIRED:2,LABEL_REPEATED:3}}}},OneofDescriptorProto:{fields:{name:{type:"string",id:1},options:{type:"OneofOptions",id:2}}},EnumDescriptorProto:{fields:{name:{type:"string",id:1},value:{rule:"repeated",type:"EnumValueDescriptorProto",id:2},options:{type:"EnumOptions",id:3}}},EnumValueDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:2},options:{type:"EnumValueOptions",id:3}}},ServiceDescriptorProto:{fields:{name:{type:"string",id:1},method:{rule:"repeated",type:"MethodDescriptorProto",id:2},options:{type:"ServiceOptions",id:3}}},MethodDescriptorProto:{fields:{name:{type:"string",id:1},inputType:{type:"string",id:2},outputType:{type:"string",id:3},options:{type:"MethodOptions",id:4},clientStreaming:{type:"bool",id:5},serverStreaming:{type:"bool",id:6}}},FileOptions:{fields:{javaPackage:{type:"string",id:1},javaOuterClassname:{type:"string",id:8},javaMultipleFiles:{type:"bool",id:10},javaGenerateEqualsAndHash:{type:"bool",id:20,options:{deprecated:!0}},javaStringCheckUtf8:{type:"bool",id:27},optimizeFor:{type:"OptimizeMode",id:9,options:{default:"SPEED"}},goPackage:{type:"string",id:11},ccGenericServices:{type:"bool",id:16},javaGenericServices:{type:"bool",id:17},pyGenericServices:{type:"bool",id:18},deprecated:{type:"bool",id:23},ccEnableArenas:{type:"bool",id:31},objcClassPrefix:{type:"string",id:36},csharpNamespace:{type:"string",id:37},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[38,38]],nested:{OptimizeMode:{values:{SPEED:1,CODE_SIZE:2,LITE_RUNTIME:3}}}},MessageOptions:{fields:{messageSetWireFormat:{type:"bool",id:1},noStandardDescriptorAccessor:{type:"bool",id:2},deprecated:{type:"bool",id:3},mapEntry:{type:"bool",id:7},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[8,8]]},FieldOptions:{fields:{ctype:{type:"CType",id:1,options:{default:"STRING"}},packed:{type:"bool",id:2},jstype:{type:"JSType",id:6,options:{default:"JS_NORMAL"}},lazy:{type:"bool",id:5},deprecated:{type:"bool",id:3},weak:{type:"bool",id:10},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[4,4]],nested:{CType:{values:{STRING:0,CORD:1,STRING_PIECE:2}},JSType:{values:{JS_NORMAL:0,JS_STRING:1,JS_NUMBER:2}}}},OneofOptions:{fields:{uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumOptions:{fields:{allowAlias:{type:"bool",id:2},deprecated:{type:"bool",id:3},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumValueOptions:{fields:{deprecated:{type:"bool",id:1},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},ServiceOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},MethodOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},UninterpretedOption:{fields:{name:{rule:"repeated",type:"NamePart",id:2},identifierValue:{type:"string",id:3},positiveIntValue:{type:"uint64",id:4},negativeIntValue:{type:"int64",id:5},doubleValue:{type:"double",id:6},stringValue:{type:"bytes",id:7},aggregateValue:{type:"string",id:8}},nested:{NamePart:{fields:{namePart:{rule:"required",type:"string",id:1},isExtension:{rule:"required",type:"bool",id:2}}}}},SourceCodeInfo:{fields:{location:{rule:"repeated",type:"Location",id:1}},nested:{Location:{fields:{path:{rule:"repeated",type:"int32",id:1},span:{rule:"repeated",type:"int32",id:2},leadingComments:{type:"string",id:3},trailingComments:{type:"string",id:4},leadingDetachedComments:{rule:"repeated",type:"string",id:6}}}}},GeneratedCodeInfo:{fields:{annotation:{rule:"repeated",type:"Annotation",id:1}},nested:{Annotation:{fields:{path:{rule:"repeated",type:"int32",id:1},sourceFile:{type:"string",id:2},begin:{type:"int32",id:3},end:{type:"int32",id:4}}}}},Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}},Empty:{fields:{}},DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}},Any:{fields:{typeUrl:{type:"string",id:1},value:{type:"bytes",id:2}}}}},firestore:{nested:{v1:{options:{csharp_namespace:"Google.Cloud.Firestore.V1",go_package:"google.golang.org/genproto/googleapis/firestore/v1;firestore",java_multiple_files:!0,java_outer_classname:"WriteProto",java_package:"com.google.firestore.v1",objc_class_prefix:"GCFS",php_namespace:"Google\\Cloud\\Firestore\\V1",ruby_package:"Google::Cloud::Firestore::V1"},nested:{AggregationResult:{fields:{aggregateFields:{keyType:"string",type:"Value",id:2}}},BitSequence:{fields:{bitmap:{type:"bytes",id:1},padding:{type:"int32",id:2}}},BloomFilter:{fields:{bits:{type:"BitSequence",id:1},hashCount:{type:"int32",id:2}}},DocumentMask:{fields:{fieldPaths:{rule:"repeated",type:"string",id:1}}},Precondition:{oneofs:{conditionType:{oneof:["exists","updateTime"]}},fields:{exists:{type:"bool",id:1},updateTime:{type:"google.protobuf.Timestamp",id:2}}},TransactionOptions:{oneofs:{mode:{oneof:["readOnly","readWrite"]}},fields:{readOnly:{type:"ReadOnly",id:2},readWrite:{type:"ReadWrite",id:3}},nested:{ReadWrite:{fields:{retryTransaction:{type:"bytes",id:1}}},ReadOnly:{oneofs:{consistencySelector:{oneof:["readTime"]}},fields:{readTime:{type:"google.protobuf.Timestamp",id:2}}}}},Document:{fields:{name:{type:"string",id:1},fields:{keyType:"string",type:"Value",id:2},createTime:{type:"google.protobuf.Timestamp",id:3},updateTime:{type:"google.protobuf.Timestamp",id:4}}},Value:{oneofs:{valueType:{oneof:["nullValue","booleanValue","integerValue","doubleValue","timestampValue","stringValue","bytesValue","referenceValue","geoPointValue","arrayValue","mapValue"]}},fields:{nullValue:{type:"google.protobuf.NullValue",id:11},booleanValue:{type:"bool",id:1},integerValue:{type:"int64",id:2},doubleValue:{type:"double",id:3},timestampValue:{type:"google.protobuf.Timestamp",id:10},stringValue:{type:"string",id:17},bytesValue:{type:"bytes",id:18},referenceValue:{type:"string",id:5},geoPointValue:{type:"google.type.LatLng",id:8},arrayValue:{type:"ArrayValue",id:9},mapValue:{type:"MapValue",id:6}}},ArrayValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}},MapValue:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Firestore:{options:{"(google.api.default_host)":"firestore.googleapis.com","(google.api.oauth_scopes)":"https://www.googleapis.com/auth/cloud-platform,https://www.googleapis.com/auth/datastore"},methods:{GetDocument:{requestType:"GetDocumentRequest",responseType:"Document",options:{"(google.api.http).get":"/v1/{name=projects/*/databases/*/documents/*/**}"},parsedOptions:[{"(google.api.http)":{get:"/v1/{name=projects/*/databases/*/documents/*/**}"}}]},ListDocuments:{requestType:"ListDocumentsRequest",responseType:"ListDocumentsResponse",options:{"(google.api.http).get":"/v1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}"},parsedOptions:[{"(google.api.http)":{get:"/v1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}"}}]},UpdateDocument:{requestType:"UpdateDocumentRequest",responseType:"Document",options:{"(google.api.http).patch":"/v1/{document.name=projects/*/databases/*/documents/*/**}","(google.api.http).body":"document","(google.api.method_signature)":"document,update_mask"},parsedOptions:[{"(google.api.http)":{patch:"/v1/{document.name=projects/*/databases/*/documents/*/**}",body:"document"}},{"(google.api.method_signature)":"document,update_mask"}]},DeleteDocument:{requestType:"DeleteDocumentRequest",responseType:"google.protobuf.Empty",options:{"(google.api.http).delete":"/v1/{name=projects/*/databases/*/documents/*/**}","(google.api.method_signature)":"name"},parsedOptions:[{"(google.api.http)":{delete:"/v1/{name=projects/*/databases/*/documents/*/**}"}},{"(google.api.method_signature)":"name"}]},BatchGetDocuments:{requestType:"BatchGetDocumentsRequest",responseType:"BatchGetDocumentsResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:batchGet","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:batchGet",body:"*"}}]},BeginTransaction:{requestType:"BeginTransactionRequest",responseType:"BeginTransactionResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:beginTransaction","(google.api.http).body":"*","(google.api.method_signature)":"database"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:beginTransaction",body:"*"}},{"(google.api.method_signature)":"database"}]},Commit:{requestType:"CommitRequest",responseType:"CommitResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:commit","(google.api.http).body":"*","(google.api.method_signature)":"database,writes"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:commit",body:"*"}},{"(google.api.method_signature)":"database,writes"}]},Rollback:{requestType:"RollbackRequest",responseType:"google.protobuf.Empty",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:rollback","(google.api.http).body":"*","(google.api.method_signature)":"database,transaction"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:rollback",body:"*"}},{"(google.api.method_signature)":"database,transaction"}]},RunQuery:{requestType:"RunQueryRequest",responseType:"RunQueryResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:runQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:runQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:runQuery",body:"*"}}}]},RunAggregationQuery:{requestType:"RunAggregationQueryRequest",responseType:"RunAggregationQueryResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:runAggregationQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runAggregationQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:runAggregationQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:runAggregationQuery",body:"*"}}}]},PartitionQuery:{requestType:"PartitionQueryRequest",responseType:"PartitionQueryResponse",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:partitionQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:partitionQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery",body:"*"}}}]},Write:{requestType:"WriteRequest",requestStream:!0,responseType:"WriteResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:write","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:write",body:"*"}}]},Listen:{requestType:"ListenRequest",requestStream:!0,responseType:"ListenResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:listen","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:listen",body:"*"}}]},ListCollectionIds:{requestType:"ListCollectionIdsRequest",responseType:"ListCollectionIdsResponse",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:listCollectionIds","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds","(google.api.http).additional_bindings.body":"*","(google.api.method_signature)":"parent"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:listCollectionIds",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds",body:"*"}}},{"(google.api.method_signature)":"parent"}]},BatchWrite:{requestType:"BatchWriteRequest",responseType:"BatchWriteResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:batchWrite","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:batchWrite",body:"*"}}]},CreateDocument:{requestType:"CreateDocumentRequest",responseType:"Document",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents/**}/{collection_id}","(google.api.http).body":"document"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents/**}/{collection_id}",body:"document"}}]}}},GetDocumentRequest:{oneofs:{consistencySelector:{oneof:["transaction","readTime"]}},fields:{name:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},mask:{type:"DocumentMask",id:2},transaction:{type:"bytes",id:3},readTime:{type:"google.protobuf.Timestamp",id:5}}},ListDocumentsRequest:{oneofs:{consistencySelector:{oneof:["transaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},collectionId:{type:"string",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}},pageSize:{type:"int32",id:3},pageToken:{type:"string",id:4},orderBy:{type:"string",id:6},mask:{type:"DocumentMask",id:7},transaction:{type:"bytes",id:8},readTime:{type:"google.protobuf.Timestamp",id:10},showMissing:{type:"bool",id:12}}},ListDocumentsResponse:{fields:{documents:{rule:"repeated",type:"Document",id:1},nextPageToken:{type:"string",id:2}}},CreateDocumentRequest:{fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},collectionId:{type:"string",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}},documentId:{type:"string",id:3},document:{type:"Document",id:4,options:{"(google.api.field_behavior)":"REQUIRED"}},mask:{type:"DocumentMask",id:5}}},UpdateDocumentRequest:{fields:{document:{type:"Document",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},updateMask:{type:"DocumentMask",id:2},mask:{type:"DocumentMask",id:3},currentDocument:{type:"Precondition",id:4}}},DeleteDocumentRequest:{fields:{name:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},currentDocument:{type:"Precondition",id:2}}},BatchGetDocumentsRequest:{oneofs:{consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},documents:{rule:"repeated",type:"string",id:2},mask:{type:"DocumentMask",id:3},transaction:{type:"bytes",id:4},newTransaction:{type:"TransactionOptions",id:5},readTime:{type:"google.protobuf.Timestamp",id:7}}},BatchGetDocumentsResponse:{oneofs:{result:{oneof:["found","missing"]}},fields:{found:{type:"Document",id:1},missing:{type:"string",id:2},transaction:{type:"bytes",id:3},readTime:{type:"google.protobuf.Timestamp",id:4}}},BeginTransactionRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},options:{type:"TransactionOptions",id:2}}},BeginTransactionResponse:{fields:{transaction:{type:"bytes",id:1}}},CommitRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},writes:{rule:"repeated",type:"Write",id:2},transaction:{type:"bytes",id:3}}},CommitResponse:{fields:{writeResults:{rule:"repeated",type:"WriteResult",id:1},commitTime:{type:"google.protobuf.Timestamp",id:2}}},RollbackRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},transaction:{type:"bytes",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}}}},RunQueryRequest:{oneofs:{queryType:{oneof:["structuredQuery"]},consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredQuery:{type:"StructuredQuery",id:2},transaction:{type:"bytes",id:5},newTransaction:{type:"TransactionOptions",id:6},readTime:{type:"google.protobuf.Timestamp",id:7}}},RunQueryResponse:{fields:{transaction:{type:"bytes",id:2},document:{type:"Document",id:1},readTime:{type:"google.protobuf.Timestamp",id:3},skippedResults:{type:"int32",id:4}}},RunAggregationQueryRequest:{oneofs:{queryType:{oneof:["structuredAggregationQuery"]},consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredAggregationQuery:{type:"StructuredAggregationQuery",id:2},transaction:{type:"bytes",id:4},newTransaction:{type:"TransactionOptions",id:5},readTime:{type:"google.protobuf.Timestamp",id:6}}},RunAggregationQueryResponse:{fields:{result:{type:"AggregationResult",id:1},transaction:{type:"bytes",id:2},readTime:{type:"google.protobuf.Timestamp",id:3}}},PartitionQueryRequest:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredQuery:{type:"StructuredQuery",id:2},partitionCount:{type:"int64",id:3},pageToken:{type:"string",id:4},pageSize:{type:"int32",id:5}}},PartitionQueryResponse:{fields:{partitions:{rule:"repeated",type:"Cursor",id:1},nextPageToken:{type:"string",id:2}}},WriteRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},streamId:{type:"string",id:2},writes:{rule:"repeated",type:"Write",id:3},streamToken:{type:"bytes",id:4},labels:{keyType:"string",type:"string",id:5}}},WriteResponse:{fields:{streamId:{type:"string",id:1},streamToken:{type:"bytes",id:2},writeResults:{rule:"repeated",type:"WriteResult",id:3},commitTime:{type:"google.protobuf.Timestamp",id:4}}},ListenRequest:{oneofs:{targetChange:{oneof:["addTarget","removeTarget"]}},fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},addTarget:{type:"Target",id:2},removeTarget:{type:"int32",id:3},labels:{keyType:"string",type:"string",id:4}}},ListenResponse:{oneofs:{responseType:{oneof:["targetChange","documentChange","documentDelete","documentRemove","filter"]}},fields:{targetChange:{type:"TargetChange",id:2},documentChange:{type:"DocumentChange",id:3},documentDelete:{type:"DocumentDelete",id:4},documentRemove:{type:"DocumentRemove",id:6},filter:{type:"ExistenceFilter",id:5}}},Target:{oneofs:{targetType:{oneof:["query","documents"]},resumeType:{oneof:["resumeToken","readTime"]}},fields:{query:{type:"QueryTarget",id:2},documents:{type:"DocumentsTarget",id:3},resumeToken:{type:"bytes",id:4},readTime:{type:"google.protobuf.Timestamp",id:11},targetId:{type:"int32",id:5},once:{type:"bool",id:6},expectedCount:{type:"google.protobuf.Int32Value",id:12}},nested:{DocumentsTarget:{fields:{documents:{rule:"repeated",type:"string",id:2}}},QueryTarget:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{parent:{type:"string",id:1},structuredQuery:{type:"StructuredQuery",id:2}}}}},TargetChange:{fields:{targetChangeType:{type:"TargetChangeType",id:1},targetIds:{rule:"repeated",type:"int32",id:2},cause:{type:"google.rpc.Status",id:3},resumeToken:{type:"bytes",id:4},readTime:{type:"google.protobuf.Timestamp",id:6}},nested:{TargetChangeType:{values:{NO_CHANGE:0,ADD:1,REMOVE:2,CURRENT:3,RESET:4}}}},ListCollectionIdsRequest:{fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},pageSize:{type:"int32",id:2},pageToken:{type:"string",id:3}}},ListCollectionIdsResponse:{fields:{collectionIds:{rule:"repeated",type:"string",id:1},nextPageToken:{type:"string",id:2}}},BatchWriteRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},writes:{rule:"repeated",type:"Write",id:2},labels:{keyType:"string",type:"string",id:3}}},BatchWriteResponse:{fields:{writeResults:{rule:"repeated",type:"WriteResult",id:1},status:{rule:"repeated",type:"google.rpc.Status",id:2}}},StructuredQuery:{fields:{select:{type:"Projection",id:1},from:{rule:"repeated",type:"CollectionSelector",id:2},where:{type:"Filter",id:3},orderBy:{rule:"repeated",type:"Order",id:4},startAt:{type:"Cursor",id:7},endAt:{type:"Cursor",id:8},offset:{type:"int32",id:6},limit:{type:"google.protobuf.Int32Value",id:5}},nested:{CollectionSelector:{fields:{collectionId:{type:"string",id:2},allDescendants:{type:"bool",id:3}}},Filter:{oneofs:{filterType:{oneof:["compositeFilter","fieldFilter","unaryFilter"]}},fields:{compositeFilter:{type:"CompositeFilter",id:1},fieldFilter:{type:"FieldFilter",id:2},unaryFilter:{type:"UnaryFilter",id:3}}},CompositeFilter:{fields:{op:{type:"Operator",id:1},filters:{rule:"repeated",type:"Filter",id:2}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,AND:1,OR:2}}}},FieldFilter:{fields:{field:{type:"FieldReference",id:1},op:{type:"Operator",id:2},value:{type:"Value",id:3}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,LESS_THAN:1,LESS_THAN_OR_EQUAL:2,GREATER_THAN:3,GREATER_THAN_OR_EQUAL:4,EQUAL:5,NOT_EQUAL:6,ARRAY_CONTAINS:7,IN:8,ARRAY_CONTAINS_ANY:9,NOT_IN:10}}}},UnaryFilter:{oneofs:{operandType:{oneof:["field"]}},fields:{op:{type:"Operator",id:1},field:{type:"FieldReference",id:2}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,IS_NAN:2,IS_NULL:3,IS_NOT_NAN:4,IS_NOT_NULL:5}}}},Order:{fields:{field:{type:"FieldReference",id:1},direction:{type:"Direction",id:2}}},FieldReference:{fields:{fieldPath:{type:"string",id:2}}},Projection:{fields:{fields:{rule:"repeated",type:"FieldReference",id:2}}},Direction:{values:{DIRECTION_UNSPECIFIED:0,ASCENDING:1,DESCENDING:2}}}},StructuredAggregationQuery:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{structuredQuery:{type:"StructuredQuery",id:1},aggregations:{rule:"repeated",type:"Aggregation",id:3}},nested:{Aggregation:{oneofs:{operator:{oneof:["count","sum","avg"]}},fields:{count:{type:"Count",id:1},sum:{type:"Sum",id:2},avg:{type:"Avg",id:3},alias:{type:"string",id:7}},nested:{Count:{fields:{upTo:{type:"google.protobuf.Int64Value",id:1}}},Sum:{fields:{field:{type:"FieldReference",id:1}}},Avg:{fields:{field:{type:"FieldReference",id:1}}}}}}},Cursor:{fields:{values:{rule:"repeated",type:"Value",id:1},before:{type:"bool",id:2}}},Write:{oneofs:{operation:{oneof:["update","delete","verify","transform"]}},fields:{update:{type:"Document",id:1},delete:{type:"string",id:2},verify:{type:"string",id:5},transform:{type:"DocumentTransform",id:6},updateMask:{type:"DocumentMask",id:3},updateTransforms:{rule:"repeated",type:"DocumentTransform.FieldTransform",id:7},currentDocument:{type:"Precondition",id:4}}},DocumentTransform:{fields:{document:{type:"string",id:1},fieldTransforms:{rule:"repeated",type:"FieldTransform",id:2}},nested:{FieldTransform:{oneofs:{transformType:{oneof:["setToServerValue","increment","maximum","minimum","appendMissingElements","removeAllFromArray"]}},fields:{fieldPath:{type:"string",id:1},setToServerValue:{type:"ServerValue",id:2},increment:{type:"Value",id:3},maximum:{type:"Value",id:4},minimum:{type:"Value",id:5},appendMissingElements:{type:"ArrayValue",id:6},removeAllFromArray:{type:"ArrayValue",id:7}},nested:{ServerValue:{values:{SERVER_VALUE_UNSPECIFIED:0,REQUEST_TIME:1}}}}}},WriteResult:{fields:{updateTime:{type:"google.protobuf.Timestamp",id:1},transformResults:{rule:"repeated",type:"Value",id:2}}},DocumentChange:{fields:{document:{type:"Document",id:1},targetIds:{rule:"repeated",type:"int32",id:5},removedTargetIds:{rule:"repeated",type:"int32",id:6}}},DocumentDelete:{fields:{document:{type:"string",id:1},removedTargetIds:{rule:"repeated",type:"int32",id:6},readTime:{type:"google.protobuf.Timestamp",id:4}}},DocumentRemove:{fields:{document:{type:"string",id:1},removedTargetIds:{rule:"repeated",type:"int32",id:2},readTime:{type:"google.protobuf.Timestamp",id:4}}},ExistenceFilter:{fields:{targetId:{type:"int32",id:1},count:{type:"int32",id:2},unchangedNames:{type:"BloomFilter",id:3}}}}}}},api:{options:{go_package:"google.golang.org/genproto/googleapis/api/annotations;annotations",java_multiple_files:!0,java_outer_classname:"HttpProto",java_package:"com.google.api",objc_class_prefix:"GAPI",cc_enable_arenas:!0},nested:{http:{type:"HttpRule",id:72295728,extend:"google.protobuf.MethodOptions"},Http:{fields:{rules:{rule:"repeated",type:"HttpRule",id:1}}},HttpRule:{oneofs:{pattern:{oneof:["get","put","post","delete","patch","custom"]}},fields:{get:{type:"string",id:2},put:{type:"string",id:3},post:{type:"string",id:4},delete:{type:"string",id:5},patch:{type:"string",id:6},custom:{type:"CustomHttpPattern",id:8},selector:{type:"string",id:1},body:{type:"string",id:7},additionalBindings:{rule:"repeated",type:"HttpRule",id:11}}},CustomHttpPattern:{fields:{kind:{type:"string",id:1},path:{type:"string",id:2}}},methodSignature:{rule:"repeated",type:"string",id:1051,extend:"google.protobuf.MethodOptions"},defaultHost:{type:"string",id:1049,extend:"google.protobuf.ServiceOptions"},oauthScopes:{type:"string",id:1050,extend:"google.protobuf.ServiceOptions"},fieldBehavior:{rule:"repeated",type:"google.api.FieldBehavior",id:1052,extend:"google.protobuf.FieldOptions"},FieldBehavior:{values:{FIELD_BEHAVIOR_UNSPECIFIED:0,OPTIONAL:1,REQUIRED:2,OUTPUT_ONLY:3,INPUT_ONLY:4,IMMUTABLE:5,UNORDERED_LIST:6,NON_EMPTY_DEFAULT:7}}}},type:{options:{cc_enable_arenas:!0,go_package:"google.golang.org/genproto/googleapis/type/latlng;latlng",java_multiple_files:!0,java_outer_classname:"LatLngProto",java_package:"com.google.type",objc_class_prefix:"GTP"},nested:{LatLng:{fields:{latitude:{type:"double",id:1},longitude:{type:"double",id:2}}}}},rpc:{options:{cc_enable_arenas:!0,go_package:"google.golang.org/genproto/googleapis/rpc/status;status",java_multiple_files:!0,java_outer_classname:"StatusProto",java_package:"com.google.rpc",objc_class_prefix:"RPC"},nested:{Status:{fields:{code:{type:"int32",id:1},message:{type:"string",id:2},details:{rule:"repeated",type:"google.protobuf.Any",id:3}}}}}}}},Kae={nested:KV},Qae=Object.freeze({__proto__:null,nested:KV,default:Kae});var Yae={longs:String,enums:String,defaults:!0,oneofs:!1};function Zae(){let n=HU.fromJSON(Qae,Yae);return Mo.loadPackageDefinition(n)}function Jae(n){let e=Zae();return new KD(e,n)}function Xae(){return new GD}function Oy(n){return new vD(n,!1)}var ece="ExponentialBackoff",tce=1e3,nce=1.5,rce=60*1e3,cy=class{constructor(e,t,r=tce,i=nce,s=rce){this.queue=e,this.timerId=t,this.initialDelayMs=r,this.backoffFactor=i,this.maxDelayMs=s,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}reset(){this.currentBaseMs=0}resetToMax(){this.currentBaseMs=this.maxDelayMs}backoffAndRun(e){this.cancel();let t=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,t-r);i>0&&$(ece,`Backing off for ${i} ms (base delay: ${this.currentBaseMs} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,()=>(this.lastAttemptTime=Date.now(),e())),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)}skipBackoff(){this.timerPromise!==null&&(this.timerPromise.skipDelay(),this.timerPromise=null)}cancel(){this.timerPromise!==null&&(this.timerPromise.cancel(),this.timerPromise=null)}jitterDelayMs(){return(Math.random()-.5)*this.currentBaseMs}};var NU="PersistentStream",ice=60*1e3,sce=10*1e3,ly=class{constructor(e,t,r,i,s,o,a,c){this.queue=e,this.idleTimerId=r,this.healthTimerId=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.closeCount=0,this.idleTimer=null,this.healthCheck=null,this.stream=null,this.responseCount=0,this.backoff=new cy(e,t)}isStarted(){return this.state===1||this.state===5||this.isOpen()}isOpen(){return this.state===2||this.state===3}start(){if(this.responseCount=0,this.state===4){this.performBackoff();return}this.auth()}stop(){return T(this,null,function*(){this.isStarted()&&(yield this.close(0))})}inhibitBackoff(){this.state=0,this.backoff.reset()}markIdle(){this.isOpen()&&this.idleTimer===null&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,ice,()=>this.handleIdleCloseTimer()))}sendRequest(e){this.cancelIdleCheck(),this.stream.send(e)}handleIdleCloseTimer(){return T(this,null,function*(){if(this.isOpen())return this.close(0)})}cancelIdleCheck(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)}cancelHealthCheck(){this.healthCheck&&(this.healthCheck.cancel(),this.healthCheck=null)}close(e,t){return T(this,null,function*(){this.cancelIdleCheck(),this.cancelHealthCheck(),this.backoff.cancel(),this.closeCount++,e!==4?this.backoff.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(gr(t.toString()),gr("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):t&&t.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.onClose(t)})}tearDown(){}auth(){this.state=1;let e=this.getCloseGuardedDispatcher(this.closeCount),t=this.closeCount;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.closeCount===t&&this.startStream(r,i)},r=>{e(()=>{let i=new q(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.handleStreamClose(i)})})}startStream(e,t){let r=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e,t),this.stream.onConnected(()=>{r(()=>this.listener.onConnected())}),this.stream.onOpen(()=>{r(()=>(this.state=2,this.healthCheck=this.queue.enqueueAfterDelay(this.healthTimerId,sce,()=>(this.isOpen()&&(this.state=3),Promise.resolve())),this.listener.onOpen()))}),this.stream.onClose(i=>{r(()=>this.handleStreamClose(i))}),this.stream.onMessage(i=>{r(()=>++this.responseCount===1?this.onFirst(i):this.onNext(i))})}performBackoff(){this.state=5,this.backoff.backoffAndRun(()=>T(this,null,function*(){this.state=0,this.start()}))}handleStreamClose(e){return $(NU,`close with error: ${e}`),this.stream=null,this.close(4,e)}getCloseGuardedDispatcher(e){return t=>{this.queue.enqueueAndForget(()=>this.closeCount===e?t():($(NU,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},QD=class extends ly{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}startRpc(e,t){return this.connection.openStream("Listen",e,t)}onFirst(e){return this.onNext(e)}onNext(e){this.backoff.reset();let t=Toe(this.serializer,e),r=_oe(e);return this.listener.onWatchChange(t,r)}watch(e){let t={};t.database=bD(this.serializer),t.addTarget=xoe(this.serializer,e);let r=Ooe(this.serializer,e);r&&(t.labels=r),this.sendRequest(t)}unwatch(e){let t={};t.database=bD(this.serializer),t.removeTarget=e,this.sendRequest(t)}},YD=class extends ly{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get handshakeComplete(){return this.responseCount>0}start(){this.lastStreamToken=void 0,super.start()}tearDown(){this.handshakeComplete&&this.writeMutations([])}startRpc(e,t){return this.connection.openStream("Write",e,t)}onFirst(e){return Ne(!!e.streamToken),this.lastStreamToken=e.streamToken,Ne(!e.writeResults||e.writeResults.length===0),this.listener.onHandshakeComplete()}onNext(e){Ne(!!e.streamToken),this.lastStreamToken=e.streamToken,this.backoff.reset();let t=Doe(e.writeResults,e.commitTime),r=Qr(e.commitTime);return this.listener.onMutationResult(r,t)}writeHandshake(){let e={};e.database=bD(this.serializer),this.sendRequest(e)}writeMutations(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Soe(this.serializer,r))};this.sendRequest(t)}};var ZD=class{},JD=class extends ZD{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.terminated=!1}verifyInitialized(){if(this.terminated)throw new q(N.FAILED_PRECONDITION,"The client has already been terminated.")}invokeRPC(e,t,r,i){return this.verifyInitialized(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.invokeRPC(e,wD(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new q(N.UNKNOWN,s.toString())})}invokeStreamingRPC(e,t,r,i,s){return this.verifyInitialized(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.invokeStreamingRPC(e,wD(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(N.UNKNOWN,o.toString())})}terminate(){this.terminated=!0,this.connection.terminate()}};function oce(n,e,t,r){return new JD(n,e,t,r)}function ace(n,e,t){let r=oe(n);return r.verifyInitialized(),new YD(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,t)}function cce(n,e,t){let r=oe(n);return r.verifyInitialized(),new QD(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,t)}var lce="OnlineStateTracker",MU=1,OU=10*1e3,XD=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}handleWatchStreamStart(){this.watchStreamFailures===0&&(this.setAndBroadcast("Unknown"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay("online_state_timeout",OU,()=>(this.onlineStateTimer=null,this.logClientOfflineWarningIfNecessary(`Backend didn't respond within ${OU/1e3} seconds.`),this.setAndBroadcast("Offline"),Promise.resolve())))}handleWatchStreamFailure(e){this.state==="Online"?this.setAndBroadcast("Unknown"):(this.watchStreamFailures++,this.watchStreamFailures>=MU&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary(`Connection failed ${MU} times. Most recent error: ${e.toString()}`),this.setAndBroadcast("Offline")))}set(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,e==="Online"&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)}setAndBroadcast(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}logClientOfflineWarningIfNecessary(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.shouldWarnClientIsOffline?(gr(t),this.shouldWarnClientIsOffline=!1):$(lce,t)}clearOnlineStateTimer(){this.onlineStateTimer!==null&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)}};var Uo="RemoteStore",uce=10,e0=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.writePipeline=[],this.listenTargets=new Map,this.offlineCauses=new Set,this.onNetworkStatusChange=[],this.connectivityMonitor=s,this.connectivityMonitor.addCallback(o=>{r.enqueueAndForget(()=>T(this,null,function*(){$o(this)&&($(Uo,"Restarting streams for network reachability change."),yield Ice(this))}))}),this.onlineStateTracker=new XD(r,i)}};function dce(n,e,t,r,i){return new e0(n,e,t,r,i)}function ky(n){return T(this,null,function*(){if($o(n))for(let e of n.onNetworkStatusChange)yield e(!0)})}function Kd(n){return T(this,null,function*(){for(let e of n.onNetworkStatusChange)yield e(!1)})}function fce(n){return T(this,null,function*(){let e=oe(n);$(Uo,"RemoteStore shutting down."),e.offlineCauses.add(5),yield Kd(e),e.connectivityMonitor.shutdown(),e.onlineStateTracker.set("Unknown")})}function QV(n,e){let t=oe(n);t.listenTargets.has(e.targetId)||(t.listenTargets.set(e.targetId,e),F0(t)?L0(t):cl(t).isOpen()&&P0(t,e))}function x0(n,e){let t=oe(n),r=cl(t);t.listenTargets.delete(e),r.isOpen()&&YV(t,e),t.listenTargets.size===0&&(r.isOpen()?r.markIdle():$o(t)&&t.onlineStateTracker.set("Unknown"))}function P0(n,e){if(n.watchChangeAggregator.recordPendingTargetRequest(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}cl(n).watch(e)}function YV(n,e){n.watchChangeAggregator.recordPendingTargetRequest(e),cl(n).unwatch(e)}function L0(n){n.watchChangeAggregator=new yD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),getTargetDataForTarget:e=>n.listenTargets.get(e)||null,getDatabaseId:()=>n.datastore.serializer.databaseId}),cl(n).start(),n.onlineStateTracker.handleWatchStreamStart()}function F0(n){return $o(n)&&!cl(n).isStarted()&&n.listenTargets.size>0}function $o(n){return oe(n).offlineCauses.size===0}function ZV(n){n.watchChangeAggregator=void 0}function hce(n){return T(this,null,function*(){n.onlineStateTracker.set("Online")})}function pce(n){return T(this,null,function*(){n.listenTargets.forEach((e,t)=>{P0(n,e)})})}function gce(n,e){return T(this,null,function*(){ZV(n),F0(n)?(n.onlineStateTracker.handleWatchStreamFailure(e),L0(n)):n.onlineStateTracker.set("Unknown")})}function mce(n,e,t){return T(this,null,function*(){if(n.onlineStateTracker.set("Online"),e instanceof ty&&e.state===2&&e.cause){try{yield vce(n,e)}catch(r){$(Uo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield uy(n,r)}return}if(e instanceof Gc?n.watchChangeAggregator.handleDocumentChange(e):e instanceof ey?n.watchChangeAggregator.handleExistenceFilter(e):n.watchChangeAggregator.handleTargetChange(e),!t.isEqual(le.min()))try{let r=yield GV(n.localStore);t.compareTo(r)>=0&&(yield yce(n,t))}catch(r){$(Uo,"Failed to raise snapshot:",r),yield uy(n,r)}})}function uy(n,e,t){return T(this,null,function*(){if(al(e))n.offlineCauses.add(1),yield Kd(n),n.onlineStateTracker.set("Offline"),t||(t=()=>GV(n.localStore)),n.asyncQueue.enqueueRetryable(()=>T(this,null,function*(){$(Uo,"Retrying IndexedDB access"),yield t(),n.offlineCauses.delete(1),yield ky(n)}));else throw e})}function JV(n,e){return e().catch(t=>uy(n,t,e))}function yce(n,e){let t=n.watchChangeAggregator.createRemoteEvent(e);return t.targetChanges.forEach((r,i)=>{if(r.resumeToken.approximateByteSize()>0){let s=n.listenTargets.get(i);s&&n.listenTargets.set(i,s.withResumeToken(r.resumeToken,e))}}),t.targetMismatches.forEach((r,i)=>{let s=n.listenTargets.get(r);if(!s)return;n.listenTargets.set(r,s.withResumeToken(Gt.EMPTY_BYTE_STRING,s.snapshotVersion)),YV(n,r);let o=new Fd(s.target,r,i,s.sequenceNumber);P0(n,o)}),n.remoteSyncer.applyRemoteEvent(t)}function vce(n,e){return T(this,null,function*(){let t=e.cause;for(let r of e.targetIds)n.listenTargets.has(r)&&(yield n.remoteSyncer.rejectListen(r,t),n.listenTargets.delete(r),n.watchChangeAggregator.removeTarget(r))})}function xy(n){return T(this,null,function*(){let e=oe(n),t=Ls(e),r=e.writePipeline.length>0?e.writePipeline[e.writePipeline.length-1].batchId:_0;for(;Ece(e);)try{let i=yield Fae(e.localStore,r);if(i===null){e.writePipeline.length===0&&t.markIdle();break}else r=i.batchId,wce(e,i)}catch(i){yield uy(e,i)}XV(e)&&ej(e)})}function Ece(n){return $o(n)&&n.writePipeline.length<uce}function wce(n,e){n.writePipeline.push(e);let t=Ls(n);t.isOpen()&&t.handshakeComplete&&t.writeMutations(e.mutations)}function XV(n){return $o(n)&&!Ls(n).isStarted()&&n.writePipeline.length>0}function ej(n){Ls(n).start()}function Tce(n){return T(this,null,function*(){Ls(n).writeHandshake()})}function bce(n){return T(this,null,function*(){let e=Ls(n);for(let t of n.writePipeline)e.writeMutations(t.mutations)})}function _ce(n,e,t){return T(this,null,function*(){let r=n.writePipeline.shift(),i=fD.from(r,e,t);yield JV(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield xy(n)})}function Sce(n,e){return T(this,null,function*(){e&&Ls(n).handshakeComplete&&(yield Cce(n,e)),XV(n)&&ej(n)})}function Cce(n,e){return T(this,null,function*(){if(aoe(e.code)){let t=n.writePipeline.shift();Ls(n).inhibitBackoff(),yield JV(n,()=>n.remoteSyncer.rejectFailedWrite(t.batchId,e)),yield xy(n)}})}function Ice(n){return T(this,null,function*(){let e=oe(n);e.offlineCauses.add(4),yield Kd(e),e.onlineStateTracker.set("Unknown"),e.offlineCauses.delete(4),yield ky(e)})}function kU(n,e){return T(this,null,function*(){let t=oe(n);t.asyncQueue.verifyOperationInProgress(),$(Uo,"RemoteStore received new credentials");let r=$o(t);t.offlineCauses.add(3),yield Kd(t),r&&t.onlineStateTracker.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.offlineCauses.delete(3),yield ky(t)})}function Dce(n,e){return T(this,null,function*(){let t=oe(n);e?(t.offlineCauses.delete(2),yield ky(t)):e||(t.offlineCauses.add(2),yield Kd(t),t.onlineStateTracker.set("Unknown"))})}function cl(n){return n.watchStream||(n.watchStream=cce(n.datastore,n.asyncQueue,{onConnected:hce.bind(null,n),onOpen:pce.bind(null,n),onClose:gce.bind(null,n),onWatchChange:mce.bind(null,n)}),n.onNetworkStatusChange.push(e=>T(this,null,function*(){e?(n.watchStream.inhibitBackoff(),F0(n)?L0(n):n.onlineStateTracker.set("Unknown")):(yield n.watchStream.stop(),ZV(n))}))),n.watchStream}function Ls(n){return n.writeStream||(n.writeStream=ace(n.datastore,n.asyncQueue,{onConnected:()=>Promise.resolve(),onOpen:Tce.bind(null,n),onClose:Sce.bind(null,n),onHandshakeComplete:bce.bind(null,n),onMutationResult:_ce.bind(null,n)}),n.onNetworkStatusChange.push(e=>T(this,null,function*(){e?(n.writeStream.inhibitBackoff(),yield xy(n)):(yield n.writeStream.stop(),n.writePipeline.length>0&&($(Uo,`Stopping write stream with ${n.writePipeline.length} pending writes`),n.writePipeline=[]))}))),n.writeStream}var Ace="AsyncQueue",t0=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new zn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function B0(n,e){if(gr(Ace,`${e}: ${n}`),al(n))return new q(N.UNAVAILABLE,`${e}: ${n}`);throw n}var dy=class n{static emptySet(e){return new n(e.comparator)}constructor(e){e?this.comparator=(t,r)=>e(t,r)||Z.comparator(t.key,r.key):this.comparator=(t,r)=>Z.comparator(t.key,r.key),this.keyedMap=Cd(),this.sortedSet=new tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var fy=class{constructor(){this.changeMap=new tt(Z.comparator)}track(e){let t=e.doc.key,r=this.changeMap.get(t);if(!r){this.changeMap=this.changeMap.insert(t,e);return}e.type!==0&&r.type===3?this.changeMap=this.changeMap.insert(t,e):e.type===3&&r.type!==1?this.changeMap=this.changeMap.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.changeMap=this.changeMap.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.changeMap=this.changeMap.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.changeMap=this.changeMap.remove(t):e.type===1&&r.type===2?this.changeMap=this.changeMap.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.changeMap=this.changeMap.insert(t,{type:2,doc:e.doc}):X()}getChanges(){let e=[];return this.changeMap.inorderTraversal((t,r)=>{e.push(r)}),e}},nl=class n{constructor(e,t,r,i,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,dy.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(this.fromCache!==e.fromCache||this.hasCachedResults!==e.hasCachedResults||this.syncStateChanged!==e.syncStateChanged||!this.mutatedKeys.isEqual(e.mutatedKeys)||!Ay(this.query,e.query)||!this.docs.isEqual(e.docs)||!this.oldDocs.isEqual(e.oldDocs))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var n0=class{constructor(){this.viewSnap=void 0,this.listeners=[]}hasRemoteListeners(){return this.listeners.some(e=>e.listensToRemoteStore())}};function Rce(){return new r0}var r0=class{constructor(){this.queries=tj(),this.onlineState="Unknown",this.snapshotsInSyncListeners=new Set}terminate(){kce(this,new q(N.ABORTED,"Firestore shutting down"))}};function tj(){return new Di(n=>_V(n),Ay)}function U0(n,e){return T(this,null,function*(){let t=oe(n),r=3,i=e.query,s=t.queries.get(i);s?!s.hasRemoteListeners()&&e.listensToRemoteStore()&&(r=2):(s=new n0,r=e.listensToRemoteStore()?0:1);try{switch(r){case 0:s.viewSnap=yield t.onListen(i,!0);break;case 1:s.viewSnap=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i);break;default:break}}catch(o){let a=B0(o,`Initialization of query '${jc(e.query)}' failed`);e.onError(a);return}t.queries.set(i,s),s.listeners.push(e),e.applyOnlineStateChange(t.onlineState),s.viewSnap&&e.onViewSnapshot(s.viewSnap)&&j0(t)})}function V0(n,e){return T(this,null,function*(){let t=oe(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),s.listeners.length===0?i=e.listensToRemoteStore()?0:1:!s.hasRemoteListeners()&&e.listensToRemoteStore()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function Nce(n,e){let t=oe(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.listeners)a.onViewSnapshot(i)&&(r=!0);o.viewSnap=i}}r&&j0(t)}function Mce(n,e,t){let r=oe(n),i=r.queries.get(e);if(i)for(let s of i.listeners)s.onError(t);r.queries.delete(e)}function Oce(n,e){let t=oe(n);t.onlineState=e;let r=!1;t.queries.forEach((i,s)=>{for(let o of s.listeners)o.applyOnlineStateChange(e)&&(r=!0)}),r&&j0(t)}function kce(n,e){let t=oe(n),r=t.queries;t.queries=tj(),r.forEach((i,s)=>{for(let o of s.listeners)o.onError(e)})}function j0(n){n.snapshotsInSyncListeners.forEach(e=>{e.next()})}var nj=function(n){return n.Default="default",n.Cache="cache",n}(nj||{}),Vd=class{constructor(e,t,r){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.snap=null,this.onlineState="Unknown",this.options=r||{}}onViewSnapshot(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new nl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(e)&&(this.queryObserver.next(e),t=!0):this.shouldRaiseInitialEvent(e,this.onlineState)&&(this.raiseInitialEvent(e),t=!0),this.snap=e,t}onError(e){this.queryObserver.error(e)}applyOnlineStateChange(e){this.onlineState=e;let t=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&(this.raiseInitialEvent(this.snap),t=!0),t}shouldRaiseInitialEvent(e,t){if(!e.fromCache||!this.listensToRemoteStore())return!0;let r=t!=="Offline";return this.options.waitForSyncWhenOnline&&r?!1:!e.docs.isEmpty()||e.hasCachedResults||t==="Offline"}shouldRaiseEvent(e){if(e.docChanges.length>0)return!0;let t=this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites;return e.syncStateChanged||t?this.options.includeMetadataChanges===!0:!1}raiseInitialEvent(e){e=nl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.raisedInitialEvent=!0,this.queryObserver.next(e)}listensToRemoteStore(){return this.options.source!==nj.Cache}};var i0=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.addedKeys=r,this.removedKeys=i}static fromSnapshot(e,t){let r=we(),i=we();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key);break}return new n(e,t.fromCache,r,i)}};var hy=class{constructor(e){this.key=e}},py=class{constructor(e){this.key=e}},s0=class{constructor(e,t){this.query=e,this._syncedDocuments=t,this.syncState=null,this.hasCachedResults=!1,this.current=!1,this.limboDocuments=we(),this.mutatedKeys=we(),this.docComparator=SV(e),this.documentSet=new dy(this.docComparator)}get syncedDocuments(){return this._syncedDocuments}computeDocChanges(e,t){let r=t?t.changeSet:new fy,i=t?t.documentSet:this.documentSet,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{let h=i.get(u),f=Ry(this.query,d)?d:null,v=h?this.mutatedKeys.has(h.key):!1,w=f?f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations:!1,S=!1;h&&f?h.data.isEqual(f.data)?v!==w&&(r.track({type:3,doc:f}),S=!0):this.shouldWaitForSyncedDocument(h,f)||(r.track({type:2,doc:f}),S=!0,(c&&this.docComparator(f,c)>0||l&&this.docComparator(f,l)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),S=!0):h&&!f&&(r.track({type:1,doc:h}),S=!0,(c||l)&&(a=!0)),S&&(f?(o=o.add(f),w?s=s.add(u):s=s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{documentSet:o,changeSet:r,needsRefill:a,mutatedKeys:s}}shouldWaitForSyncedDocument(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;let o=e.changeSet.getChanges();o.sort((d,h)=>xce(d.type,h.type)||this.docComparator(d.doc,h.doc)),this.applyTargetChange(r),i=i??!1;let a=t&&!i?this.updateLimboDocuments():[],l=this.limboDocuments.size===0&&this.current&&!i?1:0,u=l!==this.syncState;return this.syncState=l,o.length===0&&!u?{limboChanges:a}:{snapshot:new nl(this.query,e.documentSet,s,o,e.mutatedKeys,l===0,u,!1,r?r.resumeToken.approximateByteSize()>0:!1),limboChanges:a}}applyOnlineStateChange(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new fy,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}}shouldBeInLimbo(e){return!(this._syncedDocuments.has(e)||!this.documentSet.has(e)||this.documentSet.get(e).hasLocalMutations)}applyTargetChange(e){e&&(e.addedDocuments.forEach(t=>this._syncedDocuments=this._syncedDocuments.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this._syncedDocuments=this._syncedDocuments.delete(t)),this.current=e.current)}updateLimboDocuments(){if(!this.current)return[];let e=this.limboDocuments;this.limboDocuments=we(),this.documentSet.forEach(r=>{this.shouldBeInLimbo(r.key)&&(this.limboDocuments=this.limboDocuments.add(r.key))});let t=[];return e.forEach(r=>{this.limboDocuments.has(r)||t.push(new py(r))}),this.limboDocuments.forEach(r=>{e.has(r)||t.push(new hy(r))}),t}synchronizeWithPersistedState(e){this._syncedDocuments=e.remoteKeys,this.limboDocuments=we();let t=this.computeDocChanges(e.documents);return this.applyChanges(t,!0)}computeInitialSnapshot(){return nl.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===0,this.hasCachedResults)}};function xce(n,e){let t=r=>{switch(r){case 0:return 1;case 2:return 2;case 3:return 2;case 1:return 0;default:return X()}};return t(n)-t(e)}var q0="SyncEngine",o0=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},a0=class{constructor(e){this.key=e,this.receivedDocument=!1}},c0=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.syncEngineListener={},this.queryViewsByQuery=new Di(a=>_V(a),Ay),this.queriesByTarget=new Map,this.enqueuedLimboResolutions=new Set,this.activeLimboTargetsByKey=new tt(Z.comparator),this.activeLimboResolutionsByTarget=new Map,this.limboDocumentRefs=new Ud,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=Bd.forSyncEngine(),this.onlineState="Unknown",this._isPrimaryClient=void 0}get isPrimaryClient(){return this._isPrimaryClient===!0}};function Pce(n,e,t,r,i,s,o){let a=new c0(n,e,t,r,i,s);return o&&(a._isPrimaryClient=!0),a}function Lce(n,e,t=!0){return T(this,null,function*(){let r=lj(n),i,s=r.queryViewsByQuery.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.computeInitialSnapshot()):i=yield rj(r,e,t,!0),i})}function Fce(n,e){return T(this,null,function*(){let t=lj(n);yield rj(t,e,!0,!1)})}function rj(n,e,t,r){return T(this,null,function*(){let i=yield Bae(n.localStore,Kr(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield Bce(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&QV(n.remoteStore,i),a})}function Bce(n,e,t,r,i){return T(this,null,function*(){n.applyDocChanges=(d,h,f)=>Kce(n,d,h,f);let s=yield WV(n.localStore,e,!0),o=new s0(e,s.remoteKeys),a=o.computeDocChanges(s.documents),c=Ld.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(a,n.isPrimaryClient,c);cj(n,t,l.limboChanges);let u=new o0(e,t,o);return n.queryViewsByQuery.set(e,u),n.queriesByTarget.has(t)?n.queriesByTarget.get(t).push(e):n.queriesByTarget.set(t,[e]),l.snapshot})}function Uce(n,e,t){return T(this,null,function*(){let r=oe(n),i=r.queryViewsByQuery.get(e),s=r.queriesByTarget.get(i.targetId);if(s.length>1){r.queriesByTarget.set(i.targetId,s.filter(o=>!Ay(o,e))),r.queryViewsByQuery.delete(e);return}r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield qD(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&x0(r.remoteStore,i.targetId),l0(r,i.targetId)}).catch(ol))):(l0(r,i.targetId),yield qD(r.localStore,i.targetId,!0))})}function Vce(n,e){return T(this,null,function*(){let t=oe(n),r=t.queryViewsByQuery.get(e),i=t.queriesByTarget.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),x0(t.remoteStore,r.targetId))})}function jce(n,e,t){return T(this,null,function*(){let r=Zce(n);try{let i=yield Rae(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),Gce(r,i.batchId,t),yield Qd(r,i.changes),yield xy(r.remoteStore)}catch(i){let s=B0(i,"Failed to persist write");t.reject(s)}})}function ij(n,e){return T(this,null,function*(){let t=oe(n);try{let r=yield kae(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.activeLimboResolutionsByTarget.get(s);o&&(Ne(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.receivedDocument=!0:i.modifiedDocuments.size>0?Ne(o.receivedDocument):i.removedDocuments.size>0&&(Ne(o.receivedDocument),o.receivedDocument=!1))}),yield Qd(t,r,e)}catch(r){yield ol(r)}})}function xU(n,e,t){let r=oe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.queryViewsByQuery.forEach((s,o)=>{let a=o.view.applyOnlineStateChange(e);a.snapshot&&i.push(a.snapshot)}),Oce(r.eventManager,e),i.length&&r.syncEngineListener.onWatchChange(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function qce(n,e,t){return T(this,null,function*(){let r=oe(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.activeLimboResolutionsByTarget.get(e),s=i&&i.key;if(s){let o=new tt(Z.comparator);o=o.insert(s,mr.newNoDocument(s,le.min()));let a=we().add(s),c=new Xm(le.min(),new Map,new tt(ge),o,a);yield ij(r,c),r.activeLimboTargetsByKey=r.activeLimboTargetsByKey.remove(s),r.activeLimboResolutionsByTarget.delete(e),$0(r)}else yield qD(r.localStore,e,!1).then(()=>l0(r,e,t)).catch(ol)})}function $ce(n,e){return T(this,null,function*(){let t=oe(n),r=e.batch.batchId;try{let i=yield Nae(t.localStore,e);oj(t,r,null),sj(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Qd(t,i)}catch(i){yield ol(i)}})}function zce(n,e,t){return T(this,null,function*(){let r=oe(n);try{let i=yield Oae(r.localStore,e);oj(r,e,t),sj(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Qd(r,i)}catch(i){yield ol(i)}})}function sj(n,e){(n.pendingWritesCallbacks.get(e)||[]).forEach(t=>{t.resolve()}),n.pendingWritesCallbacks.delete(e)}function Hce(n,e){n.pendingWritesCallbacks.forEach(t=>{t.forEach(r=>{r.reject(new q(N.CANCELLED,e))})}),n.pendingWritesCallbacks.clear()}function Gce(n,e,t){let r=n.mutationUserCallbacks[n.currentUser.toKey()];r||(r=new tt(ge)),r=r.insert(e,t),n.mutationUserCallbacks[n.currentUser.toKey()]=r}function oj(n,e,t){let r=oe(n),i=r.mutationUserCallbacks[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.mutationUserCallbacks[r.currentUser.toKey()]=i}}function l0(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.queriesByTarget.get(e))n.queryViewsByQuery.delete(r),t&&n.syncEngineListener.onWatchError(r,t);n.queriesByTarget.delete(e),n.isPrimaryClient&&n.limboDocumentRefs.removeReferencesForId(e).forEach(i=>{n.limboDocumentRefs.containsKey(i)||aj(n,i)})}function aj(n,e){n.enqueuedLimboResolutions.delete(e.path.canonicalString());let t=n.activeLimboTargetsByKey.get(e);t!==null&&(x0(n.remoteStore,t),n.activeLimboTargetsByKey=n.activeLimboTargetsByKey.remove(e),n.activeLimboResolutionsByTarget.delete(t),$0(n))}function cj(n,e,t){for(let r of t)r instanceof hy?(n.limboDocumentRefs.addReference(r.key,e),Wce(n,r)):r instanceof py?($(q0,"Document no longer in limbo: "+r.key),n.limboDocumentRefs.removeReference(r.key,e),n.limboDocumentRefs.containsKey(r.key)||aj(n,r.key)):X()}function Wce(n,e){let t=e.key,r=t.path.canonicalString();!n.activeLimboTargetsByKey.get(t)&&!n.enqueuedLimboResolutions.has(r)&&($(q0,"New document in limbo: "+t),n.enqueuedLimboResolutions.add(r),$0(n))}function $0(n){for(;n.enqueuedLimboResolutions.size>0&&n.activeLimboTargetsByKey.size<n.maxConcurrentLimboResolutions;){let e=n.enqueuedLimboResolutions.values().next().value;n.enqueuedLimboResolutions.delete(e);let t=new Z(Ye.fromString(e)),r=n.limboTargetIdGenerator.next();n.activeLimboResolutionsByTarget.set(r,new a0(t)),n.activeLimboTargetsByKey=n.activeLimboTargetsByKey.insert(t,r),QV(n.remoteStore,new Fd(Kr(Dy(t.path)),r,"TargetPurposeLimboResolution",T0.INVALID))}}function Qd(n,e,t){return T(this,null,function*(){let r=oe(n),i=[],s=[],o=[];r.queryViewsByQuery.isEmpty()||(r.queryViewsByQuery.forEach((a,c)=>{o.push(r.applyDocChanges(c,e,t).then(l=>{var u;if((l||t)&&r.isPrimaryClient){let d=l?!l.fromCache:(u=t?.targetChanges.get(c.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(l){i.push(l);let d=i0.fromSnapshot(c.targetId,l);s.push(d)}}))}),yield Promise.all(o),r.syncEngineListener.onWatchChange(i),yield Lae(r.localStore,s))})}function Kce(n,e,t,r){return T(this,null,function*(){let i=e.view.computeDocChanges(t);i.needsRefill&&(i=yield WV(n.localStore,e.query,!1).then(({documents:c})=>e.view.computeDocChanges(c,i)));let s=r&&r.targetChanges.get(e.targetId),o=r&&r.targetMismatches.get(e.targetId)!=null,a=e.view.applyChanges(i,n.isPrimaryClient,s,o);return cj(n,e.targetId,a.limboChanges),a.snapshot})}function Qce(n,e){return T(this,null,function*(){let t=oe(n);if(!t.currentUser.isEqual(e)){$(q0,"User change. New user:",e.toKey());let i=yield HV(t.localStore,e);t.currentUser=e,Hce(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Qd(t,i.affectedDocuments)}})}function Yce(n,e){let t=oe(n),r=t.activeLimboResolutionsByTarget.get(e);if(r&&r.receivedDocument)return we().add(r.key);{let i=we(),s=t.queriesByTarget.get(e);if(!s)return i;for(let o of s){let a=t.queryViewsByQuery.get(o);i=i.unionWith(a.view.syncedDocuments)}return i}}function lj(n){let e=oe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ij.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Yce.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qce.bind(null,e),e.syncEngineListener.onWatchChange=Nce.bind(null,e.eventManager),e.syncEngineListener.onWatchError=Mce.bind(null,e.eventManager),e}function Zce(n){let e=oe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$ce.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zce.bind(null,e),e}var uj=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return T(this,null,function*(){this.serializer=Oy(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),yield this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)})}createGarbageCollectionScheduler(t,r){return null}createIndexBackfillerScheduler(t,r){return null}createLocalStore(t){return Aae(this.persistence,new zD,t.initialUser,this.serializer)}createPersistence(t){return new sy(VD.factory,this.serializer)}createSharedClientState(t){return new HD}terminate(){return T(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),u0=class extends uj{constructor(e){super(),this.cacheSizeBytes=e}createGarbageCollectionScheduler(e,t){Ne(this.persistence.referenceDelegate instanceof oy);let r=this.persistence.referenceDelegate.garbageCollector;return new DD(r,e.asyncQueue,t)}createPersistence(e){let t=this.cacheSizeBytes!==void 0?$n.withCacheSize(this.cacheSizeBytes):$n.DEFAULT;return new sy(r=>oy.factory(r,t),this.serializer)}};var Jce=(()=>{class n{initialize(t,r){return T(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>xU(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Qce.bind(null,this.syncEngine),yield Dce(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return Rce()}createDatastore(t){let r=Oy(t.databaseInfo.databaseId),i=Jae(t.databaseInfo);return oce(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return dce(this.localStore,this.datastore,t.asyncQueue,r=>xU(this.syncEngine,r,0),Xae())}createSyncEngine(t,r){return Pce(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return T(this,null,function*(){var t,r;yield fce(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}n.provider={build:()=>new n};return n})();function dj(n,e,t){if(!t)throw new q(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Xce(n,e,t,r){if(e===!0&&r===!0)throw new q(N.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function PU(n){if(!Z.isDocumentKey(n))throw new q(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function LU(n){if(Z.isDocumentKey(n))throw new q(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ele(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Py(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=tle(n);return e?`a custom ${e} object`:"an object"}}else return typeof n=="function"?"a function":X()}function tle(n){return n.constructor?n.constructor.name:null}function pr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new q(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Py(n);throw new q(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var jd=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.scheduleEvent(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.scheduleEvent(this.observer.error,e):gr("Uncaught Error in snapshot listener:",e.toString()))}mute(){this.muted=!0}scheduleEvent(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Ps="FirestoreClient",nle=100,rle=11,ile=20,sle=22,d0=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=It.UNAUTHENTICATED,this.clientId=Km.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>T(this,null,function*(){$(Ps,"Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>($(Ps,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:nle}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new zn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>T(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=B0(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function VI(n,e){return T(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),$(Ps,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>T(this,null,function*(){r.isEqual(i)||(yield HV(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function FU(n,e){return T(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield ale(n);$(Ps,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>kU(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>kU(e.remoteStore,i)),n._onlineComponents=e})}function ole(n){return n.name==="FirebaseError"?n.code===N.FAILED_PRECONDITION||n.code===N.UNIMPLEMENTED:typeof DOMException<"u"&&n instanceof DOMException?n.code===sle||n.code===ile||n.code===rle:!0}function ale(n){return T(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){$(Ps,"Using user provided OfflineComponentProvider");try{yield VI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!ole(t))throw t;Hc("Error using user provided cache. Falling back to memory cache: "+t),yield VI(n,new uj)}}else $(Ps,"Using default OfflineComponentProvider"),yield VI(n,new u0(void 0));return n._offlineComponents})}function fj(n){return T(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?($(Ps,"Using user provided OnlineComponentProvider"),yield FU(n,n._uninitializedComponentsProvider._online)):($(Ps,"Using default OnlineComponentProvider"),yield FU(n,new Jce))),n._onlineComponents})}function cle(n){return fj(n).then(e=>e.syncEngine)}function gy(n){return T(this,null,function*(){let e=yield fj(n),t=e.eventManager;return t.onListen=Lce.bind(null,e.syncEngine),t.onUnlisten=Uce.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Fce.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Vce.bind(null,e.syncEngine),t})}function lle(n,e,t,r){let i=new jd(r),s=new Vd(e,i,t);return n.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){let o=yield gy(n);return U0(o,s)})),()=>{i.mute(),n.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){let o=yield gy(n);return V0(o,s)}))}}function ule(n,e,t={}){let r=new zn;return n.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){let i=yield gy(n);return hle(i,n.asyncQueue,e,t,r)})),r.promise}function dle(n,e,t={}){let r=new zn;return n.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){let i=yield gy(n);return ple(i,n.asyncQueue,e,t,r)})),r.promise}function fle(n,e){let t=new zn;return n.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){let r=yield cle(n);return jce(r,e,t)})),t.promise}function hle(n,e,t,r,i){let s=new jd({next:a=>{s.mute(),e.enqueueAndForget(()=>V0(n,o));let c=a.docs.has(t);!c&&a.fromCache?i.reject(new q(N.UNAVAILABLE,"Failed to get document because the client is offline.")):c&&a.fromCache&&r&&r.source==="server"?i.reject(new q(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:a=>i.reject(a)}),o=new Vd(Dy(t.path),s,{includeMetadataChanges:!0,waitForSyncWhenOnline:!0});return U0(n,o)}function ple(n,e,t,r,i){let s=new jd({next:a=>{s.mute(),e.enqueueAndForget(()=>V0(n,o)),a.fromCache&&r.source==="server"?i.reject(new q(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(a)},error:a=>i.reject(a)}),o=new Vd(t,s,{includeMetadataChanges:!0,waitForSyncWhenOnline:!0});return U0(n,o)}function gle(n,e){return n.timeoutSeconds===e.timeoutSeconds}function hj(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var mle="ComponentProvider",BU=new Map;function yle(n){let e=BU.get(n);e&&($(mle,"Removing Datastore"),BU.delete(n),e.terminate())}function vle(n,e,t,r){return new QI(n,e,t,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,hj(r.experimentalLongPollingOptions),r.useFetchStreams)}var pj="firestore.googleapis.com",UU=!0,VU=5,jU=30,Ele=!0,my=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new q(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=pj,this.ssl=UU}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:UU;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=zV;else{if(e.cacheSizeBytes!==My&&e.cacheSizeBytes<AU)throw new q(N.INVALID_ARGUMENT,`cacheSizeBytes must be at least ${AU}`);this.cacheSizeBytes=e.cacheSizeBytes}Xce("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=Ele:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hj((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),wle(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&gle(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}};function wle(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new q(N.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<VU)throw new q(N.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is ${VU})`);if(n.timeoutSeconds>jU)throw new q(N.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is ${jU})`)}}var rl=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new my({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new my(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=die(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return T(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return yle(this),Promise.resolve()}};function gj(n,e,t,r={}){var i;n=pr(n,rl);let s=n._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;s.host!==pj&&s.host!==a&&Hc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let c=Object.assign(Object.assign({},s),{host:a,ssl:!1,emulatorOptions:r});if(!Ar(c,o)&&(n._setSettings(c),r.mockUserToken)){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=It.MOCK_USER;else{l=SP(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new q(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new It(d)}n._authCredentials=new qI(new Gm(l,u))}}var Vo=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},nn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ks(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},ks=class n extends Vo{constructor(e,t,r){super(e,t,Dy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new nn(this.firestore,null,new Z(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function mj(n,e,...t){if(n=jt(n),dj("collection","path",e),n instanceof rl){let r=Ye.fromString(e,...t);return LU(r),new ks(n,null,r)}else{if(!(n instanceof nn)&&!(n instanceof ks))throw new q(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ye.fromString(e,...t));return LU(r),new ks(n.firestore,null,r)}}function yj(n,e,...t){if(n=jt(n),arguments.length===1&&(e=Km.newId()),dj("doc","path",e),n instanceof rl){let r=Ye.fromString(e,...t);return PU(r),new nn(n,null,new Z(r))}else{if(!(n instanceof nn)&&!(n instanceof ks))throw new q(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ye.fromString(e,...t));return PU(r),new nn(n.firestore,n instanceof ks?n.converter:null,new Z(r))}}var Tle="AsyncQueue",yy=class{constructor(e=Promise.resolve()){this.retryableOps=[],this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.skipNonRestrictedTasks=!1,this.timerIdsToSkip=[],this.backoff=new cy(this,"async_queue_retry"),this.visibilityHandler=()=>{this.backoff.skipBackoff()},this.tail=e}get isShuttingDown(){return this._isShuttingDown}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.verifyNotFailed(),this.enqueueInternal(e)}enterRestrictedMode(e){this._isShuttingDown||(this._isShuttingDown=!0,this.skipNonRestrictedTasks=e||!1)}enqueue(e){if(this.verifyNotFailed(),this._isShuttingDown)return new Promise(()=>{});let t=new zn;return this.enqueueInternal(()=>this._isShuttingDown&&this.skipNonRestrictedTasks?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.retryableOps.push(e),this.retryNextOp()))}retryNextOp(){return T(this,null,function*(){if(this.retryableOps.length!==0){try{yield this.retryableOps[0](),this.retryableOps.shift(),this.backoff.reset()}catch(e){if(al(e))$(Tle,"Operation failed with retryable error: "+e);else throw e}this.retryableOps.length>0&&this.backoff.backoffAndRun(()=>this.retryNextOp())}})}enqueueInternal(e){let t=this.tail.then(()=>(this.operationInProgress=!0,e().catch(r=>{this.failure=r,this.operationInProgress=!1;let i=ble(r);throw gr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.operationInProgress=!1,r))));return this.tail=t,t}enqueueAfterDelay(e,t,r){this.verifyNotFailed(),this.timerIdsToSkip.indexOf(e)>-1&&(t=0);let i=t0.createAndSchedule(this,e,t,r,s=>this.removeDelayedOperation(s));return this.delayedOperations.push(i),i}verifyNotFailed(){this.failure&&X()}verifyOperationInProgress(){}drain(){return T(this,null,function*(){let e;do e=this.tail,yield e;while(e!==this.tail)})}containsDelayedOperation(e){for(let t of this.delayedOperations)if(t.timerId===e)return!0;return!1}runAllDelayedOperationsUntil(e){return this.drain().then(()=>{this.delayedOperations.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.delayedOperations)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.drain()})}skipDelaysForTimerId(e){this.timerIdsToSkip.push(e)}removeDelayedOperation(e){let t=this.delayedOperations.indexOf(e);this.delayedOperations.splice(t,1)}};function ble(n){let e=n.message||"";return n.stack&&(n.stack.includes(n.message)?e=n.stack:e=n.message+`
`+n.stack),e}var Ni=class extends rl{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new yy,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return T(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new yy(e),this._firestoreClient=void 0,yield e}})}};function vj(n,e){let t=typeof n=="object"?n:fo(),r=typeof n=="string"?n:e||YI,i=Wa(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=_P("firestore");s&&gj(i,...s)}return i}function Ly(n){if(n._terminated)throw new q(N.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||_le(n),n._firestoreClient}function _le(n){var e,t,r;let i=n._freezeSettings(),s=vle(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new d0(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&Sle(n._componentsProvider))}function Sle(n){let e=n?._online.build();return{_offline:n?._offline.build(e),_online:e}}function Cle(n,e=!0){lie(Ka),nr(new Jt("firestore",(t,{instanceIdentifier:r,options:i})=>{let s=t.getProvider("app").getImmediate(),o=new Ni(new $I(t.getProvider("auth-internal")),new GI(s,t.getProvider("app-check-internal")),Gie(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Xe(sU,oU,n),Xe(sU,oU,"esm2017")}var qd=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Gt.fromBase64String(e))}catch(t){throw new q(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var $d=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new q(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var vy=class{constructor(e){this._methodName=e}};var zd=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new q(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new q(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}};var Hd=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return Iae(this._values,e._values)}};var Ile=/^__.*__$/,f0=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ri(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bo(e,this.data,t,this.fieldTransforms)}};function Ej(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X()}}var h0=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.validatePath(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.contextWith({path:r,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.contextWith({path:r,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Ey(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(Ej(this.dataSource)&&Ile.test(e))throw this.createError('Document fields cannot begin and end with "__"')}},p0=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Oy(e)}createContext(e,t,r,i=!1){return new h0({dataSource:e,methodName:t,targetDoc:r,path:Dn.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function wj(n){let e=n._freezeSettings(),t=Oy(n._databaseId);return new p0(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Dle(n,e,t,r,i,s={}){let o=n.createContext(s.merge||s.mergeFields?2:0,e,t,i);_j("Data must be an object, but it was:",o,r);let a=Tj(r,o),c,l;if(s.merge)c=new Wr(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let u=[];for(let d of s.mergeFields){let h=kle(e,d,t);if(!o.contains(h))throw new q(N.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);Ple(u,h)||u.push(h)}c=new Wr(u),l=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,l=o.fieldTransforms;return new f0(new fr(a),c,l)}function Ale(n,e,t,r=!1){let i=n.createContext(r?4:3,e);return z0(t,i)}function z0(n,e){if(n=jt(n),bj(n))return _j("Unsupported field value:",e,n),Tj(n,e);if(n instanceof vy)return Nle(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return Rle(n,e)}else return Mle(n,e)}function Tj(n,e){let t={};return oV(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qo(n,(r,i)=>{let s=z0(i,e.childContextForField(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function Rle(n,e){let t=[],r=0;for(let i of n){let s=z0(i,e.childContextForArray(r));s==null&&(s={nullValue:"NULL_VALUE"}),t.push(s),r++}return{arrayValue:{values:t}}}function Nle(n,e){if(!Ej(e.dataSource))throw e.createError(`${n._methodName}() can only be used with update() and set()`);if(!e.path)throw e.createError(`${n._methodName}() is not currently supported inside arrays`);let t=n._toFieldTransform(e);t&&e.fieldTransforms.push(t)}function Mle(n,e){if(n=jt(n),n===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Hse(e.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){let t=kt.fromDate(n);return{timestampValue:ry(e.serializer,t)}}else if(n instanceof kt){let t=new kt(n.seconds,Math.floor(n.nanoseconds/1e3)*1e3);return{timestampValue:ry(e.serializer,t)}}else{if(n instanceof zd)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof qd)return{bytesValue:FV(e.serializer,n._byteString)};if(n instanceof nn){let t=e.databaseId,r=n.firestore._databaseId;if(!r.isEqual(t))throw e.createError(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${t.projectId}/${t.database}`);return{referenceValue:O0(n.firestore._databaseId||e.databaseId,n._key.path)}}else{if(n instanceof Hd)return Ole(n,e);throw e.createError(`Unsupported field value: ${Py(n)}`)}}}function Ole(n,e){return{mapValue:{fields:{[S0]:{stringValue:C0},[Wc]:{arrayValue:{values:n.toArray().map(r=>{if(typeof r!="number")throw e.createError("VectorValues must only contain numeric values.");return M0(e.serializer,r)})}}}}}}function bj(n){return typeof n=="object"&&n!==null&&!(n instanceof Array)&&!(n instanceof Date)&&!(n instanceof kt)&&!(n instanceof zd)&&!(n instanceof qd)&&!(n instanceof nn)&&!(n instanceof vy)&&!(n instanceof Hd)}function _j(n,e,t){if(!bj(t)||!ele(t)){let r=Py(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function kle(n,e,t){if(e=jt(e),e instanceof $d)return e._internalPath;if(typeof e=="string")return Sj(n,e);throw Ey("Field path arguments must be of type string or ",n,!1,void 0,t)}var xle=new RegExp("[~\\*/\\[\\]]");function Sj(n,e,t){if(e.search(xle)>=0)throw Ey(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new $d(...e.split("."))._internalPath}catch{throw Ey(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ey(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new q(N.INVALID_ARGUMENT,a+n+c)}function Ple(n,e){return n.some(t=>t.isEqual(e))}var wy=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new nn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document)if(this._converter){let e=new g0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}else return this._userDataWriter.convertValue(this._document.data.value);else return}get(e){if(this._document){let t=this._document.data.field(H0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},g0=class extends wy{data(){return super.data()}};function H0(n,e){return typeof e=="string"?Sj(n,e):e instanceof $d?e._internalPath:e._delegate._internalPath}function Cj(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new q(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Gd=class{},m0=class extends Gd{};function Lle(n,e,...t){let r=[];e instanceof Gd&&r.push(e),r=r.concat(t),qle(r);for(let i of r)n=i._apply(n);return n}var Ty=class n extends m0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return Ij(e._query,t),new Vo(e.firestore,e.converter,N0(e._query,t))}_parse(e){let t=wj(e.firestore);return Ble(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function Fle(n,e,t){let r=e,i=H0("where",n);return Ty._create(i,r,t)}var y0=class n extends Gd{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:yr.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(Vle(e._query,t),new Vo(e.firestore,e.converter,N0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function Ble(n,e,t,r,i,s,o){let a;if(i.isKeyField()){if(s==="array-contains"||s==="array-contains-any")throw new q(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if(s==="in"||s==="not-in"){$U(o,s);let l=[];for(let u of o)l.push(qU(r,n,u));a={arrayValue:{values:l}}}else a=qU(r,n,o)}else(s==="in"||s==="not-in"||s==="array-contains-any")&&$U(o,s),a=Ale(t,e,o,s==="in"||s==="not-in");return ft.create(i,s,a)}function qU(n,e,t){if(t=jt(t),typeof t=="string"){if(t==="")throw new q(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bV(e)&&t.indexOf("/")!==-1)throw new q(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Ye.fromString(t));if(!Z.isDocumentKey(r))throw new q(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return pU(n,new Z(r))}else{if(t instanceof nn)return pU(n,t._key);throw new q(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Py(t)}.`)}}function $U(n,e){if(!Array.isArray(n)||n.length===0)throw new q(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ule(n){switch(n){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}function Ij(n,e){let t=jle(n.filters,Ule(e.op));if(t!==null)throw t===e.op?new q(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Vle(n,e){let t=n,r=e.getFlattenedFilters();for(let i of r)Ij(t,i),t=N0(t,i)}function jle(n,e){for(let t of n)for(let r of t.getFlattenedFilters())if(e.indexOf(r.op)>=0)return r.op;return null}function qle(n){let e=n.filter(r=>r instanceof y0).length,t=n.filter(r=>r instanceof Ty).length;if(e>1||e>0&&t>0)throw new q(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}var v0=class{convertValue(e,t="none"){switch(xs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return We(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ii(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw X()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return qo(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Wc].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>We(o.doubleValue));return new Hd(s)}convertGeoPoint(e){return new zd(We(e.latitude),We(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Sy(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Nd(e));default:return null}}convertTimestamp(e){let t=Ci(e);return new kt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ye.fromString(e);Ne($V(r));let i=new Zm(r.get(1),r.get(3)),s=new Z(r.popFirst(5));return i.isEqual(t)||gr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function $le(n,e,t){let r;return n?t&&(t.merge||t.mergeFields)?r=n.toFirestore(e,t):r=n.toFirestore(e):r=e,r}function zU(n){return zle(n,["next","error","complete"])}function zle(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var jo=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},by=class extends wy{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document)if(this._converter){let t=new il(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}else return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps);else return}get(e,t={}){if(this._document){let r=this._document.data.field(H0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},il=class extends by{data(e={}){return super.data(e)}},_y=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new jo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new il(this._firestore,this._userDataWriter,r.key,r,new jo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new q(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return(!this._cachedChanges||this._cachedChangesIncludeMetadataChanges!==t)&&(this._cachedChanges=Hle(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function Hle(n,e){if(n._snapshot.oldDocs.isEmpty()){let t=0;return n._snapshot.docChanges.map(r=>{let i=new il(n._firestore,n._userDataWriter,r.doc.key,r.doc,new jo(n._snapshot.mutatedKeys.has(r.doc.key),n._snapshot.fromCache),n.query.converter);return r.doc,{type:"added",doc:i,oldIndex:-1,newIndex:t++}})}else{let t=n._snapshot.oldDocs;return n._snapshot.docChanges.filter(r=>e||r.type!==3).map(r=>{let i=new il(n._firestore,n._userDataWriter,r.doc.key,r.doc,new jo(n._snapshot.mutatedKeys.has(r.doc.key),n._snapshot.fromCache),n.query.converter),s=-1,o=-1;return r.type!==0&&(s=t.indexOf(r.doc.key),t=t.delete(r.doc.key)),r.type!==1&&(t=t.add(r.doc),o=t.indexOf(r.doc.key)),{type:Gle(r.type),doc:i,oldIndex:s,newIndex:o}})}}function Gle(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X()}}function Dj(n){n=pr(n,nn);let e=pr(n.firestore,Ni),t=Ly(e);return ule(t,n._key).then(r=>Mj(e,n,r))}var Wd=class extends v0{constructor(e){super(),this.firestore=e}convertBytes(e){return new qd(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new nn(this.firestore,null,t)}};function Wle(n){n=pr(n,Vo);let e=pr(n.firestore,Ni),t=Ly(e),r=new Wd(e);return Cj(n._query),dle(t,n._query).then(i=>new _y(e,r,n,i))}function Aj(n,e,t){n=pr(n,nn);let r=pr(n.firestore,Ni),i=$le(n.converter,e,t),s=wj(r),a=Dle(s,"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Os.none());return Nj(r,[a])}function Rj(n){let e=pr(n.firestore,Ni),t=[new Pd(n._key,Os.none())];return Nj(e,t)}function G0(n,...e){var t,r,i;n=jt(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]=="object"&&!zU(e[o])&&(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(zU(e[o])){let h=e[o];e[o]=(t=h.next)===null||t===void 0?void 0:t.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let c,l,u;if(n instanceof nn)l=pr(n.firestore,Ni),u=Dy(n._key.path),c={next:h=>{e[o]&&e[o](Mj(l,n,h))},error:e[o+1],complete:e[o+2]};else{let h=pr(n,Vo);l=pr(h.firestore,Ni),u=h._query;let f=new Wd(l);c={next:v=>{e[o]&&e[o](new _y(l,f,h,v))},error:e[o+1],complete:e[o+2]},Cj(n._query)}let d=Ly(l);return lle(d,u,a,c)}function Nj(n,e){let t=Ly(n);return fle(t,e)}function Mj(n,e,t){let r=t.docs.get(e._key),i=new Wd(n);return new by(n,i,e._key,r,new jo(t.hasPendingWrites,t.fromCache),e.converter)}Cle("node");var Fy=function(){return Fy=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Fy.apply(this,arguments)};var Yle={includeMetadataChanges:!1};function Oj(n,e){return e===void 0&&(e=Yle),new ue(function(t){var r=G0(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function kj(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:Fy(Fy({},r),(t={},t[e.idField]=n.id,t))}function xj(n){return Oj(n,{includeMetadataChanges:!0}).pipe(de(function(e){return e.docs}))}function Pj(n,e){return e===void 0&&(e={}),xj(n).pipe(de(function(t){return t.map(function(r){return kj(r,e)})}))}var Yd=class{constructor(e){return e}},Lj="firestore",W0=class{constructor(){return Ja(Lj)}};var K0=new U("angularfire2.firestore-instances");function Zle(n,e){let t=Bu(Lj,n,e);return t&&new Yd(t)}function Jle(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Yd(r)}}var Xle={provide:W0,deps:[[new Yt,K0]]},eue={provide:Yd,useFactory:Zle,deps:[[new Yt,K0],pi]};function _Ie(n,...e){return Xe("angularfire",ns.full,"fst"),cn([eue,Xle,{provide:K0,useFactory:Jle(n),multi:!0,deps:[Ce,$e,rs,vo,[new Yt,qu],[new Yt,Xa],...e]}])}var SIe=_n(Pj,!0);var CIe=_n(mj,!0,2);var IIe=_n(Rj,!0,2);var DIe=_n(yj,!0,2);var AIe=_n(Dj,!0);var RIe=_n(vj,!0);var NIe=_n(Aj,!0,2);export{Je as a,ue as b,rt as c,At as d,Pt as e,He as f,re as g,ta as h,qj as i,de as j,Tf as k,Qo as l,Cf as m,iq as n,sq as o,Lt as p,oq as q,Pi as r,aq as s,Yr as t,_A as u,js as v,SA as w,Xy as x,uq as y,dq as z,dl as A,mn as B,ev as C,fq as D,pt as E,B as F,QR as G,H,ql as I,U as J,J as K,R as L,Yt as M,sN as N,cn as O,Bt as P,Mt as Q,Oh as R,Vye as S,jye as T,qye as U,$ye as V,cw as W,$e as X,nR as Y,yn as Z,Ce as _,ri as $,oi as aa,iz as ba,fw as ca,zv as da,pM as ea,Vh as fa,gw as ga,ai as ha,zye as ia,mw as ja,Gl as ka,uR as la,Xn as ma,_z as na,TM as oa,xz as pa,Wi as qa,Hye as ra,Gye as sa,Wye as ta,Xs as ua,Zh as va,ma as wa,Jl as xa,wt as ya,l4 as za,li as Aa,eve as Ba,va as Ca,BO as Da,Xl as Ea,Qi as Fa,a6 as Ga,rve as Ha,y6 as Ia,Qw as Ja,WO as Ka,w6 as La,Ra as Ma,Sr as Na,tk as Oa,U6 as Pa,ak as Qa,V6 as Ra,ive as Sa,sve as Ta,ove as Ua,ave as Va,cve as Wa,lve as Xa,gk as Ya,mk as Za,Xw as _a,nG as $a,rG as ab,uve as bb,oG as cb,Ek as db,dve as eb,fve as fb,hve as gb,hG as hb,pve as ib,pG as jb,gG as kb,gve as lb,mve as mb,yve as nb,vve as ob,EG as pb,bk as qb,wG as rb,TG as sb,bG as tb,Eve as ub,_G as vb,wve as wb,Tve as xb,bve as yb,_ve as zb,Sve as Ab,Cve as Bb,Ive as Cb,Ik as Db,tT as Eb,Dve as Fb,iT as Gb,jG as Hb,Nk as Ib,Mk as Jb,Na as Kb,YG as Lb,Ave as Mb,$k as Nb,cW as Ob,Rve as Pb,Nve as Qb,Jh as Rb,Gk as Sb,Wk as Tb,Mve as Ub,Ove as Vb,kve as Wb,xve as Xb,Pve as Yb,Ma as Zb,tx as _b,Zt as $b,nx as ac,gW as bc,nu as cc,aEe as dc,cEe as ec,lEe as fc,uEe as gc,dEe as hc,fEe as ic,bW as jc,_W as kc,hEe as lc,SW as mc,hT as nc,Oa as oc,xW as pc,Sx as qc,REe as rc,_T as sc,ST as tc,ap as uc,Rx as vc,$Ee as wc,b9 as xc,zEe as yc,HEe as zc,qa as Ac,n8 as Bc,Y8 as Cc,vP as Dc,gwe as Ec,ebe as Fc,tbe as Gc,f7 as Hc,m1 as Ic,y1 as Jc,v1 as Kc,s_ as Lc,E1 as Mc,ju as Nc,kbe as Oc,xbe as Pc,kt as Qc,mj as Rc,yj as Sc,vj as Tc,Lle as Uc,Fle as Vc,Wle as Wc,Aj as Xc,Yd as Yc,_Ie as Zc,SIe as _c,CIe as $c,IIe as ad,DIe as bd,AIe as cd,RIe as dd,NIe as ed};
